var Sa=Object.defineProperty;var es=A=>{throw TypeError(A)};var wa=(A,x,vt)=>x in A?Sa(A,x,{enumerable:!0,configurable:!0,writable:!0,value:vt}):A[x]=vt;var yn=(A,x,vt)=>wa(A,typeof x!="symbol"?x+"":x,vt),nr=(A,x,vt)=>x.has(A)||es("Cannot "+vt);var y=(A,x,vt)=>(nr(A,x,"read from private field"),vt?vt.call(A):x.get(A)),Wt=(A,x,vt)=>x.has(A)?es("Cannot add the same private member more than once"):x instanceof WeakSet?x.add(A):x.set(A,vt),Vt=(A,x,vt,R)=>(nr(A,x,"write to private field"),R?R.call(A,vt):x.set(A,vt),vt),Pt=(A,x,vt)=>(nr(A,x,"access private method"),vt);var pi=(A,x,vt,R)=>({set _(W){Vt(A,x,W,vt)},get _(){return y(A,x,R)}});import{j as jsxRuntimeExports,_ as _extends,a as reactExports,b as _objectWithoutPropertiesLoose,v as capitalize,V as lighten_1,L as alpha_1,U as darken_1}from"./index-Di_EECYp.js";import{c as commonjsRequire,r as require$$0}from"./___vite-browser-external_commonjs-proxy-D45grg_z.js";import{M as Meta}from"./Meta-DW7EI6uA.js";import{e as email,c as giphy404}from"./index-BdYws9GV.js";import{c as createSvgIcon,g as generateUtilityClasses,b as generateUtilityClass,s as styled,e as useDefaultProps,f as clsx,h as composeClasses,J as Dialog,K as DialogTitle,I as IconButton,E as Tooltip,N as Close,O as DialogContent,T as Typography,D as CircularProgress}from"./App-BxzvoGHx.js";import"./index.esm-j0Jn8Jip.js";const Download=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),Email=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),Visibility=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");function getDialogActionsUtilityClass(A){return generateUtilityClass("MuiDialogActions",A)}generateUtilityClasses("MuiDialogActions",["root","spacing"]);const _excluded$6=["className","disableSpacing"],useUtilityClasses$6=A=>{const{classes:x,disableSpacing:vt}=A;return composeClasses({root:["root",!vt&&"spacing"]},getDialogActionsUtilityClass,x)},DialogActionsRoot=styled("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(A,x)=>{const{ownerState:vt}=A;return[x.root,!vt.disableSpacing&&x.spacing]}})(({ownerState:A})=>_extends({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!A.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),DialogActions=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiDialogActions"}),{className:W,disableSpacing:_=!1}=R,bt=_objectWithoutPropertiesLoose(R,_excluded$6),zt=_extends({},R,{disableSpacing:_}),pt=useUtilityClasses$6(zt);return jsxRuntimeExports.jsx(DialogActionsRoot,_extends({className:clsx(pt.root,W),ownerState:zt,ref:vt},bt))}),TableContext=reactExports.createContext();function getTableUtilityClass(A){return generateUtilityClass("MuiTable",A)}generateUtilityClasses("MuiTable",["root","stickyHeader"]);const _excluded$5=["className","component","padding","size","stickyHeader"],useUtilityClasses$5=A=>{const{classes:x,stickyHeader:vt}=A;return composeClasses({root:["root",vt&&"stickyHeader"]},getTableUtilityClass,x)},TableRoot=styled("table",{name:"MuiTable",slot:"Root",overridesResolver:(A,x)=>{const{ownerState:vt}=A;return[x.root,vt.stickyHeader&&x.stickyHeader]}})(({theme:A,ownerState:x})=>_extends({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":_extends({},A.typography.body2,{padding:A.spacing(2),color:(A.vars||A).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},x.stickyHeader&&{borderCollapse:"separate"})),defaultComponent$3="table",Table=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiTable"}),{className:W,component:_=defaultComponent$3,padding:bt="normal",size:zt="medium",stickyHeader:pt=!1}=R,nt=_objectWithoutPropertiesLoose(R,_excluded$5),O=_extends({},R,{component:_,padding:bt,size:zt,stickyHeader:pt}),ft=useUtilityClasses$5(O),lt=reactExports.useMemo(()=>({padding:bt,size:zt,stickyHeader:pt}),[bt,zt,pt]);return jsxRuntimeExports.jsx(TableContext.Provider,{value:lt,children:jsxRuntimeExports.jsx(TableRoot,_extends({as:_,role:_===defaultComponent$3?null:"table",ref:vt,className:clsx(ft.root,W),ownerState:O},nt))})}),Tablelvl2Context=reactExports.createContext();function getTableBodyUtilityClass(A){return generateUtilityClass("MuiTableBody",A)}generateUtilityClasses("MuiTableBody",["root"]);const _excluded$4=["className","component"],useUtilityClasses$4=A=>{const{classes:x}=A;return composeClasses({root:["root"]},getTableBodyUtilityClass,x)},TableBodyRoot=styled("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(A,x)=>x.root})({display:"table-row-group"}),tablelvl2$1={variant:"body"},defaultComponent$2="tbody",TableBody=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiTableBody"}),{className:W,component:_=defaultComponent$2}=R,bt=_objectWithoutPropertiesLoose(R,_excluded$4),zt=_extends({},R,{component:_}),pt=useUtilityClasses$4(zt);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2$1,children:jsxRuntimeExports.jsx(TableBodyRoot,_extends({className:clsx(pt.root,W),as:_,ref:vt,role:_===defaultComponent$2?null:"rowgroup",ownerState:zt},bt))})});function getTableCellUtilityClass(A){return generateUtilityClass("MuiTableCell",A)}const tableCellClasses=generateUtilityClasses("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),_excluded$3=["align","className","component","padding","scope","size","sortDirection","variant"],useUtilityClasses$3=A=>{const{classes:x,variant:vt,align:R,padding:W,size:_,stickyHeader:bt}=A,zt={root:["root",vt,bt&&"stickyHeader",R!=="inherit"&&`align${capitalize(R)}`,W!=="normal"&&`padding${capitalize(W)}`,`size${capitalize(_)}`]};return composeClasses(zt,getTableCellUtilityClass,x)},TableCellRoot=styled("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(A,x)=>{const{ownerState:vt}=A;return[x.root,x[vt.variant],x[`size${capitalize(vt.size)}`],vt.padding!=="normal"&&x[`padding${capitalize(vt.padding)}`],vt.align!=="inherit"&&x[`align${capitalize(vt.align)}`],vt.stickyHeader&&x.stickyHeader]}})(({theme:A,ownerState:x})=>_extends({},A.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:A.vars?`1px solid ${A.vars.palette.TableCell.border}`:`1px solid
    ${A.palette.mode==="light"?lighten_1(alpha_1(A.palette.divider,1),.88):darken_1(alpha_1(A.palette.divider,1),.68)}`,textAlign:"left",padding:16},x.variant==="head"&&{color:(A.vars||A).palette.text.primary,lineHeight:A.typography.pxToRem(24),fontWeight:A.typography.fontWeightMedium},x.variant==="body"&&{color:(A.vars||A).palette.text.primary},x.variant==="footer"&&{color:(A.vars||A).palette.text.secondary,lineHeight:A.typography.pxToRem(21),fontSize:A.typography.pxToRem(12)},x.size==="small"&&{padding:"6px 16px",[`&.${tableCellClasses.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},x.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},x.padding==="none"&&{padding:0},x.align==="left"&&{textAlign:"left"},x.align==="center"&&{textAlign:"center"},x.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},x.align==="justify"&&{textAlign:"justify"},x.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(A.vars||A).palette.background.default})),TableCell=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiTableCell"}),{align:W="inherit",className:_,component:bt,padding:zt,scope:pt,size:nt,sortDirection:O,variant:ft}=R,lt=_objectWithoutPropertiesLoose(R,_excluded$3),q=reactExports.useContext(TableContext),V=reactExports.useContext(Tablelvl2Context),et=V&&V.variant==="head";let G;bt?G=bt:G=et?"th":"td";let U=pt;G==="td"?U=void 0:!U&&et&&(U="col");const Y=ft||V&&V.variant,dt=_extends({},R,{align:W,component:G,padding:zt||(q&&q.padding?q.padding:"normal"),size:nt||(q&&q.size?q.size:"medium"),sortDirection:O,stickyHeader:Y==="head"&&q&&q.stickyHeader,variant:Y}),J=useUtilityClasses$3(dt);let F=null;return O&&(F=O==="asc"?"ascending":"descending"),jsxRuntimeExports.jsx(TableCellRoot,_extends({as:G,ref:vt,className:clsx(J.root,_),"aria-sort":F,scope:U,ownerState:dt},lt))});function getTableContainerUtilityClass(A){return generateUtilityClass("MuiTableContainer",A)}generateUtilityClasses("MuiTableContainer",["root"]);const _excluded$2=["className","component"],useUtilityClasses$2=A=>{const{classes:x}=A;return composeClasses({root:["root"]},getTableContainerUtilityClass,x)},TableContainerRoot=styled("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(A,x)=>x.root})({width:"100%",overflowX:"auto"}),TableContainer=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiTableContainer"}),{className:W,component:_="div"}=R,bt=_objectWithoutPropertiesLoose(R,_excluded$2),zt=_extends({},R,{component:_}),pt=useUtilityClasses$2(zt);return jsxRuntimeExports.jsx(TableContainerRoot,_extends({ref:vt,as:_,className:clsx(pt.root,W),ownerState:zt},bt))});function getTableHeadUtilityClass(A){return generateUtilityClass("MuiTableHead",A)}generateUtilityClasses("MuiTableHead",["root"]);const _excluded$1=["className","component"],useUtilityClasses$1=A=>{const{classes:x}=A;return composeClasses({root:["root"]},getTableHeadUtilityClass,x)},TableHeadRoot=styled("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(A,x)=>x.root})({display:"table-header-group"}),tablelvl2={variant:"head"},defaultComponent$1="thead",TableHead=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiTableHead"}),{className:W,component:_=defaultComponent$1}=R,bt=_objectWithoutPropertiesLoose(R,_excluded$1),zt=_extends({},R,{component:_}),pt=useUtilityClasses$1(zt);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2,children:jsxRuntimeExports.jsx(TableHeadRoot,_extends({as:_,className:clsx(pt.root,W),ref:vt,role:_===defaultComponent$1?null:"rowgroup",ownerState:zt},bt))})});function getTableRowUtilityClass(A){return generateUtilityClass("MuiTableRow",A)}const tableRowClasses=generateUtilityClasses("MuiTableRow",["root","selected","hover","head","footer"]),_excluded=["className","component","hover","selected"],useUtilityClasses=A=>{const{classes:x,selected:vt,hover:R,head:W,footer:_}=A;return composeClasses({root:["root",vt&&"selected",R&&"hover",W&&"head",_&&"footer"]},getTableRowUtilityClass,x)},TableRowRoot=styled("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(A,x)=>{const{ownerState:vt}=A;return[x.root,vt.head&&x.head,vt.footer&&x.footer]}})(({theme:A})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${tableRowClasses.hover}:hover`]:{backgroundColor:(A.vars||A).palette.action.hover},[`&.${tableRowClasses.selected}`]:{backgroundColor:A.vars?`rgba(${A.vars.palette.primary.mainChannel} / ${A.vars.palette.action.selectedOpacity})`:alpha_1(A.palette.primary.main,A.palette.action.selectedOpacity),"&:hover":{backgroundColor:A.vars?`rgba(${A.vars.palette.primary.mainChannel} / calc(${A.vars.palette.action.selectedOpacity} + ${A.vars.palette.action.hoverOpacity}))`:alpha_1(A.palette.primary.main,A.palette.action.selectedOpacity+A.palette.action.hoverOpacity)}}})),defaultComponent="tr",TableRow=reactExports.forwardRef(function(x,vt){const R=useDefaultProps({props:x,name:"MuiTableRow"}),{className:W,component:_=defaultComponent,hover:bt=!1,selected:zt=!1}=R,pt=_objectWithoutPropertiesLoose(R,_excluded),nt=reactExports.useContext(Tablelvl2Context),O=_extends({},R,{component:_,hover:bt,selected:zt,head:nt&&nt.variant==="head",footer:nt&&nt.variant==="footer"}),ft=useUtilityClasses(O);return jsxRuntimeExports.jsx(TableRowRoot,_extends({as:_,ref:vt,className:clsx(ft.root,W),role:_===defaultComponent?null:"row",ownerState:O},pt))});var pdf={exports:{}};(function(module,exports){(function(x,vt){module.exports=x.pdfjsLib=vt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(A,x)=>{var ln;Object.defineProperty(x,"__esModule",{value:!0}),x.VerbosityLevel=x.Util=x.UnknownErrorException=x.UnexpectedResponseException=x.TextRenderingMode=x.RenderingIntentFlag=x.PromiseCapability=x.PermissionFlag=x.PasswordResponses=x.PasswordException=x.PageActionEventType=x.OPS=x.MissingPDFException=x.MAX_IMAGE_SIZE_TO_CACHE=x.LINE_FACTOR=x.LINE_DESCENT_FACTOR=x.InvalidPDFException=x.ImageKind=x.IDENTITY_MATRIX=x.FormatError=x.FeatureTest=x.FONT_IDENTITY_MATRIX=x.DocumentActionEventType=x.CMapCompressionType=x.BaseException=x.BASELINE_FACTOR=x.AnnotationType=x.AnnotationReplyType=x.AnnotationPrefix=x.AnnotationMode=x.AnnotationFlag=x.AnnotationFieldFlag=x.AnnotationEditorType=x.AnnotationEditorPrefix=x.AnnotationEditorParamsType=x.AnnotationBorderStyleType=x.AnnotationActionEventType=x.AbortException=void 0,x.assert=rt,x.bytesToString=Kt,x.createValidAbsoluteUrl=Ot,x.getModificationDate=de,x.getUuid=ke,x.getVerbosityLevel=wt,x.info=Mt,x.isArrayBuffer=Rt,x.isArrayEqual=ge,x.isNodeJS=void 0,x.normalizeUnicode=Ae,x.objectFromMap=se,x.objectSize=re,x.setVerbosityLevel=Gt,x.shadow=tt,x.string32=te,x.stringToBytes=Zt,x.stringToPDFString=Jt,x.stringToUTF8String=ae,x.unreachable=qt,x.utf8StringToString=ne,x.warn=At;const vt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");x.isNodeJS=vt;const R=[1,0,0,1,0,0];x.IDENTITY_MATRIX=R;const W=[.001,0,0,.001,0,0];x.FONT_IDENTITY_MATRIX=W;const _=1e7;x.MAX_IMAGE_SIZE_TO_CACHE=_;const bt=1.35;x.LINE_FACTOR=bt;const zt=.35;x.LINE_DESCENT_FACTOR=zt;const pt=zt/bt;x.BASELINE_FACTOR=pt;const nt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};x.RenderingIntentFlag=nt;const O={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};x.AnnotationMode=O;const ft="pdfjs_internal_editor_";x.AnnotationEditorPrefix=ft;const lt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};x.AnnotationEditorType=lt;const q={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};x.AnnotationEditorParamsType=q;const V={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};x.PermissionFlag=V;const et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};x.TextRenderingMode=et;const G={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};x.ImageKind=G;const U={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};x.AnnotationType=U;const Y={GROUP:"Group",REPLY:"R"};x.AnnotationReplyType=Y;const dt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};x.AnnotationFlag=dt;const J={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};x.AnnotationFieldFlag=J;const F={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};x.AnnotationBorderStyleType=F;const B={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};x.AnnotationActionEventType=B;const L={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};x.DocumentActionEventType=L;const N={O:"PageOpen",C:"PageClose"};x.PageActionEventType=N;const j={ERRORS:0,WARNINGS:1,INFOS:5};x.VerbosityLevel=j;const ht={NONE:0,BINARY:1};x.CMapCompressionType=ht;const D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};x.OPS=D;const K={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};x.PasswordResponses=K;let ct=j.WARNINGS;function Gt(ee){Number.isInteger(ee)&&(ct=ee)}function wt(){return ct}function Mt(ee){ct>=j.INFOS&&console.log(`Info: ${ee}`)}function At(ee){ct>=j.WARNINGS&&console.log(`Warning: ${ee}`)}function qt(ee){throw new Error(ee)}function rt(ee,Ft){ee||qt(Ft)}function Et(ee){switch(ee==null?void 0:ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ot(ee,Ft=null,Dt=null){if(!ee)return null;try{if(Dt&&typeof ee=="string"){if(Dt.addDefaultProtocol&&ee.startsWith("www.")){const we=ee.match(/\./g);(we==null?void 0:we.length)>=2&&(ee=`http://${ee}`)}if(Dt.tryConvertEncoding)try{ee=ae(ee)}catch{}}const ye=Ft?new URL(ee,Ft):new URL(ee);if(Et(ye))return ye}catch{}return null}function tt(ee,Ft,Dt,ye=!1){return Object.defineProperty(ee,Ft,{value:Dt,enumerable:!ye,configurable:!0,writable:!1}),Dt}const T=function(){function Ft(Dt,ye){this.constructor===Ft&&qt("Cannot initialize BaseException."),this.message=Dt,this.name=ye}return Ft.prototype=new Error,Ft.constructor=Ft,Ft}();x.BaseException=T;class P extends T{constructor(Ft,Dt){super(Ft,"PasswordException"),this.code=Dt}}x.PasswordException=P;class $ extends T{constructor(Ft,Dt){super(Ft,"UnknownErrorException"),this.details=Dt}}x.UnknownErrorException=$;class at extends T{constructor(Ft){super(Ft,"InvalidPDFException")}}x.InvalidPDFException=at;class ot extends T{constructor(Ft){super(Ft,"MissingPDFException")}}x.MissingPDFException=ot;class st extends T{constructor(Ft,Dt){super(Ft,"UnexpectedResponseException"),this.status=Dt}}x.UnexpectedResponseException=st;class xt extends T{constructor(Ft){super(Ft,"FormatError")}}x.FormatError=xt;class $t extends T{constructor(Ft){super(Ft,"AbortException")}}x.AbortException=$t;function Kt(ee){(typeof ee!="object"||(ee==null?void 0:ee.length)===void 0)&&qt("Invalid argument for bytesToString");const Ft=ee.length,Dt=8192;if(Ft<Dt)return String.fromCharCode.apply(null,ee);const ye=[];for(let we=0;we<Ft;we+=Dt){const De=Math.min(we+Dt,Ft),gt=ee.subarray(we,De);ye.push(String.fromCharCode.apply(null,gt))}return ye.join("")}function Zt(ee){typeof ee!="string"&&qt("Invalid argument for stringToBytes");const Ft=ee.length,Dt=new Uint8Array(Ft);for(let ye=0;ye<Ft;++ye)Dt[ye]=ee.charCodeAt(ye)&255;return Dt}function te(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,ee&255)}function re(ee){return Object.keys(ee).length}function se(ee){const Ft=Object.create(null);for(const[Dt,ye]of ee)Ft[Dt]=ye;return Ft}function Nt(){const ee=new Uint8Array(4);return ee[0]=1,new Uint32Array(ee.buffer,0,1)[0]===1}function Bt(){try{return new Function(""),!0}catch{return!1}}class X{static get isLittleEndian(){return tt(this,"isLittleEndian",Nt())}static get isEvalSupported(){return tt(this,"isEvalSupported",Bt())}static get isOffscreenCanvasSupported(){return tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?tt(this,"platform",{isWin:!1,isMac:!1}):tt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Ft,Dt;return tt(this,"isCSSRoundSupported",(Dt=(Ft=globalThis.CSS)==null?void 0:Ft.supports)==null?void 0:Dt.call(Ft,"width: round(1.5px, 1px)"))}}x.FeatureTest=X;const ut=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class kt{static makeHexColor(Ft,Dt,ye){return`#${ut[Ft]}${ut[Dt]}${ut[ye]}`}static scaleMinMax(Ft,Dt){let ye;Ft[0]?(Ft[0]<0&&(ye=Dt[0],Dt[0]=Dt[1],Dt[1]=ye),Dt[0]*=Ft[0],Dt[1]*=Ft[0],Ft[3]<0&&(ye=Dt[2],Dt[2]=Dt[3],Dt[3]=ye),Dt[2]*=Ft[3],Dt[3]*=Ft[3]):(ye=Dt[0],Dt[0]=Dt[2],Dt[2]=ye,ye=Dt[1],Dt[1]=Dt[3],Dt[3]=ye,Ft[1]<0&&(ye=Dt[2],Dt[2]=Dt[3],Dt[3]=ye),Dt[2]*=Ft[1],Dt[3]*=Ft[1],Ft[2]<0&&(ye=Dt[0],Dt[0]=Dt[1],Dt[1]=ye),Dt[0]*=Ft[2],Dt[1]*=Ft[2]),Dt[0]+=Ft[4],Dt[1]+=Ft[4],Dt[2]+=Ft[5],Dt[3]+=Ft[5]}static transform(Ft,Dt){return[Ft[0]*Dt[0]+Ft[2]*Dt[1],Ft[1]*Dt[0]+Ft[3]*Dt[1],Ft[0]*Dt[2]+Ft[2]*Dt[3],Ft[1]*Dt[2]+Ft[3]*Dt[3],Ft[0]*Dt[4]+Ft[2]*Dt[5]+Ft[4],Ft[1]*Dt[4]+Ft[3]*Dt[5]+Ft[5]]}static applyTransform(Ft,Dt){const ye=Ft[0]*Dt[0]+Ft[1]*Dt[2]+Dt[4],we=Ft[0]*Dt[1]+Ft[1]*Dt[3]+Dt[5];return[ye,we]}static applyInverseTransform(Ft,Dt){const ye=Dt[0]*Dt[3]-Dt[1]*Dt[2],we=(Ft[0]*Dt[3]-Ft[1]*Dt[2]+Dt[2]*Dt[5]-Dt[4]*Dt[3])/ye,De=(-Ft[0]*Dt[1]+Ft[1]*Dt[0]+Dt[4]*Dt[1]-Dt[5]*Dt[0])/ye;return[we,De]}static getAxialAlignedBoundingBox(Ft,Dt){const ye=this.applyTransform(Ft,Dt),we=this.applyTransform(Ft.slice(2,4),Dt),De=this.applyTransform([Ft[0],Ft[3]],Dt),gt=this.applyTransform([Ft[2],Ft[1]],Dt);return[Math.min(ye[0],we[0],De[0],gt[0]),Math.min(ye[1],we[1],De[1],gt[1]),Math.max(ye[0],we[0],De[0],gt[0]),Math.max(ye[1],we[1],De[1],gt[1])]}static inverseTransform(Ft){const Dt=Ft[0]*Ft[3]-Ft[1]*Ft[2];return[Ft[3]/Dt,-Ft[1]/Dt,-Ft[2]/Dt,Ft[0]/Dt,(Ft[2]*Ft[5]-Ft[4]*Ft[3])/Dt,(Ft[4]*Ft[1]-Ft[5]*Ft[0])/Dt]}static singularValueDecompose2dScale(Ft){const Dt=[Ft[0],Ft[2],Ft[1],Ft[3]],ye=Ft[0]*Dt[0]+Ft[1]*Dt[2],we=Ft[0]*Dt[1]+Ft[1]*Dt[3],De=Ft[2]*Dt[0]+Ft[3]*Dt[2],gt=Ft[2]*Dt[1]+Ft[3]*Dt[3],Qt=(ye+gt)/2,pe=Math.sqrt((ye+gt)**2-4*(ye*gt-De*we))/2,Ce=Qt+pe||1,Pe=Qt-pe||1;return[Math.sqrt(Ce),Math.sqrt(Pe)]}static normalizeRect(Ft){const Dt=Ft.slice(0);return Ft[0]>Ft[2]&&(Dt[0]=Ft[2],Dt[2]=Ft[0]),Ft[1]>Ft[3]&&(Dt[1]=Ft[3],Dt[3]=Ft[1]),Dt}static intersect(Ft,Dt){const ye=Math.max(Math.min(Ft[0],Ft[2]),Math.min(Dt[0],Dt[2])),we=Math.min(Math.max(Ft[0],Ft[2]),Math.max(Dt[0],Dt[2]));if(ye>we)return null;const De=Math.max(Math.min(Ft[1],Ft[3]),Math.min(Dt[1],Dt[3])),gt=Math.min(Math.max(Ft[1],Ft[3]),Math.max(Dt[1],Dt[3]));return De>gt?null:[ye,De,we,gt]}static bezierBoundingBox(Ft,Dt,ye,we,De,gt,Qt,pe){const Ce=[],Pe=[[],[]];let _e,it,Q,Ct,Xt,Yt,ie,ue;for(let $e=0;$e<2;++$e){if($e===0?(it=6*Ft-12*ye+6*De,_e=-3*Ft+9*ye-9*De+3*Qt,Q=3*ye-3*Ft):(it=6*Dt-12*we+6*gt,_e=-3*Dt+9*we-9*gt+3*pe,Q=3*we-3*Dt),Math.abs(_e)<1e-12){if(Math.abs(it)<1e-12)continue;Ct=-Q/it,0<Ct&&Ct<1&&Ce.push(Ct);continue}ie=it*it-4*Q*_e,ue=Math.sqrt(ie),!(ie<0)&&(Xt=(-it+ue)/(2*_e),0<Xt&&Xt<1&&Ce.push(Xt),Yt=(-it-ue)/(2*_e),0<Yt&&Yt<1&&Ce.push(Yt))}let Te=Ce.length,Ee;const be=Te;for(;Te--;)Ct=Ce[Te],Ee=1-Ct,Pe[0][Te]=Ee*Ee*Ee*Ft+3*Ee*Ee*Ct*ye+3*Ee*Ct*Ct*De+Ct*Ct*Ct*Qt,Pe[1][Te]=Ee*Ee*Ee*Dt+3*Ee*Ee*Ct*we+3*Ee*Ct*Ct*gt+Ct*Ct*Ct*pe;return Pe[0][be]=Ft,Pe[1][be]=Dt,Pe[0][be+1]=Qt,Pe[1][be+1]=pe,Pe[0].length=Pe[1].length=be+2,[Math.min(...Pe[0]),Math.min(...Pe[1]),Math.max(...Pe[0]),Math.max(...Pe[1])]}}x.Util=kt;const Ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Jt(ee){if(ee[0]>="ï"){let Dt;if(ee[0]==="þ"&&ee[1]==="ÿ"?Dt="utf-16be":ee[0]==="ÿ"&&ee[1]==="þ"?Dt="utf-16le":ee[0]==="ï"&&ee[1]==="»"&&ee[2]==="¿"&&(Dt="utf-8"),Dt)try{const ye=new TextDecoder(Dt,{fatal:!0}),we=Zt(ee);return ye.decode(we)}catch(ye){At(`stringToPDFString: "${ye}".`)}}const Ft=[];for(let Dt=0,ye=ee.length;Dt<ye;Dt++){const we=Ht[ee.charCodeAt(Dt)];Ft.push(we?String.fromCharCode(we):ee.charAt(Dt))}return Ft.join("")}function ae(ee){return decodeURIComponent(escape(ee))}function ne(ee){return unescape(encodeURIComponent(ee))}function Rt(ee){return typeof ee=="object"&&(ee==null?void 0:ee.byteLength)!==void 0}function ge(ee,Ft){if(ee.length!==Ft.length)return!1;for(let Dt=0,ye=ee.length;Dt<ye;Dt++)if(ee[Dt]!==Ft[Dt])return!1;return!0}function de(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class ze{constructor(){Wt(this,ln,!1);this.promise=new Promise((Ft,Dt)=>{this.resolve=ye=>{Vt(this,ln,!0),Ft(ye)},this.reject=ye=>{Vt(this,ln,!0),Dt(ye)}})}get settled(){return y(this,ln)}}ln=new WeakMap,x.PromiseCapability=ze;let Ie=null,Qe=null;function Ae(ee){return Ie||(Ie=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Qe=new Map([["ﬅ","ſt"]])),ee.replaceAll(Ie,(Ft,Dt,ye)=>Dt?Dt.normalize("NFKC"):Qe.get(ye))}function ke(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ee);else for(let Ft=0;Ft<32;Ft++)ee[Ft]=Math.floor(Math.random()*255);return Kt(ee)}const qe="pdfjs_internal_id_";x.AnnotationPrefix=qe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var A,vt,R,W,oi,ki,zt,pt,nt,O,ft,lt,q,V,et,Mi,U,Y,ir,J,F;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(L){if(typeof L=="string"||L instanceof URL?L={url:L}:(0,_util.isArrayBuffer)(L)&&(L={data:L}),typeof L!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!L.url&&!L.data&&!L.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const N=new PDFDocumentLoadingTask,{docId:j}=N,ht=L.url?getUrlProp(L.url):null,D=L.data?getDataProp(L.data):null,K=L.httpHeaders||null,ct=L.withCredentials===!0,Gt=L.password??null,wt=L.range instanceof PDFDataRangeTransport?L.range:null,Mt=Number.isInteger(L.rangeChunkSize)&&L.rangeChunkSize>0?L.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let At=L.worker instanceof PDFWorker?L.worker:null;const qt=L.verbosity,rt=typeof L.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(L.docBaseUrl)?L.docBaseUrl:null,Et=typeof L.cMapUrl=="string"?L.cMapUrl:null,Ot=L.cMapPacked!==!1,tt=L.CMapReaderFactory||DefaultCMapReaderFactory,T=typeof L.standardFontDataUrl=="string"?L.standardFontDataUrl:null,P=L.StandardFontDataFactory||DefaultStandardFontDataFactory,$=L.stopAtErrors!==!0,at=Number.isInteger(L.maxImageSize)&&L.maxImageSize>-1?L.maxImageSize:-1,ot=L.isEvalSupported!==!1,st=typeof L.isOffscreenCanvasSupported=="boolean"?L.isOffscreenCanvasSupported:!_util.isNodeJS,xt=Number.isInteger(L.canvasMaxAreaInBytes)?L.canvasMaxAreaInBytes:-1,$t=typeof L.disableFontFace=="boolean"?L.disableFontFace:_util.isNodeJS,Kt=L.fontExtraProperties===!0,Zt=L.enableXfa===!0,te=L.ownerDocument||globalThis.document,re=L.disableRange===!0,se=L.disableStream===!0,Nt=L.disableAutoFetch===!0,Bt=L.pdfBug===!0,X=wt?wt.length:L.length??NaN,ut=typeof L.useSystemFonts=="boolean"?L.useSystemFonts:!_util.isNodeJS&&!$t,kt=typeof L.useWorkerFetch=="boolean"?L.useWorkerFetch:tt===_display_utils.DOMCMapReaderFactory&&P===_display_utils.DOMStandardFontDataFactory&&Et&&T&&(0,_display_utils.isValidFetchUrl)(Et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(T,document.baseURI),Ht=L.canvasFactory||new DefaultCanvasFactory({ownerDocument:te}),Jt=L.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:te}),ae=null;(0,_util.setVerbosityLevel)(qt);const ne={canvasFactory:Ht,filterFactory:Jt};if(kt||(ne.cMapReaderFactory=new tt({baseUrl:Et,isCompressed:Ot}),ne.standardFontDataFactory=new P({baseUrl:T})),!At){const de={verbosity:qt,port:_worker_options.GlobalWorkerOptions.workerPort};At=de.port?PDFWorker.fromPort(de):new PDFWorker(de),N._worker=At}const Rt={docId:j,apiVersion:"3.11.174",data:D,password:Gt,disableAutoFetch:Nt,rangeChunkSize:Mt,length:X,docBaseUrl:rt,enableXfa:Zt,evaluatorOptions:{maxImageSize:at,disableFontFace:$t,ignoreErrors:$,isEvalSupported:ot,isOffscreenCanvasSupported:st,canvasMaxAreaInBytes:xt,fontExtraProperties:Kt,useSystemFonts:ut,cMapUrl:kt?Et:null,standardFontDataUrl:kt?T:null}},ge={ignoreErrors:$,isEvalSupported:ot,disableFontFace:$t,fontExtraProperties:Kt,enableXfa:Zt,ownerDocument:te,disableAutoFetch:Nt,pdfBug:Bt,styleElement:ae};return At.promise.then(function(){if(N.destroyed)throw new Error("Loading aborted");const de=_fetchDocument(At,Rt),ze=new Promise(function(Ie){let Qe;wt?Qe=new _transport_stream.PDFDataTransportStream({length:X,initialData:wt.initialData,progressiveDone:wt.progressiveDone,contentDispositionFilename:wt.contentDispositionFilename,disableRange:re,disableStream:se},wt):D||(Qe=(ke=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ke):(0,_display_utils.isValidFetchUrl)(ke.url)?new _displayFetch_stream.PDFFetchStream(ke):new _displayNetwork.PDFNetworkStream(ke))({url:ht,length:X,httpHeaders:K,withCredentials:ct,rangeChunkSize:Mt,disableRange:re,disableStream:se})),Ie(Qe)});return Promise.all([de,ze]).then(function([Ie,Qe]){if(N.destroyed)throw new Error("Loading aborted");const Ae=new _message_handler.MessageHandler(j,Ie,At.port),ke=new WorkerTransport(Ae,N,Qe,ge,ne);N._transport=ke,Ae.send("Ready",null)})}).catch(N._capability.reject),N}async function _fetchDocument(L,N){if(L.destroyed)throw new Error("Worker was destroyed");const j=await L.messageHandler.sendWithPromise("GetDocRequest",N,N.data?[N.data.buffer]:null);if(L.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(L){if(L instanceof URL)return L.href;try{return new URL(L,window.location).href}catch{if(_util.isNodeJS&&typeof L=="string")return L}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(L){if(_util.isNodeJS&&typeof Buffer<"u"&&L instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(L instanceof Uint8Array&&L.byteLength===L.buffer.byteLength)return L;if(typeof L=="string")return(0,_util.stringToBytes)(L);if(typeof L=="object"&&!isNaN(L==null?void 0:L.length)||(0,_util.isArrayBuffer)(L))return new Uint8Array(L);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const x=class x{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${pi(x,A)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var N,j,ht;this.destroyed=!0;try{(N=this._worker)!=null&&N.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch(D){throw(ht=this._worker)!=null&&ht.port&&delete this._worker._pendingDestroy,D}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};A=new WeakMap,Wt(x,A,0);let PDFDocumentLoadingTask=x;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(N,j,ht=!1,D=null){this.length=N,this.initialData=j,this.progressiveDone=ht,this.contentDispositionFilename=D,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(N){this._rangeListeners.push(N)}addProgressListener(N){this._progressListeners.push(N)}addProgressiveReadListener(N){this._progressiveReadListeners.push(N)}addProgressiveDoneListener(N){this._progressiveDoneListeners.push(N)}onDataRange(N,j){for(const ht of this._rangeListeners)ht(N,j)}onDataProgress(N,j){this._readyCapability.promise.then(()=>{for(const ht of this._progressListeners)ht(N,j)})}onDataProgressiveRead(N){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(N)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const N of this._progressiveDoneListeners)N()})}transportReady(){this._readyCapability.resolve()}requestDataRange(N,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(N,j){this._pdfInfo=N,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(ht=>{if(!ht)return ht;const D=[];for(const K in ht)D.push(...ht[K]);return D}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(N){return this._transport.getPage(N)}getPageIndex(N){return this._transport.getPageIndex(N)}getDestinations(){return this._transport.getDestinations()}getDestination(N){return this._transport.getDestination(N)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(N=!1){return this._transport.startCleanup(N||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(N,j,ht,D=!1){Wt(this,W);Wt(this,vt,null);Wt(this,R,!1);this._pageIndex=N,this._pageInfo=j,this._transport=ht,this._stats=D?new _display_utils.StatTimer:null,this._pdfBug=D,this.commonObjs=ht.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:N,rotation:j=this.rotate,offsetX:ht=0,offsetY:D=0,dontFlip:K=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:N,rotation:j,offsetX:ht,offsetY:D,dontFlip:K})}getAnnotations({intent:N="display"}={}){const j=this._transport.getRenderingIntent(N);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var N;return((N=this._transport._htmlForXfa)==null?void 0:N.children[this._pageIndex])||null}render({canvasContext:N,viewport:j,intent:ht="display",annotationMode:D=_util.AnnotationMode.ENABLE,transform:K=null,background:ct=null,optionalContentConfigPromise:Gt=null,annotationCanvasMap:wt=null,pageColors:Mt=null,printAnnotationStorage:At=null}){var P,$;(P=this._stats)==null||P.time("Overall");const qt=this._transport.getRenderingIntent(ht,D,At);Vt(this,R,!1),Pt(this,W,ki).call(this),Gt||(Gt=this._transport.getOptionalContentConfig());let rt=this._intentStates.get(qt.cacheKey);rt||(rt=Object.create(null),this._intentStates.set(qt.cacheKey,rt)),rt.streamReaderCancelTimeout&&(clearTimeout(rt.streamReaderCancelTimeout),rt.streamReaderCancelTimeout=null);const Et=!!(qt.renderingIntent&_util.RenderingIntentFlag.PRINT);rt.displayReadyCapability||(rt.displayReadyCapability=new _util.PromiseCapability,rt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},($=this._stats)==null||$.time("Page Request"),this._pumpOperatorList(qt));const Ot=at=>{var ot,st;rt.renderTasks.delete(tt),(this._maybeCleanupAfterRender||Et)&&Vt(this,R,!0),Pt(this,W,oi).call(this,!Et),at?(tt.capability.reject(at),this._abortOperatorList({intentState:rt,reason:at instanceof Error?at:new Error(at)})):tt.capability.resolve(),(ot=this._stats)==null||ot.timeEnd("Rendering"),(st=this._stats)==null||st.timeEnd("Overall")},tt=new InternalRenderTask({callback:Ot,params:{canvasContext:N,viewport:j,transform:K,background:ct},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:wt,operatorList:rt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Et,pdfBug:this._pdfBug,pageColors:Mt});(rt.renderTasks||(rt.renderTasks=new Set)).add(tt);const T=tt.task;return Promise.all([rt.displayReadyCapability.promise,Gt]).then(([at,ot])=>{var st;if(this.destroyed){Ot();return}(st=this._stats)==null||st.time("Rendering"),tt.initializeGraphics({transparency:at,optionalContentConfig:ot}),tt.operatorListChanged()}).catch(Ot),T}getOperatorList({intent:N="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:ht=null}={}){var wt;function D(){ct.operatorList.lastChunk&&(ct.opListReadCapability.resolve(ct.operatorList),ct.renderTasks.delete(Gt))}const K=this._transport.getRenderingIntent(N,j,ht,!0);let ct=this._intentStates.get(K.cacheKey);ct||(ct=Object.create(null),this._intentStates.set(K.cacheKey,ct));let Gt;return ct.opListReadCapability||(Gt=Object.create(null),Gt.operatorListChanged=D,ct.opListReadCapability=new _util.PromiseCapability,(ct.renderTasks||(ct.renderTasks=new Set)).add(Gt),ct.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(wt=this._stats)==null||wt.time("Page Request"),this._pumpOperatorList(K)),ct.opListReadCapability.promise}streamTextContent({includeMarkedContent:N=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:N===!0,disableNormalization:j===!0},{highWaterMark:100,size(D){return D.items.length}})}getTextContent(N={}){if(this._transport._htmlForXfa)return this.getXfa().then(ht=>_xfa_text.XfaText.textContent(ht));const j=this.streamTextContent(N);return new Promise(function(ht,D){function K(){ct.read().then(function({value:wt,done:Mt}){if(Mt){ht(Gt);return}Object.assign(Gt.styles,wt.styles),Gt.items.push(...wt.items),K()},D)}const ct=j.getReader(),Gt={items:[],styles:Object.create(null)};K()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const N=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const ht of j.renderTasks)N.push(ht.completed),ht.cancel();return this.objs.clear(),Vt(this,R,!1),Pt(this,W,ki).call(this),Promise.all(N)}cleanup(N=!1){Vt(this,R,!0);const j=Pt(this,W,oi).call(this,!1);return N&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(N,j){var D,K;const ht=this._intentStates.get(j);ht&&((D=this._stats)==null||D.timeEnd("Page Request"),(K=ht.displayReadyCapability)==null||K.resolve(N))}_renderPageChunk(N,j){for(let ht=0,D=N.length;ht<D;ht++)j.operatorList.fnArray.push(N.fnArray[ht]),j.operatorList.argsArray.push(N.argsArray[ht]);j.operatorList.lastChunk=N.lastChunk,j.operatorList.separateAnnots=N.separateAnnots;for(const ht of j.renderTasks)ht.operatorListChanged();N.lastChunk&&Pt(this,W,oi).call(this,!0)}_pumpOperatorList({renderingIntent:N,cacheKey:j,annotationStorageSerializable:ht}){const{map:D,transfers:K}=ht,Gt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:N,cacheKey:j,annotationStorage:D},K).getReader(),wt=this._intentStates.get(j);wt.streamReader=Gt;const Mt=()=>{Gt.read().then(({value:At,done:qt})=>{if(qt){wt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(At,wt),Mt())},At=>{if(wt.streamReader=null,!this._transport.destroyed){if(wt.operatorList){wt.operatorList.lastChunk=!0;for(const qt of wt.renderTasks)qt.operatorListChanged();Pt(this,W,oi).call(this,!0)}if(wt.displayReadyCapability)wt.displayReadyCapability.reject(At);else if(wt.opListReadCapability)wt.opListReadCapability.reject(At);else throw At}})};Mt()}_abortOperatorList({intentState:N,reason:j,force:ht=!1}){if(N.streamReader){if(N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null),!ht){if(N.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let D=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&(D+=j.extraDelay),N.streamReaderCancelTimeout=setTimeout(()=>{N.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:N,reason:j,force:!0})},D);return}}if(N.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),N.streamReader=null,!this._transport.destroyed){for(const[D,K]of this._intentStates)if(K===N){this._intentStates.delete(D);break}this.cleanup()}}}get stats(){return this._stats}}vt=new WeakMap,R=new WeakMap,W=new WeakSet,oi=function(N=!1){if(Pt(this,W,ki).call(this),!y(this,R)||this.destroyed)return!1;if(N)return Vt(this,vt,setTimeout(()=>{Vt(this,vt,null),Pt(this,W,oi).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:ht}of this._intentStates.values())if(j.size>0||!ht.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Vt(this,R,!1),!0},ki=function(){y(this,vt)&&(clearTimeout(y(this,vt)),Vt(this,vt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Wt(this,zt,new Set);Wt(this,pt,Promise.resolve())}postMessage(N,j){const ht={data:structuredClone(N,j?{transfer:j}:null)};y(this,pt).then(()=>{for(const D of y(this,zt))D.call(this,ht)})}addEventListener(N,j){y(this,zt).add(j)}removeEventListener(N,j){y(this,zt).delete(j)}terminate(){y(this,zt).clear()}}zt=new WeakMap,pt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const L=(nt=document==null?void 0:document.currentScript)==null?void 0:nt.src;L&&(PDFWorkerUtil.fallbackWorkerSrc=L.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(L,N){let j;try{if(j=new URL(L),!j.origin||j.origin==="null")return!1}catch{return!1}const ht=new URL(N,j);return j.origin===ht.origin},PDFWorkerUtil.createCDNWrapper=function(L){const N=`importScripts("${L}");`;return URL.createObjectURL(new Blob([N]))}}const _PDFWorker=class _PDFWorker{constructor({name:L=null,port:N=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var ht;if(this.name=L,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,N){if((ht=y(_PDFWorker,O))!=null&&ht.has(N))throw new Error("Cannot use more than one PDFWorker per port.");(y(_PDFWorker,O)||Vt(_PDFWorker,O,new WeakMap)).set(N,this),this._initializeFromPort(N);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(L){this._port=L,this._messageHandler=new _message_handler.MessageHandler("main","worker",L),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:L}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,L)||(L=PDFWorkerUtil.createCDNWrapper(new URL(L,window.location).href));const N=new Worker(L),j=new _message_handler.MessageHandler("main","worker",N),ht=()=>{N.removeEventListener("error",D),j.destroy(),N.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},D=()=>{this._webWorker||ht()};N.addEventListener("error",D),j.on("test",ct=>{if(N.removeEventListener("error",D),this.destroyed){ht();return}ct?(this._messageHandler=j,this._port=N,this._webWorker=N,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),N.terminate())}),j.on("ready",ct=>{if(N.removeEventListener("error",D),this.destroyed){ht();return}try{K()}catch{this._setupFakeWorker()}});const K=()=>{const ct=new Uint8Array;j.send("test",ct,[ct.buffer])};K();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(L=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const N=new LoopbackPort;this._port=N;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,ht=new _message_handler.MessageHandler(j+"_worker",j,N);L.setup(ht,N);const D=new _message_handler.MessageHandler(j,j+"_worker",N);this._messageHandler=D,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})}).catch(L=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${L.message}".`))})}destroy(){var L;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(L=y(_PDFWorker,O))==null||L.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(L){var j;if(!(L!=null&&L.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const N=(j=y(this,O))==null?void 0:j.get(L.port);if(N){if(N._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return N}return new _PDFWorker(L)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var L;try{return((L=globalThis.pdfjsWorker)==null?void 0:L.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};O=new WeakMap,Wt(_PDFWorker,O);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(N,j,ht,D,K){Wt(this,et);Wt(this,ft,new Map);Wt(this,lt,new Map);Wt(this,q,new Map);Wt(this,V,null);this.messageHandler=N,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:D.ownerDocument,styleElement:D.styleElement}),this._params=D,this.canvasFactory=K.canvasFactory,this.filterFactory=K.filterFactory,this.cMapReaderFactory=K.cMapReaderFactory,this.standardFontDataFactory=K.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ht,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(N,j=_util.AnnotationMode.ENABLE,ht=null,D=!1){let K=_util.RenderingIntentFlag.DISPLAY,ct=_annotation_storage.SerializableEmpty;switch(N){case"any":K=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":K=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${N}`)}switch(j){case _util.AnnotationMode.DISABLE:K+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:K+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:K+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,ct=(K&_util.RenderingIntentFlag.PRINT&&ht instanceof _annotation_storage.PrintAnnotationStorage?ht:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return D&&(K+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:K,cacheKey:`${K}_${ct.hash}`,annotationStorageSerializable:ct}}destroy(){var ht;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(ht=y(this,V))==null||ht.reject(new Error("Worker was destroyed during onPassword callback"));const N=[];for(const D of y(this,lt).values())N.push(D._destroy());y(this,lt).clear(),y(this,q).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return N.push(j),Promise.all(N).then(()=>{var D;this.commonObjs.clear(),this.fontLoader.clear(),y(this,ft).clear(),this.filterFactory.destroy(),(D=this._networkStream)==null||D.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:N,loadingTask:j}=this;N.on("GetReader",(ht,D)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=K=>{this._lastProgress={loaded:K.loaded,total:K.total}},D.onPull=()=>{this._fullReader.read().then(function({value:K,done:ct}){if(ct){D.close();return}(0,_util.assert)(K instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),D.enqueue(new Uint8Array(K),1,[K])}).catch(K=>{D.error(K)})},D.onCancel=K=>{this._fullReader.cancel(K),D.ready.catch(ct=>{if(!this.destroyed)throw ct})}}),N.on("ReaderHeadersReady",ht=>{const D=new _util.PromiseCapability,K=this._fullReader;return K.headersReady.then(()=>{var ct;(!K.isStreamingSupported||!K.isRangeSupported)&&(this._lastProgress&&((ct=j.onProgress)==null||ct.call(j,this._lastProgress)),K.onProgress=Gt=>{var wt;(wt=j.onProgress)==null||wt.call(j,{loaded:Gt.loaded,total:Gt.total})}),D.resolve({isStreamingSupported:K.isStreamingSupported,isRangeSupported:K.isRangeSupported,contentLength:K.contentLength})},D.reject),D.promise}),N.on("GetRangeReader",(ht,D)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const K=this._networkStream.getRangeReader(ht.begin,ht.end);if(!K){D.close();return}D.onPull=()=>{K.read().then(function({value:ct,done:Gt}){if(Gt){D.close();return}(0,_util.assert)(ct instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),D.enqueue(new Uint8Array(ct),1,[ct])}).catch(ct=>{D.error(ct)})},D.onCancel=ct=>{K.cancel(ct),D.ready.catch(Gt=>{if(!this.destroyed)throw Gt})}}),N.on("GetDoc",({pdfInfo:ht})=>{this._numPages=ht.numPages,this._htmlForXfa=ht.htmlForXfa,delete ht.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(ht,this))}),N.on("DocException",function(ht){let D;switch(ht.name){case"PasswordException":D=new _util.PasswordException(ht.message,ht.code);break;case"InvalidPDFException":D=new _util.InvalidPDFException(ht.message);break;case"MissingPDFException":D=new _util.MissingPDFException(ht.message);break;case"UnexpectedResponseException":D=new _util.UnexpectedResponseException(ht.message,ht.status);break;case"UnknownErrorException":D=new _util.UnknownErrorException(ht.message,ht.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject(D)}),N.on("PasswordRequest",ht=>{if(Vt(this,V,new _util.PromiseCapability),j.onPassword){const D=K=>{K instanceof Error?y(this,V).reject(K):y(this,V).resolve({password:K})};try{j.onPassword(D,ht.code)}catch(K){y(this,V).reject(K)}}else y(this,V).reject(new _util.PasswordException(ht.message,ht.code));return y(this,V).promise}),N.on("DataLoaded",ht=>{var D;(D=j.onProgress)==null||D.call(j,{loaded:ht.length,total:ht.length}),this.downloadInfoCapability.resolve(ht)}),N.on("StartRenderPage",ht=>{if(this.destroyed)return;y(this,lt).get(ht.pageIndex)._startRenderPage(ht.transparency,ht.cacheKey)}),N.on("commonobj",([ht,D,K])=>{var ct;if(!this.destroyed&&!this.commonObjs.has(ht))switch(D){case"Font":const Gt=this._params;if("error"in K){const At=K.error;(0,_util.warn)(`Error during font loading: ${At}`),this.commonObjs.resolve(ht,At);break}const wt=Gt.pdfBug&&((ct=globalThis.FontInspector)!=null&&ct.enabled)?(At,qt)=>globalThis.FontInspector.fontAdded(At,qt):null,Mt=new _font_loader.FontFaceObject(K,{isEvalSupported:Gt.isEvalSupported,disableFontFace:Gt.disableFontFace,ignoreErrors:Gt.ignoreErrors,inspectFont:wt});this.fontLoader.bind(Mt).catch(At=>N.sendWithPromise("FontFallback",{id:ht})).finally(()=>{!Gt.fontExtraProperties&&Mt.data&&(Mt.data=null),this.commonObjs.resolve(ht,Mt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ht,K);break;default:throw new Error(`Got unknown common object type ${D}`)}}),N.on("obj",([ht,D,K,ct])=>{var wt;if(this.destroyed)return;const Gt=y(this,lt).get(D);if(!Gt.objs.has(ht))switch(K){case"Image":if(Gt.objs.resolve(ht,ct),ct){let Mt;if(ct.bitmap){const{width:At,height:qt}=ct;Mt=At*qt*4}else Mt=((wt=ct.data)==null?void 0:wt.length)||0;Mt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Gt._maybeCleanupAfterRender=!0)}break;case"Pattern":Gt.objs.resolve(ht,ct);break;default:throw new Error(`Got unknown object type ${K}`)}}),N.on("DocProgress",ht=>{var D;this.destroyed||(D=j.onProgress)==null||D.call(j,{loaded:ht.loaded,total:ht.total})}),N.on("FetchBuiltInCMap",ht=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(ht):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),N.on("FetchStandardFontData",ht=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(ht):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ht;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:N,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:N,filename:((ht=this._fullReader)==null?void 0:ht.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(N){if(!Number.isInteger(N)||N<=0||N>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=N-1,ht=y(this,q).get(j);if(ht)return ht;const D=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(K=>{if(this.destroyed)throw new Error("Transport destroyed");const ct=new PDFPageProxy(j,K,this,this._params.pdfBug);return y(this,lt).set(j,ct),ct});return y(this,q).set(j,D),D}getPageIndex(N){return typeof N!="object"||N===null||!Number.isInteger(N.num)||N.num<0||!Number.isInteger(N.gen)||N.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:N.num,gen:N.gen})}getAnnotations(N,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:N,intent:j})}getFieldObjects(){return Pt(this,et,Mi).call(this,"GetFieldObjects")}hasJSActions(){return Pt(this,et,Mi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(N){return typeof N!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:N})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Pt(this,et,Mi).call(this,"GetDocJSActions")}getPageJSActions(N){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:N})}getStructTree(N){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:N})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(N=>new _optional_content_config.OptionalContentConfig(N))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const N="GetMetadata",j=y(this,ft).get(N);if(j)return j;const ht=this.messageHandler.sendWithPromise(N,null).then(D=>{var K,ct;return{info:D[0],metadata:D[1]?new _metadata.Metadata(D[1]):null,contentDispositionFilename:((K=this._fullReader)==null?void 0:K.filename)??null,contentLength:((ct=this._fullReader)==null?void 0:ct.contentLength)??null}});return y(this,ft).set(N,ht),ht}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(N=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of y(this,lt).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),N||this.fontLoader.clear(),y(this,ft).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:N,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:N,enableXfa:j})}}ft=new WeakMap,lt=new WeakMap,q=new WeakMap,V=new WeakMap,et=new WeakSet,Mi=function(N,j=null){const ht=y(this,ft).get(N);if(ht)return ht;const D=this.messageHandler.sendWithPromise(N,j);return y(this,ft).set(N,D),D};class PDFObjects{constructor(){Wt(this,Y);Wt(this,U,Object.create(null))}get(N,j=null){if(j){const D=Pt(this,Y,ir).call(this,N);return D.capability.promise.then(()=>j(D.data)),null}const ht=y(this,U)[N];if(!(ht!=null&&ht.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${N}.`);return ht.data}has(N){const j=y(this,U)[N];return(j==null?void 0:j.capability.settled)||!1}resolve(N,j=null){const ht=Pt(this,Y,ir).call(this,N);ht.data=j,ht.capability.resolve()}clear(){var N;for(const j in y(this,U)){const{data:ht}=y(this,U)[j];(N=ht==null?void 0:ht.bitmap)==null||N.close()}Vt(this,U,Object.create(null))}}U=new WeakMap,Y=new WeakSet,ir=function(N){var j;return(j=y(this,U))[N]||(j[N]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(N){Wt(this,J,null);Vt(this,J,N),this.onContinue=null}get promise(){return y(this,J).capability.promise}cancel(N=0){y(this,J).cancel(null,N)}get separateAnnots(){const{separateAnnots:N}=y(this,J).operatorList;if(!N)return!1;const{annotationCanvasMap:j}=y(this,J);return N.form||N.canvas&&(j==null?void 0:j.size)>0}}J=new WeakMap,exports.RenderTask=RenderTask;const B=class B{constructor({callback:N,params:j,objs:ht,commonObjs:D,annotationCanvasMap:K,operatorList:ct,pageIndex:Gt,canvasFactory:wt,filterFactory:Mt,useRequestAnimationFrame:At=!1,pdfBug:qt=!1,pageColors:rt=null}){this.callback=N,this.params=j,this.objs=ht,this.commonObjs=D,this.annotationCanvasMap=K,this.operatorListIdx=null,this.operatorList=ct,this._pageIndex=Gt,this.canvasFactory=wt,this.filterFactory=Mt,this._pdfBug=qt,this.pageColors=rt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=At===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:N=!1,optionalContentConfig:j}){var Gt,wt;if(this.cancelled)return;if(this._canvas){if(y(B,F).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");y(B,F).add(this._canvas)}this._pdfBug&&((Gt=globalThis.StepperManager)!=null&&Gt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:ht,viewport:D,transform:K,background:ct}=this.params;this.gfx=new _canvas.CanvasGraphics(ht,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:K,viewport:D,transparency:N,background:ct}),this.operatorListIdx=0,this.graphicsReady=!0,(wt=this.graphicsReadyCallback)==null||wt.call(this)}cancel(N=null,j=0){var ht;this.running=!1,this.cancelled=!0,(ht=this.gfx)==null||ht.endDrawing(),y(B,F).delete(this._canvas),this.callback(N||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var N;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(N=this.stepper)==null||N.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),y(B,F).delete(this._canvas),this.callback())))}};F=new WeakMap,Wt(B,F,new WeakSet);let InternalRenderTask=B;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(A,x,vt)=>{var nt,O,ft,ns,q;Object.defineProperty(x,"__esModule",{value:!0}),x.SerializableEmpty=x.PrintAnnotationStorage=x.AnnotationStorage=void 0;var R=vt(1),W=vt(4),_=vt(8);const bt=Object.freeze({map:null,hash:"",transfers:void 0});x.SerializableEmpty=bt;class zt{constructor(){Wt(this,ft);Wt(this,nt,!1);Wt(this,O,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(et,G){const U=y(this,O).get(et);return U===void 0?G:Object.assign(G,U)}getRawValue(et){return y(this,O).get(et)}remove(et){if(y(this,O).delete(et),y(this,O).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const G of y(this,O).values())if(G instanceof W.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(et,G){const U=y(this,O).get(et);let Y=!1;if(U!==void 0)for(const[dt,J]of Object.entries(G))U[dt]!==J&&(Y=!0,U[dt]=J);else Y=!0,y(this,O).set(et,G);Y&&Pt(this,ft,ns).call(this),G instanceof W.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(G.constructor._type)}has(et){return y(this,O).has(et)}getAll(){return y(this,O).size>0?(0,R.objectFromMap)(y(this,O)):null}setAll(et){for(const[G,U]of Object.entries(et))this.setValue(G,U)}get size(){return y(this,O).size}resetModified(){y(this,nt)&&(Vt(this,nt,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pt(this)}get serializable(){if(y(this,O).size===0)return bt;const et=new Map,G=new _.MurmurHash3_64,U=[],Y=Object.create(null);let dt=!1;for(const[J,F]of y(this,O)){const B=F instanceof W.AnnotationEditor?F.serialize(!1,Y):F;B&&(et.set(J,B),G.update(`${J}:${JSON.stringify(B)}`),dt||(dt=!!B.bitmap))}if(dt)for(const J of et.values())J.bitmap&&U.push(J.bitmap);return et.size>0?{map:et,hash:G.hexdigest(),transfers:U}:bt}}nt=new WeakMap,O=new WeakMap,ft=new WeakSet,ns=function(){y(this,nt)||(Vt(this,nt,!0),typeof this.onSetModified=="function"&&this.onSetModified())},x.AnnotationStorage=zt;class pt extends zt{constructor(G){super();Wt(this,q);const{map:U,hash:Y,transfers:dt}=G.serializable,J=structuredClone(U,dt?{transfer:dt}:null);Vt(this,q,{map:J,hash:Y,transfers:dt})}get print(){(0,R.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return y(this,q)}}q=new WeakMap,x.PrintAnnotationStorage=pt},(A,x,vt)=>{var pt,nt,O,ft,lt,q,V,et,G,U,Y,dt,J,F,B,rr,sr,j,ar,or,is,rs,ss,lr,as;Object.defineProperty(x,"__esModule",{value:!0}),x.AnnotationEditor=void 0;var R=vt(5),W=vt(1),_=vt(6);const At=class At{constructor(rt){Wt(this,B);Wt(this,pt,"");Wt(this,nt,!1);Wt(this,O,null);Wt(this,ft,null);Wt(this,lt,null);Wt(this,q,!1);Wt(this,V,null);Wt(this,et,this.focusin.bind(this));Wt(this,G,this.focusout.bind(this));Wt(this,U,!1);Wt(this,Y,!1);Wt(this,dt,!1);yn(this,"_initialOptions",Object.create(null));yn(this,"_uiManager",null);yn(this,"_focusEventsAllowed",!0);yn(this,"_l10nPromise",null);Wt(this,J,!1);Wt(this,F,At._zIndex++);this.constructor===At&&(0,W.unreachable)("Cannot initialize AnnotationEditor."),this.parent=rt.parent,this.id=rt.id,this.width=this.height=null,this.pageIndex=rt.parent.pageIndex,this.name=rt.name,this.div=null,this._uiManager=rt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=rt.isCentered,this._structTreeParentId=null;const{rotation:Et,rawDims:{pageWidth:Ot,pageHeight:tt,pageX:T,pageY:P}}=this.parent.viewport;this.rotation=Et,this.pageRotation=(360+Et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Ot,tt],this.pageTranslation=[T,P];const[$,at]=this.parentDimensions;this.x=rt.x/$,this.y=rt.y/at,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,W.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(rt){const Et=new zt({id:rt.parent.getNextId(),parent:rt.parent,uiManager:rt._uiManager});Et.annotationElementId=rt.annotationElementId,Et.deleted=!0,Et._uiManager.addToAnnotationStorage(Et)}static initialize(rt,Et=null){if(At._l10nPromise||(At._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(tt=>[tt,rt.get(tt)]))),Et!=null&&Et.strings)for(const tt of Et.strings)At._l10nPromise.set(tt,rt.get(tt));if(At._borderLineWidth!==-1)return;const Ot=getComputedStyle(document.documentElement);At._borderLineWidth=parseFloat(Ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(rt,Et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(rt){return!1}static paste(rt,Et){(0,W.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return y(this,J)}set _isDraggable(rt){var Et;Vt(this,J,rt),(Et=this.div)==null||Et.classList.toggle("draggable",rt)}center(){const[rt,Et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Et/(rt*2),this.y+=this.width*rt/(Et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Et/(rt*2),this.y-=this.width*rt/(Et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(rt){this._uiManager.addCommands(rt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=y(this,F)}setParent(rt){rt!==null&&(this.pageIndex=rt.pageIndex,this.pageDimensions=rt.pageDimensions),this.parent=rt}focusin(rt){this._focusEventsAllowed&&(y(this,U)?Vt(this,U,!1):this.parent.setSelected(this))}focusout(rt){var Ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Et=rt.relatedTarget;Et!=null&&Et.closest(`#${this.id}`)||(rt.preventDefault(),(Ot=this.parent)!=null&&Ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(rt,Et,Ot,tt){const[T,P]=this.parentDimensions;[Ot,tt]=this.screenToPageTranslation(Ot,tt),this.x=(rt+Ot)/T,this.y=(Et+tt)/P,this.fixAndSetPosition()}translate(rt,Et){Pt(this,B,rr).call(this,this.parentDimensions,rt,Et)}translateInPage(rt,Et){Pt(this,B,rr).call(this,this.pageDimensions,rt,Et),this.div.scrollIntoView({block:"nearest"})}drag(rt,Et){const[Ot,tt]=this.parentDimensions;if(this.x+=rt/Ot,this.y+=Et/tt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:st}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,st)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:T,y:P}=this;const[$,at]=Pt(this,B,sr).call(this);T+=$,P+=at,this.div.style.left=`${(100*T).toFixed(2)}%`,this.div.style.top=`${(100*P).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[rt,Et]=this.pageDimensions;let{x:Ot,y:tt,width:T,height:P}=this;switch(T*=rt,P*=Et,Ot*=rt,tt*=Et,this.rotation){case 0:Ot=Math.max(0,Math.min(rt-T,Ot)),tt=Math.max(0,Math.min(Et-P,tt));break;case 90:Ot=Math.max(0,Math.min(rt-P,Ot)),tt=Math.min(Et,Math.max(T,tt));break;case 180:Ot=Math.min(rt,Math.max(T,Ot)),tt=Math.min(Et,Math.max(P,tt));break;case 270:Ot=Math.min(rt,Math.max(P,Ot)),tt=Math.max(0,Math.min(Et-T,tt));break}this.x=Ot/=rt,this.y=tt/=Et;const[$,at]=Pt(this,B,sr).call(this);Ot+=$,tt+=at;const{style:ot}=this.div;ot.left=`${(100*Ot).toFixed(2)}%`,ot.top=`${(100*tt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(rt,Et){var Ot;return Pt(Ot=At,j,ar).call(Ot,rt,Et,this.parentRotation)}pageTranslationToScreen(rt,Et){var Ot;return Pt(Ot=At,j,ar).call(Ot,rt,Et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:rt,pageDimensions:[Et,Ot]}=this,tt=Et*rt,T=Ot*rt;return W.FeatureTest.isCSSRoundSupported?[Math.round(tt),Math.round(T)]:[tt,T]}setDims(rt,Et){var T;const[Ot,tt]=this.parentDimensions;this.div.style.width=`${(100*rt/Ot).toFixed(2)}%`,y(this,q)||(this.div.style.height=`${(100*Et/tt).toFixed(2)}%`),(T=y(this,O))==null||T.classList.toggle("small",rt<At.SMALL_EDITOR_SIZE||Et<At.SMALL_EDITOR_SIZE)}fixDims(){const{style:rt}=this.div,{height:Et,width:Ot}=rt,tt=Ot.endsWith("%"),T=!y(this,q)&&Et.endsWith("%");if(tt&&T)return;const[P,$]=this.parentDimensions;tt||(rt.width=`${(100*parseFloat(Ot)/P).toFixed(2)}%`),!y(this,q)&&!T&&(rt.height=`${(100*parseFloat(Et)/$).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(y(this,O))return;const rt=Vt(this,O,document.createElement("button"));rt.className="altText";const Et=await At._l10nPromise.get("editor_alt_text_button_label");rt.textContent=Et,rt.setAttribute("aria-label",Et),rt.tabIndex="0",rt.addEventListener("contextmenu",_.noContextMenu),rt.addEventListener("pointerdown",Ot=>Ot.stopPropagation()),rt.addEventListener("click",Ot=>{Ot.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),rt.addEventListener("keydown",Ot=>{Ot.target===rt&&Ot.key==="Enter"&&(Ot.preventDefault(),this._uiManager.editAltText(this))}),Pt(this,B,lr).call(this),this.div.append(rt),At.SMALL_EDITOR_SIZE||(At.SMALL_EDITOR_SIZE=Math.min(128,Math.round(rt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:y(this,pt),decorative:y(this,nt)}}set altTextData({altText:rt,decorative:Et}){y(this,pt)===rt&&y(this,nt)===Et||(Vt(this,pt,rt),Vt(this,nt,Et),Pt(this,B,lr).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",y(this,et)),this.div.addEventListener("focusout",y(this,G));const[rt,Et]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Et/rt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*rt/Et).toFixed(2)}%`);const[Ot,tt]=this.getInitialTranslation();return this.translate(Ot,tt),(0,R.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(rt){const{isMac:Et}=W.FeatureTest.platform;if(rt.button!==0||rt.ctrlKey&&Et){rt.preventDefault();return}Vt(this,U,!0),Pt(this,B,as).call(this,rt)}moveInDOM(){var rt;(rt=this.parent)==null||rt.moveEditorInDOM(this)}_setParentAndPosition(rt,Et,Ot){rt.changeParent(this),this.x=Et,this.y=Ot,this.fixAndSetPosition()}getRect(rt,Et){const Ot=this.parentScale,[tt,T]=this.pageDimensions,[P,$]=this.pageTranslation,at=rt/Ot,ot=Et/Ot,st=this.x*tt,xt=this.y*T,$t=this.width*tt,Kt=this.height*T;switch(this.rotation){case 0:return[st+at+P,T-xt-ot-Kt+$,st+at+$t+P,T-xt-ot+$];case 90:return[st+ot+P,T-xt+at+$,st+ot+Kt+P,T-xt+at+$t+$];case 180:return[st-at-$t+P,T-xt+ot+$,st-at+P,T-xt+ot+Kt+$];case 270:return[st-ot-Kt+P,T-xt-at-$t+$,st-ot+P,T-xt-at+$];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(rt,Et){const[Ot,tt,T,P]=rt,$=T-Ot,at=P-tt;switch(this.rotation){case 0:return[Ot,Et-P,$,at];case 90:return[Ot,Et-tt,at,$];case 180:return[T,Et-tt,$,at];case 270:return[T,Et-P,at,$];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Vt(this,dt,!0)}disableEditMode(){Vt(this,dt,!1)}isInEditMode(){return y(this,dt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var rt,Et;(rt=this.div)==null||rt.addEventListener("focusin",y(this,et)),(Et=this.div)==null||Et.addEventListener("focusout",y(this,G))}serialize(rt=!1,Et=null){(0,W.unreachable)("An editor must be serializable")}static deserialize(rt,Et,Ot){const tt=new this.prototype.constructor({parent:Et,id:Et.getNextId(),uiManager:Ot});tt.rotation=rt.rotation;const[T,P]=tt.pageDimensions,[$,at,ot,st]=tt.getRectInCurrentCoords(rt.rect,P);return tt.x=$/T,tt.y=at/P,tt.width=ot/T,tt.height=st/P,tt}remove(){var rt;this.div.removeEventListener("focusin",y(this,et)),this.div.removeEventListener("focusout",y(this,G)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(rt=y(this,O))==null||rt.remove(),Vt(this,O,null),Vt(this,ft,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Pt(this,B,is).call(this),y(this,V).classList.remove("hidden"))}select(){var rt;this.makeResizable(),(rt=this.div)==null||rt.classList.add("selectedEditor")}unselect(){var rt,Et,Ot;(rt=y(this,V))==null||rt.classList.add("hidden"),(Et=this.div)==null||Et.classList.remove("selectedEditor"),(Ot=this.div)!=null&&Ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(rt,Et){}disableEditing(){y(this,O)&&(y(this,O).hidden=!0)}enableEditing(){y(this,O)&&(y(this,O).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return y(this,Y)}set isEditing(rt){Vt(this,Y,rt),this.parent&&(rt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(rt,Et){Vt(this,q,!0);const Ot=rt/Et,{style:tt}=this.div;tt.aspectRatio=Ot,tt.height="auto"}static get MIN_SIZE(){return 16}};pt=new WeakMap,nt=new WeakMap,O=new WeakMap,ft=new WeakMap,lt=new WeakMap,q=new WeakMap,V=new WeakMap,et=new WeakMap,G=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,J=new WeakMap,F=new WeakMap,B=new WeakSet,rr=function([rt,Et],Ot,tt){[Ot,tt]=this.screenToPageTranslation(Ot,tt),this.x+=Ot/rt,this.y+=tt/Et,this.fixAndSetPosition()},sr=function(){const[rt,Et]=this.parentDimensions,{_borderLineWidth:Ot}=At,tt=Ot/rt,T=Ot/Et;switch(this.rotation){case 90:return[-tt,T];case 180:return[tt,T];case 270:return[tt,-T];default:return[-tt,-T]}},j=new WeakSet,ar=function(rt,Et,Ot){switch(Ot){case 90:return[Et,-rt];case 180:return[-rt,-Et];case 270:return[-Et,rt];default:return[rt,Et]}},or=function(rt){switch(rt){case 90:{const[Et,Ot]=this.pageDimensions;return[0,-Et/Ot,Ot/Et,0]}case 180:return[-1,0,0,-1];case 270:{const[Et,Ot]=this.pageDimensions;return[0,Et/Ot,-Ot/Et,0]}default:return[1,0,0,1]}},is=function(){if(y(this,V))return;Vt(this,V,document.createElement("div")),y(this,V).classList.add("resizers");const rt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||rt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Et of rt){const Ot=document.createElement("div");y(this,V).append(Ot),Ot.classList.add("resizer",Et),Ot.addEventListener("pointerdown",Pt(this,B,rs).bind(this,Et)),Ot.addEventListener("contextmenu",_.noContextMenu)}this.div.prepend(y(this,V))},rs=function(rt,Et){Et.preventDefault();const{isMac:Ot}=W.FeatureTest.platform;if(Et.button!==0||Et.ctrlKey&&Ot)return;const tt=Pt(this,B,ss).bind(this,rt),T=this._isDraggable;this._isDraggable=!1;const P={passive:!0,capture:!0};window.addEventListener("pointermove",tt,P);const $=this.x,at=this.y,ot=this.width,st=this.height,xt=this.parent.div.style.cursor,$t=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Et.target).cursor;const Kt=()=>{this._isDraggable=T,window.removeEventListener("pointerup",Kt),window.removeEventListener("blur",Kt),window.removeEventListener("pointermove",tt,P),this.parent.div.style.cursor=xt,this.div.style.cursor=$t;const Zt=this.x,te=this.y,re=this.width,se=this.height;Zt===$&&te===at&&re===ot&&se===st||this.addCommands({cmd:()=>{this.width=re,this.height=se,this.x=Zt,this.y=te;const[Nt,Bt]=this.parentDimensions;this.setDims(Nt*re,Bt*se),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=st,this.x=$,this.y=at;const[Nt,Bt]=this.parentDimensions;this.setDims(Nt*ot,Bt*st),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Kt),window.addEventListener("blur",Kt)},ss=function(rt,Et){const[Ot,tt]=this.parentDimensions,T=this.x,P=this.y,$=this.width,at=this.height,ot=At.MIN_SIZE/Ot,st=At.MIN_SIZE/tt,xt=Ae=>Math.round(Ae*1e4)/1e4,$t=Pt(this,B,or).call(this,this.rotation),Kt=(Ae,ke)=>[$t[0]*Ae+$t[2]*ke,$t[1]*Ae+$t[3]*ke],Zt=Pt(this,B,or).call(this,360-this.rotation),te=(Ae,ke)=>[Zt[0]*Ae+Zt[2]*ke,Zt[1]*Ae+Zt[3]*ke];let re,se,Nt=!1,Bt=!1;switch(rt){case"topLeft":Nt=!0,re=(Ae,ke)=>[0,0],se=(Ae,ke)=>[Ae,ke];break;case"topMiddle":re=(Ae,ke)=>[Ae/2,0],se=(Ae,ke)=>[Ae/2,ke];break;case"topRight":Nt=!0,re=(Ae,ke)=>[Ae,0],se=(Ae,ke)=>[0,ke];break;case"middleRight":Bt=!0,re=(Ae,ke)=>[Ae,ke/2],se=(Ae,ke)=>[0,ke/2];break;case"bottomRight":Nt=!0,re=(Ae,ke)=>[Ae,ke],se=(Ae,ke)=>[0,0];break;case"bottomMiddle":re=(Ae,ke)=>[Ae/2,ke],se=(Ae,ke)=>[Ae/2,0];break;case"bottomLeft":Nt=!0,re=(Ae,ke)=>[0,ke],se=(Ae,ke)=>[Ae,0];break;case"middleLeft":Bt=!0,re=(Ae,ke)=>[0,ke/2],se=(Ae,ke)=>[Ae,ke/2];break}const X=re($,at),ut=se($,at);let kt=Kt(...ut);const Ht=xt(T+kt[0]),Jt=xt(P+kt[1]);let ae=1,ne=1,[Rt,ge]=this.screenToPageTranslation(Et.movementX,Et.movementY);if([Rt,ge]=te(Rt/Ot,ge/tt),Nt){const Ae=Math.hypot($,at);ae=ne=Math.max(Math.min(Math.hypot(ut[0]-X[0]-Rt,ut[1]-X[1]-ge)/Ae,1/$,1/at),ot/$,st/at)}else Bt?ae=Math.max(ot,Math.min(1,Math.abs(ut[0]-X[0]-Rt)))/$:ne=Math.max(st,Math.min(1,Math.abs(ut[1]-X[1]-ge)))/at;const de=xt($*ae),ze=xt(at*ne);kt=Kt(...se(de,ze));const Ie=Ht-kt[0],Qe=Jt-kt[1];this.width=de,this.height=ze,this.x=Ie,this.y=Qe,this.setDims(Ot*de,tt*ze),this.fixAndSetPosition()},lr=async function(){var Ot;const rt=y(this,O);if(!rt)return;if(!y(this,pt)&&!y(this,nt)){rt.classList.remove("done"),(Ot=y(this,ft))==null||Ot.remove();return}At._l10nPromise.get("editor_alt_text_edit_button_label").then(tt=>{rt.setAttribute("aria-label",tt)});let Et=y(this,ft);if(!Et){Vt(this,ft,Et=document.createElement("span")),Et.className="tooltip",Et.setAttribute("role","tooltip");const tt=Et.id=`alt-text-tooltip-${this.id}`;rt.setAttribute("aria-describedby",tt);const T=100;rt.addEventListener("mouseenter",()=>{Vt(this,lt,setTimeout(()=>{Vt(this,lt,null),y(this,ft).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},T))}),rt.addEventListener("mouseleave",()=>{var P;clearTimeout(y(this,lt)),Vt(this,lt,null),(P=y(this,ft))==null||P.classList.remove("show")})}rt.classList.add("done"),Et.innerText=y(this,nt)?await At._l10nPromise.get("editor_alt_text_decorative_tooltip"):y(this,pt),Et.parentNode||rt.append(Et)},as=function(rt){if(!this._isDraggable)return;const Et=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Ot,tt;Et&&(Ot={passive:!0,capture:!0},tt=P=>{const[$,at]=this.screenToPageTranslation(P.movementX,P.movementY);this._uiManager.dragSelectedEditors($,at)},window.addEventListener("pointermove",tt,Ot));const T=()=>{if(window.removeEventListener("pointerup",T),window.removeEventListener("blur",T),Et&&window.removeEventListener("pointermove",tt,Ot),Vt(this,U,!1),!this._uiManager.endDragSession()){const{isMac:P}=W.FeatureTest.platform;rt.ctrlKey&&!P||rt.shiftKey||rt.metaKey&&P?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",T),window.addEventListener("blur",T)},Wt(At,j),yn(At,"_borderLineWidth",-1),yn(At,"_colorManager",new R.ColorManager),yn(At,"_zIndex",1),yn(At,"SMALL_EDITOR_SIZE",0);let bt=At;x.AnnotationEditor=bt;class zt extends bt{constructor(rt){super(rt),this.annotationElementId=rt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(A,x,vt)=>{var q,V,et,G,U,cr,J,F,B,L,N,os,D,K,ct,Gt,wt,Mt,At,qt,rt,Et,Ot,tt,T,P,$,at,ot,st,xt,$t,Kt,Zt,te,re,se,Nt,Bt,X,ut,kt,Ht,Jt,ae,ne,Rt,ls,ur,dr,Fi,hr,fr,zn,gi,cs,us,pr,mi,gr;Object.defineProperty(x,"__esModule",{value:!0}),x.KeyboardManager=x.CommandManager=x.ColorManager=x.AnnotationEditorUIManager=void 0,x.bindEvents=_,x.opacityToHex=bt;var R=vt(1),W=vt(6);function _(De,gt,Qt){for(const pe of Qt)gt.addEventListener(pe,De[pe].bind(De))}function bt(De){return Math.round(Math.min(255,Math.max(1,255*De))).toString(16).padStart(2,"0")}class zt{constructor(){Wt(this,q,0)}getId(){return`${R.AnnotationEditorPrefix}${pi(this,q)._++}`}}q=new WeakMap;const dt=class dt{constructor(){Wt(this,U);Wt(this,V,(0,R.getUuid)());Wt(this,et,0);Wt(this,G,null)}static get _isSVGFittingCanvas(){const gt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pe=new OffscreenCanvas(1,3).getContext("2d"),Ce=new Image;Ce.src=gt;const Pe=Ce.decode().then(()=>(pe.drawImage(Ce,0,0,1,1,0,0,1,3),new Uint32Array(pe.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,R.shadow)(this,"_isSVGFittingCanvas",Pe)}async getFromFile(gt){const{lastModified:Qt,name:pe,size:Ce,type:Pe}=gt;return Pt(this,U,cr).call(this,`${Qt}_${pe}_${Ce}_${Pe}`,gt)}async getFromUrl(gt){return Pt(this,U,cr).call(this,gt,gt)}async getFromId(gt){y(this,G)||Vt(this,G,new Map);const Qt=y(this,G).get(gt);return Qt?Qt.bitmap?(Qt.refCounter+=1,Qt):Qt.file?this.getFromFile(Qt.file):this.getFromUrl(Qt.url):null}getSvgUrl(gt){const Qt=y(this,G).get(gt);return Qt!=null&&Qt.isSvg?Qt.svgUrl:null}deleteId(gt){y(this,G)||Vt(this,G,new Map);const Qt=y(this,G).get(gt);Qt&&(Qt.refCounter-=1,Qt.refCounter===0&&(Qt.bitmap=null))}isValidId(gt){return gt.startsWith(`image_${y(this,V)}_`)}};V=new WeakMap,et=new WeakMap,G=new WeakMap,U=new WeakSet,cr=async function(gt,Qt){y(this,G)||Vt(this,G,new Map);let pe=y(this,G).get(gt);if(pe===null)return null;if(pe!=null&&pe.bitmap)return pe.refCounter+=1,pe;try{pe||(pe={bitmap:null,id:`image_${y(this,V)}_${pi(this,et)._++}`,refCounter:0,isSvg:!1});let Ce;if(typeof Qt=="string"){pe.url=Qt;const Pe=await fetch(Qt);if(!Pe.ok)throw new Error(Pe.statusText);Ce=await Pe.blob()}else Ce=pe.file=Qt;if(Ce.type==="image/svg+xml"){const Pe=dt._isSVGFittingCanvas,_e=new FileReader,it=new Image,Q=new Promise((Ct,Xt)=>{it.onload=()=>{pe.bitmap=it,pe.isSvg=!0,Ct()},_e.onload=async()=>{const Yt=pe.svgUrl=_e.result;it.src=await Pe?`${Yt}#svgView(preserveAspectRatio(none))`:Yt},it.onerror=_e.onerror=Xt});_e.readAsDataURL(Ce),await Q}else pe.bitmap=await createImageBitmap(Ce);pe.refCounter=1}catch(Ce){console.error(Ce),pe=null}return y(this,G).set(gt,pe),pe&&y(this,G).set(pe.id,pe),pe};let pt=dt;class nt{constructor(gt=128){Wt(this,J,[]);Wt(this,F,!1);Wt(this,B);Wt(this,L,-1);Vt(this,B,gt)}add({cmd:gt,undo:Qt,mustExec:pe,type:Ce=NaN,overwriteIfSameType:Pe=!1,keepUndo:_e=!1}){if(pe&&gt(),y(this,F))return;const it={cmd:gt,undo:Qt,type:Ce};if(y(this,L)===-1){y(this,J).length>0&&(y(this,J).length=0),Vt(this,L,0),y(this,J).push(it);return}if(Pe&&y(this,J)[y(this,L)].type===Ce){_e&&(it.undo=y(this,J)[y(this,L)].undo),y(this,J)[y(this,L)]=it;return}const Q=y(this,L)+1;Q===y(this,B)?y(this,J).splice(0,1):(Vt(this,L,Q),Q<y(this,J).length&&y(this,J).splice(Q)),y(this,J).push(it)}undo(){y(this,L)!==-1&&(Vt(this,F,!0),y(this,J)[y(this,L)].undo(),Vt(this,F,!1),Vt(this,L,y(this,L)-1))}redo(){y(this,L)<y(this,J).length-1&&(Vt(this,L,y(this,L)+1),Vt(this,F,!0),y(this,J)[y(this,L)].cmd(),Vt(this,F,!1))}hasSomethingToUndo(){return y(this,L)!==-1}hasSomethingToRedo(){return y(this,L)<y(this,J).length-1}destroy(){Vt(this,J,null)}}J=new WeakMap,F=new WeakMap,B=new WeakMap,L=new WeakMap,x.CommandManager=nt;class O{constructor(gt){Wt(this,N);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Qt}=R.FeatureTest.platform;for(const[pe,Ce,Pe={}]of gt)for(const _e of pe){const it=_e.startsWith("mac+");Qt&&it?(this.callbacks.set(_e.slice(4),{callback:Ce,options:Pe}),this.allKeys.add(_e.split("+").at(-1))):!Qt&&!it&&(this.callbacks.set(_e,{callback:Ce,options:Pe}),this.allKeys.add(_e.split("+").at(-1)))}}exec(gt,Qt){if(!this.allKeys.has(Qt.key))return;const pe=this.callbacks.get(Pt(this,N,os).call(this,Qt));if(!pe)return;const{callback:Ce,options:{bubbles:Pe=!1,args:_e=[],checker:it=null}}=pe;it&&!it(gt,Qt)||(Ce.bind(gt,..._e)(),Pe||(Qt.stopPropagation(),Qt.preventDefault()))}}N=new WeakSet,os=function(gt){gt.altKey&&this.buffer.push("alt"),gt.ctrlKey&&this.buffer.push("ctrl"),gt.metaKey&&this.buffer.push("meta"),gt.shiftKey&&this.buffer.push("shift"),this.buffer.push(gt.key);const Qt=this.buffer.join("+");return this.buffer.length=0,Qt},x.KeyboardManager=O;const ht=class ht{get _colors(){const gt=new Map([["CanvasText",null],["Canvas",null]]);return(0,W.getColorValues)(gt),(0,R.shadow)(this,"_colors",gt)}convert(gt){const Qt=(0,W.getRGB)(gt);if(!window.matchMedia("(forced-colors: active)").matches)return Qt;for(const[pe,Ce]of this._colors)if(Ce.every((Pe,_e)=>Pe===Qt[_e]))return ht._colorsMapping.get(pe);return Qt}getHexCode(gt){const Qt=this._colors.get(gt);return Qt?R.Util.makeHexColor(...Qt):gt}};yn(ht,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ft=ht;x.ColorManager=ft;const we=class we{constructor(gt,Qt,pe,Ce,Pe,_e){Wt(this,Rt);Wt(this,D,null);Wt(this,K,new Map);Wt(this,ct,new Map);Wt(this,Gt,null);Wt(this,wt,null);Wt(this,Mt,new nt);Wt(this,At,0);Wt(this,qt,new Set);Wt(this,rt,null);Wt(this,Et,null);Wt(this,Ot,new Set);Wt(this,tt,null);Wt(this,T,new zt);Wt(this,P,!1);Wt(this,$,!1);Wt(this,at,null);Wt(this,ot,R.AnnotationEditorType.NONE);Wt(this,st,new Set);Wt(this,xt,null);Wt(this,$t,this.blur.bind(this));Wt(this,Kt,this.focus.bind(this));Wt(this,Zt,this.copy.bind(this));Wt(this,te,this.cut.bind(this));Wt(this,re,this.paste.bind(this));Wt(this,se,this.keydown.bind(this));Wt(this,Nt,this.onEditingAction.bind(this));Wt(this,Bt,this.onPageChanging.bind(this));Wt(this,X,this.onScaleChanging.bind(this));Wt(this,ut,this.onRotationChanging.bind(this));Wt(this,kt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Wt(this,Ht,[0,0]);Wt(this,Jt,null);Wt(this,ae,null);Wt(this,ne,null);Vt(this,ae,gt),Vt(this,ne,Qt),Vt(this,Gt,pe),this._eventBus=Ce,this._eventBus._on("editingaction",y(this,Nt)),this._eventBus._on("pagechanging",y(this,Bt)),this._eventBus._on("scalechanging",y(this,X)),this._eventBus._on("rotationchanging",y(this,ut)),Vt(this,wt,Pe.annotationStorage),Vt(this,tt,Pe.filterFactory),Vt(this,xt,_e),this.viewParameters={realScale:W.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const gt=we.prototype,Qt=Pe=>{const{activeElement:_e}=document;return _e&&y(Pe,ae).contains(_e)&&Pe.hasSomethingToControl()},pe=this.TRANSLATE_SMALL,Ce=this.TRANSLATE_BIG;return(0,R.shadow)(this,"_keyboardManager",new O([[["ctrl+a","mac+meta+a"],gt.selectAll],[["ctrl+z","mac+meta+z"],gt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],gt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],gt.delete],[["Escape","mac+Escape"],gt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],gt.translateSelectedEditors,{args:[-pe,0],checker:Qt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],gt.translateSelectedEditors,{args:[-Ce,0],checker:Qt}],[["ArrowRight","mac+ArrowRight"],gt.translateSelectedEditors,{args:[pe,0],checker:Qt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],gt.translateSelectedEditors,{args:[Ce,0],checker:Qt}],[["ArrowUp","mac+ArrowUp"],gt.translateSelectedEditors,{args:[0,-pe],checker:Qt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],gt.translateSelectedEditors,{args:[0,-Ce],checker:Qt}],[["ArrowDown","mac+ArrowDown"],gt.translateSelectedEditors,{args:[0,pe],checker:Qt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],gt.translateSelectedEditors,{args:[0,Ce],checker:Qt}]]))}destroy(){Pt(this,Rt,Fi).call(this),Pt(this,Rt,ur).call(this),this._eventBus._off("editingaction",y(this,Nt)),this._eventBus._off("pagechanging",y(this,Bt)),this._eventBus._off("scalechanging",y(this,X)),this._eventBus._off("rotationchanging",y(this,ut));for(const gt of y(this,ct).values())gt.destroy();y(this,ct).clear(),y(this,K).clear(),y(this,Ot).clear(),Vt(this,D,null),y(this,st).clear(),y(this,Mt).destroy(),y(this,Gt).destroy()}get hcmFilter(){return(0,R.shadow)(this,"hcmFilter",y(this,xt)?y(this,tt).addHCMFilter(y(this,xt).foreground,y(this,xt).background):"none")}get direction(){return(0,R.shadow)(this,"direction",getComputedStyle(y(this,ae)).direction)}editAltText(gt){var Qt;(Qt=y(this,Gt))==null||Qt.editAltText(this,gt)}onPageChanging({pageNumber:gt}){Vt(this,At,gt-1)}focusMainContainer(){y(this,ae).focus()}findParent(gt,Qt){for(const pe of y(this,ct).values()){const{x:Ce,y:Pe,width:_e,height:it}=pe.div.getBoundingClientRect();if(gt>=Ce&&gt<=Ce+_e&&Qt>=Pe&&Qt<=Pe+it)return pe}return null}disableUserSelect(gt=!1){y(this,ne).classList.toggle("noUserSelect",gt)}addShouldRescale(gt){y(this,Ot).add(gt)}removeShouldRescale(gt){y(this,Ot).delete(gt)}onScaleChanging({scale:gt}){this.commitOrRemove(),this.viewParameters.realScale=gt*W.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Qt of y(this,Ot))Qt.onScaleChanging()}onRotationChanging({pagesRotation:gt}){this.commitOrRemove(),this.viewParameters.rotation=gt}addToAnnotationStorage(gt){!gt.isEmpty()&&y(this,wt)&&!y(this,wt).has(gt.id)&&y(this,wt).setValue(gt.id,gt)}blur(){if(!this.hasSelection)return;const{activeElement:gt}=document;for(const Qt of y(this,st))if(Qt.div.contains(gt)){Vt(this,at,[Qt,gt]),Qt._focusEventsAllowed=!1;break}}focus(){if(!y(this,at))return;const[gt,Qt]=y(this,at);Vt(this,at,null),Qt.addEventListener("focusin",()=>{gt._focusEventsAllowed=!0},{once:!0}),Qt.focus()}addEditListeners(){Pt(this,Rt,dr).call(this),Pt(this,Rt,hr).call(this)}removeEditListeners(){Pt(this,Rt,Fi).call(this),Pt(this,Rt,fr).call(this)}copy(gt){var pe;if(gt.preventDefault(),(pe=y(this,D))==null||pe.commitOrRemove(),!this.hasSelection)return;const Qt=[];for(const Ce of y(this,st)){const Pe=Ce.serialize(!0);Pe&&Qt.push(Pe)}Qt.length!==0&&gt.clipboardData.setData("application/pdfjs",JSON.stringify(Qt))}cut(gt){this.copy(gt),this.delete()}paste(gt){gt.preventDefault();const{clipboardData:Qt}=gt;for(const Pe of Qt.items)for(const _e of y(this,Et))if(_e.isHandlingMimeForPasting(Pe.type)){_e.paste(Pe,this.currentLayer);return}let pe=Qt.getData("application/pdfjs");if(!pe)return;try{pe=JSON.parse(pe)}catch(Pe){(0,R.warn)(`paste: "${Pe.message}".`);return}if(!Array.isArray(pe))return;this.unselectAll();const Ce=this.currentLayer;try{const Pe=[];for(const Q of pe){const Ct=Ce.deserialize(Q);if(!Ct)return;Pe.push(Ct)}const _e=()=>{for(const Q of Pe)Pt(this,Rt,pr).call(this,Q);Pt(this,Rt,gr).call(this,Pe)},it=()=>{for(const Q of Pe)Q.remove()};this.addCommands({cmd:_e,undo:it,mustExec:!0})}catch(Pe){(0,R.warn)(`paste: "${Pe.message}".`)}}keydown(gt){var Qt;(Qt=this.getActive())!=null&&Qt.shouldGetKeyboardEvents()||we._keyboardManager.exec(this,gt)}onEditingAction(gt){["undo","redo","delete","selectAll"].includes(gt.name)&&this[gt.name]()}setEditingState(gt){gt?(Pt(this,Rt,ls).call(this),Pt(this,Rt,dr).call(this),Pt(this,Rt,hr).call(this),Pt(this,Rt,zn).call(this,{isEditing:y(this,ot)!==R.AnnotationEditorType.NONE,isEmpty:Pt(this,Rt,mi).call(this),hasSomethingToUndo:y(this,Mt).hasSomethingToUndo(),hasSomethingToRedo:y(this,Mt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Pt(this,Rt,ur).call(this),Pt(this,Rt,Fi).call(this),Pt(this,Rt,fr).call(this),Pt(this,Rt,zn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(gt){if(!y(this,Et)){Vt(this,Et,gt);for(const Qt of y(this,Et))Pt(this,Rt,gi).call(this,Qt.defaultPropertiesToUpdate)}}getId(){return y(this,T).getId()}get currentLayer(){return y(this,ct).get(y(this,At))}getLayer(gt){return y(this,ct).get(gt)}get currentPageIndex(){return y(this,At)}addLayer(gt){y(this,ct).set(gt.pageIndex,gt),y(this,P)?gt.enable():gt.disable()}removeLayer(gt){y(this,ct).delete(gt.pageIndex)}updateMode(gt,Qt=null){if(y(this,ot)!==gt){if(Vt(this,ot,gt),gt===R.AnnotationEditorType.NONE){this.setEditingState(!1),Pt(this,Rt,us).call(this);return}this.setEditingState(!0),Pt(this,Rt,cs).call(this),this.unselectAll();for(const pe of y(this,ct).values())pe.updateMode(gt);if(Qt){for(const pe of y(this,K).values())if(pe.annotationElementId===Qt){this.setSelected(pe),pe.enterInEditMode();break}}}}updateToolbar(gt){gt!==y(this,ot)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:gt})}updateParams(gt,Qt){if(y(this,Et)){if(gt===R.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(gt);return}for(const pe of y(this,st))pe.updateParams(gt,Qt);for(const pe of y(this,Et))pe.updateDefaultParams(gt,Qt)}}enableWaiting(gt=!1){if(y(this,$)!==gt){Vt(this,$,gt);for(const Qt of y(this,ct).values())gt?Qt.disableClick():Qt.enableClick(),Qt.div.classList.toggle("waiting",gt)}}getEditors(gt){const Qt=[];for(const pe of y(this,K).values())pe.pageIndex===gt&&Qt.push(pe);return Qt}getEditor(gt){return y(this,K).get(gt)}addEditor(gt){y(this,K).set(gt.id,gt)}removeEditor(gt){var Qt;y(this,K).delete(gt.id),this.unselect(gt),(!gt.annotationElementId||!y(this,qt).has(gt.annotationElementId))&&((Qt=y(this,wt))==null||Qt.remove(gt.id))}addDeletedAnnotationElement(gt){y(this,qt).add(gt.annotationElementId),gt.deleted=!0}isDeletedAnnotationElement(gt){return y(this,qt).has(gt)}removeDeletedAnnotationElement(gt){y(this,qt).delete(gt.annotationElementId),gt.deleted=!1}setActiveEditor(gt){y(this,D)!==gt&&(Vt(this,D,gt),gt&&Pt(this,Rt,gi).call(this,gt.propertiesToUpdate))}toggleSelected(gt){if(y(this,st).has(gt)){y(this,st).delete(gt),gt.unselect(),Pt(this,Rt,zn).call(this,{hasSelectedEditor:this.hasSelection});return}y(this,st).add(gt),gt.select(),Pt(this,Rt,gi).call(this,gt.propertiesToUpdate),Pt(this,Rt,zn).call(this,{hasSelectedEditor:!0})}setSelected(gt){for(const Qt of y(this,st))Qt!==gt&&Qt.unselect();y(this,st).clear(),y(this,st).add(gt),gt.select(),Pt(this,Rt,gi).call(this,gt.propertiesToUpdate),Pt(this,Rt,zn).call(this,{hasSelectedEditor:!0})}isSelected(gt){return y(this,st).has(gt)}unselect(gt){gt.unselect(),y(this,st).delete(gt),Pt(this,Rt,zn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return y(this,st).size!==0}undo(){y(this,Mt).undo(),Pt(this,Rt,zn).call(this,{hasSomethingToUndo:y(this,Mt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Pt(this,Rt,mi).call(this)})}redo(){y(this,Mt).redo(),Pt(this,Rt,zn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,Mt).hasSomethingToRedo(),isEmpty:Pt(this,Rt,mi).call(this)})}addCommands(gt){y(this,Mt).add(gt),Pt(this,Rt,zn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Pt(this,Rt,mi).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const gt=[...y(this,st)],Qt=()=>{for(const Ce of gt)Ce.remove()},pe=()=>{for(const Ce of gt)Pt(this,Rt,pr).call(this,Ce)};this.addCommands({cmd:Qt,undo:pe,mustExec:!0})}commitOrRemove(){var gt;(gt=y(this,D))==null||gt.commitOrRemove()}hasSomethingToControl(){return y(this,D)||this.hasSelection}selectAll(){for(const gt of y(this,st))gt.commit();Pt(this,Rt,gr).call(this,y(this,K).values())}unselectAll(){if(y(this,D)){y(this,D).commitOrRemove();return}if(this.hasSelection){for(const gt of y(this,st))gt.unselect();y(this,st).clear(),Pt(this,Rt,zn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(gt,Qt,pe=!1){if(pe||this.commitOrRemove(),!this.hasSelection)return;y(this,Ht)[0]+=gt,y(this,Ht)[1]+=Qt;const[Ce,Pe]=y(this,Ht),_e=[...y(this,st)],it=1e3;y(this,Jt)&&clearTimeout(y(this,Jt)),Vt(this,Jt,setTimeout(()=>{Vt(this,Jt,null),y(this,Ht)[0]=y(this,Ht)[1]=0,this.addCommands({cmd:()=>{for(const Q of _e)y(this,K).has(Q.id)&&Q.translateInPage(Ce,Pe)},undo:()=>{for(const Q of _e)y(this,K).has(Q.id)&&Q.translateInPage(-Ce,-Pe)},mustExec:!1})},it));for(const Q of _e)Q.translateInPage(gt,Qt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Vt(this,rt,new Map);for(const gt of y(this,st))y(this,rt).set(gt,{savedX:gt.x,savedY:gt.y,savedPageIndex:gt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!y(this,rt))return!1;this.disableUserSelect(!1);const gt=y(this,rt);Vt(this,rt,null);let Qt=!1;for(const[{x:Ce,y:Pe,pageIndex:_e},it]of gt)it.newX=Ce,it.newY=Pe,it.newPageIndex=_e,Qt||(Qt=Ce!==it.savedX||Pe!==it.savedY||_e!==it.savedPageIndex);if(!Qt)return!1;const pe=(Ce,Pe,_e,it)=>{if(y(this,K).has(Ce.id)){const Q=y(this,ct).get(it);Q?Ce._setParentAndPosition(Q,Pe,_e):(Ce.pageIndex=it,Ce.x=Pe,Ce.y=_e)}};return this.addCommands({cmd:()=>{for(const[Ce,{newX:Pe,newY:_e,newPageIndex:it}]of gt)pe(Ce,Pe,_e,it)},undo:()=>{for(const[Ce,{savedX:Pe,savedY:_e,savedPageIndex:it}]of gt)pe(Ce,Pe,_e,it)},mustExec:!0}),!0}dragSelectedEditors(gt,Qt){if(y(this,rt))for(const pe of y(this,rt).keys())pe.drag(gt,Qt)}rebuild(gt){if(gt.parent===null){const Qt=this.getLayer(gt.pageIndex);Qt?(Qt.changeParent(gt),Qt.addOrRebuild(gt)):(this.addEditor(gt),this.addToAnnotationStorage(gt),gt.rebuild())}else gt.parent.addOrRebuild(gt)}isActive(gt){return y(this,D)===gt}getActive(){return y(this,D)}getMode(){return y(this,ot)}get imageManager(){return(0,R.shadow)(this,"imageManager",new pt)}};D=new WeakMap,K=new WeakMap,ct=new WeakMap,Gt=new WeakMap,wt=new WeakMap,Mt=new WeakMap,At=new WeakMap,qt=new WeakMap,rt=new WeakMap,Et=new WeakMap,Ot=new WeakMap,tt=new WeakMap,T=new WeakMap,P=new WeakMap,$=new WeakMap,at=new WeakMap,ot=new WeakMap,st=new WeakMap,xt=new WeakMap,$t=new WeakMap,Kt=new WeakMap,Zt=new WeakMap,te=new WeakMap,re=new WeakMap,se=new WeakMap,Nt=new WeakMap,Bt=new WeakMap,X=new WeakMap,ut=new WeakMap,kt=new WeakMap,Ht=new WeakMap,Jt=new WeakMap,ae=new WeakMap,ne=new WeakMap,Rt=new WeakSet,ls=function(){window.addEventListener("focus",y(this,Kt)),window.addEventListener("blur",y(this,$t))},ur=function(){window.removeEventListener("focus",y(this,Kt)),window.removeEventListener("blur",y(this,$t))},dr=function(){window.addEventListener("keydown",y(this,se),{capture:!0})},Fi=function(){window.removeEventListener("keydown",y(this,se),{capture:!0})},hr=function(){document.addEventListener("copy",y(this,Zt)),document.addEventListener("cut",y(this,te)),document.addEventListener("paste",y(this,re))},fr=function(){document.removeEventListener("copy",y(this,Zt)),document.removeEventListener("cut",y(this,te)),document.removeEventListener("paste",y(this,re))},zn=function(gt){Object.entries(gt).some(([pe,Ce])=>y(this,kt)[pe]!==Ce)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,kt),gt)})},gi=function(gt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:gt})},cs=function(){if(!y(this,P)){Vt(this,P,!0);for(const gt of y(this,ct).values())gt.enable()}},us=function(){if(this.unselectAll(),y(this,P)){Vt(this,P,!1);for(const gt of y(this,ct).values())gt.disable()}},pr=function(gt){const Qt=y(this,ct).get(gt.pageIndex);Qt?Qt.addOrRebuild(gt):this.addEditor(gt)},mi=function(){if(y(this,K).size===0)return!0;if(y(this,K).size===1)for(const gt of y(this,K).values())return gt.isEmpty();return!1},gr=function(gt){y(this,st).clear();for(const Qt of gt)Qt.isEmpty()||(y(this,st).add(Qt),Qt.select());Pt(this,Rt,zn).call(this,{hasSelectedEditor:!0})},yn(we,"TRANSLATE_SMALL",1),yn(we,"TRANSLATE_BIG",10);let lt=we;x.AnnotationEditorUIManager=lt},(A,x,vt)=>{var At,qt,rt,Et,Ot,tt,T,P,$,at,ot,st,li,ci,mr,Li,Di,bi,vi;Object.defineProperty(x,"__esModule",{value:!0}),x.StatTimer=x.RenderingCancelledException=x.PixelsPerInch=x.PageViewport=x.PDFDateString=x.DOMStandardFontDataFactory=x.DOMSVGFactory=x.DOMFilterFactory=x.DOMCanvasFactory=x.DOMCMapReaderFactory=void 0,x.deprecated=L,x.getColorValues=K,x.getCurrentTransform=ct,x.getCurrentTransformInverse=Gt,x.getFilenameFromUrl=U,x.getPdfFilenameFromUrl=Y,x.getRGB=D,x.getXfaPageViewport=ht,x.isDataScheme=et,x.isPdfFile=G,x.isValidFetchUrl=J,x.loadScript=B,x.noContextMenu=F,x.setLayerDimensions=wt;var R=vt(7),W=vt(1);const _="http://www.w3.org/2000/svg",Mt=class Mt{};yn(Mt,"CSS",96),yn(Mt,"PDF",72),yn(Mt,"PDF_TO_CSS_UNITS",Mt.CSS/Mt.PDF);let bt=Mt;x.PixelsPerInch=bt;class zt extends R.BaseFilterFactory{constructor({docId:X,ownerDocument:ut=globalThis.document}={}){super();Wt(this,st);Wt(this,At);Wt(this,qt);Wt(this,rt);Wt(this,Et);Wt(this,Ot);Wt(this,tt);Wt(this,T);Wt(this,P);Wt(this,$);Wt(this,at);Wt(this,ot,0);Vt(this,rt,X),Vt(this,Et,ut)}addFilter(X){if(!X)return"none";let ut=y(this,st,li).get(X);if(ut)return ut;let kt,Ht,Jt,ae;if(X.length===1){const de=X[0],ze=new Array(256);for(let Ie=0;Ie<256;Ie++)ze[Ie]=de[Ie]/255;ae=kt=Ht=Jt=ze.join(",")}else{const[de,ze,Ie]=X,Qe=new Array(256),Ae=new Array(256),ke=new Array(256);for(let qe=0;qe<256;qe++)Qe[qe]=de[qe]/255,Ae[qe]=ze[qe]/255,ke[qe]=Ie[qe]/255;kt=Qe.join(","),Ht=Ae.join(","),Jt=ke.join(","),ae=`${kt}${Ht}${Jt}`}if(ut=y(this,st,li).get(ae),ut)return y(this,st,li).set(X,ut),ut;const ne=`g_${y(this,rt)}_transfer_map_${pi(this,ot)._++}`,Rt=`url(#${ne})`;y(this,st,li).set(X,Rt),y(this,st,li).set(ae,Rt);const ge=Pt(this,st,Li).call(this,ne);return Pt(this,st,bi).call(this,kt,Ht,Jt,ge),Rt}addHCMFilter(X,ut){var ze;const kt=`${X}-${ut}`;if(y(this,tt)===kt)return y(this,T);if(Vt(this,tt,kt),Vt(this,T,"none"),(ze=y(this,Ot))==null||ze.remove(),!X||!ut)return y(this,T);const Ht=Pt(this,st,vi).call(this,X);X=W.Util.makeHexColor(...Ht);const Jt=Pt(this,st,vi).call(this,ut);if(ut=W.Util.makeHexColor(...Jt),y(this,st,ci).style.color="",X==="#000000"&&ut==="#ffffff"||X===ut)return y(this,T);const ae=new Array(256);for(let Ie=0;Ie<=255;Ie++){const Qe=Ie/255;ae[Ie]=Qe<=.03928?Qe/12.92:((Qe+.055)/1.055)**2.4}const ne=ae.join(","),Rt=`g_${y(this,rt)}_hcm_filter`,ge=Vt(this,P,Pt(this,st,Li).call(this,Rt));Pt(this,st,bi).call(this,ne,ne,ne,ge),Pt(this,st,mr).call(this,ge);const de=(Ie,Qe)=>{const Ae=Ht[Ie]/255,ke=Jt[Ie]/255,qe=new Array(Qe+1);for(let ln=0;ln<=Qe;ln++)qe[ln]=Ae+ln/Qe*(ke-Ae);return qe.join(",")};return Pt(this,st,bi).call(this,de(0,5),de(1,5),de(2,5),ge),Vt(this,T,`url(#${Rt})`),y(this,T)}addHighlightHCMFilter(X,ut,kt,Ht){var ke;const Jt=`${X}-${ut}-${kt}-${Ht}`;if(y(this,$)===Jt)return y(this,at);if(Vt(this,$,Jt),Vt(this,at,"none"),(ke=y(this,P))==null||ke.remove(),!X||!ut)return y(this,at);const[ae,ne]=[X,ut].map(Pt(this,st,vi).bind(this));let Rt=Math.round(.2126*ae[0]+.7152*ae[1]+.0722*ae[2]),ge=Math.round(.2126*ne[0]+.7152*ne[1]+.0722*ne[2]),[de,ze]=[kt,Ht].map(Pt(this,st,vi).bind(this));ge<Rt&&([Rt,ge,de,ze]=[ge,Rt,ze,de]),y(this,st,ci).style.color="";const Ie=(qe,ln,ee)=>{const Ft=new Array(256),Dt=(ge-Rt)/ee,ye=qe/255,we=(ln-qe)/(255*ee);let De=0;for(let gt=0;gt<=ee;gt++){const Qt=Math.round(Rt+gt*Dt),pe=ye+gt*we;for(let Ce=De;Ce<=Qt;Ce++)Ft[Ce]=pe;De=Qt+1}for(let gt=De;gt<256;gt++)Ft[gt]=Ft[De-1];return Ft.join(",")},Qe=`g_${y(this,rt)}_hcm_highlight_filter`,Ae=Vt(this,P,Pt(this,st,Li).call(this,Qe));return Pt(this,st,mr).call(this,Ae),Pt(this,st,bi).call(this,Ie(de[0],ze[0],5),Ie(de[1],ze[1],5),Ie(de[2],ze[2],5),Ae),Vt(this,at,`url(#${Qe})`),y(this,at)}destroy(X=!1){X&&(y(this,T)||y(this,at))||(y(this,qt)&&(y(this,qt).parentNode.parentNode.remove(),Vt(this,qt,null)),y(this,At)&&(y(this,At).clear(),Vt(this,At,null)),Vt(this,ot,0))}}At=new WeakMap,qt=new WeakMap,rt=new WeakMap,Et=new WeakMap,Ot=new WeakMap,tt=new WeakMap,T=new WeakMap,P=new WeakMap,$=new WeakMap,at=new WeakMap,ot=new WeakMap,st=new WeakSet,li=function(){return y(this,At)||Vt(this,At,new Map)},ci=function(){if(!y(this,qt)){const X=y(this,Et).createElement("div"),{style:ut}=X;ut.visibility="hidden",ut.contain="strict",ut.width=ut.height=0,ut.position="absolute",ut.top=ut.left=0,ut.zIndex=-1;const kt=y(this,Et).createElementNS(_,"svg");kt.setAttribute("width",0),kt.setAttribute("height",0),Vt(this,qt,y(this,Et).createElementNS(_,"defs")),X.append(kt),kt.append(y(this,qt)),y(this,Et).body.append(X)}return y(this,qt)},mr=function(X){const ut=y(this,Et).createElementNS(_,"feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),X.append(ut)},Li=function(X){const ut=y(this,Et).createElementNS(_,"filter");return ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("id",X),y(this,st,ci).append(ut),ut},Di=function(X,ut,kt){const Ht=y(this,Et).createElementNS(_,ut);Ht.setAttribute("type","discrete"),Ht.setAttribute("tableValues",kt),X.append(Ht)},bi=function(X,ut,kt,Ht){const Jt=y(this,Et).createElementNS(_,"feComponentTransfer");Ht.append(Jt),Pt(this,st,Di).call(this,Jt,"feFuncR",X),Pt(this,st,Di).call(this,Jt,"feFuncG",ut),Pt(this,st,Di).call(this,Jt,"feFuncB",kt)},vi=function(X){return y(this,st,ci).style.color=X,D(getComputedStyle(y(this,st,ci)).getPropertyValue("color"))},x.DOMFilterFactory=zt;class pt extends R.BaseCanvasFactory{constructor({ownerDocument:Bt=globalThis.document}={}){super(),this._document=Bt}_createCanvas(Bt,X){const ut=this._document.createElement("canvas");return ut.width=Bt,ut.height=X,ut}}x.DOMCanvasFactory=pt;async function nt(Nt,Bt=!1){if(J(Nt,document.baseURI)){const X=await fetch(Nt);if(!X.ok)throw new Error(X.statusText);return Bt?new Uint8Array(await X.arrayBuffer()):(0,W.stringToBytes)(await X.text())}return new Promise((X,ut)=>{const kt=new XMLHttpRequest;kt.open("GET",Nt,!0),Bt&&(kt.responseType="arraybuffer"),kt.onreadystatechange=()=>{if(kt.readyState===XMLHttpRequest.DONE){if(kt.status===200||kt.status===0){let Ht;if(Bt&&kt.response?Ht=new Uint8Array(kt.response):!Bt&&kt.responseText&&(Ht=(0,W.stringToBytes)(kt.responseText)),Ht){X(Ht);return}}ut(new Error(kt.statusText))}},kt.send(null)})}class O extends R.BaseCMapReaderFactory{_fetchData(Bt,X){return nt(Bt,this.isCompressed).then(ut=>({cMapData:ut,compressionType:X}))}}x.DOMCMapReaderFactory=O;class ft extends R.BaseStandardFontDataFactory{_fetchData(Bt){return nt(Bt,!0)}}x.DOMStandardFontDataFactory=ft;class lt extends R.BaseSVGFactory{_createSVG(Bt){return document.createElementNS(_,Bt)}}x.DOMSVGFactory=lt;class q{constructor({viewBox:Bt,scale:X,rotation:ut,offsetX:kt=0,offsetY:Ht=0,dontFlip:Jt=!1}){this.viewBox=Bt,this.scale=X,this.rotation=ut,this.offsetX=kt,this.offsetY=Ht;const ae=(Bt[2]+Bt[0])/2,ne=(Bt[3]+Bt[1])/2;let Rt,ge,de,ze;switch(ut%=360,ut<0&&(ut+=360),ut){case 180:Rt=-1,ge=0,de=0,ze=1;break;case 90:Rt=0,ge=1,de=1,ze=0;break;case 270:Rt=0,ge=-1,de=-1,ze=0;break;case 0:Rt=1,ge=0,de=0,ze=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Jt&&(de=-de,ze=-ze);let Ie,Qe,Ae,ke;Rt===0?(Ie=Math.abs(ne-Bt[1])*X+kt,Qe=Math.abs(ae-Bt[0])*X+Ht,Ae=(Bt[3]-Bt[1])*X,ke=(Bt[2]-Bt[0])*X):(Ie=Math.abs(ae-Bt[0])*X+kt,Qe=Math.abs(ne-Bt[1])*X+Ht,Ae=(Bt[2]-Bt[0])*X,ke=(Bt[3]-Bt[1])*X),this.transform=[Rt*X,ge*X,de*X,ze*X,Ie-Rt*X*ae-de*X*ne,Qe-ge*X*ae-ze*X*ne],this.width=Ae,this.height=ke}get rawDims(){const{viewBox:Bt}=this;return(0,W.shadow)(this,"rawDims",{pageWidth:Bt[2]-Bt[0],pageHeight:Bt[3]-Bt[1],pageX:Bt[0],pageY:Bt[1]})}clone({scale:Bt=this.scale,rotation:X=this.rotation,offsetX:ut=this.offsetX,offsetY:kt=this.offsetY,dontFlip:Ht=!1}={}){return new q({viewBox:this.viewBox.slice(),scale:Bt,rotation:X,offsetX:ut,offsetY:kt,dontFlip:Ht})}convertToViewportPoint(Bt,X){return W.Util.applyTransform([Bt,X],this.transform)}convertToViewportRectangle(Bt){const X=W.Util.applyTransform([Bt[0],Bt[1]],this.transform),ut=W.Util.applyTransform([Bt[2],Bt[3]],this.transform);return[X[0],X[1],ut[0],ut[1]]}convertToPdfPoint(Bt,X){return W.Util.applyInverseTransform([Bt,X],this.transform)}}x.PageViewport=q;class V extends W.BaseException{constructor(Bt,X=0){super(Bt,"RenderingCancelledException"),this.extraDelay=X}}x.RenderingCancelledException=V;function et(Nt){const Bt=Nt.length;let X=0;for(;X<Bt&&Nt[X].trim()==="";)X++;return Nt.substring(X,X+5).toLowerCase()==="data:"}function G(Nt){return typeof Nt=="string"&&/\.pdf$/i.test(Nt)}function U(Nt,Bt=!1){return Bt||([Nt]=Nt.split(/[#?]/,1)),Nt.substring(Nt.lastIndexOf("/")+1)}function Y(Nt,Bt="document.pdf"){if(typeof Nt!="string")return Bt;if(et(Nt))return(0,W.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Bt;const X=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ut=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,kt=X.exec(Nt);let Ht=ut.exec(kt[1])||ut.exec(kt[2])||ut.exec(kt[3]);if(Ht&&(Ht=Ht[0],Ht.includes("%")))try{Ht=ut.exec(decodeURIComponent(Ht))[0]}catch{}return Ht||Bt}class dt{constructor(){yn(this,"started",Object.create(null));yn(this,"times",[])}time(Bt){Bt in this.started&&(0,W.warn)(`Timer is already running for ${Bt}`),this.started[Bt]=Date.now()}timeEnd(Bt){Bt in this.started||(0,W.warn)(`Timer has not been started for ${Bt}`),this.times.push({name:Bt,start:this.started[Bt],end:Date.now()}),delete this.started[Bt]}toString(){const Bt=[];let X=0;for(const{name:ut}of this.times)X=Math.max(ut.length,X);for(const{name:ut,start:kt,end:Ht}of this.times)Bt.push(`${ut.padEnd(X)} ${Ht-kt}ms
`);return Bt.join("")}}x.StatTimer=dt;function J(Nt,Bt){try{const{protocol:X}=Bt?new URL(Nt,Bt):new URL(Nt);return X==="http:"||X==="https:"}catch{return!1}}function F(Nt){Nt.preventDefault()}function B(Nt,Bt=!1){return new Promise((X,ut)=>{const kt=document.createElement("script");kt.src=Nt,kt.onload=function(Ht){Bt&&kt.remove(),X(Ht)},kt.onerror=function(){ut(new Error(`Cannot load script at: ${kt.src}`))},(document.head||document.documentElement).append(kt)})}function L(Nt){console.log("Deprecated API usage: "+Nt)}let N;class j{static toDateObject(Bt){if(!Bt||typeof Bt!="string")return null;N||(N=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const X=N.exec(Bt);if(!X)return null;const ut=parseInt(X[1],10);let kt=parseInt(X[2],10);kt=kt>=1&&kt<=12?kt-1:0;let Ht=parseInt(X[3],10);Ht=Ht>=1&&Ht<=31?Ht:1;let Jt=parseInt(X[4],10);Jt=Jt>=0&&Jt<=23?Jt:0;let ae=parseInt(X[5],10);ae=ae>=0&&ae<=59?ae:0;let ne=parseInt(X[6],10);ne=ne>=0&&ne<=59?ne:0;const Rt=X[7]||"Z";let ge=parseInt(X[8],10);ge=ge>=0&&ge<=23?ge:0;let de=parseInt(X[9],10)||0;return de=de>=0&&de<=59?de:0,Rt==="-"?(Jt+=ge,ae+=de):Rt==="+"&&(Jt-=ge,ae-=de),new Date(Date.UTC(ut,kt,Ht,Jt,ae,ne))}}x.PDFDateString=j;function ht(Nt,{scale:Bt=1,rotation:X=0}){const{width:ut,height:kt}=Nt.attributes.style,Ht=[0,0,parseInt(ut),parseInt(kt)];return new q({viewBox:Ht,scale:Bt,rotation:X})}function D(Nt){if(Nt.startsWith("#")){const Bt=parseInt(Nt.slice(1),16);return[(Bt&16711680)>>16,(Bt&65280)>>8,Bt&255]}return Nt.startsWith("rgb(")?Nt.slice(4,-1).split(",").map(Bt=>parseInt(Bt)):Nt.startsWith("rgba(")?Nt.slice(5,-1).split(",").map(Bt=>parseInt(Bt)).slice(0,3):((0,W.warn)(`Not a valid color format: "${Nt}"`),[0,0,0])}function K(Nt){const Bt=document.createElement("span");Bt.style.visibility="hidden",document.body.append(Bt);for(const X of Nt.keys()){Bt.style.color=X;const ut=window.getComputedStyle(Bt).color;Nt.set(X,D(ut))}Bt.remove()}function ct(Nt){const{a:Bt,b:X,c:ut,d:kt,e:Ht,f:Jt}=Nt.getTransform();return[Bt,X,ut,kt,Ht,Jt]}function Gt(Nt){const{a:Bt,b:X,c:ut,d:kt,e:Ht,f:Jt}=Nt.getTransform().invertSelf();return[Bt,X,ut,kt,Ht,Jt]}function wt(Nt,Bt,X=!1,ut=!0){if(Bt instanceof q){const{pageWidth:kt,pageHeight:Ht}=Bt.rawDims,{style:Jt}=Nt,ae=W.FeatureTest.isCSSRoundSupported,ne=`var(--scale-factor) * ${kt}px`,Rt=`var(--scale-factor) * ${Ht}px`,ge=ae?`round(${ne}, 1px)`:`calc(${ne})`,de=ae?`round(${Rt}, 1px)`:`calc(${Rt})`;!X||Bt.rotation%180===0?(Jt.width=ge,Jt.height=de):(Jt.width=de,Jt.height=ge)}ut&&Nt.setAttribute("data-main-rotation",Bt.rotation)}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.BaseStandardFontDataFactory=x.BaseSVGFactory=x.BaseFilterFactory=x.BaseCanvasFactory=x.BaseCMapReaderFactory=void 0;var R=vt(1);class W{constructor(){this.constructor===W&&(0,R.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(O){return"none"}addHCMFilter(O,ft){return"none"}addHighlightHCMFilter(O,ft,lt,q){return"none"}destroy(O=!1){}}x.BaseFilterFactory=W;class _{constructor(){this.constructor===_&&(0,R.unreachable)("Cannot initialize BaseCanvasFactory.")}create(O,ft){if(O<=0||ft<=0)throw new Error("Invalid canvas size");const lt=this._createCanvas(O,ft);return{canvas:lt,context:lt.getContext("2d")}}reset(O,ft,lt){if(!O.canvas)throw new Error("Canvas is not specified");if(ft<=0||lt<=0)throw new Error("Invalid canvas size");O.canvas.width=ft,O.canvas.height=lt}destroy(O){if(!O.canvas)throw new Error("Canvas is not specified");O.canvas.width=0,O.canvas.height=0,O.canvas=null,O.context=null}_createCanvas(O,ft){(0,R.unreachable)("Abstract method `_createCanvas` called.")}}x.BaseCanvasFactory=_;class bt{constructor({baseUrl:O=null,isCompressed:ft=!0}){this.constructor===bt&&(0,R.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=O,this.isCompressed=ft}async fetch({name:O}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!O)throw new Error("CMap name must be specified.");const ft=this.baseUrl+O+(this.isCompressed?".bcmap":""),lt=this.isCompressed?R.CMapCompressionType.BINARY:R.CMapCompressionType.NONE;return this._fetchData(ft,lt).catch(q=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ft}`)})}_fetchData(O,ft){(0,R.unreachable)("Abstract method `_fetchData` called.")}}x.BaseCMapReaderFactory=bt;class zt{constructor({baseUrl:O=null}){this.constructor===zt&&(0,R.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=O}async fetch({filename:O}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!O)throw new Error("Font filename must be specified.");const ft=`${this.baseUrl}${O}`;return this._fetchData(ft).catch(lt=>{throw new Error(`Unable to load font data at: ${ft}`)})}_fetchData(O){(0,R.unreachable)("Abstract method `_fetchData` called.")}}x.BaseStandardFontDataFactory=zt;class pt{constructor(){this.constructor===pt&&(0,R.unreachable)("Cannot initialize BaseSVGFactory.")}create(O,ft,lt=!1){if(O<=0||ft<=0)throw new Error("Invalid SVG dimensions");const q=this._createSVG("svg:svg");return q.setAttribute("version","1.1"),lt||(q.setAttribute("width",`${O}px`),q.setAttribute("height",`${ft}px`)),q.setAttribute("preserveAspectRatio","none"),q.setAttribute("viewBox",`0 0 ${O} ${ft}`),q}createElement(O){if(typeof O!="string")throw new Error("Invalid SVG element type");return this._createSVG(O)}_createSVG(O){(0,R.unreachable)("Abstract method `_createSVG` called.")}}x.BaseSVGFactory=pt},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.MurmurHash3_64=void 0;var R=vt(1);const W=3285377520,_=4294901760,bt=65535;class zt{constructor(nt){this.h1=nt?nt&4294967295:W,this.h2=nt?nt&4294967295:W}update(nt){let O,ft;if(typeof nt=="string"){O=new Uint8Array(nt.length*2),ft=0;for(let L=0,N=nt.length;L<N;L++){const j=nt.charCodeAt(L);j<=255?O[ft++]=j:(O[ft++]=j>>>8,O[ft++]=j&255)}}else if((0,R.isArrayBuffer)(nt))O=nt.slice(),ft=O.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const lt=ft>>2,q=ft-lt*4,V=new Uint32Array(O.buffer,0,lt);let et=0,G=0,U=this.h1,Y=this.h2;const dt=3432918353,J=461845907,F=dt&bt,B=J&bt;for(let L=0;L<lt;L++)L&1?(et=V[L],et=et*dt&_|et*F&bt,et=et<<15|et>>>17,et=et*J&_|et*B&bt,U^=et,U=U<<13|U>>>19,U=U*5+3864292196):(G=V[L],G=G*dt&_|G*F&bt,G=G<<15|G>>>17,G=G*J&_|G*B&bt,Y^=G,Y=Y<<13|Y>>>19,Y=Y*5+3864292196);switch(et=0,q){case 3:et^=O[lt*4+2]<<16;case 2:et^=O[lt*4+1]<<8;case 1:et^=O[lt*4],et=et*dt&_|et*F&bt,et=et<<15|et>>>17,et=et*J&_|et*B&bt,lt&1?U^=et:Y^=et}this.h1=U,this.h2=Y}hexdigest(){let nt=this.h1,O=this.h2;return nt^=O>>>1,nt=nt*3981806797&_|nt*36045&bt,O=O*4283543511&_|((O<<16|nt>>>16)*2950163797&_)>>>16,nt^=O>>>1,nt=nt*444984403&_|nt*60499&bt,O=O*3301882366&_|((O<<16|nt>>>16)*3120437893&_)>>>16,nt^=O>>>1,(nt>>>0).toString(16).padStart(8,"0")+(O>>>0).toString(16).padStart(8,"0")}}x.MurmurHash3_64=zt},(A,x,vt)=>{var bt;Object.defineProperty(x,"__esModule",{value:!0}),x.FontLoader=x.FontFaceObject=void 0;var R=vt(1);class W{constructor({ownerDocument:pt=globalThis.document,styleElement:nt=null}){Wt(this,bt,new Set);this._document=pt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(pt){this.nativeFontFaces.add(pt),this._document.fonts.add(pt)}removeNativeFontFace(pt){this.nativeFontFaces.delete(pt),this._document.fonts.delete(pt)}insertRule(pt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const nt=this.styleElement.sheet;nt.insertRule(pt,nt.cssRules.length)}clear(){for(const pt of this.nativeFontFaces)this._document.fonts.delete(pt);this.nativeFontFaces.clear(),y(this,bt).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(pt){if(!(!pt||y(this,bt).has(pt.loadedName))){if((0,R.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:nt,src:O,style:ft}=pt,lt=new FontFace(nt,O,ft);this.addNativeFontFace(lt);try{await lt.load(),y(this,bt).add(nt)}catch{(0,R.warn)(`Cannot load system font: ${pt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(lt)}return}(0,R.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(pt){if(pt.attached||pt.missingFile&&!pt.systemFontInfo)return;if(pt.attached=!0,pt.systemFontInfo){await this.loadSystemFont(pt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const O=pt.createNativeFontFace();if(O){this.addNativeFontFace(O);try{await O.loaded}catch(ft){throw(0,R.warn)(`Failed to load font '${O.family}': '${ft}'.`),pt.disableFontFace=!0,ft}}return}const nt=pt.createFontFaceRule();if(nt){if(this.insertRule(nt),this.isSyncFontLoadingSupported)return;await new Promise(O=>{const ft=this._queueLoadingCallback(O);this._prepareFontLoadEvent(pt,ft)})}}get isFontLoadingAPISupported(){var nt;const pt=!!((nt=this._document)!=null&&nt.fonts);return(0,R.shadow)(this,"isFontLoadingAPISupported",pt)}get isSyncFontLoadingSupported(){let pt=!1;return(R.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(pt=!0),(0,R.shadow)(this,"isSyncFontLoadingSupported",pt)}_queueLoadingCallback(pt){function nt(){for((0,R.assert)(!ft.done,"completeRequest() cannot be called twice."),ft.done=!0;O.length>0&&O[0].done;){const lt=O.shift();setTimeout(lt.callback,0)}}const{loadingRequests:O}=this,ft={done:!1,complete:nt,callback:pt};return O.push(ft),ft}get _loadTestFont(){const pt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,R.shadow)(this,"_loadTestFont",pt)}_prepareFontLoadEvent(pt,nt){function O(D,K){return D.charCodeAt(K)<<24|D.charCodeAt(K+1)<<16|D.charCodeAt(K+2)<<8|D.charCodeAt(K+3)&255}function ft(D,K,ct,Gt){const wt=D.substring(0,K),Mt=D.substring(K+ct);return wt+Gt+Mt}let lt,q;const V=this._document.createElement("canvas");V.width=1,V.height=1;const et=V.getContext("2d");let G=0;function U(D,K){if(++G>30){(0,R.warn)("Load test font never loaded."),K();return}if(et.font="30px "+D,et.fillText(".",0,20),et.getImageData(0,0,1,1).data[3]>0){K();return}setTimeout(U.bind(null,D,K))}const Y=`lt${Date.now()}${this.loadTestFontId++}`;let dt=this._loadTestFont;dt=ft(dt,976,Y.length,Y);const F=16,B=1482184792;let L=O(dt,F);for(lt=0,q=Y.length-3;lt<q;lt+=4)L=L-B+O(Y,lt)|0;lt<Y.length&&(L=L-B+O(Y+"XXX",lt)|0),dt=ft(dt,F,4,(0,R.string32)(L));const N=`url(data:font/opentype;base64,${btoa(dt)});`,j=`@font-face {font-family:"${Y}";src:${N}}`;this.insertRule(j);const ht=this._document.createElement("div");ht.style.visibility="hidden",ht.style.width=ht.style.height="10px",ht.style.position="absolute",ht.style.top=ht.style.left="0px";for(const D of[pt.loadedName,Y]){const K=this._document.createElement("span");K.textContent="Hi",K.style.fontFamily=D,ht.append(K)}this._document.body.append(ht),U(Y,()=>{ht.remove(),nt.complete()})}}bt=new WeakMap,x.FontLoader=W;class _{constructor(pt,{isEvalSupported:nt=!0,disableFontFace:O=!1,ignoreErrors:ft=!1,inspectFont:lt=null}){this.compiledGlyphs=Object.create(null);for(const q in pt)this[q]=pt[q];this.isEvalSupported=nt!==!1,this.disableFontFace=O===!0,this.ignoreErrors=ft===!0,this._inspectFont=lt}createNativeFontFace(){var nt;if(!this.data||this.disableFontFace)return null;let pt;if(!this.cssFontInfo)pt=new FontFace(this.loadedName,this.data,{});else{const O={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(O.style=`oblique ${this.cssFontInfo.italicAngle}deg`),pt=new FontFace(this.cssFontInfo.fontFamily,this.data,O)}return(nt=this._inspectFont)==null||nt.call(this,this),pt}createFontFaceRule(){var ft;if(!this.data||this.disableFontFace)return null;const pt=(0,R.bytesToString)(this.data),nt=`url(data:${this.mimetype};base64,${btoa(pt)});`;let O;if(!this.cssFontInfo)O=`@font-face {font-family:"${this.loadedName}";src:${nt}}`;else{let lt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(lt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),O=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${lt}src:${nt}}`}return(ft=this._inspectFont)==null||ft.call(this,this,nt),O}getPathGenerator(pt,nt){if(this.compiledGlyphs[nt]!==void 0)return this.compiledGlyphs[nt];let O;try{O=pt.get(this.loadedName+"_path_"+nt)}catch(ft){if(!this.ignoreErrors)throw ft;return(0,R.warn)(`getPathGenerator - ignoring character: "${ft}".`),this.compiledGlyphs[nt]=function(lt,q){}}if(this.isEvalSupported&&R.FeatureTest.isEvalSupported){const ft=[];for(const lt of O){const q=lt.args!==void 0?lt.args.join(","):"";ft.push("c.",lt.cmd,"(",q,`);
`)}return this.compiledGlyphs[nt]=new Function("c","size",ft.join(""))}return this.compiledGlyphs[nt]=function(ft,lt){for(const q of O)q.cmd==="scale"&&(q.args=[lt,-lt]),ft[q.cmd].apply(ft,q.args)}}}x.FontFaceObject=_},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.NodeStandardFontDataFactory=x.NodeFilterFactory=x.NodeCanvasFactory=x.NodeCMapReaderFactory=void 0;var R=vt(7);vt(1);const W=function(nt){return new Promise((O,ft)=>{require$$0.readFile(nt,(q,V)=>{if(q||!V){ft(new Error(q));return}O(new Uint8Array(V))})})};class _ extends R.BaseFilterFactory{}x.NodeFilterFactory=_;class bt extends R.BaseCanvasFactory{_createCanvas(O,ft){return require$$0.createCanvas(O,ft)}}x.NodeCanvasFactory=bt;class zt extends R.BaseCMapReaderFactory{_fetchData(O,ft){return W(O).then(lt=>({cMapData:lt,compressionType:ft}))}}x.NodeCMapReaderFactory=zt;class pt extends R.BaseStandardFontDataFactory{_fetchData(O){return W(O)}}x.NodeStandardFontDataFactory=pt},(A,x,vt)=>{var qt,br,vr;Object.defineProperty(x,"__esModule",{value:!0}),x.CanvasGraphics=void 0;var R=vt(1),W=vt(6),_=vt(12),bt=vt(13);const zt=16,pt=100,nt=4096,O=15,ft=10,lt=1e3,q=16;function V(tt,T){if(tt._removeMirroring)throw new Error("Context is already forwarding operations.");tt.__originalSave=tt.save,tt.__originalRestore=tt.restore,tt.__originalRotate=tt.rotate,tt.__originalScale=tt.scale,tt.__originalTranslate=tt.translate,tt.__originalTransform=tt.transform,tt.__originalSetTransform=tt.setTransform,tt.__originalResetTransform=tt.resetTransform,tt.__originalClip=tt.clip,tt.__originalMoveTo=tt.moveTo,tt.__originalLineTo=tt.lineTo,tt.__originalBezierCurveTo=tt.bezierCurveTo,tt.__originalRect=tt.rect,tt.__originalClosePath=tt.closePath,tt.__originalBeginPath=tt.beginPath,tt._removeMirroring=()=>{tt.save=tt.__originalSave,tt.restore=tt.__originalRestore,tt.rotate=tt.__originalRotate,tt.scale=tt.__originalScale,tt.translate=tt.__originalTranslate,tt.transform=tt.__originalTransform,tt.setTransform=tt.__originalSetTransform,tt.resetTransform=tt.__originalResetTransform,tt.clip=tt.__originalClip,tt.moveTo=tt.__originalMoveTo,tt.lineTo=tt.__originalLineTo,tt.bezierCurveTo=tt.__originalBezierCurveTo,tt.rect=tt.__originalRect,tt.closePath=tt.__originalClosePath,tt.beginPath=tt.__originalBeginPath,delete tt._removeMirroring},tt.save=function(){T.save(),this.__originalSave()},tt.restore=function(){T.restore(),this.__originalRestore()},tt.translate=function($,at){T.translate($,at),this.__originalTranslate($,at)},tt.scale=function($,at){T.scale($,at),this.__originalScale($,at)},tt.transform=function($,at,ot,st,xt,$t){T.transform($,at,ot,st,xt,$t),this.__originalTransform($,at,ot,st,xt,$t)},tt.setTransform=function($,at,ot,st,xt,$t){T.setTransform($,at,ot,st,xt,$t),this.__originalSetTransform($,at,ot,st,xt,$t)},tt.resetTransform=function(){T.resetTransform(),this.__originalResetTransform()},tt.rotate=function($){T.rotate($),this.__originalRotate($)},tt.clip=function($){T.clip($),this.__originalClip($)},tt.moveTo=function(P,$){T.moveTo(P,$),this.__originalMoveTo(P,$)},tt.lineTo=function(P,$){T.lineTo(P,$),this.__originalLineTo(P,$)},tt.bezierCurveTo=function(P,$,at,ot,st,xt){T.bezierCurveTo(P,$,at,ot,st,xt),this.__originalBezierCurveTo(P,$,at,ot,st,xt)},tt.rect=function(P,$,at,ot){T.rect(P,$,at,ot),this.__originalRect(P,$,at,ot)},tt.closePath=function(){T.closePath(),this.__originalClosePath()},tt.beginPath=function(){T.beginPath(),this.__originalBeginPath()}}class et{constructor(T){this.canvasFactory=T,this.cache=Object.create(null)}getCanvas(T,P,$){let at;return this.cache[T]!==void 0?(at=this.cache[T],this.canvasFactory.reset(at,P,$)):(at=this.canvasFactory.create(P,$),this.cache[T]=at),at}delete(T){delete this.cache[T]}clear(){for(const T in this.cache){const P=this.cache[T];this.canvasFactory.destroy(P),delete this.cache[T]}}}function G(tt,T,P,$,at,ot,st,xt,$t,Kt){const[Zt,te,re,se,Nt,Bt]=(0,W.getCurrentTransform)(tt);if(te===0&&re===0){const kt=st*Zt+Nt,Ht=Math.round(kt),Jt=xt*se+Bt,ae=Math.round(Jt),ne=(st+$t)*Zt+Nt,Rt=Math.abs(Math.round(ne)-Ht)||1,ge=(xt+Kt)*se+Bt,de=Math.abs(Math.round(ge)-ae)||1;return tt.setTransform(Math.sign(Zt),0,0,Math.sign(se),Ht,ae),tt.drawImage(T,P,$,at,ot,0,0,Rt,de),tt.setTransform(Zt,te,re,se,Nt,Bt),[Rt,de]}if(Zt===0&&se===0){const kt=xt*re+Nt,Ht=Math.round(kt),Jt=st*te+Bt,ae=Math.round(Jt),ne=(xt+Kt)*re+Nt,Rt=Math.abs(Math.round(ne)-Ht)||1,ge=(st+$t)*te+Bt,de=Math.abs(Math.round(ge)-ae)||1;return tt.setTransform(0,Math.sign(te),Math.sign(re),0,Ht,ae),tt.drawImage(T,P,$,at,ot,0,0,de,Rt),tt.setTransform(Zt,te,re,se,Nt,Bt),[de,Rt]}tt.drawImage(T,P,$,at,ot,st,xt,$t,Kt);const X=Math.hypot(Zt,te),ut=Math.hypot(re,se);return[X*$t,ut*Kt]}function U(tt){const{width:T,height:P}=tt;if(T>lt||P>lt)return null;const $=1e3,at=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ot=T+1;let st=new Uint8Array(ot*(P+1)),xt,$t,Kt;const Zt=T+7&-8;let te=new Uint8Array(Zt*P),re=0;for(const ut of tt.data){let kt=128;for(;kt>0;)te[re++]=ut&kt?0:255,kt>>=1}let se=0;for(re=0,te[re]!==0&&(st[0]=1,++se),$t=1;$t<T;$t++)te[re]!==te[re+1]&&(st[$t]=te[re]?2:1,++se),re++;for(te[re]!==0&&(st[$t]=2,++se),xt=1;xt<P;xt++){re=xt*Zt,Kt=xt*ot,te[re-Zt]!==te[re]&&(st[Kt]=te[re]?1:8,++se);let ut=(te[re]?4:0)+(te[re-Zt]?8:0);for($t=1;$t<T;$t++)ut=(ut>>2)+(te[re+1]?4:0)+(te[re-Zt+1]?8:0),at[ut]&&(st[Kt+$t]=at[ut],++se),re++;if(te[re-Zt]!==te[re]&&(st[Kt+$t]=te[re]?2:4,++se),se>$)return null}for(re=Zt*(P-1),Kt=xt*ot,te[re]!==0&&(st[Kt]=8,++se),$t=1;$t<T;$t++)te[re]!==te[re+1]&&(st[Kt+$t]=te[re]?4:8,++se),re++;if(te[re]!==0&&(st[Kt+$t]=4,++se),se>$)return null;const Nt=new Int32Array([0,ot,-1,0,-ot,0,0,0,1]),Bt=new Path2D;for(xt=0;se&&xt<=P;xt++){let ut=xt*ot;const kt=ut+T;for(;ut<kt&&!st[ut];)ut++;if(ut===kt)continue;Bt.moveTo(ut%ot,xt);const Ht=ut;let Jt=st[ut];do{const ae=Nt[Jt];do ut+=ae;while(!st[ut]);const ne=st[ut];ne!==5&&ne!==10?(Jt=ne,st[ut]=0):(Jt=ne&51*Jt>>4,st[ut]&=Jt>>2|Jt<<2),Bt.lineTo(ut%ot,ut/ot|0),st[ut]||--se}while(Ht!==ut);--xt}return te=null,st=null,function(ut){ut.save(),ut.scale(1/T,-1/P),ut.translate(0,-P),ut.fill(Bt),ut.beginPath(),ut.restore()}}class Y{constructor(T,P){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=R.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=R.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=R.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,T,P])}clone(){const T=Object.create(this);return T.clipBox=this.clipBox.slice(),T}setCurrentPoint(T,P){this.x=T,this.y=P}updatePathMinMax(T,P,$){[P,$]=R.Util.applyTransform([P,$],T),this.minX=Math.min(this.minX,P),this.minY=Math.min(this.minY,$),this.maxX=Math.max(this.maxX,P),this.maxY=Math.max(this.maxY,$)}updateRectMinMax(T,P){const $=R.Util.applyTransform(P,T),at=R.Util.applyTransform(P.slice(2),T);this.minX=Math.min(this.minX,$[0],at[0]),this.minY=Math.min(this.minY,$[1],at[1]),this.maxX=Math.max(this.maxX,$[0],at[0]),this.maxY=Math.max(this.maxY,$[1],at[1])}updateScalingPathMinMax(T,P){R.Util.scaleMinMax(T,P),this.minX=Math.min(this.minX,P[0]),this.maxX=Math.max(this.maxX,P[1]),this.minY=Math.min(this.minY,P[2]),this.maxY=Math.max(this.maxY,P[3])}updateCurvePathMinMax(T,P,$,at,ot,st,xt,$t,Kt,Zt){const te=R.Util.bezierBoundingBox(P,$,at,ot,st,xt,$t,Kt);if(Zt){Zt[0]=Math.min(Zt[0],te[0],te[2]),Zt[1]=Math.max(Zt[1],te[0],te[2]),Zt[2]=Math.min(Zt[2],te[1],te[3]),Zt[3]=Math.max(Zt[3],te[1],te[3]);return}this.updateRectMinMax(T,te)}getPathBoundingBox(T=_.PathType.FILL,P=null){const $=[this.minX,this.minY,this.maxX,this.maxY];if(T===_.PathType.STROKE){P||(0,R.unreachable)("Stroke bounding box must include transform.");const at=R.Util.singularValueDecompose2dScale(P),ot=at[0]*this.lineWidth/2,st=at[1]*this.lineWidth/2;$[0]-=ot,$[1]-=st,$[2]+=ot,$[3]+=st}return $}updateClipFromPath(){const T=R.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(T||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(T){this.clipBox=T,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(T=_.PathType.FILL,P=null){return R.Util.intersect(this.clipBox,this.getPathBoundingBox(T,P))}}function dt(tt,T){if(typeof ImageData<"u"&&T instanceof ImageData){tt.putImageData(T,0,0);return}const P=T.height,$=T.width,at=P%q,ot=(P-at)/q,st=at===0?ot:ot+1,xt=tt.createImageData($,q);let $t=0,Kt;const Zt=T.data,te=xt.data;let re,se,Nt,Bt;if(T.kind===R.ImageKind.GRAYSCALE_1BPP){const X=Zt.byteLength,ut=new Uint32Array(te.buffer,0,te.byteLength>>2),kt=ut.length,Ht=$+7>>3,Jt=4294967295,ae=R.FeatureTest.isLittleEndian?4278190080:255;for(re=0;re<st;re++){for(Nt=re<ot?q:at,Kt=0,se=0;se<Nt;se++){const ne=X-$t;let Rt=0;const ge=ne>Ht?$:ne*8-7,de=ge&-8;let ze=0,Ie=0;for(;Rt<de;Rt+=8)Ie=Zt[$t++],ut[Kt++]=Ie&128?Jt:ae,ut[Kt++]=Ie&64?Jt:ae,ut[Kt++]=Ie&32?Jt:ae,ut[Kt++]=Ie&16?Jt:ae,ut[Kt++]=Ie&8?Jt:ae,ut[Kt++]=Ie&4?Jt:ae,ut[Kt++]=Ie&2?Jt:ae,ut[Kt++]=Ie&1?Jt:ae;for(;Rt<ge;Rt++)ze===0&&(Ie=Zt[$t++],ze=128),ut[Kt++]=Ie&ze?Jt:ae,ze>>=1}for(;Kt<kt;)ut[Kt++]=0;tt.putImageData(xt,0,re*q)}}else if(T.kind===R.ImageKind.RGBA_32BPP){for(se=0,Bt=$*q*4,re=0;re<ot;re++)te.set(Zt.subarray($t,$t+Bt)),$t+=Bt,tt.putImageData(xt,0,se),se+=q;re<st&&(Bt=$*at*4,te.set(Zt.subarray($t,$t+Bt)),tt.putImageData(xt,0,se))}else if(T.kind===R.ImageKind.RGB_24BPP)for(Nt=q,Bt=$*Nt,re=0;re<st;re++){for(re>=ot&&(Nt=at,Bt=$*Nt),Kt=0,se=Bt;se--;)te[Kt++]=Zt[$t++],te[Kt++]=Zt[$t++],te[Kt++]=Zt[$t++],te[Kt++]=255;tt.putImageData(xt,0,re*q)}else throw new Error(`bad image kind: ${T.kind}`)}function J(tt,T){if(T.bitmap){tt.drawImage(T.bitmap,0,0);return}const P=T.height,$=T.width,at=P%q,ot=(P-at)/q,st=at===0?ot:ot+1,xt=tt.createImageData($,q);let $t=0;const Kt=T.data,Zt=xt.data;for(let te=0;te<st;te++){const re=te<ot?q:at;({srcPos:$t}=(0,bt.convertBlackAndWhiteToRGBA)({src:Kt,srcPos:$t,dest:Zt,width:$,height:re,nonBlackColor:0})),tt.putImageData(xt,0,te*q)}}function F(tt,T){const P=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const $ of P)tt[$]!==void 0&&(T[$]=tt[$]);tt.setLineDash!==void 0&&(T.setLineDash(tt.getLineDash()),T.lineDashOffset=tt.lineDashOffset)}function B(tt){if(tt.strokeStyle=tt.fillStyle="#000000",tt.fillRule="nonzero",tt.globalAlpha=1,tt.lineWidth=1,tt.lineCap="butt",tt.lineJoin="miter",tt.miterLimit=10,tt.globalCompositeOperation="source-over",tt.font="10px sans-serif",tt.setLineDash!==void 0&&(tt.setLineDash([]),tt.lineDashOffset=0),!R.isNodeJS){const{filter:T}=tt;T!=="none"&&T!==""&&(tt.filter="none")}}function L(tt,T,P,$){const at=tt.length;for(let ot=3;ot<at;ot+=4){const st=tt[ot];if(st===0)tt[ot-3]=T,tt[ot-2]=P,tt[ot-1]=$;else if(st<255){const xt=255-st;tt[ot-3]=tt[ot-3]*st+T*xt>>8,tt[ot-2]=tt[ot-2]*st+P*xt>>8,tt[ot-1]=tt[ot-1]*st+$*xt>>8}}}function N(tt,T,P){const $=tt.length,at=1/255;for(let ot=3;ot<$;ot+=4){const st=P?P[tt[ot]]:tt[ot];T[ot]=T[ot]*st*at|0}}function j(tt,T,P){const $=tt.length;for(let at=3;at<$;at+=4){const ot=tt[at-3]*77+tt[at-2]*152+tt[at-1]*28;T[at]=P?T[at]*P[ot>>8]>>8:T[at]*ot>>16}}function ht(tt,T,P,$,at,ot,st,xt,$t,Kt,Zt){const te=!!ot,re=te?ot[0]:0,se=te?ot[1]:0,Nt=te?ot[2]:0,Bt=at==="Luminosity"?j:N,ut=Math.min($,Math.ceil(1048576/P));for(let kt=0;kt<$;kt+=ut){const Ht=Math.min(ut,$-kt),Jt=tt.getImageData(xt-Kt,kt+($t-Zt),P,Ht),ae=T.getImageData(xt,kt+$t,P,Ht);te&&L(Jt.data,re,se,Nt),Bt(Jt.data,ae.data,st),T.putImageData(ae,xt,kt+$t)}}function D(tt,T,P,$){const at=$[0],ot=$[1],st=$[2]-at,xt=$[3]-ot;st===0||xt===0||(ht(T.context,P,st,xt,T.subtype,T.backdrop,T.transferMap,at,ot,T.offsetX,T.offsetY),tt.save(),tt.globalAlpha=1,tt.globalCompositeOperation="source-over",tt.setTransform(1,0,0,1,0,0),tt.drawImage(P.canvas,0,0),tt.restore())}function K(tt,T){const P=R.Util.singularValueDecompose2dScale(tt);P[0]=Math.fround(P[0]),P[1]=Math.fround(P[1]);const $=Math.fround((globalThis.devicePixelRatio||1)*W.PixelsPerInch.PDF_TO_CSS_UNITS);return T!==void 0?T:P[0]<=$||P[1]<=$}const ct=["butt","round","square"],Gt=["miter","round","bevel"],wt={},Mt={},Ot=class Ot{constructor(T,P,$,at,ot,{optionalContentConfig:st,markedContentStack:xt=null},$t,Kt){Wt(this,qt);this.ctx=T,this.current=new Y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=P,this.objs=$,this.canvasFactory=at,this.filterFactory=ot,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=xt||[],this.optionalContentConfig=st,this.cachedCanvases=new et(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=$t,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(T,P=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):P}beginDrawing({transform:T,viewport:P,transparency:$=!1,background:at=null}){const ot=this.ctx.canvas.width,st=this.ctx.canvas.height,xt=this.ctx.fillStyle;if(this.ctx.fillStyle=at||"#ffffff",this.ctx.fillRect(0,0,ot,st),this.ctx.fillStyle=xt,$){const $t=this.cachedCanvases.getCanvas("transparent",ot,st);this.compositeCtx=this.ctx,this.transparentCanvas=$t.canvas,this.ctx=$t.context,this.ctx.save(),this.ctx.transform(...(0,W.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),B(this.ctx),T&&(this.ctx.transform(...T),this.outputScaleX=T[0],this.outputScaleY=T[0]),this.ctx.transform(...P.transform),this.viewportScale=P.scale,this.baseTransform=(0,W.getCurrentTransform)(this.ctx)}executeOperatorList(T,P,$,at){const ot=T.argsArray,st=T.fnArray;let xt=P||0;const $t=ot.length;if($t===xt)return xt;const Kt=$t-xt>ft&&typeof $=="function",Zt=Kt?Date.now()+O:0;let te=0;const re=this.commonObjs,se=this.objs;let Nt;for(;;){if(at!==void 0&&xt===at.nextBreakPoint)return at.breakIt(xt,$),xt;if(Nt=st[xt],Nt!==R.OPS.dependency)this[Nt].apply(this,ot[xt]);else for(const Bt of ot[xt]){const X=Bt.startsWith("g_")?re:se;if(!X.has(Bt))return X.get(Bt,$),xt}if(xt++,xt===$t)return xt;if(Kt&&++te>ft){if(Date.now()>Zt)return $(),xt;te=0}}}endDrawing(){Pt(this,qt,br).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const T of this._cachedBitmapsMap.values()){for(const P of T.values())typeof HTMLCanvasElement<"u"&&P instanceof HTMLCanvasElement&&(P.width=P.height=0);T.clear()}this._cachedBitmapsMap.clear(),Pt(this,qt,vr).call(this)}_scaleImage(T,P){const $=T.width,at=T.height;let ot=Math.max(Math.hypot(P[0],P[1]),1),st=Math.max(Math.hypot(P[2],P[3]),1),xt=$,$t=at,Kt="prescale1",Zt,te;for(;ot>2&&xt>1||st>2&&$t>1;){let re=xt,se=$t;ot>2&&xt>1&&(re=xt>=16384?Math.floor(xt/2)-1||1:Math.ceil(xt/2),ot/=xt/re),st>2&&$t>1&&(se=$t>=16384?Math.floor($t/2)-1||1:Math.ceil($t)/2,st/=$t/se),Zt=this.cachedCanvases.getCanvas(Kt,re,se),te=Zt.context,te.clearRect(0,0,re,se),te.drawImage(T,0,0,xt,$t,0,0,re,se),T=Zt.canvas,xt=re,$t=se,Kt=Kt==="prescale1"?"prescale2":"prescale1"}return{img:T,paintWidth:xt,paintHeight:$t}}_createMaskCanvas(T){const P=this.ctx,{width:$,height:at}=T,ot=this.current.fillColor,st=this.current.patternFill,xt=(0,W.getCurrentTransform)(P);let $t,Kt,Zt,te;if((T.bitmap||T.data)&&T.count>1){const Rt=T.bitmap||T.data.buffer;Kt=JSON.stringify(st?xt:[xt.slice(0,4),ot]),$t=this._cachedBitmapsMap.get(Rt),$t||($t=new Map,this._cachedBitmapsMap.set(Rt,$t));const ge=$t.get(Kt);if(ge&&!st){const de=Math.round(Math.min(xt[0],xt[2])+xt[4]),ze=Math.round(Math.min(xt[1],xt[3])+xt[5]);return{canvas:ge,offsetX:de,offsetY:ze}}Zt=ge}Zt||(te=this.cachedCanvases.getCanvas("maskCanvas",$,at),J(te.context,T));let re=R.Util.transform(xt,[1/$,0,0,-1/at,0,0]);re=R.Util.transform(re,[1,0,0,1,0,-at]);const se=R.Util.applyTransform([0,0],re),Nt=R.Util.applyTransform([$,at],re),Bt=R.Util.normalizeRect([se[0],se[1],Nt[0],Nt[1]]),X=Math.round(Bt[2]-Bt[0])||1,ut=Math.round(Bt[3]-Bt[1])||1,kt=this.cachedCanvases.getCanvas("fillCanvas",X,ut),Ht=kt.context,Jt=Math.min(se[0],Nt[0]),ae=Math.min(se[1],Nt[1]);Ht.translate(-Jt,-ae),Ht.transform(...re),Zt||(Zt=this._scaleImage(te.canvas,(0,W.getCurrentTransformInverse)(Ht)),Zt=Zt.img,$t&&st&&$t.set(Kt,Zt)),Ht.imageSmoothingEnabled=K((0,W.getCurrentTransform)(Ht),T.interpolate),G(Ht,Zt,0,0,Zt.width,Zt.height,0,0,$,at),Ht.globalCompositeOperation="source-in";const ne=R.Util.transform((0,W.getCurrentTransformInverse)(Ht),[1,0,0,1,-Jt,-ae]);return Ht.fillStyle=st?ot.getPattern(P,this,ne,_.PathType.FILL):ot,Ht.fillRect(0,0,$,at),$t&&!st&&(this.cachedCanvases.delete("fillCanvas"),$t.set(Kt,kt.canvas)),{canvas:kt.canvas,offsetX:Math.round(Jt),offsetY:Math.round(ae)}}setLineWidth(T){T!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=T,this.ctx.lineWidth=T}setLineCap(T){this.ctx.lineCap=ct[T]}setLineJoin(T){this.ctx.lineJoin=Gt[T]}setMiterLimit(T){this.ctx.miterLimit=T}setDash(T,P){const $=this.ctx;$.setLineDash!==void 0&&($.setLineDash(T),$.lineDashOffset=P)}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[P,$]of T)switch(P){case"LW":this.setLineWidth($);break;case"LC":this.setLineCap($);break;case"LJ":this.setLineJoin($);break;case"ML":this.setMiterLimit($);break;case"D":this.setDash($[0],$[1]);break;case"RI":this.setRenderingIntent($);break;case"FL":this.setFlatness($);break;case"Font":this.setFont($[0],$[1]);break;case"CA":this.current.strokeAlpha=$;break;case"ca":this.current.fillAlpha=$,this.ctx.globalAlpha=$;break;case"BM":this.ctx.globalCompositeOperation=$;break;case"SMask":this.current.activeSMask=$?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter($);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const T=this.inSMaskMode;this.current.activeSMask&&!T?this.beginSMaskMode():!this.current.activeSMask&&T&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.ctx.canvas.width,P=this.ctx.canvas.height,$="smaskGroupAt"+this.groupLevel,at=this.cachedCanvases.getCanvas($,T,P);this.suspendedCtx=this.ctx,this.ctx=at.context;const ot=this.ctx;ot.setTransform(...(0,W.getCurrentTransform)(this.suspendedCtx)),F(this.suspendedCtx,ot),V(ot,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),F(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(T){if(!this.current.activeSMask)return;T?(T[0]=Math.floor(T[0]),T[1]=Math.floor(T[1]),T[2]=Math.ceil(T[2]),T[3]=Math.ceil(T[3])):T=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const P=this.current.activeSMask,$=this.suspendedCtx;D($,P,this.ctx,T),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(F(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const T=this.current;this.stateStack.push(T),this.current=T.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),F(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(T,P,$,at,ot,st){this.ctx.transform(T,P,$,at,ot,st),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(T,P,$){const at=this.ctx,ot=this.current;let st=ot.x,xt=ot.y,$t,Kt;const Zt=(0,W.getCurrentTransform)(at),te=Zt[0]===0&&Zt[3]===0||Zt[1]===0&&Zt[2]===0,re=te?$.slice(0):null;for(let se=0,Nt=0,Bt=T.length;se<Bt;se++)switch(T[se]|0){case R.OPS.rectangle:st=P[Nt++],xt=P[Nt++];const X=P[Nt++],ut=P[Nt++],kt=st+X,Ht=xt+ut;at.moveTo(st,xt),X===0||ut===0?at.lineTo(kt,Ht):(at.lineTo(kt,xt),at.lineTo(kt,Ht),at.lineTo(st,Ht)),te||ot.updateRectMinMax(Zt,[st,xt,kt,Ht]),at.closePath();break;case R.OPS.moveTo:st=P[Nt++],xt=P[Nt++],at.moveTo(st,xt),te||ot.updatePathMinMax(Zt,st,xt);break;case R.OPS.lineTo:st=P[Nt++],xt=P[Nt++],at.lineTo(st,xt),te||ot.updatePathMinMax(Zt,st,xt);break;case R.OPS.curveTo:$t=st,Kt=xt,st=P[Nt+4],xt=P[Nt+5],at.bezierCurveTo(P[Nt],P[Nt+1],P[Nt+2],P[Nt+3],st,xt),ot.updateCurvePathMinMax(Zt,$t,Kt,P[Nt],P[Nt+1],P[Nt+2],P[Nt+3],st,xt,re),Nt+=6;break;case R.OPS.curveTo2:$t=st,Kt=xt,at.bezierCurveTo(st,xt,P[Nt],P[Nt+1],P[Nt+2],P[Nt+3]),ot.updateCurvePathMinMax(Zt,$t,Kt,st,xt,P[Nt],P[Nt+1],P[Nt+2],P[Nt+3],re),st=P[Nt+2],xt=P[Nt+3],Nt+=4;break;case R.OPS.curveTo3:$t=st,Kt=xt,st=P[Nt+2],xt=P[Nt+3],at.bezierCurveTo(P[Nt],P[Nt+1],st,xt,st,xt),ot.updateCurvePathMinMax(Zt,$t,Kt,P[Nt],P[Nt+1],st,xt,st,xt,re),Nt+=4;break;case R.OPS.closePath:at.closePath();break}te&&ot.updateScalingPathMinMax(Zt,re),ot.setCurrentPoint(st,xt)}closePath(){this.ctx.closePath()}stroke(T=!0){const P=this.ctx,$=this.current.strokeColor;P.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof $=="object"&&($!=null&&$.getPattern)?(P.save(),P.strokeStyle=$.getPattern(P,this,(0,W.getCurrentTransformInverse)(P),_.PathType.STROKE),this.rescaleAndStroke(!1),P.restore()):this.rescaleAndStroke(!0)),T&&this.consumePath(this.current.getClippedPathBoundingBox()),P.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(T=!0){const P=this.ctx,$=this.current.fillColor,at=this.current.patternFill;let ot=!1;at&&(P.save(),P.fillStyle=$.getPattern(P,this,(0,W.getCurrentTransformInverse)(P),_.PathType.FILL),ot=!0);const st=this.current.getClippedPathBoundingBox();this.contentVisible&&st!==null&&(this.pendingEOFill?(P.fill("evenodd"),this.pendingEOFill=!1):P.fill()),ot&&P.restore(),T&&this.consumePath(st)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wt}eoClip(){this.pendingClip=Mt}beginText(){this.current.textMatrix=R.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const T=this.pendingTextPaths,P=this.ctx;if(T===void 0){P.beginPath();return}P.save(),P.beginPath();for(const $ of T)P.setTransform(...$.transform),P.translate($.x,$.y),$.addToPath(P,$.fontSize);P.restore(),P.clip(),P.beginPath(),delete this.pendingTextPaths}setCharSpacing(T){this.current.charSpacing=T}setWordSpacing(T){this.current.wordSpacing=T}setHScale(T){this.current.textHScale=T/100}setLeading(T){this.current.leading=-T}setFont(T,P){var Zt;const $=this.commonObjs.get(T),at=this.current;if(!$)throw new Error(`Can't find font for ${T}`);if(at.fontMatrix=$.fontMatrix||R.FONT_IDENTITY_MATRIX,(at.fontMatrix[0]===0||at.fontMatrix[3]===0)&&(0,R.warn)("Invalid font matrix for font "+T),P<0?(P=-P,at.fontDirection=-1):at.fontDirection=1,this.current.font=$,this.current.fontSize=P,$.isType3Font)return;const ot=$.loadedName||"sans-serif",st=((Zt=$.systemFontInfo)==null?void 0:Zt.css)||`"${ot}", ${$.fallbackName}`;let xt="normal";$.black?xt="900":$.bold&&(xt="bold");const $t=$.italic?"italic":"normal";let Kt=P;P<zt?Kt=zt:P>pt&&(Kt=pt),this.current.fontSizeScale=P/Kt,this.ctx.font=`${$t} ${xt} ${Kt}px ${st}`}setTextRenderingMode(T){this.current.textRenderingMode=T}setTextRise(T){this.current.textRise=T}moveText(T,P){this.current.x=this.current.lineX+=T,this.current.y=this.current.lineY+=P}setLeadingMoveText(T,P){this.setLeading(-P),this.moveText(T,P)}setTextMatrix(T,P,$,at,ot,st){this.current.textMatrix=[T,P,$,at,ot,st],this.current.textMatrixScale=Math.hypot(T,P),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(T,P,$,at){const ot=this.ctx,st=this.current,xt=st.font,$t=st.textRenderingMode,Kt=st.fontSize/st.fontSizeScale,Zt=$t&R.TextRenderingMode.FILL_STROKE_MASK,te=!!($t&R.TextRenderingMode.ADD_TO_PATH_FLAG),re=st.patternFill&&!xt.missingFile;let se;(xt.disableFontFace||te||re)&&(se=xt.getPathGenerator(this.commonObjs,T)),xt.disableFontFace||re?(ot.save(),ot.translate(P,$),ot.beginPath(),se(ot,Kt),at&&ot.setTransform(...at),(Zt===R.TextRenderingMode.FILL||Zt===R.TextRenderingMode.FILL_STROKE)&&ot.fill(),(Zt===R.TextRenderingMode.STROKE||Zt===R.TextRenderingMode.FILL_STROKE)&&ot.stroke(),ot.restore()):((Zt===R.TextRenderingMode.FILL||Zt===R.TextRenderingMode.FILL_STROKE)&&ot.fillText(T,P,$),(Zt===R.TextRenderingMode.STROKE||Zt===R.TextRenderingMode.FILL_STROKE)&&ot.strokeText(T,P,$)),te&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,W.getCurrentTransform)(ot),x:P,y:$,fontSize:Kt,addToPath:se})}get isFontSubpixelAAEnabled(){const{context:T}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);T.scale(1.5,1),T.fillText("I",0,10);const P=T.getImageData(0,0,10,10).data;let $=!1;for(let at=3;at<P.length;at+=4)if(P[at]>0&&P[at]<255){$=!0;break}return(0,R.shadow)(this,"isFontSubpixelAAEnabled",$)}showText(T){const P=this.current,$=P.font;if($.isType3Font)return this.showType3Text(T);const at=P.fontSize;if(at===0)return;const ot=this.ctx,st=P.fontSizeScale,xt=P.charSpacing,$t=P.wordSpacing,Kt=P.fontDirection,Zt=P.textHScale*Kt,te=T.length,re=$.vertical,se=re?1:-1,Nt=$.defaultVMetrics,Bt=at*P.fontMatrix[0],X=P.textRenderingMode===R.TextRenderingMode.FILL&&!$.disableFontFace&&!P.patternFill;ot.save(),ot.transform(...P.textMatrix),ot.translate(P.x,P.y+P.textRise),Kt>0?ot.scale(Zt,-1):ot.scale(Zt,1);let ut;if(P.patternFill){ot.save();const ne=P.fillColor.getPattern(ot,this,(0,W.getCurrentTransformInverse)(ot),_.PathType.FILL);ut=(0,W.getCurrentTransform)(ot),ot.restore(),ot.fillStyle=ne}let kt=P.lineWidth;const Ht=P.textMatrixScale;if(Ht===0||kt===0){const ne=P.textRenderingMode&R.TextRenderingMode.FILL_STROKE_MASK;(ne===R.TextRenderingMode.STROKE||ne===R.TextRenderingMode.FILL_STROKE)&&(kt=this.getSinglePixelWidth())}else kt/=Ht;if(st!==1&&(ot.scale(st,st),kt/=st),ot.lineWidth=kt,$.isInvalidPDFjsFont){const ne=[];let Rt=0;for(const ge of T)ne.push(ge.unicode),Rt+=ge.width;ot.fillText(ne.join(""),0,0),P.x+=Rt*Bt*Zt,ot.restore(),this.compose();return}let Jt=0,ae;for(ae=0;ae<te;++ae){const ne=T[ae];if(typeof ne=="number"){Jt+=se*ne*at/1e3;continue}let Rt=!1;const ge=(ne.isSpace?$t:0)+xt,de=ne.fontChar,ze=ne.accent;let Ie,Qe,Ae=ne.width;if(re){const qe=ne.vmetric||Nt,ln=-(ne.vmetric?qe[1]:Ae*.5)*Bt,ee=qe[2]*Bt;Ae=qe?-qe[0]:Ae,Ie=ln/st,Qe=(Jt+ee)/st}else Ie=Jt/st,Qe=0;if($.remeasure&&Ae>0){const qe=ot.measureText(de).width*1e3/at*st;if(Ae<qe&&this.isFontSubpixelAAEnabled){const ln=Ae/qe;Rt=!0,ot.save(),ot.scale(ln,1),Ie/=ln}else Ae!==qe&&(Ie+=(Ae-qe)/2e3*at/st)}if(this.contentVisible&&(ne.isInFont||$.missingFile)){if(X&&!ze)ot.fillText(de,Ie,Qe);else if(this.paintChar(de,Ie,Qe,ut),ze){const qe=Ie+at*ze.offset.x/st,ln=Qe-at*ze.offset.y/st;this.paintChar(ze.fontChar,qe,ln,ut)}}const ke=re?Ae*Bt-ge*Kt:Ae*Bt+ge*Kt;Jt+=ke,Rt&&ot.restore()}re?P.y-=Jt:P.x+=Jt*Zt,ot.restore(),this.compose()}showType3Text(T){const P=this.ctx,$=this.current,at=$.font,ot=$.fontSize,st=$.fontDirection,xt=at.vertical?1:-1,$t=$.charSpacing,Kt=$.wordSpacing,Zt=$.textHScale*st,te=$.fontMatrix||R.FONT_IDENTITY_MATRIX,re=T.length,se=$.textRenderingMode===R.TextRenderingMode.INVISIBLE;let Nt,Bt,X,ut;if(!(se||ot===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,P.save(),P.transform(...$.textMatrix),P.translate($.x,$.y),P.scale(Zt,st),Nt=0;Nt<re;++Nt){if(Bt=T[Nt],typeof Bt=="number"){ut=xt*Bt*ot/1e3,this.ctx.translate(ut,0),$.x+=ut*Zt;continue}const kt=(Bt.isSpace?Kt:0)+$t,Ht=at.charProcOperatorList[Bt.operatorListId];if(!Ht){(0,R.warn)(`Type3 character "${Bt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Bt,this.save(),P.scale(ot,ot),P.transform(...te),this.executeOperatorList(Ht),this.restore()),X=R.Util.applyTransform([Bt.width,0],te)[0]*ot+kt,P.translate(X,0),$.x+=X*Zt}P.restore(),this.processingType3=null}}setCharWidth(T,P){}setCharWidthAndBounds(T,P,$,at,ot,st){this.ctx.rect($,at,ot-$,st-at),this.ctx.clip(),this.endPath()}getColorN_Pattern(T){let P;if(T[0]==="TilingPattern"){const $=T[1],at=this.baseTransform||(0,W.getCurrentTransform)(this.ctx),ot={createCanvasGraphics:st=>new Ot(st,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};P=new _.TilingPattern(T,$,this.ctx,ot,at)}else P=this._getPattern(T[1],T[2]);return P}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(T,P,$){const at=R.Util.makeHexColor(T,P,$);this.ctx.strokeStyle=at,this.current.strokeColor=at}setFillRGBColor(T,P,$){const at=R.Util.makeHexColor(T,P,$);this.ctx.fillStyle=at,this.current.fillColor=at,this.current.patternFill=!1}_getPattern(T,P=null){let $;return this.cachedPatterns.has(T)?$=this.cachedPatterns.get(T):($=(0,_.getShadingPattern)(this.getObject(T)),this.cachedPatterns.set(T,$)),P&&($.matrix=P),$}shadingFill(T){if(!this.contentVisible)return;const P=this.ctx;this.save();const $=this._getPattern(T);P.fillStyle=$.getPattern(P,this,(0,W.getCurrentTransformInverse)(P),_.PathType.SHADING);const at=(0,W.getCurrentTransformInverse)(P);if(at){const{width:ot,height:st}=P.canvas,[xt,$t,Kt,Zt]=R.Util.getAxialAlignedBoundingBox([0,0,ot,st],at);this.ctx.fillRect(xt,$t,Kt-xt,Zt-$t)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,R.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,R.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(T,P){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(T)&&T.length===6&&this.transform(...T),this.baseTransform=(0,W.getCurrentTransform)(this.ctx),P)){const $=P[2]-P[0],at=P[3]-P[1];this.ctx.rect(P[0],P[1],$,at),this.current.updateRectMinMax((0,W.getCurrentTransform)(this.ctx),P),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(T){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const P=this.ctx;T.isolated||(0,R.info)("TODO: Support non-isolated groups."),T.knockout&&(0,R.warn)("Knockout groups not supported.");const $=(0,W.getCurrentTransform)(P);if(T.matrix&&P.transform(...T.matrix),!T.bbox)throw new Error("Bounding box is required.");let at=R.Util.getAxialAlignedBoundingBox(T.bbox,(0,W.getCurrentTransform)(P));const ot=[0,0,P.canvas.width,P.canvas.height];at=R.Util.intersect(at,ot)||[0,0,0,0];const st=Math.floor(at[0]),xt=Math.floor(at[1]);let $t=Math.max(Math.ceil(at[2])-st,1),Kt=Math.max(Math.ceil(at[3])-xt,1),Zt=1,te=1;$t>nt&&(Zt=$t/nt,$t=nt),Kt>nt&&(te=Kt/nt,Kt=nt),this.current.startNewPathAndClipBox([0,0,$t,Kt]);let re="groupAt"+this.groupLevel;T.smask&&(re+="_smask_"+this.smaskCounter++%2);const se=this.cachedCanvases.getCanvas(re,$t,Kt),Nt=se.context;Nt.scale(1/Zt,1/te),Nt.translate(-st,-xt),Nt.transform(...$),T.smask?this.smaskStack.push({canvas:se.canvas,context:Nt,offsetX:st,offsetY:xt,scaleX:Zt,scaleY:te,subtype:T.smask.subtype,backdrop:T.smask.backdrop,transferMap:T.smask.transferMap||null,startTransformInverse:null}):(P.setTransform(1,0,0,1,0,0),P.translate(st,xt),P.scale(Zt,te),P.save()),F(P,Nt),this.ctx=Nt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(P),this.groupLevel++}endGroup(T){if(!this.contentVisible)return;this.groupLevel--;const P=this.ctx,$=this.groupStack.pop();if(this.ctx=$,this.ctx.imageSmoothingEnabled=!1,T.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const at=(0,W.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...at);const ot=R.Util.getAxialAlignedBoundingBox([0,0,P.canvas.width,P.canvas.height],at);this.ctx.drawImage(P.canvas,0,0),this.ctx.restore(),this.compose(ot)}}beginAnnotation(T,P,$,at,ot){if(Pt(this,qt,br).call(this),B(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(P)&&P.length===4){const st=P[2]-P[0],xt=P[3]-P[1];if(ot&&this.annotationCanvasMap){$=$.slice(),$[4]-=P[0],$[5]-=P[1],P=P.slice(),P[0]=P[1]=0,P[2]=st,P[3]=xt;const[$t,Kt]=R.Util.singularValueDecompose2dScale((0,W.getCurrentTransform)(this.ctx)),{viewportScale:Zt}=this,te=Math.ceil(st*this.outputScaleX*Zt),re=Math.ceil(xt*this.outputScaleY*Zt);this.annotationCanvas=this.canvasFactory.create(te,re);const{canvas:se,context:Nt}=this.annotationCanvas;this.annotationCanvasMap.set(T,se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Nt,this.ctx.save(),this.ctx.setTransform($t,0,0,-Kt,0,xt*Kt),B(this.ctx)}else B(this.ctx),this.ctx.rect(P[0],P[1],st,xt),this.ctx.clip(),this.endPath()}this.current=new Y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...$),this.transform(...at)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Pt(this,qt,vr).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(T){if(!this.contentVisible)return;const P=T.count;T=this.getObject(T.data,T),T.count=P;const $=this.ctx,at=this.processingType3;if(at&&(at.compiled===void 0&&(at.compiled=U(T)),at.compiled)){at.compiled($);return}const ot=this._createMaskCanvas(T),st=ot.canvas;$.save(),$.setTransform(1,0,0,1,0,0),$.drawImage(st,ot.offsetX,ot.offsetY),$.restore(),this.compose()}paintImageMaskXObjectRepeat(T,P,$=0,at=0,ot,st){if(!this.contentVisible)return;T=this.getObject(T.data,T);const xt=this.ctx;xt.save();const $t=(0,W.getCurrentTransform)(xt);xt.transform(P,$,at,ot,0,0);const Kt=this._createMaskCanvas(T);xt.setTransform(1,0,0,1,Kt.offsetX-$t[4],Kt.offsetY-$t[5]);for(let Zt=0,te=st.length;Zt<te;Zt+=2){const re=R.Util.transform($t,[P,$,at,ot,st[Zt],st[Zt+1]]),[se,Nt]=R.Util.applyTransform([0,0],re);xt.drawImage(Kt.canvas,se,Nt)}xt.restore(),this.compose()}paintImageMaskXObjectGroup(T){if(!this.contentVisible)return;const P=this.ctx,$=this.current.fillColor,at=this.current.patternFill;for(const ot of T){const{data:st,width:xt,height:$t,transform:Kt}=ot,Zt=this.cachedCanvases.getCanvas("maskCanvas",xt,$t),te=Zt.context;te.save();const re=this.getObject(st,ot);J(te,re),te.globalCompositeOperation="source-in",te.fillStyle=at?$.getPattern(te,this,(0,W.getCurrentTransformInverse)(P),_.PathType.FILL):$,te.fillRect(0,0,xt,$t),te.restore(),P.save(),P.transform(...Kt),P.scale(1,-1),G(P,Zt.canvas,0,0,xt,$t,0,-1,1,1),P.restore()}this.compose()}paintImageXObject(T){if(!this.contentVisible)return;const P=this.getObject(T);if(!P){(0,R.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(P)}paintImageXObjectRepeat(T,P,$,at){if(!this.contentVisible)return;const ot=this.getObject(T);if(!ot){(0,R.warn)("Dependent image isn't ready yet");return}const st=ot.width,xt=ot.height,$t=[];for(let Kt=0,Zt=at.length;Kt<Zt;Kt+=2)$t.push({transform:[P,0,0,$,at[Kt],at[Kt+1]],x:0,y:0,w:st,h:xt});this.paintInlineImageXObjectGroup(ot,$t)}applyTransferMapsToCanvas(T){return this.current.transferMaps!=="none"&&(T.filter=this.current.transferMaps,T.drawImage(T.canvas,0,0),T.filter="none"),T.canvas}applyTransferMapsToBitmap(T){if(this.current.transferMaps==="none")return T.bitmap;const{bitmap:P,width:$,height:at}=T,ot=this.cachedCanvases.getCanvas("inlineImage",$,at),st=ot.context;return st.filter=this.current.transferMaps,st.drawImage(P,0,0),st.filter="none",ot.canvas}paintInlineImageXObject(T){if(!this.contentVisible)return;const P=T.width,$=T.height,at=this.ctx;if(this.save(),!R.isNodeJS){const{filter:xt}=at;xt!=="none"&&xt!==""&&(at.filter="none")}at.scale(1/P,-1/$);let ot;if(T.bitmap)ot=this.applyTransferMapsToBitmap(T);else if(typeof HTMLElement=="function"&&T instanceof HTMLElement||!T.data)ot=T;else{const $t=this.cachedCanvases.getCanvas("inlineImage",P,$).context;dt($t,T),ot=this.applyTransferMapsToCanvas($t)}const st=this._scaleImage(ot,(0,W.getCurrentTransformInverse)(at));at.imageSmoothingEnabled=K((0,W.getCurrentTransform)(at),T.interpolate),G(at,st.img,0,0,st.paintWidth,st.paintHeight,0,-$,P,$),this.compose(),this.restore()}paintInlineImageXObjectGroup(T,P){if(!this.contentVisible)return;const $=this.ctx;let at;if(T.bitmap)at=T.bitmap;else{const ot=T.width,st=T.height,$t=this.cachedCanvases.getCanvas("inlineImage",ot,st).context;dt($t,T),at=this.applyTransferMapsToCanvas($t)}for(const ot of P)$.save(),$.transform(...ot.transform),$.scale(1,-1),G($,at,ot.x,ot.y,ot.w,ot.h,0,-1,1,1),$.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(T){}markPointProps(T,P){}beginMarkedContent(T){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(T,P){T==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(P)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(T){const P=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(T);const $=this.ctx;this.pendingClip&&(P||(this.pendingClip===Mt?$.clip("evenodd"):$.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),$.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const T=(0,W.getCurrentTransform)(this.ctx);if(T[1]===0&&T[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(T[0]),Math.abs(T[3]));else{const P=Math.abs(T[0]*T[3]-T[2]*T[1]),$=Math.hypot(T[0],T[2]),at=Math.hypot(T[1],T[3]);this._cachedGetSinglePixelWidth=Math.max($,at)/P}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:T}=this.current,{a:P,b:$,c:at,d:ot}=this.ctx.getTransform();let st,xt;if($===0&&at===0){const $t=Math.abs(P),Kt=Math.abs(ot);if($t===Kt)if(T===0)st=xt=1/$t;else{const Zt=$t*T;st=xt=Zt<1?1/Zt:1}else if(T===0)st=1/$t,xt=1/Kt;else{const Zt=$t*T,te=Kt*T;st=Zt<1?1/Zt:1,xt=te<1?1/te:1}}else{const $t=Math.abs(P*ot-$*at),Kt=Math.hypot(P,$),Zt=Math.hypot(at,ot);if(T===0)st=Zt/$t,xt=Kt/$t;else{const te=T*$t;st=Zt>te?Zt/te:1,xt=Kt>te?Kt/te:1}}this._cachedScaleForStroking[0]=st,this._cachedScaleForStroking[1]=xt}return this._cachedScaleForStroking}rescaleAndStroke(T){const{ctx:P}=this,{lineWidth:$}=this.current,[at,ot]=this.getScaleForStroking();if(P.lineWidth=$||1,at===1&&ot===1){P.stroke();return}const st=P.getLineDash();if(T&&P.save(),P.scale(at,ot),st.length>0){const xt=Math.max(at,ot);P.setLineDash(st.map($t=>$t/xt)),P.lineDashOffset/=xt}P.stroke(),T&&P.restore()}isContentVisible(){for(let T=this.markedContentStack.length-1;T>=0;T--)if(!this.markedContentStack[T].visible)return!1;return!0}};qt=new WeakSet,br=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},vr=function(){if(this.pageColors){const T=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(T!=="none"){const P=this.ctx.filter;this.ctx.filter=T,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=P}}};let At=Ot;x.CanvasGraphics=At;for(const tt in R.OPS)At.prototype[tt]!==void 0&&(At.prototype[R.OPS[tt]]=At.prototype[tt])},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.TilingPattern=x.PathType=void 0,x.getShadingPattern=q;var R=vt(1),W=vt(6);const _={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};x.PathType=_;function bt(U,Y){if(!Y)return;const dt=Y[2]-Y[0],J=Y[3]-Y[1],F=new Path2D;F.rect(Y[0],Y[1],dt,J),U.clip(F)}class zt{constructor(){this.constructor===zt&&(0,R.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,R.unreachable)("Abstract method `getPattern` called.")}}class pt extends zt{constructor(Y){super(),this._type=Y[1],this._bbox=Y[2],this._colorStops=Y[3],this._p0=Y[4],this._p1=Y[5],this._r0=Y[6],this._r1=Y[7],this.matrix=null}_createGradient(Y){let dt;this._type==="axial"?dt=Y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(dt=Y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const J of this._colorStops)dt.addColorStop(J[0],J[1]);return dt}getPattern(Y,dt,J,F){let B;if(F===_.STROKE||F===_.FILL){const L=dt.current.getClippedPathBoundingBox(F,(0,W.getCurrentTransform)(Y))||[0,0,0,0],N=Math.ceil(L[2]-L[0])||1,j=Math.ceil(L[3]-L[1])||1,ht=dt.cachedCanvases.getCanvas("pattern",N,j,!0),D=ht.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-L[0],-L[1]),J=R.Util.transform(J,[1,0,0,1,L[0],L[1]]),D.transform(...dt.baseTransform),this.matrix&&D.transform(...this.matrix),bt(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),B=Y.createPattern(ht.canvas,"no-repeat");const K=new DOMMatrix(J);B.setTransform(K)}else bt(Y,this._bbox),B=this._createGradient(Y);return B}}function nt(U,Y,dt,J,F,B,L,N){const j=Y.coords,ht=Y.colors,D=U.data,K=U.width*4;let ct;j[dt+1]>j[J+1]&&(ct=dt,dt=J,J=ct,ct=B,B=L,L=ct),j[J+1]>j[F+1]&&(ct=J,J=F,F=ct,ct=L,L=N,N=ct),j[dt+1]>j[J+1]&&(ct=dt,dt=J,J=ct,ct=B,B=L,L=ct);const Gt=(j[dt]+Y.offsetX)*Y.scaleX,wt=(j[dt+1]+Y.offsetY)*Y.scaleY,Mt=(j[J]+Y.offsetX)*Y.scaleX,At=(j[J+1]+Y.offsetY)*Y.scaleY,qt=(j[F]+Y.offsetX)*Y.scaleX,rt=(j[F+1]+Y.offsetY)*Y.scaleY;if(wt>=rt)return;const Et=ht[B],Ot=ht[B+1],tt=ht[B+2],T=ht[L],P=ht[L+1],$=ht[L+2],at=ht[N],ot=ht[N+1],st=ht[N+2],xt=Math.round(wt),$t=Math.round(rt);let Kt,Zt,te,re,se,Nt,Bt,X;for(let ut=xt;ut<=$t;ut++){if(ut<At){const ne=ut<wt?0:(wt-ut)/(wt-At);Kt=Gt-(Gt-Mt)*ne,Zt=Et-(Et-T)*ne,te=Ot-(Ot-P)*ne,re=tt-(tt-$)*ne}else{let ne;ut>rt?ne=1:At===rt?ne=0:ne=(At-ut)/(At-rt),Kt=Mt-(Mt-qt)*ne,Zt=T-(T-at)*ne,te=P-(P-ot)*ne,re=$-($-st)*ne}let kt;ut<wt?kt=0:ut>rt?kt=1:kt=(wt-ut)/(wt-rt),se=Gt-(Gt-qt)*kt,Nt=Et-(Et-at)*kt,Bt=Ot-(Ot-ot)*kt,X=tt-(tt-st)*kt;const Ht=Math.round(Math.min(Kt,se)),Jt=Math.round(Math.max(Kt,se));let ae=K*ut+Ht*4;for(let ne=Ht;ne<=Jt;ne++)kt=(Kt-ne)/(Kt-se),kt<0?kt=0:kt>1&&(kt=1),D[ae++]=Zt-(Zt-Nt)*kt|0,D[ae++]=te-(te-Bt)*kt|0,D[ae++]=re-(re-X)*kt|0,D[ae++]=255}}function O(U,Y,dt){const J=Y.coords,F=Y.colors;let B,L;switch(Y.type){case"lattice":const N=Y.verticesPerRow,j=Math.floor(J.length/N)-1,ht=N-1;for(B=0;B<j;B++){let D=B*N;for(let K=0;K<ht;K++,D++)nt(U,dt,J[D],J[D+1],J[D+N],F[D],F[D+1],F[D+N]),nt(U,dt,J[D+N+1],J[D+1],J[D+N],F[D+N+1],F[D+1],F[D+N])}break;case"triangles":for(B=0,L=J.length;B<L;B+=3)nt(U,dt,J[B],J[B+1],J[B+2],F[B],F[B+1],F[B+2]);break;default:throw new Error("illegal figure")}}class ft extends zt{constructor(Y){super(),this._coords=Y[2],this._colors=Y[3],this._figures=Y[4],this._bounds=Y[5],this._bbox=Y[7],this._background=Y[8],this.matrix=null}_createMeshCanvas(Y,dt,J){const N=Math.floor(this._bounds[0]),j=Math.floor(this._bounds[1]),ht=Math.ceil(this._bounds[2])-N,D=Math.ceil(this._bounds[3])-j,K=Math.min(Math.ceil(Math.abs(ht*Y[0]*1.1)),3e3),ct=Math.min(Math.ceil(Math.abs(D*Y[1]*1.1)),3e3),Gt=ht/K,wt=D/ct,Mt={coords:this._coords,colors:this._colors,offsetX:-N,offsetY:-j,scaleX:1/Gt,scaleY:1/wt},At=K+2*2,qt=ct+2*2,rt=J.getCanvas("mesh",At,qt,!1),Et=rt.context,Ot=Et.createImageData(K,ct);if(dt){const T=Ot.data;for(let P=0,$=T.length;P<$;P+=4)T[P]=dt[0],T[P+1]=dt[1],T[P+2]=dt[2],T[P+3]=255}for(const T of this._figures)O(Ot,T,Mt);return Et.putImageData(Ot,2,2),{canvas:rt.canvas,offsetX:N-2*Gt,offsetY:j-2*wt,scaleX:Gt,scaleY:wt}}getPattern(Y,dt,J,F){bt(Y,this._bbox);let B;if(F===_.SHADING)B=R.Util.singularValueDecompose2dScale((0,W.getCurrentTransform)(Y));else if(B=R.Util.singularValueDecompose2dScale(dt.baseTransform),this.matrix){const N=R.Util.singularValueDecompose2dScale(this.matrix);B=[B[0]*N[0],B[1]*N[1]]}const L=this._createMeshCanvas(B,F===_.SHADING?null:this._background,dt.cachedCanvases);return F!==_.SHADING&&(Y.setTransform(...dt.baseTransform),this.matrix&&Y.transform(...this.matrix)),Y.translate(L.offsetX,L.offsetY),Y.scale(L.scaleX,L.scaleY),Y.createPattern(L.canvas,"no-repeat")}}class lt extends zt{getPattern(){return"hotpink"}}function q(U){switch(U[0]){case"RadialAxial":return new pt(U);case"Mesh":return new ft(U);case"Dummy":return new lt}throw new Error(`Unknown IR type: ${U[0]}`)}const V={COLORED:1,UNCOLORED:2},G=class G{constructor(Y,dt,J,F,B){this.operatorList=Y[2],this.matrix=Y[3]||[1,0,0,1,0,0],this.bbox=Y[4],this.xstep=Y[5],this.ystep=Y[6],this.paintType=Y[7],this.tilingType=Y[8],this.color=dt,this.ctx=J,this.canvasGraphicsFactory=F,this.baseTransform=B}createPatternCanvas(Y){const dt=this.operatorList,J=this.bbox,F=this.xstep,B=this.ystep,L=this.paintType,N=this.tilingType,j=this.color,ht=this.canvasGraphicsFactory;(0,R.info)("TilingType: "+N);const D=J[0],K=J[1],ct=J[2],Gt=J[3],wt=R.Util.singularValueDecompose2dScale(this.matrix),Mt=R.Util.singularValueDecompose2dScale(this.baseTransform),At=[wt[0]*Mt[0],wt[1]*Mt[1]],qt=this.getSizeAndScale(F,this.ctx.canvas.width,At[0]),rt=this.getSizeAndScale(B,this.ctx.canvas.height,At[1]),Et=Y.cachedCanvases.getCanvas("pattern",qt.size,rt.size,!0),Ot=Et.context,tt=ht.createCanvasGraphics(Ot);tt.groupLevel=Y.groupLevel,this.setFillAndStrokeStyleToContext(tt,L,j);let T=D,P=K,$=ct,at=Gt;return D<0&&(T=0,$+=Math.abs(D)),K<0&&(P=0,at+=Math.abs(K)),Ot.translate(-(qt.scale*T),-(rt.scale*P)),tt.transform(qt.scale,0,0,rt.scale,0,0),Ot.save(),this.clipBbox(tt,T,P,$,at),tt.baseTransform=(0,W.getCurrentTransform)(tt.ctx),tt.executeOperatorList(dt),tt.endDrawing(),{canvas:Et.canvas,scaleX:qt.scale,scaleY:rt.scale,offsetX:T,offsetY:P}}getSizeAndScale(Y,dt,J){Y=Math.abs(Y);const F=Math.max(G.MAX_PATTERN_SIZE,dt);let B=Math.ceil(Y*J);return B>=F?B=F:J=B/Y,{scale:J,size:B}}clipBbox(Y,dt,J,F,B){const L=F-dt,N=B-J;Y.ctx.rect(dt,J,L,N),Y.current.updateRectMinMax((0,W.getCurrentTransform)(Y.ctx),[dt,J,F,B]),Y.clip(),Y.endPath()}setFillAndStrokeStyleToContext(Y,dt,J){const F=Y.ctx,B=Y.current;switch(dt){case V.COLORED:const L=this.ctx;F.fillStyle=L.fillStyle,F.strokeStyle=L.strokeStyle,B.fillColor=L.fillStyle,B.strokeColor=L.strokeStyle;break;case V.UNCOLORED:const N=R.Util.makeHexColor(J[0],J[1],J[2]);F.fillStyle=N,F.strokeStyle=N,B.fillColor=N,B.strokeColor=N;break;default:throw new R.FormatError(`Unsupported paint type: ${dt}`)}}getPattern(Y,dt,J,F){let B=J;F!==_.SHADING&&(B=R.Util.transform(B,dt.baseTransform),this.matrix&&(B=R.Util.transform(B,this.matrix)));const L=this.createPatternCanvas(dt);let N=new DOMMatrix(B);N=N.translate(L.offsetX,L.offsetY),N=N.scale(1/L.scaleX,1/L.scaleY);const j=Y.createPattern(L.canvas,"repeat");return j.setTransform(N),j}};yn(G,"MAX_PATTERN_SIZE",3e3);let et=G;x.TilingPattern=et},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.convertBlackAndWhiteToRGBA=_,x.convertToRGBA=W,x.grayToRGBA=zt;var R=vt(1);function W(pt){switch(pt.kind){case R.ImageKind.GRAYSCALE_1BPP:return _(pt);case R.ImageKind.RGB_24BPP:return bt(pt)}return null}function _({src:pt,srcPos:nt=0,dest:O,width:ft,height:lt,nonBlackColor:q=4294967295,inverseDecode:V=!1}){const et=R.FeatureTest.isLittleEndian?4278190080:255,[G,U]=V?[q,et]:[et,q],Y=ft>>3,dt=ft&7,J=pt.length;O=new Uint32Array(O.buffer);let F=0;for(let B=0;B<lt;B++){for(const N=nt+Y;nt<N;nt++){const j=nt<J?pt[nt]:255;O[F++]=j&128?U:G,O[F++]=j&64?U:G,O[F++]=j&32?U:G,O[F++]=j&16?U:G,O[F++]=j&8?U:G,O[F++]=j&4?U:G,O[F++]=j&2?U:G,O[F++]=j&1?U:G}if(dt===0)continue;const L=nt<J?pt[nt++]:255;for(let N=0;N<dt;N++)O[F++]=L&1<<7-N?U:G}return{srcPos:nt,destPos:F}}function bt({src:pt,srcPos:nt=0,dest:O,destPos:ft=0,width:lt,height:q}){let V=0;const et=pt.length>>2,G=new Uint32Array(pt.buffer,nt,et);if(R.FeatureTest.isLittleEndian){for(;V<et-2;V+=3,ft+=4){const U=G[V],Y=G[V+1],dt=G[V+2];O[ft]=U|4278190080,O[ft+1]=U>>>24|Y<<8|4278190080,O[ft+2]=Y>>>16|dt<<16|4278190080,O[ft+3]=dt>>>8|4278190080}for(let U=V*4,Y=pt.length;U<Y;U+=3)O[ft++]=pt[U]|pt[U+1]<<8|pt[U+2]<<16|4278190080}else{for(;V<et-2;V+=3,ft+=4){const U=G[V],Y=G[V+1],dt=G[V+2];O[ft]=U|255,O[ft+1]=U<<24|Y>>>8|255,O[ft+2]=Y<<16|dt>>>16|255,O[ft+3]=dt<<8|255}for(let U=V*4,Y=pt.length;U<Y;U+=3)O[ft++]=pt[U]<<24|pt[U+1]<<16|pt[U+2]<<8|255}return{srcPos:nt,destPos:ft}}function zt(pt,nt){if(R.FeatureTest.isLittleEndian)for(let O=0,ft=pt.length;O<ft;O++)nt[O]=pt[O]*65793|4278190080;else for(let O=0,ft=pt.length;O<ft;O++)nt[O]=pt[O]*16843008|255}},(A,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.GlobalWorkerOptions=void 0;const vt=Object.create(null);x.GlobalWorkerOptions=vt,vt.workerPort=null,vt.workerSrc=""},(A,x,vt)=>{var pt,ds,hs,Ii;Object.defineProperty(x,"__esModule",{value:!0}),x.MessageHandler=void 0;var R=vt(1);const W={UNKNOWN:0,DATA:1,ERROR:2},_={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function bt(lt){switch(lt instanceof Error||typeof lt=="object"&&lt!==null||(0,R.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),lt.name){case"AbortException":return new R.AbortException(lt.message);case"MissingPDFException":return new R.MissingPDFException(lt.message);case"PasswordException":return new R.PasswordException(lt.message,lt.code);case"UnexpectedResponseException":return new R.UnexpectedResponseException(lt.message,lt.status);case"UnknownErrorException":return new R.UnknownErrorException(lt.message,lt.details);default:return new R.UnknownErrorException(lt.message,lt.toString())}}class zt{constructor(q,V,et){Wt(this,pt);this.sourceName=q,this.targetName=V,this.comObj=et,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=G=>{const U=G.data;if(U.targetName!==this.sourceName)return;if(U.stream){Pt(this,pt,hs).call(this,U);return}if(U.callback){const dt=U.callbackId,J=this.callbackCapabilities[dt];if(!J)throw new Error(`Cannot resolve callback ${dt}`);if(delete this.callbackCapabilities[dt],U.callback===W.DATA)J.resolve(U.data);else if(U.callback===W.ERROR)J.reject(bt(U.reason));else throw new Error("Unexpected callback case");return}const Y=this.actionHandler[U.action];if(!Y)throw new Error(`Unknown action from worker: ${U.action}`);if(U.callbackId){const dt=this.sourceName,J=U.sourceName;new Promise(function(F){F(Y(U.data))}).then(function(F){et.postMessage({sourceName:dt,targetName:J,callback:W.DATA,callbackId:U.callbackId,data:F})},function(F){et.postMessage({sourceName:dt,targetName:J,callback:W.ERROR,callbackId:U.callbackId,reason:bt(F)})});return}if(U.streamId){Pt(this,pt,ds).call(this,U);return}Y(U.data)},et.addEventListener("message",this._onComObjOnMessage)}on(q,V){const et=this.actionHandler;if(et[q])throw new Error(`There is already an actionName called "${q}"`);et[q]=V}send(q,V,et){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:q,data:V},et)}sendWithPromise(q,V,et){const G=this.callbackId++,U=new R.PromiseCapability;this.callbackCapabilities[G]=U;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:q,callbackId:G,data:V},et)}catch(Y){U.reject(Y)}return U.promise}sendWithStream(q,V,et,G){const U=this.streamId++,Y=this.sourceName,dt=this.targetName,J=this.comObj;return new ReadableStream({start:F=>{const B=new R.PromiseCapability;return this.streamControllers[U]={controller:F,startCall:B,pullCall:null,cancelCall:null,isClosed:!1},J.postMessage({sourceName:Y,targetName:dt,action:q,streamId:U,data:V,desiredSize:F.desiredSize},G),B.promise},pull:F=>{const B=new R.PromiseCapability;return this.streamControllers[U].pullCall=B,J.postMessage({sourceName:Y,targetName:dt,stream:_.PULL,streamId:U,desiredSize:F.desiredSize}),B.promise},cancel:F=>{(0,R.assert)(F instanceof Error,"cancel must have a valid reason");const B=new R.PromiseCapability;return this.streamControllers[U].cancelCall=B,this.streamControllers[U].isClosed=!0,J.postMessage({sourceName:Y,targetName:dt,stream:_.CANCEL,streamId:U,reason:bt(F)}),B.promise}},et)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}pt=new WeakSet,ds=function(q){const V=q.streamId,et=this.sourceName,G=q.sourceName,U=this.comObj,Y=this,dt=this.actionHandler[q.action],J={enqueue(F,B=1,L){if(this.isCancelled)return;const N=this.desiredSize;this.desiredSize-=B,N>0&&this.desiredSize<=0&&(this.sinkCapability=new R.PromiseCapability,this.ready=this.sinkCapability.promise),U.postMessage({sourceName:et,targetName:G,stream:_.ENQUEUE,streamId:V,chunk:F},L)},close(){this.isCancelled||(this.isCancelled=!0,U.postMessage({sourceName:et,targetName:G,stream:_.CLOSE,streamId:V}),delete Y.streamSinks[V])},error(F){(0,R.assert)(F instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,U.postMessage({sourceName:et,targetName:G,stream:_.ERROR,streamId:V,reason:bt(F)}))},sinkCapability:new R.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:q.desiredSize,ready:null};J.sinkCapability.resolve(),J.ready=J.sinkCapability.promise,this.streamSinks[V]=J,new Promise(function(F){F(dt(q.data,J))}).then(function(){U.postMessage({sourceName:et,targetName:G,stream:_.START_COMPLETE,streamId:V,success:!0})},function(F){U.postMessage({sourceName:et,targetName:G,stream:_.START_COMPLETE,streamId:V,reason:bt(F)})})},hs=function(q){const V=q.streamId,et=this.sourceName,G=q.sourceName,U=this.comObj,Y=this.streamControllers[V],dt=this.streamSinks[V];switch(q.stream){case _.START_COMPLETE:q.success?Y.startCall.resolve():Y.startCall.reject(bt(q.reason));break;case _.PULL_COMPLETE:q.success?Y.pullCall.resolve():Y.pullCall.reject(bt(q.reason));break;case _.PULL:if(!dt){U.postMessage({sourceName:et,targetName:G,stream:_.PULL_COMPLETE,streamId:V,success:!0});break}dt.desiredSize<=0&&q.desiredSize>0&&dt.sinkCapability.resolve(),dt.desiredSize=q.desiredSize,new Promise(function(J){var F;J((F=dt.onPull)==null?void 0:F.call(dt))}).then(function(){U.postMessage({sourceName:et,targetName:G,stream:_.PULL_COMPLETE,streamId:V,success:!0})},function(J){U.postMessage({sourceName:et,targetName:G,stream:_.PULL_COMPLETE,streamId:V,reason:bt(J)})});break;case _.ENQUEUE:if((0,R.assert)(Y,"enqueue should have stream controller"),Y.isClosed)break;Y.controller.enqueue(q.chunk);break;case _.CLOSE:if((0,R.assert)(Y,"close should have stream controller"),Y.isClosed)break;Y.isClosed=!0,Y.controller.close(),Pt(this,pt,Ii).call(this,Y,V);break;case _.ERROR:(0,R.assert)(Y,"error should have stream controller"),Y.controller.error(bt(q.reason)),Pt(this,pt,Ii).call(this,Y,V);break;case _.CANCEL_COMPLETE:q.success?Y.cancelCall.resolve():Y.cancelCall.reject(bt(q.reason)),Pt(this,pt,Ii).call(this,Y,V);break;case _.CANCEL:if(!dt)break;new Promise(function(J){var F;J((F=dt.onCancel)==null?void 0:F.call(dt,bt(q.reason)))}).then(function(){U.postMessage({sourceName:et,targetName:G,stream:_.CANCEL_COMPLETE,streamId:V,success:!0})},function(J){U.postMessage({sourceName:et,targetName:G,stream:_.CANCEL_COMPLETE,streamId:V,reason:bt(J)})}),dt.sinkCapability.reject(bt(q.reason)),dt.isCancelled=!0,delete this.streamSinks[V];break;default:throw new Error("Unexpected stream case")}},Ii=async function(q,V){var et,G,U;await Promise.allSettled([(et=q.startCall)==null?void 0:et.promise,(G=q.pullCall)==null?void 0:G.promise,(U=q.cancelCall)==null?void 0:U.promise]),delete this.streamControllers[V]},x.MessageHandler=zt},(A,x,vt)=>{var _,bt;Object.defineProperty(x,"__esModule",{value:!0}),x.Metadata=void 0;var R=vt(1);class W{constructor({parsedData:pt,rawData:nt}){Wt(this,_);Wt(this,bt);Vt(this,_,pt),Vt(this,bt,nt)}getRaw(){return y(this,bt)}get(pt){return y(this,_).get(pt)??null}getAll(){return(0,R.objectFromMap)(y(this,_))}has(pt){return y(this,_).has(pt)}}_=new WeakMap,bt=new WeakMap,x.Metadata=W},(A,x,vt)=>{var pt,nt,O,ft,lt,q,_r;Object.defineProperty(x,"__esModule",{value:!0}),x.OptionalContentConfig=void 0;var R=vt(1),W=vt(8);const _=Symbol("INTERNAL");class bt{constructor(G,U){Wt(this,pt,!0);this.name=G,this.intent=U}get visible(){return y(this,pt)}_setVisible(G,U){G!==_&&(0,R.unreachable)("Internal method `_setVisible` called."),Vt(this,pt,U)}}pt=new WeakMap;class zt{constructor(G){Wt(this,q);Wt(this,nt,null);Wt(this,O,new Map);Wt(this,ft,null);Wt(this,lt,null);if(this.name=null,this.creator=null,G!==null){this.name=G.name,this.creator=G.creator,Vt(this,lt,G.order);for(const U of G.groups)y(this,O).set(U.id,new bt(U.name,U.intent));if(G.baseState==="OFF")for(const U of y(this,O).values())U._setVisible(_,!1);for(const U of G.on)y(this,O).get(U)._setVisible(_,!0);for(const U of G.off)y(this,O).get(U)._setVisible(_,!1);Vt(this,ft,this.getHash())}}isVisible(G){if(y(this,O).size===0)return!0;if(!G)return(0,R.warn)("Optional content group not defined."),!0;if(G.type==="OCG")return y(this,O).has(G.id)?y(this,O).get(G.id).visible:((0,R.warn)(`Optional content group not found: ${G.id}`),!0);if(G.type==="OCMD"){if(G.expression)return Pt(this,q,_r).call(this,G.expression);if(!G.policy||G.policy==="AnyOn"){for(const U of G.ids){if(!y(this,O).has(U))return(0,R.warn)(`Optional content group not found: ${U}`),!0;if(y(this,O).get(U).visible)return!0}return!1}else if(G.policy==="AllOn"){for(const U of G.ids){if(!y(this,O).has(U))return(0,R.warn)(`Optional content group not found: ${U}`),!0;if(!y(this,O).get(U).visible)return!1}return!0}else if(G.policy==="AnyOff"){for(const U of G.ids){if(!y(this,O).has(U))return(0,R.warn)(`Optional content group not found: ${U}`),!0;if(!y(this,O).get(U).visible)return!0}return!1}else if(G.policy==="AllOff"){for(const U of G.ids){if(!y(this,O).has(U))return(0,R.warn)(`Optional content group not found: ${U}`),!0;if(y(this,O).get(U).visible)return!1}return!0}return(0,R.warn)(`Unknown optional content policy ${G.policy}.`),!0}return(0,R.warn)(`Unknown group type ${G.type}.`),!0}setVisibility(G,U=!0){if(!y(this,O).has(G)){(0,R.warn)(`Optional content group not found: ${G}`);return}y(this,O).get(G)._setVisible(_,!!U),Vt(this,nt,null)}get hasInitialVisibility(){return y(this,ft)===null||this.getHash()===y(this,ft)}getOrder(){return y(this,O).size?y(this,lt)?y(this,lt).slice():[...y(this,O).keys()]:null}getGroups(){return y(this,O).size>0?(0,R.objectFromMap)(y(this,O)):null}getGroup(G){return y(this,O).get(G)||null}getHash(){if(y(this,nt)!==null)return y(this,nt);const G=new W.MurmurHash3_64;for(const[U,Y]of y(this,O))G.update(`${U}:${Y.visible}`);return Vt(this,nt,G.hexdigest())}}nt=new WeakMap,O=new WeakMap,ft=new WeakMap,lt=new WeakMap,q=new WeakSet,_r=function(G){const U=G.length;if(U<2)return!0;const Y=G[0];for(let dt=1;dt<U;dt++){const J=G[dt];let F;if(Array.isArray(J))F=Pt(this,q,_r).call(this,J);else if(y(this,O).has(J))F=y(this,O).get(J).visible;else return(0,R.warn)(`Optional content group not found: ${J}`),!0;switch(Y){case"And":if(!F)return!1;break;case"Or":if(F)return!0;break;case"Not":return!F;default:return!0}}return Y==="And"},x.OptionalContentConfig=zt},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.PDFDataTransportStream=void 0;var R=vt(1),W=vt(6);class _{constructor({length:nt,initialData:O,progressiveDone:ft=!1,contentDispositionFilename:lt=null,disableRange:q=!1,disableStream:V=!1},et){if((0,R.assert)(et,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ft,this._contentDispositionFilename=lt,(O==null?void 0:O.length)>0){const G=O instanceof Uint8Array&&O.byteLength===O.buffer.byteLength?O.buffer:new Uint8Array(O).buffer;this._queuedChunks.push(G)}this._pdfDataRangeTransport=et,this._isStreamingSupported=!V,this._isRangeSupported=!q,this._contentLength=nt,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((G,U)=>{this._onReceiveData({begin:G,chunk:U})}),this._pdfDataRangeTransport.addProgressListener((G,U)=>{this._onProgress({loaded:G,total:U})}),this._pdfDataRangeTransport.addProgressiveReadListener(G=>{this._onReceiveData({chunk:G})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:nt,chunk:O}){const ft=O instanceof Uint8Array&&O.byteLength===O.buffer.byteLength?O.buffer:new Uint8Array(O).buffer;if(nt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ft):this._queuedChunks.push(ft);else{const lt=this._rangeReaders.some(function(q){return q._begin!==nt?!1:(q._enqueue(ft),!0)});(0,R.assert)(lt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var nt;return((nt=this._fullRequestReader)==null?void 0:nt._loaded)??0}_onProgress(nt){var O,ft,lt,q;nt.total===void 0?(ft=(O=this._rangeReaders[0])==null?void 0:O.onProgress)==null||ft.call(O,{loaded:nt.loaded}):(q=(lt=this._fullRequestReader)==null?void 0:lt.onProgress)==null||q.call(lt,{loaded:nt.loaded,total:nt.total})}_onProgressiveDone(){var nt;(nt=this._fullRequestReader)==null||nt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(nt){const O=this._rangeReaders.indexOf(nt);O>=0&&this._rangeReaders.splice(O,1)}getFullReader(){(0,R.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const nt=this._queuedChunks;return this._queuedChunks=null,new bt(this,nt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(nt,O){if(O<=this._progressiveDataLength)return null;const ft=new zt(this,nt,O);return this._pdfDataRangeTransport.requestDataRange(nt,O),this._rangeReaders.push(ft),ft}cancelAllRequests(nt){var O;(O=this._fullRequestReader)==null||O.cancel(nt);for(const ft of this._rangeReaders.slice(0))ft.cancel(nt);this._pdfDataRangeTransport.abort()}}x.PDFDataTransportStream=_;class bt{constructor(nt,O,ft=!1,lt=null){this._stream=nt,this._done=ft||!1,this._filename=(0,W.isPdfFile)(lt)?lt:null,this._queuedChunks=O||[],this._loaded=0;for(const q of this._queuedChunks)this._loaded+=q.byteLength;this._requests=[],this._headersReady=Promise.resolve(),nt._fullRequestReader=this,this.onProgress=null}_enqueue(nt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:nt,done:!1}):this._queuedChunks.push(nt),this._loaded+=nt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const nt=new R.PromiseCapability;return this._requests.push(nt),nt.promise}cancel(nt){this._done=!0;for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class zt{constructor(nt,O,ft){this._stream=nt,this._begin=O,this._end=ft,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(nt){if(!this._done){if(this._requests.length===0)this._queuedChunk=nt;else{this._requests.shift().resolve({value:nt,done:!1});for(const ft of this._requests)ft.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const O=this._queuedChunk;return this._queuedChunk=null,{value:O,done:!1}}if(this._done)return{value:void 0,done:!0};const nt=new R.PromiseCapability;return this._requests.push(nt),nt.promise}cancel(nt){this._done=!0;for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.PDFFetchStream=void 0;var R=vt(1),W=vt(20);function _(ft,lt,q){return{method:"GET",headers:ft,signal:q.signal,mode:"cors",credentials:lt?"include":"same-origin",redirect:"follow"}}function bt(ft){const lt=new Headers;for(const q in ft){const V=ft[q];V!==void 0&&lt.append(q,V)}return lt}function zt(ft){return ft instanceof Uint8Array?ft.buffer:ft instanceof ArrayBuffer?ft:((0,R.warn)(`getArrayBuffer - unexpected data format: ${ft}`),new Uint8Array(ft).buffer)}class pt{constructor(lt){this.source=lt,this.isHttp=/^https?:/i.test(lt.url),this.httpHeaders=this.isHttp&&lt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var lt;return((lt=this._fullRequestReader)==null?void 0:lt._loaded)??0}getFullReader(){return(0,R.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new nt(this),this._fullRequestReader}getRangeReader(lt,q){if(q<=this._progressiveDataLength)return null;const V=new O(this,lt,q);return this._rangeRequestReaders.push(V),V}cancelAllRequests(lt){var q;(q=this._fullRequestReader)==null||q.cancel(lt);for(const V of this._rangeRequestReaders.slice(0))V.cancel(lt)}}x.PDFFetchStream=pt;class nt{constructor(lt){this._stream=lt,this._reader=null,this._loaded=0,this._filename=null;const q=lt.source;this._withCredentials=q.withCredentials||!1,this._contentLength=q.length,this._headersCapability=new R.PromiseCapability,this._disableRange=q.disableRange||!1,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!q.disableStream,this._isRangeSupported=!q.disableRange,this._headers=bt(this._stream.httpHeaders);const V=q.url;fetch(V,_(this._headers,this._withCredentials,this._abortController)).then(et=>{if(!(0,W.validateResponseStatus)(et.status))throw(0,W.createResponseStatusError)(et.status,V);this._reader=et.body.getReader(),this._headersCapability.resolve();const G=dt=>et.headers.get(dt),{allowRangeRequests:U,suggestedLength:Y}=(0,W.validateRangeRequestCapabilities)({getResponseHeader:G,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=U,this._contentLength=Y||this._contentLength,this._filename=(0,W.extractFilenameFromHeader)(G),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new R.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var V;await this._headersCapability.promise;const{value:lt,done:q}=await this._reader.read();return q?{value:lt,done:q}:(this._loaded+=lt.byteLength,(V=this.onProgress)==null||V.call(this,{loaded:this._loaded,total:this._contentLength}),{value:zt(lt),done:!1})}cancel(lt){var q;(q=this._reader)==null||q.cancel(lt),this._abortController.abort()}}class O{constructor(lt,q,V){this._stream=lt,this._reader=null,this._loaded=0;const et=lt.source;this._withCredentials=et.withCredentials||!1,this._readCapability=new R.PromiseCapability,this._isStreamingSupported=!et.disableStream,this._abortController=new AbortController,this._headers=bt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${q}-${V-1}`);const G=et.url;fetch(G,_(this._headers,this._withCredentials,this._abortController)).then(U=>{if(!(0,W.validateResponseStatus)(U.status))throw(0,W.createResponseStatusError)(U.status,G);this._readCapability.resolve(),this._reader=U.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var V;await this._readCapability.promise;const{value:lt,done:q}=await this._reader.read();return q?{value:lt,done:q}:(this._loaded+=lt.byteLength,(V=this.onProgress)==null||V.call(this,{loaded:this._loaded}),{value:zt(lt),done:!1})}cancel(lt){var q;(q=this._reader)==null||q.cancel(lt),this._abortController.abort()}}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.createResponseStatusError=pt,x.extractFilenameFromHeader=zt,x.validateRangeRequestCapabilities=bt,x.validateResponseStatus=nt;var R=vt(1),W=vt(21),_=vt(6);function bt({getResponseHeader:O,isHttp:ft,rangeChunkSize:lt,disableRange:q}){const V={allowRangeRequests:!1,suggestedLength:void 0},et=parseInt(O("Content-Length"),10);return!Number.isInteger(et)||(V.suggestedLength=et,et<=2*lt)||q||!ft||O("Accept-Ranges")!=="bytes"||(O("Content-Encoding")||"identity")!=="identity"||(V.allowRangeRequests=!0),V}function zt(O){const ft=O("Content-Disposition");if(ft){let lt=(0,W.getFilenameFromContentDispositionHeader)(ft);if(lt.includes("%"))try{lt=decodeURIComponent(lt)}catch{}if((0,_.isPdfFile)(lt))return lt}return null}function pt(O,ft){return O===404||O===0&&ft.startsWith("file:")?new R.MissingPDFException('Missing PDF "'+ft+'".'):new R.UnexpectedResponseException(`Unexpected server response (${O}) while retrieving PDF "${ft}".`,O)}function nt(O){return O===200||O===206}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.getFilenameFromContentDispositionHeader=W;var R=vt(1);function W(_){let bt=!0,zt=pt("filename\\*","i").exec(_);if(zt){zt=zt[1];let et=lt(zt);return et=unescape(et),et=q(et),et=V(et),O(et)}if(zt=ft(_),zt){const et=V(zt);return O(et)}if(zt=pt("filename","i").exec(_),zt){zt=zt[1];let et=lt(zt);return et=V(et),O(et)}function pt(et,G){return new RegExp("(?:^|;)\\s*"+et+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',G)}function nt(et,G){if(et){if(!/^[\x00-\xFF]+$/.test(G))return G;try{const U=new TextDecoder(et,{fatal:!0}),Y=(0,R.stringToBytes)(G);G=U.decode(Y),bt=!1}catch{}}return G}function O(et){return bt&&/[\x80-\xff]/.test(et)&&(et=nt("utf-8",et),bt&&(et=nt("iso-8859-1",et))),et}function ft(et){const G=[];let U;const Y=pt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(U=Y.exec(et))!==null;){let[,J,F,B]=U;if(J=parseInt(J,10),J in G){if(J===0)break;continue}G[J]=[F,B]}const dt=[];for(let J=0;J<G.length&&J in G;++J){let[F,B]=G[J];B=lt(B),F&&(B=unescape(B),J===0&&(B=q(B))),dt.push(B)}return dt.join("")}function lt(et){if(et.startsWith('"')){const G=et.slice(1).split('\\"');for(let U=0;U<G.length;++U){const Y=G[U].indexOf('"');Y!==-1&&(G[U]=G[U].slice(0,Y),G.length=U+1),G[U]=G[U].replaceAll(/\\(.)/g,"$1")}et=G.join('"')}return et}function q(et){const G=et.indexOf("'");if(G===-1)return et;const U=et.slice(0,G),dt=et.slice(G+1).replace(/^[^']*'/,"");return nt(U,dt)}function V(et){return!et.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(et)?et:et.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(G,U,Y,dt){if(Y==="q"||Y==="Q")return dt=dt.replaceAll("_"," "),dt=dt.replaceAll(/=([0-9a-fA-F]{2})/g,function(J,F){return String.fromCharCode(parseInt(F,16))}),nt(U,dt);try{dt=atob(dt)}catch{}return nt(U,dt)})}return""}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.PDFNetworkStream=void 0;var R=vt(1),W=vt(20);const _=200,bt=206;function zt(lt){const q=lt.response;return typeof q!="string"?q:(0,R.stringToBytes)(q).buffer}class pt{constructor(q,V={}){this.url=q,this.isHttp=/^https?:/i.test(q),this.httpHeaders=this.isHttp&&V.httpHeaders||Object.create(null),this.withCredentials=V.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(q,V,et){const G={begin:q,end:V};for(const U in et)G[U]=et[U];return this.request(G)}requestFull(q){return this.request(q)}request(q){const V=new XMLHttpRequest,et=this.currXhrId++,G=this.pendingRequests[et]={xhr:V};V.open("GET",this.url),V.withCredentials=this.withCredentials;for(const U in this.httpHeaders){const Y=this.httpHeaders[U];Y!==void 0&&V.setRequestHeader(U,Y)}return this.isHttp&&"begin"in q&&"end"in q?(V.setRequestHeader("Range",`bytes=${q.begin}-${q.end-1}`),G.expectedStatus=bt):G.expectedStatus=_,V.responseType="arraybuffer",q.onError&&(V.onerror=function(U){q.onError(V.status)}),V.onreadystatechange=this.onStateChange.bind(this,et),V.onprogress=this.onProgress.bind(this,et),G.onHeadersReceived=q.onHeadersReceived,G.onDone=q.onDone,G.onError=q.onError,G.onProgress=q.onProgress,V.send(null),et}onProgress(q,V){var G;const et=this.pendingRequests[q];et&&((G=et.onProgress)==null||G.call(et,V))}onStateChange(q,V){var J,F,B;const et=this.pendingRequests[q];if(!et)return;const G=et.xhr;if(G.readyState>=2&&et.onHeadersReceived&&(et.onHeadersReceived(),delete et.onHeadersReceived),G.readyState!==4||!(q in this.pendingRequests))return;if(delete this.pendingRequests[q],G.status===0&&this.isHttp){(J=et.onError)==null||J.call(et,G.status);return}const U=G.status||_;if(!(U===_&&et.expectedStatus===bt)&&U!==et.expectedStatus){(F=et.onError)==null||F.call(et,G.status);return}const dt=zt(G);if(U===bt){const L=G.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(L);et.onDone({begin:parseInt(N[1],10),chunk:dt})}else dt?et.onDone({begin:0,chunk:dt}):(B=et.onError)==null||B.call(et,G.status)}getRequestXhr(q){return this.pendingRequests[q].xhr}isPendingRequest(q){return q in this.pendingRequests}abortRequest(q){const V=this.pendingRequests[q].xhr;delete this.pendingRequests[q],V.abort()}}class nt{constructor(q){this._source=q,this._manager=new pt(q.url,{httpHeaders:q.httpHeaders,withCredentials:q.withCredentials}),this._rangeChunkSize=q.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(q){const V=this._rangeRequestReaders.indexOf(q);V>=0&&this._rangeRequestReaders.splice(V,1)}getFullReader(){return(0,R.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new O(this._manager,this._source),this._fullRequestReader}getRangeReader(q,V){const et=new ft(this._manager,q,V);return et.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(et),et}cancelAllRequests(q){var V;(V=this._fullRequestReader)==null||V.cancel(q);for(const et of this._rangeRequestReaders.slice(0))et.cancel(q)}}x.PDFNetworkStream=nt;class O{constructor(q,V){this._manager=q;const et={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=V.url,this._fullRequestId=q.requestFull(et),this._headersReceivedCapability=new R.PromiseCapability,this._disableRange=V.disableRange||!1,this._contentLength=V.length,this._rangeChunkSize=V.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const q=this._fullRequestId,V=this._manager.getRequestXhr(q),et=Y=>V.getResponseHeader(Y),{allowRangeRequests:G,suggestedLength:U}=(0,W.validateRangeRequestCapabilities)({getResponseHeader:et,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});G&&(this._isRangeSupported=!0),this._contentLength=U||this._contentLength,this._filename=(0,W.extractFilenameFromHeader)(et),this._isRangeSupported&&this._manager.abortRequest(q),this._headersReceivedCapability.resolve()}_onDone(q){if(q&&(this._requests.length>0?this._requests.shift().resolve({value:q.chunk,done:!1}):this._cachedChunks.push(q.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(q){this._storedError=(0,W.createResponseStatusError)(q,this._url),this._headersReceivedCapability.reject(this._storedError);for(const V of this._requests)V.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(q){var V;(V=this.onProgress)==null||V.call(this,{loaded:q.loaded,total:q.lengthComputable?q.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const q=new R.PromiseCapability;return this._requests.push(q),q.promise}cancel(q){this._done=!0,this._headersReceivedCapability.reject(q);for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ft{constructor(q,V,et){this._manager=q;const G={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=q.url,this._requestId=q.requestRange(V,et,G),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var q;(q=this.onClosed)==null||q.call(this,this)}_onDone(q){const V=q.chunk;this._requests.length>0?this._requests.shift().resolve({value:V,done:!1}):this._queuedChunk=V,this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(q){this._storedError=(0,W.createResponseStatusError)(q,this._url);for(const V of this._requests)V.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(q){var V;this.isStreamingSupported||(V=this.onProgress)==null||V.call(this,{loaded:q.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const V=this._queuedChunk;return this._queuedChunk=null,{value:V,done:!1}}if(this._done)return{value:void 0,done:!0};const q=new R.PromiseCapability;return this._requests.push(q),q.promise}cancel(q){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.PDFNodeStream=void 0;var R=vt(1),W=vt(20);const _=/^file:\/\/\/[a-zA-Z]:\//;function bt(et){const G=require$$0,U=G.parse(et);return U.protocol==="file:"||U.host?U:/^[a-z]:[/\\]/i.test(et)?G.parse(`file:///${et}`):(U.host||(U.protocol="file:"),U)}class zt{constructor(G){this.source=G,this.url=bt(G.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&G.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var G;return((G=this._fullRequestReader)==null?void 0:G._loaded)??0}getFullReader(){return(0,R.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new q(this):new ft(this),this._fullRequestReader}getRangeReader(G,U){if(U<=this._progressiveDataLength)return null;const Y=this.isFsUrl?new V(this,G,U):new lt(this,G,U);return this._rangeRequestReaders.push(Y),Y}cancelAllRequests(G){var U;(U=this._fullRequestReader)==null||U.cancel(G);for(const Y of this._rangeRequestReaders.slice(0))Y.cancel(G)}}x.PDFNodeStream=zt;class pt{constructor(G){this._url=G.url,this._done=!1,this._storedError=null,this.onProgress=null;const U=G.source;this._contentLength=U.length,this._loaded=0,this._filename=null,this._disableRange=U.disableRange||!1,this._rangeChunkSize=U.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!U.disableStream,this._isRangeSupported=!U.disableRange,this._readableStream=null,this._readCapability=new R.PromiseCapability,this._headersCapability=new R.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const G=this._readableStream.read();return G===null?(this._readCapability=new R.PromiseCapability,this.read()):(this._loaded+=G.length,(Y=this.onProgress)==null||Y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(G).buffer,done:!1})}cancel(G){if(!this._readableStream){this._error(G);return}this._readableStream.destroy(G)}_error(G){this._storedError=G,this._readCapability.resolve()}_setReadableStream(G){this._readableStream=G,G.on("readable",()=>{this._readCapability.resolve()}),G.on("end",()=>{G.destroy(),this._done=!0,this._readCapability.resolve()}),G.on("error",U=>{this._error(U)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new R.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class nt{constructor(G){this._url=G.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new R.PromiseCapability;const U=G.source;this._isStreamingSupported=!U.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const G=this._readableStream.read();return G===null?(this._readCapability=new R.PromiseCapability,this.read()):(this._loaded+=G.length,(Y=this.onProgress)==null||Y.call(this,{loaded:this._loaded}),{value:new Uint8Array(G).buffer,done:!1})}cancel(G){if(!this._readableStream){this._error(G);return}this._readableStream.destroy(G)}_error(G){this._storedError=G,this._readCapability.resolve()}_setReadableStream(G){this._readableStream=G,G.on("readable",()=>{this._readCapability.resolve()}),G.on("end",()=>{G.destroy(),this._done=!0,this._readCapability.resolve()}),G.on("error",U=>{this._error(U)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function O(et,G){return{protocol:et.protocol,auth:et.auth,host:et.hostname,port:et.port,path:et.path,method:"GET",headers:G}}class ft extends pt{constructor(G){super(G);const U=Y=>{if(Y.statusCode===404){const B=new R.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=B,this._headersCapability.reject(B);return}this._headersCapability.resolve(),this._setReadableStream(Y);const dt=B=>this._readableStream.headers[B.toLowerCase()],{allowRangeRequests:J,suggestedLength:F}=(0,W.validateRangeRequestCapabilities)({getResponseHeader:dt,isHttp:G.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=J,this._contentLength=F||this._contentLength,this._filename=(0,W.extractFilenameFromHeader)(dt)};if(this._request=null,this._url.protocol==="http:"){const Y=require$$0;this._request=Y.request(O(this._url,G.httpHeaders),U)}else{const Y=require$$0;this._request=Y.request(O(this._url,G.httpHeaders),U)}this._request.on("error",Y=>{this._storedError=Y,this._headersCapability.reject(Y)}),this._request.end()}}class lt extends nt{constructor(G,U,Y){super(G),this._httpHeaders={};for(const J in G.httpHeaders){const F=G.httpHeaders[J];F!==void 0&&(this._httpHeaders[J]=F)}this._httpHeaders.Range=`bytes=${U}-${Y-1}`;const dt=J=>{if(J.statusCode===404){const F=new R.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=F;return}this._setReadableStream(J)};if(this._request=null,this._url.protocol==="http:"){const J=require$$0;this._request=J.request(O(this._url,this._httpHeaders),dt)}else{const J=require$$0;this._request=J.request(O(this._url,this._httpHeaders),dt)}this._request.on("error",J=>{this._storedError=J}),this._request.end()}}class q extends pt{constructor(G){super(G);let U=decodeURIComponent(this._url.path);_.test(this._url.href)&&(U=U.replace(/^\//,""));const Y=require$$0;Y.lstat(U,(dt,J)=>{if(dt){dt.code==="ENOENT"&&(dt=new R.MissingPDFException(`Missing PDF "${U}".`)),this._storedError=dt,this._headersCapability.reject(dt);return}this._contentLength=J.size,this._setReadableStream(Y.createReadStream(U)),this._headersCapability.resolve()})}}class V extends nt{constructor(G,U,Y){super(G);let dt=decodeURIComponent(this._url.path);_.test(this._url.href)&&(dt=dt.replace(/^\//,""));const J=require$$0;this._setReadableStream(J.createReadStream(dt,{start:U,end:Y-1}))}}},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.SVGGraphics=void 0;var R=vt(6),W=vt(1);const _={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},bt="http://www.w3.org/XML/1998/namespace",zt="http://www.w3.org/1999/xlink",pt=["butt","round","square"],nt=["miter","round","bevel"],O=function(J,F="",B=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!B)return URL.createObjectURL(new Blob([J],{type:F}));const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let N=`data:${F};base64,`;for(let j=0,ht=J.length;j<ht;j+=3){const D=J[j]&255,K=J[j+1]&255,ct=J[j+2]&255,Gt=D>>2,wt=(D&3)<<4|K>>4,Mt=j+1<ht?(K&15)<<2|ct>>6:64,At=j+2<ht?ct&63:64;N+=L[Gt]+L[wt]+L[Mt]+L[At]}return N},ft=function(){const J=new Uint8Array([137,80,78,71,13,10,26,10]),F=12,B=new Int32Array(256);for(let ct=0;ct<256;ct++){let Gt=ct;for(let wt=0;wt<8;wt++)Gt=Gt&1?3988292384^Gt>>1&2147483647:Gt>>1&2147483647;B[ct]=Gt}function L(ct,Gt,wt){let Mt=-1;for(let At=Gt;At<wt;At++){const qt=(Mt^ct[At])&255,rt=B[qt];Mt=Mt>>>8^rt}return Mt^-1}function N(ct,Gt,wt,Mt){let At=Mt;const qt=Gt.length;wt[At]=qt>>24&255,wt[At+1]=qt>>16&255,wt[At+2]=qt>>8&255,wt[At+3]=qt&255,At+=4,wt[At]=ct.charCodeAt(0)&255,wt[At+1]=ct.charCodeAt(1)&255,wt[At+2]=ct.charCodeAt(2)&255,wt[At+3]=ct.charCodeAt(3)&255,At+=4,wt.set(Gt,At),At+=Gt.length;const rt=L(wt,Mt+4,At);wt[At]=rt>>24&255,wt[At+1]=rt>>16&255,wt[At+2]=rt>>8&255,wt[At+3]=rt&255}function j(ct,Gt,wt){let Mt=1,At=0;for(let qt=Gt;qt<wt;++qt)Mt=(Mt+(ct[qt]&255))%65521,At=(At+Mt)%65521;return At<<16|Mt}function ht(ct){if(!W.isNodeJS)return D(ct);try{const Gt=parseInt(process.versions.node)>=8?ct:Buffer.from(ct),wt=require$$0.deflateSync(Gt,{level:9});return wt instanceof Uint8Array?wt:new Uint8Array(wt)}catch(Gt){(0,W.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Gt)}return D(ct)}function D(ct){let Gt=ct.length;const wt=65535,Mt=Math.ceil(Gt/wt),At=new Uint8Array(2+Gt+Mt*5+4);let qt=0;At[qt++]=120,At[qt++]=156;let rt=0;for(;Gt>wt;)At[qt++]=0,At[qt++]=255,At[qt++]=255,At[qt++]=0,At[qt++]=0,At.set(ct.subarray(rt,rt+wt),qt),qt+=wt,rt+=wt,Gt-=wt;At[qt++]=1,At[qt++]=Gt&255,At[qt++]=Gt>>8&255,At[qt++]=~Gt&65535&255,At[qt++]=(~Gt&65535)>>8&255,At.set(ct.subarray(rt),qt),qt+=ct.length-rt;const Et=j(ct,0,ct.length);return At[qt++]=Et>>24&255,At[qt++]=Et>>16&255,At[qt++]=Et>>8&255,At[qt++]=Et&255,At}function K(ct,Gt,wt,Mt){const At=ct.width,qt=ct.height;let rt,Et,Ot;const tt=ct.data;switch(Gt){case W.ImageKind.GRAYSCALE_1BPP:Et=0,rt=1,Ot=At+7>>3;break;case W.ImageKind.RGB_24BPP:Et=2,rt=8,Ot=At*3;break;case W.ImageKind.RGBA_32BPP:Et=6,rt=8,Ot=At*4;break;default:throw new Error("invalid format")}const T=new Uint8Array((1+Ot)*qt);let P=0,$=0;for(let Kt=0;Kt<qt;++Kt)T[P++]=0,T.set(tt.subarray($,$+Ot),P),$+=Ot,P+=Ot;if(Gt===W.ImageKind.GRAYSCALE_1BPP&&Mt){P=0;for(let Kt=0;Kt<qt;Kt++){P++;for(let Zt=0;Zt<Ot;Zt++)T[P++]^=255}}const at=new Uint8Array([At>>24&255,At>>16&255,At>>8&255,At&255,qt>>24&255,qt>>16&255,qt>>8&255,qt&255,rt,Et,0,0,0]),ot=ht(T),st=J.length+F*3+at.length+ot.length,xt=new Uint8Array(st);let $t=0;return xt.set(J,$t),$t+=J.length,N("IHDR",at,xt,$t),$t+=F+at.length,N("IDATA",ot,xt,$t),$t+=F+ot.length,N("IEND",new Uint8Array(0),xt,$t),O(xt,"image/png",wt)}return function(Gt,wt,Mt){const At=Gt.kind===void 0?W.ImageKind.GRAYSCALE_1BPP:Gt.kind;return K(Gt,At,wt,Mt)}}();class lt{constructor(){this.fontSizeScale=1,this.fontWeight=_.fontWeight,this.fontSize=0,this.textMatrix=W.IDENTITY_MATRIX,this.fontMatrix=W.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=W.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=_.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(F,B){this.x=F,this.y=B}}function q(J){let F=[];const B=[];for(const L of J){if(L.fn==="save"){F.push({fnId:92,fn:"group",items:[]}),B.push(F),F=F.at(-1).items;continue}L.fn==="restore"?F=B.pop():F.push(L)}return F}function V(J){if(Number.isInteger(J))return J.toString();const F=J.toFixed(10);let B=F.length-1;if(F[B]!=="0")return F;do B--;while(F[B]==="0");return F.substring(0,F[B]==="."?B:B+1)}function et(J){if(J[4]===0&&J[5]===0){if(J[1]===0&&J[2]===0)return J[0]===1&&J[3]===1?"":`scale(${V(J[0])} ${V(J[3])})`;if(J[0]===J[3]&&J[1]===-J[2]){const F=Math.acos(J[0])*180/Math.PI;return`rotate(${V(F)})`}}else if(J[0]===1&&J[1]===0&&J[2]===0&&J[3]===1)return`translate(${V(J[4])} ${V(J[5])})`;return`matrix(${V(J[0])} ${V(J[1])} ${V(J[2])} ${V(J[3])} ${V(J[4])} ${V(J[5])})`}let G=0,U=0,Y=0;class dt{constructor(F,B,L=!1){(0,R.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new R.DOMSVGFactory,this.current=new lt,this.transformMatrix=W.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=F,this.objs=B,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!L,this._operatorIdMapping=[];for(const N in W.OPS)this._operatorIdMapping[W.OPS[N]]=N}getObject(F,B=null){return typeof F=="string"?F.startsWith("g_")?this.commonObjs.get(F):this.objs.get(F):B}save(){this.transformStack.push(this.transformMatrix);const F=this.current;this.extraStack.push(F),this.current=F.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(F){this.save(),this.executeOpTree(F),this.restore()}loadDependencies(F){const B=F.fnArray,L=F.argsArray;for(let N=0,j=B.length;N<j;N++)if(B[N]===W.OPS.dependency)for(const ht of L[N]){const D=ht.startsWith("g_")?this.commonObjs:this.objs,K=new Promise(ct=>{D.get(ht,ct)});this.current.dependencies.push(K)}return Promise.all(this.current.dependencies)}transform(F,B,L,N,j,ht){const D=[F,B,L,N,j,ht];this.transformMatrix=W.Util.transform(this.transformMatrix,D),this.tgrp=null}getSVG(F,B){this.viewport=B;const L=this._initialize(B);return this.loadDependencies(F).then(()=>(this.transformMatrix=W.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(F)),L))}convertOpList(F){const B=this._operatorIdMapping,L=F.argsArray,N=F.fnArray,j=[];for(let ht=0,D=N.length;ht<D;ht++){const K=N[ht];j.push({fnId:K,fn:B[K],args:L[ht]})}return q(j)}executeOpTree(F){for(const B of F){const L=B.fn,N=B.fnId,j=B.args;switch(N|0){case W.OPS.beginText:this.beginText();break;case W.OPS.dependency:break;case W.OPS.setLeading:this.setLeading(j);break;case W.OPS.setLeadingMoveText:this.setLeadingMoveText(j[0],j[1]);break;case W.OPS.setFont:this.setFont(j);break;case W.OPS.showText:this.showText(j[0]);break;case W.OPS.showSpacedText:this.showText(j[0]);break;case W.OPS.endText:this.endText();break;case W.OPS.moveText:this.moveText(j[0],j[1]);break;case W.OPS.setCharSpacing:this.setCharSpacing(j[0]);break;case W.OPS.setWordSpacing:this.setWordSpacing(j[0]);break;case W.OPS.setHScale:this.setHScale(j[0]);break;case W.OPS.setTextMatrix:this.setTextMatrix(j[0],j[1],j[2],j[3],j[4],j[5]);break;case W.OPS.setTextRise:this.setTextRise(j[0]);break;case W.OPS.setTextRenderingMode:this.setTextRenderingMode(j[0]);break;case W.OPS.setLineWidth:this.setLineWidth(j[0]);break;case W.OPS.setLineJoin:this.setLineJoin(j[0]);break;case W.OPS.setLineCap:this.setLineCap(j[0]);break;case W.OPS.setMiterLimit:this.setMiterLimit(j[0]);break;case W.OPS.setFillRGBColor:this.setFillRGBColor(j[0],j[1],j[2]);break;case W.OPS.setStrokeRGBColor:this.setStrokeRGBColor(j[0],j[1],j[2]);break;case W.OPS.setStrokeColorN:this.setStrokeColorN(j);break;case W.OPS.setFillColorN:this.setFillColorN(j);break;case W.OPS.shadingFill:this.shadingFill(j[0]);break;case W.OPS.setDash:this.setDash(j[0],j[1]);break;case W.OPS.setRenderingIntent:this.setRenderingIntent(j[0]);break;case W.OPS.setFlatness:this.setFlatness(j[0]);break;case W.OPS.setGState:this.setGState(j[0]);break;case W.OPS.fill:this.fill();break;case W.OPS.eoFill:this.eoFill();break;case W.OPS.stroke:this.stroke();break;case W.OPS.fillStroke:this.fillStroke();break;case W.OPS.eoFillStroke:this.eoFillStroke();break;case W.OPS.clip:this.clip("nonzero");break;case W.OPS.eoClip:this.clip("evenodd");break;case W.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case W.OPS.paintImageXObject:this.paintImageXObject(j[0]);break;case W.OPS.paintInlineImageXObject:this.paintInlineImageXObject(j[0]);break;case W.OPS.paintImageMaskXObject:this.paintImageMaskXObject(j[0]);break;case W.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(j[0],j[1]);break;case W.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case W.OPS.closePath:this.closePath();break;case W.OPS.closeStroke:this.closeStroke();break;case W.OPS.closeFillStroke:this.closeFillStroke();break;case W.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case W.OPS.nextLine:this.nextLine();break;case W.OPS.transform:this.transform(j[0],j[1],j[2],j[3],j[4],j[5]);break;case W.OPS.constructPath:this.constructPath(j[0],j[1]);break;case W.OPS.endPath:this.endPath();break;case 92:this.group(B.items);break;default:(0,W.warn)(`Unimplemented operator ${L}`);break}}}setWordSpacing(F){this.current.wordSpacing=F}setCharSpacing(F){this.current.charSpacing=F}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(F,B,L,N,j,ht){const D=this.current;D.textMatrix=D.lineMatrix=[F,B,L,N,j,ht],D.textMatrixScale=Math.hypot(F,B),D.x=D.lineX=0,D.y=D.lineY=0,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${V(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",V(-D.y)),D.txtElement=this.svgFactory.createElement("svg:text"),D.txtElement.append(D.tspan)}beginText(){const F=this.current;F.x=F.lineX=0,F.y=F.lineY=0,F.textMatrix=W.IDENTITY_MATRIX,F.lineMatrix=W.IDENTITY_MATRIX,F.textMatrixScale=1,F.tspan=this.svgFactory.createElement("svg:tspan"),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtgrp=this.svgFactory.createElement("svg:g"),F.xcoords=[],F.ycoords=[]}moveText(F,B){const L=this.current;L.x=L.lineX+=F,L.y=L.lineY+=B,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${V(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",V(-L.y))}showText(F){const B=this.current,L=B.font,N=B.fontSize;if(N===0)return;const j=B.fontSizeScale,ht=B.charSpacing,D=B.wordSpacing,K=B.fontDirection,ct=B.textHScale*K,Gt=L.vertical,wt=Gt?1:-1,Mt=L.defaultVMetrics,At=N*B.fontMatrix[0];let qt=0;for(const Ot of F){if(Ot===null){qt+=K*D;continue}else if(typeof Ot=="number"){qt+=wt*Ot*N/1e3;continue}const tt=(Ot.isSpace?D:0)+ht,T=Ot.fontChar;let P,$,at=Ot.width;if(Gt){let st;const xt=Ot.vmetric||Mt;st=Ot.vmetric?xt[1]:at*.5,st=-st*At;const $t=xt[2]*At;at=xt?-xt[0]:at,P=st/j,$=(qt+$t)/j}else P=qt/j,$=0;(Ot.isInFont||L.missingFile)&&(B.xcoords.push(B.x+P),Gt&&B.ycoords.push(-B.y+$),B.tspan.textContent+=T);const ot=Gt?at*At-tt*K:at*At+tt*K;qt+=ot}B.tspan.setAttributeNS(null,"x",B.xcoords.map(V).join(" ")),Gt?B.tspan.setAttributeNS(null,"y",B.ycoords.map(V).join(" ")):B.tspan.setAttributeNS(null,"y",V(-B.y)),Gt?B.y-=qt:B.x+=qt*ct,B.tspan.setAttributeNS(null,"font-family",B.fontFamily),B.tspan.setAttributeNS(null,"font-size",`${V(B.fontSize)}px`),B.fontStyle!==_.fontStyle&&B.tspan.setAttributeNS(null,"font-style",B.fontStyle),B.fontWeight!==_.fontWeight&&B.tspan.setAttributeNS(null,"font-weight",B.fontWeight);const rt=B.textRenderingMode&W.TextRenderingMode.FILL_STROKE_MASK;if(rt===W.TextRenderingMode.FILL||rt===W.TextRenderingMode.FILL_STROKE?(B.fillColor!==_.fillColor&&B.tspan.setAttributeNS(null,"fill",B.fillColor),B.fillAlpha<1&&B.tspan.setAttributeNS(null,"fill-opacity",B.fillAlpha)):B.textRenderingMode===W.TextRenderingMode.ADD_TO_PATH?B.tspan.setAttributeNS(null,"fill","transparent"):B.tspan.setAttributeNS(null,"fill","none"),rt===W.TextRenderingMode.STROKE||rt===W.TextRenderingMode.FILL_STROKE){const Ot=1/(B.textMatrixScale||1);this._setStrokeAttributes(B.tspan,Ot)}let Et=B.textMatrix;B.textRise!==0&&(Et=Et.slice(),Et[5]+=B.textRise),B.txtElement.setAttributeNS(null,"transform",`${et(Et)} scale(${V(ct)}, -1)`),B.txtElement.setAttributeNS(bt,"xml:space","preserve"),B.txtElement.append(B.tspan),B.txtgrp.append(B.txtElement),this._ensureTransformGroup().append(B.txtElement)}setLeadingMoveText(F,B){this.setLeading(-B),this.moveText(F,B)}addFontStyle(F){if(!F.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const B=O(F.data,F.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${F.loadedName}"; src: url(${B}); }
`}setFont(F){const B=this.current,L=this.commonObjs.get(F[0]);let N=F[1];B.font=L,this.embedFonts&&!L.missingFile&&!this.embeddedFonts[L.loadedName]&&(this.addFontStyle(L),this.embeddedFonts[L.loadedName]=L),B.fontMatrix=L.fontMatrix||W.FONT_IDENTITY_MATRIX;let j="normal";L.black?j="900":L.bold&&(j="bold");const ht=L.italic?"italic":"normal";N<0?(N=-N,B.fontDirection=-1):B.fontDirection=1,B.fontSize=N,B.fontFamily=L.loadedName,B.fontWeight=j,B.fontStyle=ht,B.tspan=this.svgFactory.createElement("svg:tspan"),B.tspan.setAttributeNS(null,"y",V(-B.y)),B.xcoords=[],B.ycoords=[]}endText(){var B;const F=this.current;F.textRenderingMode&W.TextRenderingMode.ADD_TO_PATH_FLAG&&((B=F.txtElement)!=null&&B.hasChildNodes())&&(F.element=F.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(F){F>0&&(this.current.lineWidth=F)}setLineCap(F){this.current.lineCap=pt[F]}setLineJoin(F){this.current.lineJoin=nt[F]}setMiterLimit(F){this.current.miterLimit=F}setStrokeAlpha(F){this.current.strokeAlpha=F}setStrokeRGBColor(F,B,L){this.current.strokeColor=W.Util.makeHexColor(F,B,L)}setFillAlpha(F){this.current.fillAlpha=F}setFillRGBColor(F,B,L){this.current.fillColor=W.Util.makeHexColor(F,B,L),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(F){this.current.strokeColor=this._makeColorN_Pattern(F)}setFillColorN(F){this.current.fillColor=this._makeColorN_Pattern(F)}shadingFill(F){const{width:B,height:L}=this.viewport,N=W.Util.inverseTransform(this.transformMatrix),[j,ht,D,K]=W.Util.getAxialAlignedBoundingBox([0,0,B,L],N),ct=this.svgFactory.createElement("svg:rect");ct.setAttributeNS(null,"x",j),ct.setAttributeNS(null,"y",ht),ct.setAttributeNS(null,"width",D-j),ct.setAttributeNS(null,"height",K-ht),ct.setAttributeNS(null,"fill",this._makeShadingPattern(F)),this.current.fillAlpha<1&&ct.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ct)}_makeColorN_Pattern(F){return F[0]==="TilingPattern"?this._makeTilingPattern(F):this._makeShadingPattern(F)}_makeTilingPattern(F){const B=F[1],L=F[2],N=F[3]||W.IDENTITY_MATRIX,[j,ht,D,K]=F[4],ct=F[5],Gt=F[6],wt=F[7],Mt=`shading${Y++}`,[At,qt,rt,Et]=W.Util.normalizeRect([...W.Util.applyTransform([j,ht],N),...W.Util.applyTransform([D,K],N)]),[Ot,tt]=W.Util.singularValueDecompose2dScale(N),T=ct*Ot,P=Gt*tt,$=this.svgFactory.createElement("svg:pattern");$.setAttributeNS(null,"id",Mt),$.setAttributeNS(null,"patternUnits","userSpaceOnUse"),$.setAttributeNS(null,"width",T),$.setAttributeNS(null,"height",P),$.setAttributeNS(null,"x",`${At}`),$.setAttributeNS(null,"y",`${qt}`);const at=this.svg,ot=this.transformMatrix,st=this.current.fillColor,xt=this.current.strokeColor,$t=this.svgFactory.create(rt-At,Et-qt);if(this.svg=$t,this.transformMatrix=N,wt===2){const Kt=W.Util.makeHexColor(...B);this.current.fillColor=Kt,this.current.strokeColor=Kt}return this.executeOpTree(this.convertOpList(L)),this.svg=at,this.transformMatrix=ot,this.current.fillColor=st,this.current.strokeColor=xt,$.append($t.childNodes[0]),this.defs.append($),`url(#${Mt})`}_makeShadingPattern(F){switch(typeof F=="string"&&(F=this.objs.get(F)),F[0]){case"RadialAxial":const B=`shading${Y++}`,L=F[3];let N;switch(F[1]){case"axial":const j=F[4],ht=F[5];N=this.svgFactory.createElement("svg:linearGradient"),N.setAttributeNS(null,"id",B),N.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),N.setAttributeNS(null,"x1",j[0]),N.setAttributeNS(null,"y1",j[1]),N.setAttributeNS(null,"x2",ht[0]),N.setAttributeNS(null,"y2",ht[1]);break;case"radial":const D=F[4],K=F[5],ct=F[6],Gt=F[7];N=this.svgFactory.createElement("svg:radialGradient"),N.setAttributeNS(null,"id",B),N.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),N.setAttributeNS(null,"cx",K[0]),N.setAttributeNS(null,"cy",K[1]),N.setAttributeNS(null,"r",Gt),N.setAttributeNS(null,"fx",D[0]),N.setAttributeNS(null,"fy",D[1]),N.setAttributeNS(null,"fr",ct);break;default:throw new Error(`Unknown RadialAxial type: ${F[1]}`)}for(const j of L){const ht=this.svgFactory.createElement("svg:stop");ht.setAttributeNS(null,"offset",j[0]),ht.setAttributeNS(null,"stop-color",j[1]),N.append(ht)}return this.defs.append(N),`url(#${B})`;case"Mesh":return(0,W.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${F[0]}`)}}setDash(F,B){this.current.dashArray=F,this.current.dashPhase=B}constructPath(F,B){const L=this.current;let N=L.x,j=L.y,ht=[],D=0;for(const K of F)switch(K|0){case W.OPS.rectangle:N=B[D++],j=B[D++];const ct=B[D++],Gt=B[D++],wt=N+ct,Mt=j+Gt;ht.push("M",V(N),V(j),"L",V(wt),V(j),"L",V(wt),V(Mt),"L",V(N),V(Mt),"Z");break;case W.OPS.moveTo:N=B[D++],j=B[D++],ht.push("M",V(N),V(j));break;case W.OPS.lineTo:N=B[D++],j=B[D++],ht.push("L",V(N),V(j));break;case W.OPS.curveTo:N=B[D+4],j=B[D+5],ht.push("C",V(B[D]),V(B[D+1]),V(B[D+2]),V(B[D+3]),V(N),V(j)),D+=6;break;case W.OPS.curveTo2:ht.push("C",V(N),V(j),V(B[D]),V(B[D+1]),V(B[D+2]),V(B[D+3])),N=B[D+2],j=B[D+3],D+=4;break;case W.OPS.curveTo3:N=B[D+2],j=B[D+3],ht.push("C",V(B[D]),V(B[D+1]),V(N),V(j),V(N),V(j)),D+=4;break;case W.OPS.closePath:ht.push("Z");break}ht=ht.join(" "),L.path&&F.length>0&&F[0]!==W.OPS.rectangle&&F[0]!==W.OPS.moveTo?ht=L.path.getAttributeNS(null,"d")+ht:(L.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(L.path)),L.path.setAttributeNS(null,"d",ht),L.path.setAttributeNS(null,"fill","none"),L.element=L.path,L.setCurrentPoint(N,j)}endPath(){const F=this.current;if(F.path=null,!this.pendingClip)return;if(!F.element){this.pendingClip=null;return}const B=`clippath${G++}`,L=this.svgFactory.createElement("svg:clipPath");L.setAttributeNS(null,"id",B),L.setAttributeNS(null,"transform",et(this.transformMatrix));const N=F.element.cloneNode(!0);if(this.pendingClip==="evenodd"?N.setAttributeNS(null,"clip-rule","evenodd"):N.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,L.append(N),this.defs.append(L),F.activeClipUrl){F.clipGroup=null;for(const j of this.extraStack)j.clipGroup=null;L.setAttributeNS(null,"clip-path",F.activeClipUrl)}F.activeClipUrl=`url(#${B})`,this.tgrp=null}clip(F){this.pendingClip=F}closePath(){const F=this.current;if(F.path){const B=`${F.path.getAttributeNS(null,"d")}Z`;F.path.setAttributeNS(null,"d",B)}}setLeading(F){this.current.leading=-F}setTextRise(F){this.current.textRise=F}setTextRenderingMode(F){this.current.textRenderingMode=F}setHScale(F){this.current.textHScale=F/100}setRenderingIntent(F){}setFlatness(F){}setGState(F){for(const[B,L]of F)switch(B){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L);break;case"CA":this.setStrokeAlpha(L);break;case"ca":this.setFillAlpha(L);break;default:(0,W.warn)(`Unimplemented graphic state operator ${B}`);break}}fill(){const F=this.current;F.element&&(F.element.setAttributeNS(null,"fill",F.fillColor),F.element.setAttributeNS(null,"fill-opacity",F.fillAlpha),this.endPath())}stroke(){const F=this.current;F.element&&(this._setStrokeAttributes(F.element),F.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(F,B=1){const L=this.current;let N=L.dashArray;B!==1&&N.length>0&&(N=N.map(function(j){return B*j})),F.setAttributeNS(null,"stroke",L.strokeColor),F.setAttributeNS(null,"stroke-opacity",L.strokeAlpha),F.setAttributeNS(null,"stroke-miterlimit",V(L.miterLimit)),F.setAttributeNS(null,"stroke-linecap",L.lineCap),F.setAttributeNS(null,"stroke-linejoin",L.lineJoin),F.setAttributeNS(null,"stroke-width",V(B*L.lineWidth)+"px"),F.setAttributeNS(null,"stroke-dasharray",N.map(V).join(" ")),F.setAttributeNS(null,"stroke-dashoffset",V(B*L.dashPhase)+"px")}eoFill(){var F;(F=this.current.element)==null||F.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var F;(F=this.current.element)==null||F.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width","1px"),F.setAttributeNS(null,"height","1px"),F.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(F)}paintImageXObject(F){const B=this.getObject(F);if(!B){(0,W.warn)(`Dependent image with object ID ${F} is not ready yet`);return}this.paintInlineImageXObject(B)}paintInlineImageXObject(F,B){const L=F.width,N=F.height,j=ft(F,this.forceDataSchema,!!B),ht=this.svgFactory.createElement("svg:rect");ht.setAttributeNS(null,"x","0"),ht.setAttributeNS(null,"y","0"),ht.setAttributeNS(null,"width",V(L)),ht.setAttributeNS(null,"height",V(N)),this.current.element=ht,this.clip("nonzero");const D=this.svgFactory.createElement("svg:image");D.setAttributeNS(zt,"xlink:href",j),D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y",V(-N)),D.setAttributeNS(null,"width",V(L)+"px"),D.setAttributeNS(null,"height",V(N)+"px"),D.setAttributeNS(null,"transform",`scale(${V(1/L)} ${V(-1/N)})`),B?B.append(D):this._ensureTransformGroup().append(D)}paintImageMaskXObject(F){const B=this.getObject(F.data,F);if(B.bitmap){(0,W.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const L=this.current,N=B.width,j=B.height,ht=L.fillColor;L.maskId=`mask${U++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",L.maskId);const K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y","0"),K.setAttributeNS(null,"width",V(N)),K.setAttributeNS(null,"height",V(j)),K.setAttributeNS(null,"fill",ht),K.setAttributeNS(null,"mask",`url(#${L.maskId})`),this.defs.append(D),this._ensureTransformGroup().append(K),this.paintInlineImageXObject(B,D)}paintFormXObjectBegin(F,B){if(Array.isArray(F)&&F.length===6&&this.transform(F[0],F[1],F[2],F[3],F[4],F[5]),B){const L=B[2]-B[0],N=B[3]-B[1],j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",B[0]),j.setAttributeNS(null,"y",B[1]),j.setAttributeNS(null,"width",V(L)),j.setAttributeNS(null,"height",V(N)),this.current.element=j,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(F){const B=this.svgFactory.create(F.width,F.height),L=this.svgFactory.createElement("svg:defs");B.append(L),this.defs=L;const N=this.svgFactory.createElement("svg:g");return N.setAttributeNS(null,"transform",et(F.transform)),B.append(N),this.svg=N,B}_ensureClipGroup(){if(!this.current.clipGroup){const F=this.svgFactory.createElement("svg:g");F.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(F),this.current.clipGroup=F}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",et(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}x.SVGGraphics=dt},(A,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.XfaText=void 0;class vt{static textContent(W){const _=[],bt={items:_,styles:Object.create(null)};function zt(pt){var ft;if(!pt)return;let nt=null;const O=pt.name;if(O==="#text")nt=pt.value;else if(vt.shouldBuildText(O))(ft=pt==null?void 0:pt.attributes)!=null&&ft.textContent?nt=pt.attributes.textContent:pt.value&&(nt=pt.value);else return;if(nt!==null&&_.push({str:nt}),!!pt.children)for(const lt of pt.children)zt(lt)}return zt(W),bt}static shouldBuildText(W){return!(W==="textarea"||W==="input"||W==="option"||W==="select")}}x.XfaText=vt},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.TextLayerRenderTask=void 0,x.renderTextLayer=et,x.updateTextLayer=G;var R=vt(1),W=vt(6);const _=1e5,bt=30,zt=.8,pt=new Map;function nt(U,Y){let dt;if(Y&&R.FeatureTest.isOffscreenCanvasSupported)dt=new OffscreenCanvas(U,U).getContext("2d",{alpha:!1});else{const J=document.createElement("canvas");J.width=J.height=U,dt=J.getContext("2d",{alpha:!1})}return dt}function O(U,Y){const dt=pt.get(U);if(dt)return dt;const J=nt(bt,Y);J.font=`${bt}px ${U}`;const F=J.measureText("");let B=F.fontBoundingBoxAscent,L=Math.abs(F.fontBoundingBoxDescent);if(B){const j=B/(B+L);return pt.set(U,j),J.canvas.width=J.canvas.height=0,j}J.strokeStyle="red",J.clearRect(0,0,bt,bt),J.strokeText("g",0,0);let N=J.getImageData(0,0,bt,bt).data;L=0;for(let j=N.length-1-3;j>=0;j-=4)if(N[j]>0){L=Math.ceil(j/4/bt);break}J.clearRect(0,0,bt,bt),J.strokeText("A",0,bt),N=J.getImageData(0,0,bt,bt).data,B=0;for(let j=0,ht=N.length;j<ht;j+=4)if(N[j]>0){B=bt-Math.floor(j/4/bt);break}if(J.canvas.width=J.canvas.height=0,B){const j=B/(B+L);return pt.set(U,j),j}return pt.set(U,zt),zt}function ft(U,Y,dt){const J=document.createElement("span"),F={angle:0,canvasWidth:0,hasText:Y.str!=="",hasEOL:Y.hasEOL,fontSize:0};U._textDivs.push(J);const B=R.Util.transform(U._transform,Y.transform);let L=Math.atan2(B[1],B[0]);const N=dt[Y.fontName];N.vertical&&(L+=Math.PI/2);const j=Math.hypot(B[2],B[3]),ht=j*O(N.fontFamily,U._isOffscreenCanvasSupported);let D,K;L===0?(D=B[4],K=B[5]-ht):(D=B[4]+ht*Math.sin(L),K=B[5]-ht*Math.cos(L));const ct="calc(var(--scale-factor)*",Gt=J.style;U._container===U._rootContainer?(Gt.left=`${(100*D/U._pageWidth).toFixed(2)}%`,Gt.top=`${(100*K/U._pageHeight).toFixed(2)}%`):(Gt.left=`${ct}${D.toFixed(2)}px)`,Gt.top=`${ct}${K.toFixed(2)}px)`),Gt.fontSize=`${ct}${j.toFixed(2)}px)`,Gt.fontFamily=N.fontFamily,F.fontSize=j,J.setAttribute("role","presentation"),J.textContent=Y.str,J.dir=Y.dir,U._fontInspectorEnabled&&(J.dataset.fontName=Y.fontName),L!==0&&(F.angle=L*(180/Math.PI));let wt=!1;if(Y.str.length>1)wt=!0;else if(Y.str!==" "&&Y.transform[0]!==Y.transform[3]){const Mt=Math.abs(Y.transform[0]),At=Math.abs(Y.transform[3]);Mt!==At&&Math.max(Mt,At)/Math.min(Mt,At)>1.5&&(wt=!0)}wt&&(F.canvasWidth=N.vertical?Y.height:Y.width),U._textDivProperties.set(J,F),U._isReadableStream&&U._layoutText(J)}function lt(U){const{div:Y,scale:dt,properties:J,ctx:F,prevFontSize:B,prevFontFamily:L}=U,{style:N}=Y;let j="";if(J.canvasWidth!==0&&J.hasText){const{fontFamily:ht}=N,{canvasWidth:D,fontSize:K}=J;(B!==K||L!==ht)&&(F.font=`${K*dt}px ${ht}`,U.prevFontSize=K,U.prevFontFamily=ht);const{width:ct}=F.measureText(Y.textContent);ct>0&&(j=`scaleX(${D*dt/ct})`)}J.angle!==0&&(j=`rotate(${J.angle}deg) ${j}`),j.length>0&&(N.transform=j)}function q(U){if(U._canceled)return;const Y=U._textDivs,dt=U._capability;if(Y.length>_){dt.resolve();return}if(!U._isReadableStream)for(const F of Y)U._layoutText(F);dt.resolve()}class V{constructor({textContentSource:Y,container:dt,viewport:J,textDivs:F,textDivProperties:B,textContentItemsStr:L,isOffscreenCanvasSupported:N}){var ct;this._textContentSource=Y,this._isReadableStream=Y instanceof ReadableStream,this._container=this._rootContainer=dt,this._textDivs=F||[],this._textContentItemsStr=L||[],this._isOffscreenCanvasSupported=N,this._fontInspectorEnabled=!!((ct=globalThis.FontInspector)!=null&&ct.enabled),this._reader=null,this._textDivProperties=B||new WeakMap,this._canceled=!1,this._capability=new R.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:J.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:nt(0,N)};const{pageWidth:j,pageHeight:ht,pageX:D,pageY:K}=J.rawDims;this._transform=[1,0,0,-1,-D,K+ht],this._pageWidth=j,this._pageHeight=ht,(0,W.setLayerDimensions)(dt,J),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new R.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new R.AbortException("TextLayer task cancelled."))}_processItems(Y,dt){for(const J of Y){if(J.str===void 0){if(J.type==="beginMarkedContentProps"||J.type==="beginMarkedContent"){const F=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),J.id!==null&&this._container.setAttribute("id",`${J.id}`),F.append(this._container)}else J.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(J.str),ft(this,J,dt)}}_layoutText(Y){const dt=this._layoutTextParams.properties=this._textDivProperties.get(Y);if(this._layoutTextParams.div=Y,lt(this._layoutTextParams),dt.hasText&&this._container.append(Y),dt.hasEOL){const J=document.createElement("br");J.setAttribute("role","presentation"),this._container.append(J)}}_render(){const Y=new R.PromiseCapability;let dt=Object.create(null);if(this._isReadableStream){const J=()=>{this._reader.read().then(({value:F,done:B})=>{if(B){Y.resolve();return}Object.assign(dt,F.styles),this._processItems(F.items,dt),J()},Y.reject)};this._reader=this._textContentSource.getReader(),J()}else if(this._textContentSource){const{items:J,styles:F}=this._textContentSource;this._processItems(J,F),Y.resolve()}else throw new Error('No "textContentSource" parameter specified.');Y.promise.then(()=>{dt=null,q(this)},this._capability.reject)}}x.TextLayerRenderTask=V;function et(U){!U.textContentSource&&(U.textContent||U.textContentStream)&&((0,W.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),U.textContentSource=U.textContent||U.textContentStream);const{container:Y,viewport:dt}=U,J=getComputedStyle(Y),F=J.getPropertyValue("visibility"),B=parseFloat(J.getPropertyValue("--scale-factor"));F==="visible"&&(!B||Math.abs(B-dt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const L=new V(U);return L._render(),L}function G({container:U,viewport:Y,textDivs:dt,textDivProperties:J,isOffscreenCanvasSupported:F,mustRotate:B=!0,mustRescale:L=!0}){if(B&&(0,W.setLayerDimensions)(U,{rotation:Y.rotation}),L){const N=nt(0,F),ht={prevFontSize:null,prevFontFamily:null,div:null,scale:Y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:N};for(const D of dt)ht.properties=J.get(D),ht.div=D,lt(ht)}}},(A,x,vt)=>{var O,ft,lt,q,V,et,G,U,Y,dt,J,yr,Oi,Ar,Er;Object.defineProperty(x,"__esModule",{value:!0}),x.AnnotationEditorLayer=void 0;var R=vt(1),W=vt(4),_=vt(28),bt=vt(33),zt=vt(6),pt=vt(34);const j=class j{constructor({uiManager:D,pageIndex:K,div:ct,accessibilityManager:Gt,annotationLayer:wt,viewport:Mt,l10n:At}){Wt(this,J);Wt(this,O);Wt(this,ft,!1);Wt(this,lt,null);Wt(this,q,this.pointerup.bind(this));Wt(this,V,this.pointerdown.bind(this));Wt(this,et,new Map);Wt(this,G,!1);Wt(this,U,!1);Wt(this,Y,!1);Wt(this,dt);const qt=[_.FreeTextEditor,bt.InkEditor,pt.StampEditor];if(!j._initialized){j._initialized=!0;for(const rt of qt)rt.initialize(At)}D.registerEditorTypes(qt),Vt(this,dt,D),this.pageIndex=K,this.div=ct,Vt(this,O,Gt),Vt(this,lt,wt),this.viewport=Mt,y(this,dt).addLayer(this)}get isEmpty(){return y(this,et).size===0}updateToolbar(D){y(this,dt).updateToolbar(D)}updateMode(D=y(this,dt).getMode()){Pt(this,J,Er).call(this),D===R.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),D!==R.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",D===R.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",D===R.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",D===R.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(D){if(!D&&y(this,dt).getMode()!==R.AnnotationEditorType.INK)return;if(!D){for(const ct of y(this,et).values())if(ct.isEmpty()){ct.setInBackground();return}}Pt(this,J,Oi).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(D){y(this,dt).setEditingState(D)}addCommands(D){y(this,dt).addCommands(D)}enable(){this.div.style.pointerEvents="auto";const D=new Set;for(const ct of y(this,et).values())ct.enableEditing(),ct.annotationElementId&&D.add(ct.annotationElementId);if(!y(this,lt))return;const K=y(this,lt).getEditableAnnotations();for(const ct of K){if(ct.hide(),y(this,dt).isDeletedAnnotationElement(ct.data.id)||D.has(ct.data.id))continue;const Gt=this.deserialize(ct);Gt&&(this.addOrRebuild(Gt),Gt.enableEditing())}}disable(){var K;Vt(this,Y,!0),this.div.style.pointerEvents="none";const D=new Set;for(const ct of y(this,et).values()){if(ct.disableEditing(),!ct.annotationElementId||ct.serialize()!==null){D.add(ct.annotationElementId);continue}(K=this.getEditableAnnotation(ct.annotationElementId))==null||K.show(),ct.remove()}if(y(this,lt)){const ct=y(this,lt).getEditableAnnotations();for(const Gt of ct){const{id:wt}=Gt.data;D.has(wt)||y(this,dt).isDeletedAnnotationElement(wt)||Gt.show()}}Pt(this,J,Er).call(this),this.isEmpty&&(this.div.hidden=!0),Vt(this,Y,!1)}getEditableAnnotation(D){var K;return((K=y(this,lt))==null?void 0:K.getEditableAnnotation(D))||null}setActiveEditor(D){y(this,dt).getActive()!==D&&y(this,dt).setActiveEditor(D)}enableClick(){this.div.addEventListener("pointerdown",y(this,V)),this.div.addEventListener("pointerup",y(this,q))}disableClick(){this.div.removeEventListener("pointerdown",y(this,V)),this.div.removeEventListener("pointerup",y(this,q))}attach(D){y(this,et).set(D.id,D);const{annotationElementId:K}=D;K&&y(this,dt).isDeletedAnnotationElement(K)&&y(this,dt).removeDeletedAnnotationElement(D)}detach(D){var K;y(this,et).delete(D.id),(K=y(this,O))==null||K.removePointerInTextLayer(D.contentDiv),!y(this,Y)&&D.annotationElementId&&y(this,dt).addDeletedAnnotationElement(D)}remove(D){this.detach(D),y(this,dt).removeEditor(D),D.div.contains(document.activeElement)&&setTimeout(()=>{y(this,dt).focusMainContainer()},0),D.div.remove(),D.isAttachedToDOM=!1,y(this,U)||this.addInkEditorIfNeeded(!1)}changeParent(D){var K;D.parent!==this&&(D.annotationElementId&&(y(this,dt).addDeletedAnnotationElement(D.annotationElementId),W.AnnotationEditor.deleteAnnotationElement(D),D.annotationElementId=null),this.attach(D),(K=D.parent)==null||K.detach(D),D.setParent(this),D.div&&D.isAttachedToDOM&&(D.div.remove(),this.div.append(D.div)))}add(D){if(this.changeParent(D),y(this,dt).addEditor(D),this.attach(D),!D.isAttachedToDOM){const K=D.render();this.div.append(K),D.isAttachedToDOM=!0}D.fixAndSetPosition(),D.onceAdded(),y(this,dt).addToAnnotationStorage(D)}moveEditorInDOM(D){var ct;if(!D.isAttachedToDOM)return;const{activeElement:K}=document;D.div.contains(K)&&(D._focusEventsAllowed=!1,setTimeout(()=>{D.div.contains(document.activeElement)?D._focusEventsAllowed=!0:(D.div.addEventListener("focusin",()=>{D._focusEventsAllowed=!0},{once:!0}),K.focus())},0)),D._structTreeParentId=(ct=y(this,O))==null?void 0:ct.moveElementInDOM(this.div,D.div,D.contentDiv,!0)}addOrRebuild(D){D.needsToBeRebuilt()?D.rebuild():this.add(D)}addUndoableEditor(D){const K=()=>D._uiManager.rebuild(D),ct=()=>{D.remove()};this.addCommands({cmd:K,undo:ct,mustExec:!1})}getNextId(){return y(this,dt).getId()}pasteEditor(D,K){y(this,dt).updateToolbar(D),y(this,dt).updateMode(D);const{offsetX:ct,offsetY:Gt}=Pt(this,J,Ar).call(this),wt=this.getNextId(),Mt=Pt(this,J,yr).call(this,{parent:this,id:wt,x:ct,y:Gt,uiManager:y(this,dt),isCentered:!0,...K});Mt&&this.add(Mt)}deserialize(D){switch(D.annotationType??D.annotationEditorType){case R.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(D,this,y(this,dt));case R.AnnotationEditorType.INK:return bt.InkEditor.deserialize(D,this,y(this,dt));case R.AnnotationEditorType.STAMP:return pt.StampEditor.deserialize(D,this,y(this,dt))}return null}addNewEditor(){Pt(this,J,Oi).call(this,Pt(this,J,Ar).call(this),!0)}setSelected(D){y(this,dt).setSelected(D)}toggleSelected(D){y(this,dt).toggleSelected(D)}isSelected(D){return y(this,dt).isSelected(D)}unselect(D){y(this,dt).unselect(D)}pointerup(D){const{isMac:K}=R.FeatureTest.platform;if(!(D.button!==0||D.ctrlKey&&K)&&D.target===this.div&&y(this,G)){if(Vt(this,G,!1),!y(this,ft)){Vt(this,ft,!0);return}if(y(this,dt).getMode()===R.AnnotationEditorType.STAMP){y(this,dt).unselectAll();return}Pt(this,J,Oi).call(this,D,!1)}}pointerdown(D){if(y(this,G)){Vt(this,G,!1);return}const{isMac:K}=R.FeatureTest.platform;if(D.button!==0||D.ctrlKey&&K||D.target!==this.div)return;Vt(this,G,!0);const ct=y(this,dt).getActive();Vt(this,ft,!ct||ct.isEmpty())}findNewParent(D,K,ct){const Gt=y(this,dt).findParent(K,ct);return Gt===null||Gt===this?!1:(Gt.changeParent(D),!0)}destroy(){var D,K;((D=y(this,dt).getActive())==null?void 0:D.parent)===this&&(y(this,dt).commitOrRemove(),y(this,dt).setActiveEditor(null));for(const ct of y(this,et).values())(K=y(this,O))==null||K.removePointerInTextLayer(ct.contentDiv),ct.setParent(null),ct.isAttachedToDOM=!1,ct.div.remove();this.div=null,y(this,et).clear(),y(this,dt).removeLayer(this)}render({viewport:D}){this.viewport=D,(0,zt.setLayerDimensions)(this.div,D);for(const K of y(this,dt).getEditors(this.pageIndex))this.add(K);this.updateMode()}update({viewport:D}){y(this,dt).commitOrRemove(),this.viewport=D,(0,zt.setLayerDimensions)(this.div,{rotation:D.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:D,pageHeight:K}=this.viewport.rawDims;return[D,K]}};O=new WeakMap,ft=new WeakMap,lt=new WeakMap,q=new WeakMap,V=new WeakMap,et=new WeakMap,G=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,J=new WeakSet,yr=function(D){switch(y(this,dt).getMode()){case R.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(D);case R.AnnotationEditorType.INK:return new bt.InkEditor(D);case R.AnnotationEditorType.STAMP:return new pt.StampEditor(D)}return null},Oi=function(D,K){const ct=this.getNextId(),Gt=Pt(this,J,yr).call(this,{parent:this,id:ct,x:D.offsetX,y:D.offsetY,uiManager:y(this,dt),isCentered:K});return Gt&&this.add(Gt),Gt},Ar=function(){const{x:D,y:K,width:ct,height:Gt}=this.div.getBoundingClientRect(),wt=Math.max(0,D),Mt=Math.max(0,K),At=Math.min(window.innerWidth,D+ct),qt=Math.min(window.innerHeight,K+Gt),rt=(wt+At)/2-D,Et=(Mt+qt)/2-K,[Ot,tt]=this.viewport.rotation%180===0?[rt,Et]:[Et,rt];return{offsetX:Ot,offsetY:tt}},Er=function(){Vt(this,U,!0);for(const D of y(this,et).values())D.isEmpty()&&D.remove();Vt(this,U,!1)},yn(j,"_initialized",!1);let nt=j;x.AnnotationEditorLayer=nt},(A,x,vt)=>{var pt,nt,O,ft,lt,q,V,et,G,U,fs,ps,gs,_i,Sr,ms,wr;Object.defineProperty(x,"__esModule",{value:!0}),x.FreeTextEditor=void 0;var R=vt(1),W=vt(5),_=vt(4),bt=vt(29);const j=class j extends _.AnnotationEditor{constructor(K){super({...K,name:"freeTextEditor"});Wt(this,U);Wt(this,pt,this.editorDivBlur.bind(this));Wt(this,nt,this.editorDivFocus.bind(this));Wt(this,O,this.editorDivInput.bind(this));Wt(this,ft,this.editorDivKeydown.bind(this));Wt(this,lt);Wt(this,q,"");Wt(this,V,`${this.id}-editor`);Wt(this,et);Wt(this,G,null);Vt(this,lt,K.color||j._defaultColor||_.AnnotationEditor._defaultLineColor),Vt(this,et,K.fontSize||j._defaultFontSize)}static get _keyboardManager(){const K=j.prototype,ct=Mt=>Mt.isEmpty(),Gt=W.AnnotationEditorUIManager.TRANSLATE_SMALL,wt=W.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,R.shadow)(this,"_keyboardManager",new W.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],K.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],K.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],K._translateEmpty,{args:[-Gt,0],checker:ct}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],K._translateEmpty,{args:[-wt,0],checker:ct}],[["ArrowRight","mac+ArrowRight"],K._translateEmpty,{args:[Gt,0],checker:ct}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],K._translateEmpty,{args:[wt,0],checker:ct}],[["ArrowUp","mac+ArrowUp"],K._translateEmpty,{args:[0,-Gt],checker:ct}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],K._translateEmpty,{args:[0,-wt],checker:ct}],[["ArrowDown","mac+ArrowDown"],K._translateEmpty,{args:[0,Gt],checker:ct}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],K._translateEmpty,{args:[0,wt],checker:ct}]]))}static initialize(K){_.AnnotationEditor.initialize(K,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(K,ct){switch(K){case R.AnnotationEditorParamsType.FREETEXT_SIZE:j._defaultFontSize=ct;break;case R.AnnotationEditorParamsType.FREETEXT_COLOR:j._defaultColor=ct;break}}updateParams(K,ct){switch(K){case R.AnnotationEditorParamsType.FREETEXT_SIZE:Pt(this,U,fs).call(this,ct);break;case R.AnnotationEditorParamsType.FREETEXT_COLOR:Pt(this,U,ps).call(this,ct);break}}static get defaultPropertiesToUpdate(){return[[R.AnnotationEditorParamsType.FREETEXT_SIZE,j._defaultFontSize],[R.AnnotationEditorParamsType.FREETEXT_COLOR,j._defaultColor||_.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[R.AnnotationEditorParamsType.FREETEXT_SIZE,y(this,et)],[R.AnnotationEditorParamsType.FREETEXT_COLOR,y(this,lt)]]}_translateEmpty(K,ct){this._uiManager.translateSelectedEditors(K,ct,!0)}getInitialTranslation(){const K=this.parentScale;return[-j._internalPadding*K,-(j._internalPadding+y(this,et))*K]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(R.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",y(this,ft)),this.editorDiv.addEventListener("focus",y(this,nt)),this.editorDiv.addEventListener("blur",y(this,pt)),this.editorDiv.addEventListener("input",y(this,O)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",y(this,V)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",y(this,ft)),this.editorDiv.removeEventListener("focus",y(this,nt)),this.editorDiv.removeEventListener("blur",y(this,pt)),this.editorDiv.removeEventListener("input",y(this,O)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),K.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var K;if(this.width){Pt(this,U,wr).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(K=this._initialOptions)!=null&&K.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const K=y(this,q),ct=Vt(this,q,Pt(this,U,gs).call(this).trimEnd());if(K===ct)return;const Gt=wt=>{if(Vt(this,q,wt),!wt){this.remove();return}Pt(this,U,Sr).call(this),this._uiManager.rebuild(this),Pt(this,U,_i).call(this)};this.addCommands({cmd:()=>{Gt(ct)},undo:()=>{Gt(K)},mustExec:!1}),Pt(this,U,_i).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(K){this.enterInEditMode()}keydown(K){K.target===this.div&&K.key==="Enter"&&(this.enterInEditMode(),K.preventDefault())}editorDivKeydown(K){j._keyboardManager.exec(this,K)}editorDivFocus(K){this.isEditing=!0}editorDivBlur(K){this.isEditing=!1}editorDivInput(K){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let K,ct;this.width&&(K=this.x,ct=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",y(this,V)),this.enableEditing(),_.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(wt=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("aria-label",wt)}),_.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(wt=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("default-content",wt)}),this.editorDiv.contentEditable=!0;const{style:Gt}=this.editorDiv;if(Gt.fontSize=`calc(${y(this,et)}px * var(--scale-factor))`,Gt.color=y(this,lt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,W.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[wt,Mt]=this.parentDimensions;if(this.annotationElementId){const{position:At}=y(this,G);let[qt,rt]=this.getInitialTranslation();[qt,rt]=this.pageTranslationToScreen(qt,rt);const[Et,Ot]=this.pageDimensions,[tt,T]=this.pageTranslation;let P,$;switch(this.rotation){case 0:P=K+(At[0]-tt)/Et,$=ct+this.height-(At[1]-T)/Ot;break;case 90:P=K+(At[0]-tt)/Et,$=ct-(At[1]-T)/Ot,[qt,rt]=[rt,-qt];break;case 180:P=K-this.width+(At[0]-tt)/Et,$=ct-(At[1]-T)/Ot,[qt,rt]=[-qt,-rt];break;case 270:P=K+(At[0]-tt-this.height*Ot)/Et,$=ct+(At[1]-T-this.width*Et)/Ot,[qt,rt]=[-rt,qt];break}this.setAt(P*wt,$*Mt,qt,rt)}else this.setAt(K*wt,ct*Mt,this.width*wt,this.height*Mt);Pt(this,U,Sr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(K,ct,Gt){let wt=null;if(K instanceof bt.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:At,fontColor:qt},rect:rt,rotation:Et,id:Ot},textContent:tt,textPosition:T,parent:{page:{pageNumber:P}}}=K;if(!tt||tt.length===0)return null;wt=K={annotationType:R.AnnotationEditorType.FREETEXT,color:Array.from(qt),fontSize:At,value:tt.join(`
`),position:T,pageIndex:P-1,rect:rt,rotation:Et,id:Ot,deleted:!1}}const Mt=super.deserialize(K,ct,Gt);return Vt(Mt,et,K.fontSize),Vt(Mt,lt,R.Util.makeHexColor(...K.color)),Vt(Mt,q,K.value),Mt.annotationElementId=K.id||null,Vt(Mt,G,wt),Mt}serialize(K=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ct=j._internalPadding*this.parentScale,Gt=this.getRect(ct,ct),wt=_.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:y(this,lt)),Mt={annotationType:R.AnnotationEditorType.FREETEXT,color:wt,fontSize:y(this,et),value:y(this,q),pageIndex:this.pageIndex,rect:Gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return K?Mt:this.annotationElementId&&!Pt(this,U,ms).call(this,Mt)?null:(Mt.id=this.annotationElementId,Mt)}};pt=new WeakMap,nt=new WeakMap,O=new WeakMap,ft=new WeakMap,lt=new WeakMap,q=new WeakMap,V=new WeakMap,et=new WeakMap,G=new WeakMap,U=new WeakSet,fs=function(K){const ct=wt=>{this.editorDiv.style.fontSize=`calc(${wt}px * var(--scale-factor))`,this.translate(0,-(wt-y(this,et))*this.parentScale),Vt(this,et,wt),Pt(this,U,_i).call(this)},Gt=y(this,et);this.addCommands({cmd:()=>{ct(K)},undo:()=>{ct(Gt)},mustExec:!0,type:R.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ps=function(K){const ct=y(this,lt);this.addCommands({cmd:()=>{Vt(this,lt,this.editorDiv.style.color=K)},undo:()=>{Vt(this,lt,this.editorDiv.style.color=ct)},mustExec:!0,type:R.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gs=function(){const K=this.editorDiv.getElementsByTagName("div");if(K.length===0)return this.editorDiv.innerText;const ct=[];for(const Gt of K)ct.push(Gt.innerText.replace(/\r\n?|\n/,""));return ct.join(`
`)},_i=function(){const[K,ct]=this.parentDimensions;let Gt;if(this.isAttachedToDOM)Gt=this.div.getBoundingClientRect();else{const{currentLayer:wt,div:Mt}=this,At=Mt.style.display;Mt.style.display="hidden",wt.div.append(this.div),Gt=Mt.getBoundingClientRect(),Mt.remove(),Mt.style.display=At}this.rotation%180===this.parentRotation%180?(this.width=Gt.width/K,this.height=Gt.height/ct):(this.width=Gt.height/K,this.height=Gt.width/ct),this.fixAndSetPosition()},Sr=function(){if(this.editorDiv.replaceChildren(),!!y(this,q))for(const K of y(this,q).split(`
`)){const ct=document.createElement("div");ct.append(K?document.createTextNode(K):document.createElement("br")),this.editorDiv.append(ct)}},ms=function(K){const{value:ct,fontSize:Gt,color:wt,rect:Mt,pageIndex:At}=y(this,G);return K.value!==ct||K.fontSize!==Gt||K.rect.some((qt,rt)=>Math.abs(qt-Mt[rt])>=1)||K.color.some((qt,rt)=>qt!==wt[rt])||K.pageIndex!==At},wr=function(K=!1){if(!this.annotationElementId)return;if(Pt(this,U,_i).call(this),!K&&(this.width===0||this.height===0)){setTimeout(()=>Pt(this,U,wr).call(this,!0),0);return}const ct=j._internalPadding*this.parentScale;y(this,G).rect=this.getRect(ct,ct)},yn(j,"_freeTextDefaultContent",""),yn(j,"_internalPadding",0),yn(j,"_defaultColor",null),yn(j,"_defaultFontSize",10),yn(j,"_type","freetext");let zt=j;x.FreeTextEditor=zt},(A,x,vt)=>{var $,ot,ii,bs,$t,Kt,Zt,te,re,se,Nt,Bt,X,ut,kt,Ht,Jt,ae,ne,Rt,ge,de,vs,Ni,Cr,Tr,ke,qe,ln,ee,Ft,Dt,ye,xr,De,gt,Qt,pe,_s,Pr;Object.defineProperty(x,"__esModule",{value:!0}),x.StampAnnotationElement=x.InkAnnotationElement=x.FreeTextAnnotationElement=x.AnnotationLayer=void 0;var R=vt(1),W=vt(6),_=vt(3),bt=vt(30),zt=vt(31),pt=vt(32);const nt=1e3,O=9,ft=new WeakSet;function lt(_e){return{width:_e[2]-_e[0],height:_e[3]-_e[1]}}class q{static create(it){switch(it.data.annotationType){case R.AnnotationType.LINK:return new et(it);case R.AnnotationType.TEXT:return new G(it);case R.AnnotationType.WIDGET:switch(it.data.fieldType){case"Tx":return new Y(it);case"Btn":return it.data.radioButton?new F(it):it.data.checkBox?new J(it):new B(it);case"Ch":return new L(it);case"Sig":return new dt(it)}return new U(it);case R.AnnotationType.POPUP:return new N(it);case R.AnnotationType.FREETEXT:return new ht(it);case R.AnnotationType.LINE:return new D(it);case R.AnnotationType.SQUARE:return new K(it);case R.AnnotationType.CIRCLE:return new ct(it);case R.AnnotationType.POLYLINE:return new Gt(it);case R.AnnotationType.CARET:return new Mt(it);case R.AnnotationType.INK:return new At(it);case R.AnnotationType.POLYGON:return new wt(it);case R.AnnotationType.HIGHLIGHT:return new qt(it);case R.AnnotationType.UNDERLINE:return new rt(it);case R.AnnotationType.SQUIGGLY:return new Et(it);case R.AnnotationType.STRIKEOUT:return new Ot(it);case R.AnnotationType.STAMP:return new tt(it);case R.AnnotationType.FILEATTACHMENT:return new T(it);default:return new V(it)}}}const at=class at{constructor(it,{isRenderable:Q=!1,ignoreBorder:Ct=!1,createQuadrilaterals:Xt=!1}={}){Wt(this,$,!1);this.isRenderable=Q,this.data=it.data,this.layer=it.layer,this.linkService=it.linkService,this.downloadManager=it.downloadManager,this.imageResourcesPath=it.imageResourcesPath,this.renderForms=it.renderForms,this.svgFactory=it.svgFactory,this.annotationStorage=it.annotationStorage,this.enableScripting=it.enableScripting,this.hasJSActions=it.hasJSActions,this._fieldObjects=it.fieldObjects,this.parent=it.parent,Q&&(this.container=this._createContainer(Ct)),Xt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:it,contentsObj:Q,richText:Ct}){return!!(it!=null&&it.str||Q!=null&&Q.str||Ct!=null&&Ct.str)}get hasPopupData(){return at._hasPopupData(this.data)}_createContainer(it){const{data:Q,parent:{page:Ct,viewport:Xt}}=this,Yt=document.createElement("section");Yt.setAttribute("data-annotation-id",Q.id),this instanceof U||(Yt.tabIndex=nt),Yt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Yt.setAttribute("aria-haspopup","dialog"),Q.noRotate&&Yt.classList.add("norotate");const{pageWidth:ie,pageHeight:ue,pageX:Te,pageY:Ee}=Xt.rawDims;if(!Q.rect||this instanceof N){const{rotation:Be}=Q;return!Q.hasOwnCanvas&&Be!==0&&this.setRotation(Be,Yt),Yt}const{width:be,height:$e}=lt(Q.rect),Se=R.Util.normalizeRect([Q.rect[0],Ct.view[3]-Q.rect[1]+Ct.view[1],Q.rect[2],Ct.view[3]-Q.rect[3]+Ct.view[1]]);if(!it&&Q.borderStyle.width>0){Yt.style.borderWidth=`${Q.borderStyle.width}px`;const Be=Q.borderStyle.horizontalCornerRadius,Ke=Q.borderStyle.verticalCornerRadius;if(Be>0||Ke>0){const pn=`calc(${Be}px * var(--scale-factor)) / calc(${Ke}px * var(--scale-factor))`;Yt.style.borderRadius=pn}else if(this instanceof F){const pn=`calc(${be}px * var(--scale-factor)) / calc(${$e}px * var(--scale-factor))`;Yt.style.borderRadius=pn}switch(Q.borderStyle.style){case R.AnnotationBorderStyleType.SOLID:Yt.style.borderStyle="solid";break;case R.AnnotationBorderStyleType.DASHED:Yt.style.borderStyle="dashed";break;case R.AnnotationBorderStyleType.BEVELED:(0,R.warn)("Unimplemented border style: beveled");break;case R.AnnotationBorderStyleType.INSET:(0,R.warn)("Unimplemented border style: inset");break;case R.AnnotationBorderStyleType.UNDERLINE:Yt.style.borderBottomStyle="solid";break}const sn=Q.borderColor||null;sn?(Vt(this,$,!0),Yt.style.borderColor=R.Util.makeHexColor(sn[0]|0,sn[1]|0,sn[2]|0)):Yt.style.borderWidth=0}Yt.style.left=`${100*(Se[0]-Te)/ie}%`,Yt.style.top=`${100*(Se[1]-Ee)/ue}%`;const{rotation:Re}=Q;return Q.hasOwnCanvas||Re===0?(Yt.style.width=`${100*be/ie}%`,Yt.style.height=`${100*$e/ue}%`):this.setRotation(Re,Yt),Yt}setRotation(it,Q=this.container){if(!this.data.rect)return;const{pageWidth:Ct,pageHeight:Xt}=this.parent.viewport.rawDims,{width:Yt,height:ie}=lt(this.data.rect);let ue,Te;it%180===0?(ue=100*Yt/Ct,Te=100*ie/Xt):(ue=100*ie/Ct,Te=100*Yt/Xt),Q.style.width=`${ue}%`,Q.style.height=`${Te}%`,Q.setAttribute("data-main-rotation",(360-it)%360)}get _commonActions(){const it=(Q,Ct,Xt)=>{const Yt=Xt.detail[Q],ie=Yt[0],ue=Yt.slice(1);Xt.target.style[Ct]=bt.ColorConverters[`${ie}_HTML`](ue),this.annotationStorage.setValue(this.data.id,{[Ct]:bt.ColorConverters[`${ie}_rgb`](ue)})};return(0,R.shadow)(this,"_commonActions",{display:Q=>{const{display:Ct}=Q.detail,Xt=Ct%2===1;this.container.style.visibility=Xt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Xt,noPrint:Ct===1||Ct===2})},print:Q=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Q.detail.print})},hidden:Q=>{const{hidden:Ct}=Q.detail;this.container.style.visibility=Ct?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Ct,noView:Ct})},focus:Q=>{setTimeout(()=>Q.target.focus({preventScroll:!1}),0)},userName:Q=>{Q.target.title=Q.detail.userName},readonly:Q=>{Q.target.disabled=Q.detail.readonly},required:Q=>{this._setRequired(Q.target,Q.detail.required)},bgColor:Q=>{it("bgColor","backgroundColor",Q)},fillColor:Q=>{it("fillColor","backgroundColor",Q)},fgColor:Q=>{it("fgColor","color",Q)},textColor:Q=>{it("textColor","color",Q)},borderColor:Q=>{it("borderColor","borderColor",Q)},strokeColor:Q=>{it("strokeColor","borderColor",Q)},rotation:Q=>{const Ct=Q.detail.rotation;this.setRotation(Ct),this.annotationStorage.setValue(this.data.id,{rotation:Ct})}})}_dispatchEventFromSandbox(it,Q){const Ct=this._commonActions;for(const Xt of Object.keys(Q.detail)){const Yt=it[Xt]||Ct[Xt];Yt==null||Yt(Q)}}_setDefaultPropertiesFromJS(it){if(!this.enableScripting)return;const Q=this.annotationStorage.getRawValue(this.data.id);if(!Q)return;const Ct=this._commonActions;for(const[Xt,Yt]of Object.entries(Q)){const ie=Ct[Xt];if(ie){const ue={detail:{[Xt]:Yt},target:it};ie(ue),delete Q[Xt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:it}=this.data;if(!it)return;const[Q,Ct,Xt,Yt]=this.data.rect;if(it.length===1){const[,{x:Ke,y:sn},{x:pn,y:Fn}]=it[0];if(Xt===Ke&&Yt===sn&&Q===pn&&Ct===Fn)return}const{style:ie}=this.container;let ue;if(y(this,$)){const{borderColor:Ke,borderWidth:sn}=ie;ie.borderWidth=0,ue=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ke}" stroke-width="${sn}">`],this.container.classList.add("hasBorder")}const Te=Xt-Q,Ee=Yt-Ct,{svgFactory:be}=this,$e=be.createElement("svg");$e.classList.add("quadrilateralsContainer"),$e.setAttribute("width",0),$e.setAttribute("height",0);const Se=be.createElement("defs");$e.append(Se);const Re=be.createElement("clipPath"),Be=`clippath_${this.data.id}`;Re.setAttribute("id",Be),Re.setAttribute("clipPathUnits","objectBoundingBox"),Se.append(Re);for(const[,{x:Ke,y:sn},{x:pn,y:Fn}]of it){const Cn=be.createElement("rect"),Wn=(pn-Q)/Te,$n=(Yt-sn)/Ee,Gn=(Ke-pn)/Te,Ei=(sn-Fn)/Ee;Cn.setAttribute("x",Wn),Cn.setAttribute("y",$n),Cn.setAttribute("width",Gn),Cn.setAttribute("height",Ei),Re.append(Cn),ue==null||ue.push(`<rect vector-effect="non-scaling-stroke" x="${Wn}" y="${$n}" width="${Gn}" height="${Ei}"/>`)}y(this,$)&&(ue.push("</g></svg>')"),ie.backgroundImage=ue.join("")),this.container.append($e),this.container.style.clipPath=`url(#${Be})`}_createPopup(){const{container:it,data:Q}=this;it.setAttribute("aria-haspopup","dialog");const Ct=new N({data:{color:Q.color,titleObj:Q.titleObj,modificationDate:Q.modificationDate,contentsObj:Q.contentsObj,richText:Q.richText,parentRect:Q.rect,borderStyle:0,id:`popup_${Q.id}`,rotation:Q.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Ct.render())}render(){(0,R.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(it,Q=null){const Ct=[];if(this._fieldObjects){const Xt=this._fieldObjects[it];if(Xt)for(const{page:Yt,id:ie,exportValues:ue}of Xt){if(Yt===-1||ie===Q)continue;const Te=typeof ue=="string"?ue:null,Ee=document.querySelector(`[data-element-id="${ie}"]`);if(Ee&&!ft.has(Ee)){(0,R.warn)(`_getElementsByName - element not allowed: ${ie}`);continue}Ct.push({id:ie,exportValue:Te,domElement:Ee})}return Ct}for(const Xt of document.getElementsByName(it)){const{exportValue:Yt}=Xt,ie=Xt.getAttribute("data-element-id");ie!==Q&&ft.has(Xt)&&Ct.push({id:ie,exportValue:Yt,domElement:Xt})}return Ct}show(){var it;this.container&&(this.container.hidden=!1),(it=this.popup)==null||it.maybeShow()}hide(){var it;this.container&&(this.container.hidden=!0),(it=this.popup)==null||it.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const it=this.getElementsToTriggerPopup();if(Array.isArray(it))for(const Q of it)Q.classList.add("highlightArea");else it.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:it,data:{id:Q}}=this;this.container.addEventListener("dblclick",()=>{var Ct;(Ct=this.linkService.eventBus)==null||Ct.dispatch("switchannotationeditormode",{source:this,mode:it,editId:Q})})}};$=new WeakMap;let V=at;class et extends V{constructor(Q,Ct=null){super(Q,{isRenderable:!0,ignoreBorder:!!(Ct!=null&&Ct.ignoreBorder),createQuadrilaterals:!0});Wt(this,ot);this.isTooltipOnly=Q.data.isTooltipOnly}render(){const{data:Q,linkService:Ct}=this,Xt=document.createElement("a");Xt.setAttribute("data-element-id",Q.id);let Yt=!1;return Q.url?(Ct.addLinkAttributes(Xt,Q.url,Q.newWindow),Yt=!0):Q.action?(this._bindNamedAction(Xt,Q.action),Yt=!0):Q.attachment?(this._bindAttachment(Xt,Q.attachment),Yt=!0):Q.setOCGState?(Pt(this,ot,bs).call(this,Xt,Q.setOCGState),Yt=!0):Q.dest?(this._bindLink(Xt,Q.dest),Yt=!0):(Q.actions&&(Q.actions.Action||Q.actions["Mouse Up"]||Q.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Xt,Q),Yt=!0),Q.resetForm?(this._bindResetFormAction(Xt,Q.resetForm),Yt=!0):this.isTooltipOnly&&!Yt&&(this._bindLink(Xt,""),Yt=!0)),this.container.classList.add("linkAnnotation"),Yt&&this.container.append(Xt),this.container}_bindLink(Q,Ct){Q.href=this.linkService.getDestinationHash(Ct),Q.onclick=()=>(Ct&&this.linkService.goToDestination(Ct),!1),(Ct||Ct==="")&&Pt(this,ot,ii).call(this)}_bindNamedAction(Q,Ct){Q.href=this.linkService.getAnchorUrl(""),Q.onclick=()=>(this.linkService.executeNamedAction(Ct),!1),Pt(this,ot,ii).call(this)}_bindAttachment(Q,Ct){Q.href=this.linkService.getAnchorUrl(""),Q.onclick=()=>{var Xt;return(Xt=this.downloadManager)==null||Xt.openOrDownloadData(this.container,Ct.content,Ct.filename),!1},Pt(this,ot,ii).call(this)}_bindJSAction(Q,Ct){Q.href=this.linkService.getAnchorUrl("");const Xt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Yt of Object.keys(Ct.actions)){const ie=Xt.get(Yt);ie&&(Q[ie]=()=>{var ue;return(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ct.id,name:Yt}}),!1})}Q.onclick||(Q.onclick=()=>!1),Pt(this,ot,ii).call(this)}_bindResetFormAction(Q,Ct){const Xt=Q.onclick;if(Xt||(Q.href=this.linkService.getAnchorUrl("")),Pt(this,ot,ii).call(this),!this._fieldObjects){(0,R.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Xt||(Q.onclick=()=>!1);return}Q.onclick=()=>{var $e;Xt==null||Xt();const{fields:Yt,refs:ie,include:ue}=Ct,Te=[];if(Yt.length!==0||ie.length!==0){const Se=new Set(ie);for(const Re of Yt){const Be=this._fieldObjects[Re]||[];for(const{id:Ke}of Be)Se.add(Ke)}for(const Re of Object.values(this._fieldObjects))for(const Be of Re)Se.has(Be.id)===ue&&Te.push(Be)}else for(const Se of Object.values(this._fieldObjects))Te.push(...Se);const Ee=this.annotationStorage,be=[];for(const Se of Te){const{id:Re}=Se;switch(be.push(Re),Se.type){case"text":{const Ke=Se.defaultValue||"";Ee.setValue(Re,{value:Ke});break}case"checkbox":case"radiobutton":{const Ke=Se.defaultValue===Se.exportValues;Ee.setValue(Re,{value:Ke});break}case"combobox":case"listbox":{const Ke=Se.defaultValue||"";Ee.setValue(Re,{value:Ke});break}default:continue}const Be=document.querySelector(`[data-element-id="${Re}"]`);if(Be){if(!ft.has(Be)){(0,R.warn)(`_bindResetFormAction - element not allowed: ${Re}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:be,name:"ResetForm"}})),!1}}}ot=new WeakSet,ii=function(){this.container.setAttribute("data-internal-link","")},bs=function(Q,Ct){Q.href=this.linkService.getAnchorUrl(""),Q.onclick=()=>(this.linkService.executeSetOCGState(Ct),!1),Pt(this,ot,ii).call(this)};class G extends V{constructor(it){super(it,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const it=document.createElement("img");return it.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",it.alt="[{{type}} Annotation]",it.dataset.l10nId="text_annotation_type",it.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(it),this.container}}class U extends V{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(it){var Q;this.data.hasOwnCanvas&&(((Q=it.previousSibling)==null?void 0:Q.nodeName)==="CANVAS"&&(it.previousSibling.hidden=!0),it.hidden=!1)}_getKeyModifier(it){const{isWin:Q,isMac:Ct}=R.FeatureTest.platform;return Q&&it.ctrlKey||Ct&&it.metaKey}_setEventListener(it,Q,Ct,Xt,Yt){Ct.includes("mouse")?it.addEventListener(Ct,ie=>{var ue;(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Xt,value:Yt(ie),shift:ie.shiftKey,modifier:this._getKeyModifier(ie)}})}):it.addEventListener(Ct,ie=>{var ue;if(Ct==="blur"){if(!Q.focused||!ie.relatedTarget)return;Q.focused=!1}else if(Ct==="focus"){if(Q.focused)return;Q.focused=!0}Yt&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Xt,value:Yt(ie)}}))})}_setEventListeners(it,Q,Ct,Xt){var Yt,ie,ue;for(const[Te,Ee]of Ct)(Ee==="Action"||(Yt=this.data.actions)!=null&&Yt[Ee])&&((Ee==="Focus"||Ee==="Blur")&&(Q||(Q={focused:!1})),this._setEventListener(it,Q,Te,Ee,Xt),Ee==="Focus"&&!((ie=this.data.actions)!=null&&ie.Blur)?this._setEventListener(it,Q,"blur","Blur",null):Ee==="Blur"&&!((ue=this.data.actions)!=null&&ue.Focus)&&this._setEventListener(it,Q,"focus","Focus",null))}_setBackgroundColor(it){const Q=this.data.backgroundColor||null;it.style.backgroundColor=Q===null?"transparent":R.Util.makeHexColor(Q[0],Q[1],Q[2])}_setTextStyle(it){const Q=["left","center","right"],{fontColor:Ct}=this.data.defaultAppearanceData,Xt=this.data.defaultAppearanceData.fontSize||O,Yt=it.style;let ie;const ue=2,Te=Ee=>Math.round(10*Ee)/10;if(this.data.multiLine){const Ee=Math.abs(this.data.rect[3]-this.data.rect[1]-ue),be=Math.round(Ee/(R.LINE_FACTOR*Xt))||1,$e=Ee/be;ie=Math.min(Xt,Te($e/R.LINE_FACTOR))}else{const Ee=Math.abs(this.data.rect[3]-this.data.rect[1]-ue);ie=Math.min(Xt,Te(Ee/R.LINE_FACTOR))}Yt.fontSize=`calc(${ie}px * var(--scale-factor))`,Yt.color=R.Util.makeHexColor(Ct[0],Ct[1],Ct[2]),this.data.textAlignment!==null&&(Yt.textAlign=Q[this.data.textAlignment])}_setRequired(it,Q){Q?it.setAttribute("required",!0):it.removeAttribute("required"),it.setAttribute("aria-required",Q)}}class Y extends U{constructor(it){const Q=it.renderForms||!it.data.hasAppearance&&!!it.data.fieldValue;super(it,{isRenderable:Q})}setPropertyOnSiblings(it,Q,Ct,Xt){const Yt=this.annotationStorage;for(const ie of this._getElementsByName(it.name,it.id))ie.domElement&&(ie.domElement[Q]=Ct),Yt.setValue(ie.id,{[Xt]:Ct})}render(){var Xt,Yt;const it=this.annotationStorage,Q=this.data.id;this.container.classList.add("textWidgetAnnotation");let Ct=null;if(this.renderForms){const ie=it.getValue(Q,{value:this.data.fieldValue});let ue=ie.value||"";const Te=it.getValue(Q,{charLimit:this.data.maxLen}).charLimit;Te&&ue.length>Te&&(ue=ue.slice(0,Te));let Ee=ie.formattedValue||((Xt=this.data.textContent)==null?void 0:Xt.join(`
`))||null;Ee&&this.data.comb&&(Ee=Ee.replaceAll(/\s+/g,""));const be={userValue:ue,formattedValue:Ee,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Ct=document.createElement("textarea"),Ct.textContent=Ee??ue,this.data.doNotScroll&&(Ct.style.overflowY="hidden")):(Ct=document.createElement("input"),Ct.type="text",Ct.setAttribute("value",Ee??ue),this.data.doNotScroll&&(Ct.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Ct.hidden=!0),ft.add(Ct),Ct.setAttribute("data-element-id",Q),Ct.disabled=this.data.readOnly,Ct.name=this.data.fieldName,Ct.tabIndex=nt,this._setRequired(Ct,this.data.required),Te&&(Ct.maxLength=Te),Ct.addEventListener("input",Se=>{it.setValue(Q,{value:Se.target.value}),this.setPropertyOnSiblings(Ct,"value",Se.target.value,"value"),be.formattedValue=null}),Ct.addEventListener("resetform",Se=>{const Re=this.data.defaultFieldValue??"";Ct.value=be.userValue=Re,be.formattedValue=null});let $e=Se=>{const{formattedValue:Re}=be;Re!=null&&(Se.target.value=Re),Se.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Ct.addEventListener("focus",Re=>{if(be.focused)return;const{target:Be}=Re;be.userValue&&(Be.value=be.userValue),be.lastCommittedValue=Be.value,be.commitKey=1,be.focused=!0}),Ct.addEventListener("updatefromsandbox",Re=>{this.showElementAndHideCanvas(Re.target);const Be={value(Ke){be.userValue=Ke.detail.value??"",it.setValue(Q,{value:be.userValue.toString()}),Ke.target.value=be.userValue},formattedValue(Ke){const{formattedValue:sn}=Ke.detail;be.formattedValue=sn,sn!=null&&Ke.target!==document.activeElement&&(Ke.target.value=sn),it.setValue(Q,{formattedValue:sn})},selRange(Ke){Ke.target.setSelectionRange(...Ke.detail.selRange)},charLimit:Ke=>{var Cn;const{charLimit:sn}=Ke.detail,{target:pn}=Ke;if(sn===0){pn.removeAttribute("maxLength");return}pn.setAttribute("maxLength",sn);let Fn=be.userValue;!Fn||Fn.length<=sn||(Fn=Fn.slice(0,sn),pn.value=be.userValue=Fn,it.setValue(Q,{value:Fn}),(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Fn,willCommit:!0,commitKey:1,selStart:pn.selectionStart,selEnd:pn.selectionEnd}}))}};this._dispatchEventFromSandbox(Be,Re)}),Ct.addEventListener("keydown",Re=>{var sn;be.commitKey=1;let Be=-1;if(Re.key==="Escape"?Be=0:Re.key==="Enter"&&!this.data.multiLine?Be=2:Re.key==="Tab"&&(be.commitKey=3),Be===-1)return;const{value:Ke}=Re.target;be.lastCommittedValue!==Ke&&(be.lastCommittedValue=Ke,be.userValue=Ke,(sn=this.linkService.eventBus)==null||sn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Ke,willCommit:!0,commitKey:Be,selStart:Re.target.selectionStart,selEnd:Re.target.selectionEnd}}))});const Se=$e;$e=null,Ct.addEventListener("blur",Re=>{var Ke;if(!be.focused||!Re.relatedTarget)return;be.focused=!1;const{value:Be}=Re.target;be.userValue=Be,be.lastCommittedValue!==Be&&((Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Be,willCommit:!0,commitKey:be.commitKey,selStart:Re.target.selectionStart,selEnd:Re.target.selectionEnd}})),Se(Re)}),(Yt=this.data.actions)!=null&&Yt.Keystroke&&Ct.addEventListener("beforeinput",Re=>{var $n;be.lastCommittedValue=null;const{data:Be,target:Ke}=Re,{value:sn,selectionStart:pn,selectionEnd:Fn}=Ke;let Cn=pn,Wn=Fn;switch(Re.inputType){case"deleteWordBackward":{const Gn=sn.substring(0,pn).match(/\w*[^\w]*$/);Gn&&(Cn-=Gn[0].length);break}case"deleteWordForward":{const Gn=sn.substring(pn).match(/^[^\w]*\w*/);Gn&&(Wn+=Gn[0].length);break}case"deleteContentBackward":pn===Fn&&(Cn-=1);break;case"deleteContentForward":pn===Fn&&(Wn+=1);break}Re.preventDefault(),($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:sn,change:Be||"",willCommit:!1,selStart:Cn,selEnd:Wn}})}),this._setEventListeners(Ct,be,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Re=>Re.target.value)}if($e&&Ct.addEventListener("blur",$e),this.data.comb){const Re=(this.data.rect[2]-this.data.rect[0])/Te;Ct.classList.add("comb"),Ct.style.letterSpacing=`calc(${Re}px * var(--scale-factor) - 1ch)`}}else Ct=document.createElement("div"),Ct.textContent=this.data.fieldValue,Ct.style.verticalAlign="middle",Ct.style.display="table-cell";return this._setTextStyle(Ct),this._setBackgroundColor(Ct),this._setDefaultPropertiesFromJS(Ct),this.container.append(Ct),this.container}}class dt extends U{constructor(it){super(it,{isRenderable:!!it.data.hasOwnCanvas})}}class J extends U{constructor(it){super(it,{isRenderable:it.renderForms})}render(){const it=this.annotationStorage,Q=this.data,Ct=Q.id;let Xt=it.getValue(Ct,{value:Q.exportValue===Q.fieldValue}).value;typeof Xt=="string"&&(Xt=Xt!=="Off",it.setValue(Ct,{value:Xt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Yt=document.createElement("input");return ft.add(Yt),Yt.setAttribute("data-element-id",Ct),Yt.disabled=Q.readOnly,this._setRequired(Yt,this.data.required),Yt.type="checkbox",Yt.name=Q.fieldName,Xt&&Yt.setAttribute("checked",!0),Yt.setAttribute("exportValue",Q.exportValue),Yt.tabIndex=nt,Yt.addEventListener("change",ie=>{const{name:ue,checked:Te}=ie.target;for(const Ee of this._getElementsByName(ue,Ct)){const be=Te&&Ee.exportValue===Q.exportValue;Ee.domElement&&(Ee.domElement.checked=be),it.setValue(Ee.id,{value:be})}it.setValue(Ct,{value:Te})}),Yt.addEventListener("resetform",ie=>{const ue=Q.defaultFieldValue||"Off";ie.target.checked=ue===Q.exportValue}),this.enableScripting&&this.hasJSActions&&(Yt.addEventListener("updatefromsandbox",ie=>{const ue={value(Te){Te.target.checked=Te.detail.value!=="Off",it.setValue(Ct,{value:Te.target.checked})}};this._dispatchEventFromSandbox(ue,ie)}),this._setEventListeners(Yt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ie=>ie.target.checked)),this._setBackgroundColor(Yt),this._setDefaultPropertiesFromJS(Yt),this.container.append(Yt),this.container}}class F extends U{constructor(it){super(it,{isRenderable:it.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const it=this.annotationStorage,Q=this.data,Ct=Q.id;let Xt=it.getValue(Ct,{value:Q.fieldValue===Q.buttonValue}).value;typeof Xt=="string"&&(Xt=Xt!==Q.buttonValue,it.setValue(Ct,{value:Xt}));const Yt=document.createElement("input");if(ft.add(Yt),Yt.setAttribute("data-element-id",Ct),Yt.disabled=Q.readOnly,this._setRequired(Yt,this.data.required),Yt.type="radio",Yt.name=Q.fieldName,Xt&&Yt.setAttribute("checked",!0),Yt.tabIndex=nt,Yt.addEventListener("change",ie=>{const{name:ue,checked:Te}=ie.target;for(const Ee of this._getElementsByName(ue,Ct))it.setValue(Ee.id,{value:!1});it.setValue(Ct,{value:Te})}),Yt.addEventListener("resetform",ie=>{const ue=Q.defaultFieldValue;ie.target.checked=ue!=null&&ue===Q.buttonValue}),this.enableScripting&&this.hasJSActions){const ie=Q.buttonValue;Yt.addEventListener("updatefromsandbox",ue=>{const Te={value:Ee=>{const be=ie===Ee.detail.value;for(const $e of this._getElementsByName(Ee.target.name)){const Se=be&&$e.id===Ct;$e.domElement&&($e.domElement.checked=Se),it.setValue($e.id,{value:Se})}}};this._dispatchEventFromSandbox(Te,ue)}),this._setEventListeners(Yt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ue=>ue.target.checked)}return this._setBackgroundColor(Yt),this._setDefaultPropertiesFromJS(Yt),this.container.append(Yt),this.container}}class B extends et{constructor(it){super(it,{ignoreBorder:it.data.hasAppearance})}render(){const it=super.render();it.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(it.title=this.data.alternativeText);const Q=it.lastChild;return this.enableScripting&&this.hasJSActions&&Q&&(this._setDefaultPropertiesFromJS(Q),Q.addEventListener("updatefromsandbox",Ct=>{this._dispatchEventFromSandbox({},Ct)})),it}}class L extends U{constructor(it){super(it,{isRenderable:it.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const it=this.annotationStorage,Q=this.data.id,Ct=it.getValue(Q,{value:this.data.fieldValue}),Xt=document.createElement("select");ft.add(Xt),Xt.setAttribute("data-element-id",Q),Xt.disabled=this.data.readOnly,this._setRequired(Xt,this.data.required),Xt.name=this.data.fieldName,Xt.tabIndex=nt;let Yt=this.data.combo&&this.data.options.length>0;this.data.combo||(Xt.size=this.data.options.length,this.data.multiSelect&&(Xt.multiple=!0)),Xt.addEventListener("resetform",be=>{const $e=this.data.defaultFieldValue;for(const Se of Xt.options)Se.selected=Se.value===$e});for(const be of this.data.options){const $e=document.createElement("option");$e.textContent=be.displayValue,$e.value=be.exportValue,Ct.value.includes(be.exportValue)&&($e.setAttribute("selected",!0),Yt=!1),Xt.append($e)}let ie=null;if(Yt){const be=document.createElement("option");be.value=" ",be.setAttribute("hidden",!0),be.setAttribute("selected",!0),Xt.prepend(be),ie=()=>{be.remove(),Xt.removeEventListener("input",ie),ie=null},Xt.addEventListener("input",ie)}const ue=be=>{const $e=be?"value":"textContent",{options:Se,multiple:Re}=Xt;return Re?Array.prototype.filter.call(Se,Be=>Be.selected).map(Be=>Be[$e]):Se.selectedIndex===-1?null:Se[Se.selectedIndex][$e]};let Te=ue(!1);const Ee=be=>{const $e=be.target.options;return Array.prototype.map.call($e,Se=>({displayValue:Se.textContent,exportValue:Se.value}))};return this.enableScripting&&this.hasJSActions?(Xt.addEventListener("updatefromsandbox",be=>{const $e={value(Se){ie==null||ie();const Re=Se.detail.value,Be=new Set(Array.isArray(Re)?Re:[Re]);for(const Ke of Xt.options)Ke.selected=Be.has(Ke.value);it.setValue(Q,{value:ue(!0)}),Te=ue(!1)},multipleSelection(Se){Xt.multiple=!0},remove(Se){const Re=Xt.options,Be=Se.detail.remove;Re[Be].selected=!1,Xt.remove(Be),Re.length>0&&Array.prototype.findIndex.call(Re,sn=>sn.selected)===-1&&(Re[0].selected=!0),it.setValue(Q,{value:ue(!0),items:Ee(Se)}),Te=ue(!1)},clear(Se){for(;Xt.length!==0;)Xt.remove(0);it.setValue(Q,{value:null,items:[]}),Te=ue(!1)},insert(Se){const{index:Re,displayValue:Be,exportValue:Ke}=Se.detail.insert,sn=Xt.children[Re],pn=document.createElement("option");pn.textContent=Be,pn.value=Ke,sn?sn.before(pn):Xt.append(pn),it.setValue(Q,{value:ue(!0),items:Ee(Se)}),Te=ue(!1)},items(Se){const{items:Re}=Se.detail;for(;Xt.length!==0;)Xt.remove(0);for(const Be of Re){const{displayValue:Ke,exportValue:sn}=Be,pn=document.createElement("option");pn.textContent=Ke,pn.value=sn,Xt.append(pn)}Xt.options.length>0&&(Xt.options[0].selected=!0),it.setValue(Q,{value:ue(!0),items:Ee(Se)}),Te=ue(!1)},indices(Se){const Re=new Set(Se.detail.indices);for(const Be of Se.target.options)Be.selected=Re.has(Be.index);it.setValue(Q,{value:ue(!0)}),Te=ue(!1)},editable(Se){Se.target.disabled=!Se.detail.editable}};this._dispatchEventFromSandbox($e,be)}),Xt.addEventListener("input",be=>{var Se;const $e=ue(!0);it.setValue(Q,{value:$e}),be.preventDefault(),(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Te,changeEx:$e,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Xt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],be=>be.target.value)):Xt.addEventListener("input",function(be){it.setValue(Q,{value:ue(!0)})}),this.data.combo&&this._setTextStyle(Xt),this._setBackgroundColor(Xt),this._setDefaultPropertiesFromJS(Xt),this.container.append(Xt),this.container}}class N extends V{constructor(it){const{data:Q,elements:Ct}=it;super(it,{isRenderable:V._hasPopupData(Q)}),this.elements=Ct}render(){this.container.classList.add("popupAnnotation");const it=new j({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Q=[];for(const Ct of this.elements)Ct.popup=it,Q.push(Ct.data.id),Ct.addHighlightArea();return this.container.setAttribute("aria-controls",Q.map(Ct=>`${R.AnnotationPrefix}${Ct}`).join(",")),this.container}}class j{constructor({container:it,color:Q,elements:Ct,titleObj:Xt,modificationDate:Yt,contentsObj:ie,richText:ue,parent:Te,rect:Ee,parentRect:be,open:$e}){Wt(this,de);Wt(this,$t,null);Wt(this,Kt,Pt(this,de,vs).bind(this));Wt(this,Zt,Pt(this,de,Tr).bind(this));Wt(this,te,Pt(this,de,Cr).bind(this));Wt(this,re,Pt(this,de,Ni).bind(this));Wt(this,se,null);Wt(this,Nt,null);Wt(this,Bt,null);Wt(this,X,null);Wt(this,ut,null);Wt(this,kt,null);Wt(this,Ht,!1);Wt(this,Jt,null);Wt(this,ae,null);Wt(this,ne,null);Wt(this,Rt,null);Wt(this,ge,!1);var Re;Vt(this,Nt,it),Vt(this,Rt,Xt),Vt(this,Bt,ie),Vt(this,ne,ue),Vt(this,ut,Te),Vt(this,se,Q),Vt(this,ae,Ee),Vt(this,kt,be),Vt(this,X,Ct);const Se=W.PDFDateString.toDateObject(Yt);Se&&Vt(this,$t,Te.l10n.get("annotation_date_string",{date:Se.toLocaleDateString(),time:Se.toLocaleTimeString()})),this.trigger=Ct.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",y(this,re)),Be.addEventListener("mouseenter",y(this,te)),Be.addEventListener("mouseleave",y(this,Zt)),Be.classList.add("popupTriggerArea");for(const Be of Ct)(Re=Be.container)==null||Re.addEventListener("keydown",y(this,Kt));y(this,Nt).hidden=!0,$e&&Pt(this,de,Ni).call(this)}render(){if(y(this,Jt))return;const{page:{view:it},viewport:{rawDims:{pageWidth:Q,pageHeight:Ct,pageX:Xt,pageY:Yt}}}=y(this,ut),ie=Vt(this,Jt,document.createElement("div"));if(ie.className="popup",y(this,se)){const Cn=ie.style.outlineColor=R.Util.makeHexColor(...y(this,se));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ie.style.backgroundColor=`color-mix(in srgb, ${Cn} 30%, white)`:ie.style.backgroundColor=R.Util.makeHexColor(...y(this,se).map($n=>Math.floor(.7*(255-$n)+$n)))}const ue=document.createElement("span");ue.className="header";const Te=document.createElement("h1");if(ue.append(Te),{dir:Te.dir,str:Te.textContent}=y(this,Rt),ie.append(ue),y(this,$t)){const Cn=document.createElement("span");Cn.classList.add("popupDate"),y(this,$t).then(Wn=>{Cn.textContent=Wn}),ue.append(Cn)}const Ee=y(this,Bt),be=y(this,ne);if(be!=null&&be.str&&(!(Ee!=null&&Ee.str)||Ee.str===be.str))pt.XfaLayer.render({xfaHtml:be.html,intent:"richText",div:ie}),ie.lastChild.classList.add("richText","popupContent");else{const Cn=this._formatContents(Ee);ie.append(Cn)}let $e=!!y(this,kt),Se=$e?y(this,kt):y(this,ae);for(const Cn of y(this,X))if(!Se||R.Util.intersect(Cn.data.rect,Se)!==null){Se=Cn.data.rect,$e=!0;break}const Re=R.Util.normalizeRect([Se[0],it[3]-Se[1]+it[1],Se[2],it[3]-Se[3]+it[1]]),Ke=$e?Se[2]-Se[0]+5:0,sn=Re[0]+Ke,pn=Re[1],{style:Fn}=y(this,Nt);Fn.left=`${100*(sn-Xt)/Q}%`,Fn.top=`${100*(pn-Yt)/Ct}%`,y(this,Nt).append(ie)}_formatContents({str:it,dir:Q}){const Ct=document.createElement("p");Ct.classList.add("popupContent"),Ct.dir=Q;const Xt=it.split(/(?:\r\n?|\n)/);for(let Yt=0,ie=Xt.length;Yt<ie;++Yt){const ue=Xt[Yt];Ct.append(document.createTextNode(ue)),Yt<ie-1&&Ct.append(document.createElement("br"))}return Ct}forceHide(){Vt(this,ge,this.isVisible),y(this,ge)&&(y(this,Nt).hidden=!0)}maybeShow(){y(this,ge)&&(Vt(this,ge,!1),y(this,Nt).hidden=!1)}get isVisible(){return y(this,Nt).hidden===!1}}$t=new WeakMap,Kt=new WeakMap,Zt=new WeakMap,te=new WeakMap,re=new WeakMap,se=new WeakMap,Nt=new WeakMap,Bt=new WeakMap,X=new WeakMap,ut=new WeakMap,kt=new WeakMap,Ht=new WeakMap,Jt=new WeakMap,ae=new WeakMap,ne=new WeakMap,Rt=new WeakMap,ge=new WeakMap,de=new WeakSet,vs=function(it){it.altKey||it.shiftKey||it.ctrlKey||it.metaKey||(it.key==="Enter"||it.key==="Escape"&&y(this,Ht))&&Pt(this,de,Ni).call(this)},Ni=function(){Vt(this,Ht,!y(this,Ht)),y(this,Ht)?(Pt(this,de,Cr).call(this),y(this,Nt).addEventListener("click",y(this,re)),y(this,Nt).addEventListener("keydown",y(this,Kt))):(Pt(this,de,Tr).call(this),y(this,Nt).removeEventListener("click",y(this,re)),y(this,Nt).removeEventListener("keydown",y(this,Kt)))},Cr=function(){y(this,Jt)||this.render(),this.isVisible?y(this,Ht)&&y(this,Nt).classList.add("focused"):(y(this,Nt).hidden=!1,y(this,Nt).style.zIndex=parseInt(y(this,Nt).style.zIndex)+1e3)},Tr=function(){y(this,Nt).classList.remove("focused"),!(y(this,Ht)||!this.isVisible)&&(y(this,Nt).hidden=!0,y(this,Nt).style.zIndex=parseInt(y(this,Nt).style.zIndex)-1e3)};class ht extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0}),this.textContent=it.data.textContent,this.textPosition=it.data.textPosition,this.annotationEditorType=R.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const it=document.createElement("div");it.classList.add("annotationTextContent"),it.setAttribute("role","comment");for(const Q of this.textContent){const Ct=document.createElement("span");Ct.textContent=Q,it.append(Ct)}this.container.append(it)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}x.FreeTextAnnotationElement=ht;class D extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});Wt(this,ke,null)}render(){this.container.classList.add("lineAnnotation");const Q=this.data,{width:Ct,height:Xt}=lt(Q.rect),Yt=this.svgFactory.create(Ct,Xt,!0),ie=Vt(this,ke,this.svgFactory.createElement("svg:line"));return ie.setAttribute("x1",Q.rect[2]-Q.lineCoordinates[0]),ie.setAttribute("y1",Q.rect[3]-Q.lineCoordinates[1]),ie.setAttribute("x2",Q.rect[2]-Q.lineCoordinates[2]),ie.setAttribute("y2",Q.rect[3]-Q.lineCoordinates[3]),ie.setAttribute("stroke-width",Q.borderStyle.width||1),ie.setAttribute("stroke","transparent"),ie.setAttribute("fill","transparent"),Yt.append(ie),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,ke)}addHighlightArea(){this.container.classList.add("highlightArea")}}ke=new WeakMap;class K extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});Wt(this,qe,null)}render(){this.container.classList.add("squareAnnotation");const Q=this.data,{width:Ct,height:Xt}=lt(Q.rect),Yt=this.svgFactory.create(Ct,Xt,!0),ie=Q.borderStyle.width,ue=Vt(this,qe,this.svgFactory.createElement("svg:rect"));return ue.setAttribute("x",ie/2),ue.setAttribute("y",ie/2),ue.setAttribute("width",Ct-ie),ue.setAttribute("height",Xt-ie),ue.setAttribute("stroke-width",ie||1),ue.setAttribute("stroke","transparent"),ue.setAttribute("fill","transparent"),Yt.append(ue),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,qe)}addHighlightArea(){this.container.classList.add("highlightArea")}}qe=new WeakMap;class ct extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});Wt(this,ln,null)}render(){this.container.classList.add("circleAnnotation");const Q=this.data,{width:Ct,height:Xt}=lt(Q.rect),Yt=this.svgFactory.create(Ct,Xt,!0),ie=Q.borderStyle.width,ue=Vt(this,ln,this.svgFactory.createElement("svg:ellipse"));return ue.setAttribute("cx",Ct/2),ue.setAttribute("cy",Xt/2),ue.setAttribute("rx",Ct/2-ie/2),ue.setAttribute("ry",Xt/2-ie/2),ue.setAttribute("stroke-width",ie||1),ue.setAttribute("stroke","transparent"),ue.setAttribute("fill","transparent"),Yt.append(ue),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,ln)}addHighlightArea(){this.container.classList.add("highlightArea")}}ln=new WeakMap;class Gt extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});Wt(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Q=this.data,{width:Ct,height:Xt}=lt(Q.rect),Yt=this.svgFactory.create(Ct,Xt,!0);let ie=[];for(const Te of Q.vertices){const Ee=Te.x-Q.rect[0],be=Q.rect[3]-Te.y;ie.push(Ee+","+be)}ie=ie.join(" ");const ue=Vt(this,ee,this.svgFactory.createElement(this.svgElementName));return ue.setAttribute("points",ie),ue.setAttribute("stroke-width",Q.borderStyle.width||1),ue.setAttribute("stroke","transparent"),ue.setAttribute("fill","transparent"),Yt.append(ue),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class wt extends Gt{constructor(it){super(it),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Mt extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class At extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});Wt(this,Ft,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=R.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Q=this.data,{width:Ct,height:Xt}=lt(Q.rect),Yt=this.svgFactory.create(Ct,Xt,!0);for(const ie of Q.inkLists){let ue=[];for(const Ee of ie){const be=Ee.x-Q.rect[0],$e=Q.rect[3]-Ee.y;ue.push(`${be},${$e}`)}ue=ue.join(" ");const Te=this.svgFactory.createElement(this.svgElementName);y(this,Ft).push(Te),Te.setAttribute("points",ue),Te.setAttribute("stroke-width",Q.borderStyle.width||1),Te.setAttribute("stroke","transparent"),Te.setAttribute("fill","transparent"),!Q.popupRef&&this.hasPopupData&&this._createPopup(),Yt.append(Te)}return this.container.append(Yt),this.container}getElementsToTriggerPopup(){return y(this,Ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ft=new WeakMap,x.InkAnnotationElement=At;class qt extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class rt extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Et extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ot extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class tt extends V{constructor(it){super(it,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}x.StampAnnotationElement=tt;class T extends V{constructor(Q){var Yt;super(Q,{isRenderable:!0});Wt(this,ye);Wt(this,Dt,null);const{filename:Ct,content:Xt}=this.data.file;this.filename=(0,W.getFilenameFromUrl)(Ct,!0),this.content=Xt,(Yt=this.linkService.eventBus)==null||Yt.dispatch("fileattachmentannotation",{source:this,filename:Ct,content:Xt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Q,data:Ct}=this;let Xt;Ct.hasAppearance||Ct.fillAlpha===0?Xt=document.createElement("div"):(Xt=document.createElement("img"),Xt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Ct.name)?"paperclip":"pushpin"}.svg`,Ct.fillAlpha&&Ct.fillAlpha<1&&(Xt.style=`filter: opacity(${Math.round(Ct.fillAlpha*100)}%);`)),Xt.addEventListener("dblclick",Pt(this,ye,xr).bind(this)),Vt(this,Dt,Xt);const{isMac:Yt}=R.FeatureTest.platform;return Q.addEventListener("keydown",ie=>{ie.key==="Enter"&&(Yt?ie.metaKey:ie.ctrlKey)&&Pt(this,ye,xr).call(this)}),!Ct.popupRef&&this.hasPopupData?this._createPopup():Xt.classList.add("popupTriggerArea"),Q.append(Xt),Q}getElementsToTriggerPopup(){return y(this,Dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dt=new WeakMap,ye=new WeakSet,xr=function(){var Q;(Q=this.downloadManager)==null||Q.openOrDownloadData(this.container,this.content,this.filename)};class P{constructor({div:it,accessibilityManager:Q,annotationCanvasMap:Ct,l10n:Xt,page:Yt,viewport:ie}){Wt(this,pe);Wt(this,De,null);Wt(this,gt,null);Wt(this,Qt,new Map);this.div=it,Vt(this,De,Q),Vt(this,gt,Ct),this.l10n=Xt,this.page=Yt,this.viewport=ie,this.zIndex=0,this.l10n||(this.l10n=zt.NullL10n)}async render(it){const{annotations:Q}=it,Ct=this.div;(0,W.setLayerDimensions)(Ct,this.viewport);const Xt=new Map,Yt={data:null,layer:Ct,linkService:it.linkService,downloadManager:it.downloadManager,imageResourcesPath:it.imageResourcesPath||"",renderForms:it.renderForms!==!1,svgFactory:new W.DOMSVGFactory,annotationStorage:it.annotationStorage||new _.AnnotationStorage,enableScripting:it.enableScripting===!0,hasJSActions:it.hasJSActions,fieldObjects:it.fieldObjects,parent:this,elements:null};for(const ie of Q){if(ie.noHTML)continue;const ue=ie.annotationType===R.AnnotationType.POPUP;if(ue){const be=Xt.get(ie.id);if(!be)continue;Yt.elements=be}else{const{width:be,height:$e}=lt(ie.rect);if(be<=0||$e<=0)continue}Yt.data=ie;const Te=q.create(Yt);if(!Te.isRenderable)continue;if(!ue&&ie.popupRef){const be=Xt.get(ie.popupRef);be?be.push(Te):Xt.set(ie.popupRef,[Te])}Te.annotationEditorType>0&&y(this,Qt).set(Te.data.id,Te);const Ee=Te.render();ie.hidden&&(Ee.style.visibility="hidden"),Pt(this,pe,_s).call(this,Ee,ie.id)}Pt(this,pe,Pr).call(this),await this.l10n.translate(Ct)}update({viewport:it}){const Q=this.div;this.viewport=it,(0,W.setLayerDimensions)(Q,{rotation:it.rotation}),Pt(this,pe,Pr).call(this),Q.hidden=!1}getEditableAnnotations(){return Array.from(y(this,Qt).values())}getEditableAnnotation(it){return y(this,Qt).get(it)}}De=new WeakMap,gt=new WeakMap,Qt=new WeakMap,pe=new WeakSet,_s=function(it,Q){var Xt;const Ct=it.firstChild||it;Ct.id=`${R.AnnotationPrefix}${Q}`,this.div.append(it),(Xt=y(this,De))==null||Xt.moveElementInDOM(this.div,it,Ct,!1)},Pr=function(){if(!y(this,gt))return;const it=this.div;for(const[Q,Ct]of y(this,gt)){const Xt=it.querySelector(`[data-annotation-id="${Q}"]`);if(!Xt)continue;const{firstChild:Yt}=Xt;Yt?Yt.nodeName==="CANVAS"?Yt.replaceWith(Ct):Yt.before(Ct):Xt.append(Ct)}y(this,gt).clear()},x.AnnotationLayer=P},(A,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.ColorConverters=void 0;function vt(_){return Math.floor(Math.max(0,Math.min(1,_))*255).toString(16).padStart(2,"0")}function R(_){return Math.max(0,Math.min(255,255*_))}class W{static CMYK_G([bt,zt,pt,nt]){return["G",1-Math.min(1,.3*bt+.59*pt+.11*zt+nt)]}static G_CMYK([bt]){return["CMYK",0,0,0,1-bt]}static G_RGB([bt]){return["RGB",bt,bt,bt]}static G_rgb([bt]){return bt=R(bt),[bt,bt,bt]}static G_HTML([bt]){const zt=vt(bt);return`#${zt}${zt}${zt}`}static RGB_G([bt,zt,pt]){return["G",.3*bt+.59*zt+.11*pt]}static RGB_rgb(bt){return bt.map(R)}static RGB_HTML(bt){return`#${bt.map(vt).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([bt,zt,pt,nt]){return["RGB",1-Math.min(1,bt+nt),1-Math.min(1,pt+nt),1-Math.min(1,zt+nt)]}static CMYK_rgb([bt,zt,pt,nt]){return[R(1-Math.min(1,bt+nt)),R(1-Math.min(1,pt+nt)),R(1-Math.min(1,zt+nt))]}static CMYK_HTML(bt){const zt=this.CMYK_RGB(bt).slice(1);return this.RGB_HTML(zt)}static RGB_CMYK([bt,zt,pt]){const nt=1-bt,O=1-zt,ft=1-pt,lt=Math.min(nt,O,ft);return["CMYK",nt,O,ft,lt]}}x.ColorConverters=W},(A,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.NullL10n=void 0,x.getL10nFallback=R;const vt={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};vt.print_progress_percent="{{progress}}%";function R(bt,zt){switch(bt){case"find_match_count":bt=`find_match_count[${zt.total===1?"one":"other"}]`;break;case"find_match_count_limit":bt=`find_match_count_limit[${zt.limit===1?"one":"other"}]`;break}return vt[bt]||""}function W(bt,zt){return zt?bt.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(pt,nt)=>nt in zt?zt[nt]:"{{"+nt+"}}"):bt}const _={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(bt,zt=null,pt=R(bt,zt)){return W(pt,zt)},async translate(bt){}};x.NullL10n=_},(A,x,vt)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.XfaLayer=void 0;var R=vt(25);class W{static setupStorage(bt,zt,pt,nt,O){const ft=nt.getValue(zt,{value:null});switch(pt.name){case"textarea":if(ft.value!==null&&(bt.textContent=ft.value),O==="print")break;bt.addEventListener("input",lt=>{nt.setValue(zt,{value:lt.target.value})});break;case"input":if(pt.attributes.type==="radio"||pt.attributes.type==="checkbox"){if(ft.value===pt.attributes.xfaOn?bt.setAttribute("checked",!0):ft.value===pt.attributes.xfaOff&&bt.removeAttribute("checked"),O==="print")break;bt.addEventListener("change",lt=>{nt.setValue(zt,{value:lt.target.checked?lt.target.getAttribute("xfaOn"):lt.target.getAttribute("xfaOff")})})}else{if(ft.value!==null&&bt.setAttribute("value",ft.value),O==="print")break;bt.addEventListener("input",lt=>{nt.setValue(zt,{value:lt.target.value})})}break;case"select":if(ft.value!==null){bt.setAttribute("value",ft.value);for(const lt of pt.children)lt.attributes.value===ft.value?lt.attributes.selected=!0:lt.attributes.hasOwnProperty("selected")&&delete lt.attributes.selected}bt.addEventListener("input",lt=>{const q=lt.target.options,V=q.selectedIndex===-1?"":q[q.selectedIndex].value;nt.setValue(zt,{value:V})});break}}static setAttributes({html:bt,element:zt,storage:pt=null,intent:nt,linkService:O}){const{attributes:ft}=zt,lt=bt instanceof HTMLAnchorElement;ft.type==="radio"&&(ft.name=`${ft.name}-${nt}`);for(const[q,V]of Object.entries(ft))if(V!=null)switch(q){case"class":V.length&&bt.setAttribute(q,V.join(" "));break;case"dataId":break;case"id":bt.setAttribute("data-element-id",V);break;case"style":Object.assign(bt.style,V);break;case"textContent":bt.textContent=V;break;default:(!lt||q!=="href"&&q!=="newWindow")&&bt.setAttribute(q,V)}lt&&O.addLinkAttributes(bt,ft.href,ft.newWindow),pt&&ft.dataId&&this.setupStorage(bt,ft.dataId,zt,pt)}static render(bt){var et;const zt=bt.annotationStorage,pt=bt.linkService,nt=bt.xfaHtml,O=bt.intent||"display",ft=document.createElement(nt.name);nt.attributes&&this.setAttributes({html:ft,element:nt,intent:O,linkService:pt});const lt=[[nt,-1,ft]],q=bt.div;if(q.append(ft),bt.viewport){const G=`matrix(${bt.viewport.transform.join(",")})`;q.style.transform=G}O!=="richText"&&q.setAttribute("class","xfaLayer xfaFont");const V=[];for(;lt.length>0;){const[G,U,Y]=lt.at(-1);if(U+1===G.children.length){lt.pop();continue}const dt=G.children[++lt.at(-1)[1]];if(dt===null)continue;const{name:J}=dt;if(J==="#text"){const B=document.createTextNode(dt.value);V.push(B),Y.append(B);continue}const F=(et=dt==null?void 0:dt.attributes)!=null&&et.xmlns?document.createElementNS(dt.attributes.xmlns,J):document.createElement(J);if(Y.append(F),dt.attributes&&this.setAttributes({html:F,element:dt,storage:zt,intent:O,linkService:pt}),dt.children&&dt.children.length>0)lt.push([dt,-1,F]);else if(dt.value){const B=document.createTextNode(dt.value);R.XfaText.shouldBuildText(J)&&V.push(B),F.append(B)}}for(const G of q.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))G.setAttribute("readOnly",!0);return{textDivs:V}}static update(bt){const zt=`matrix(${bt.viewport.transform.join(",")})`;bt.div.style.transform=zt,bt.div.hidden=!1}}x.XfaLayer=W},(A,x,vt)=>{var nt,O,ft,lt,q,V,et,G,U,Y,dt,J,F,B,L,ys,As,Es,Ss,Rr,ws,kr,Cs,Ts,xs,Ps,Rs,Yn,Mr,ji,Bi,ui,Fr,Hi,ot,ks,Lr,Ms,Fs,Dr,Ui,di;Object.defineProperty(x,"__esModule",{value:!0}),x.InkEditor=void 0;var R=vt(1),W=vt(4),_=vt(29),bt=vt(6),zt=vt(5);const se=class se extends W.AnnotationEditor{constructor(X){super({...X,name:"inkEditor"});Wt(this,L);Wt(this,nt,0);Wt(this,O,0);Wt(this,ft,this.canvasPointermove.bind(this));Wt(this,lt,this.canvasPointerleave.bind(this));Wt(this,q,this.canvasPointerup.bind(this));Wt(this,V,this.canvasPointerdown.bind(this));Wt(this,et,new Path2D);Wt(this,G,!1);Wt(this,U,!1);Wt(this,Y,!1);Wt(this,dt,null);Wt(this,J,0);Wt(this,F,0);Wt(this,B,null);this.color=X.color||null,this.thickness=X.thickness||null,this.opacity=X.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(X){W.AnnotationEditor.initialize(X,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(X,ut){switch(X){case R.AnnotationEditorParamsType.INK_THICKNESS:se._defaultThickness=ut;break;case R.AnnotationEditorParamsType.INK_COLOR:se._defaultColor=ut;break;case R.AnnotationEditorParamsType.INK_OPACITY:se._defaultOpacity=ut/100;break}}updateParams(X,ut){switch(X){case R.AnnotationEditorParamsType.INK_THICKNESS:Pt(this,L,ys).call(this,ut);break;case R.AnnotationEditorParamsType.INK_COLOR:Pt(this,L,As).call(this,ut);break;case R.AnnotationEditorParamsType.INK_OPACITY:Pt(this,L,Es).call(this,ut);break}}static get defaultPropertiesToUpdate(){return[[R.AnnotationEditorParamsType.INK_THICKNESS,se._defaultThickness],[R.AnnotationEditorParamsType.INK_COLOR,se._defaultColor||W.AnnotationEditor._defaultLineColor],[R.AnnotationEditorParamsType.INK_OPACITY,Math.round(se._defaultOpacity*100)]]}get propertiesToUpdate(){return[[R.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||se._defaultThickness],[R.AnnotationEditorParamsType.INK_COLOR,this.color||se._defaultColor||W.AnnotationEditor._defaultLineColor],[R.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??se._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Pt(this,L,ji).call(this),Pt(this,L,Bi).call(this)),this.isAttachedToDOM||(this.parent.add(this),Pt(this,L,ui).call(this)),Pt(this,L,di).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,y(this,dt).disconnect(),Vt(this,dt,null),super.remove())}setParent(X){!this.parent&&X?this._uiManager.removeShouldRescale(this):this.parent&&X===null&&this._uiManager.addShouldRescale(this),super.setParent(X)}onScaleChanging(){const[X,ut]=this.parentDimensions,kt=this.width*X,Ht=this.height*ut;this.setDimensions(kt,Ht)}enableEditMode(){y(this,G)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",y(this,V)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",y(this,V)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){y(this,G)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Vt(this,G,!0),this.div.classList.add("disabled"),Pt(this,L,di).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(X){this._focusEventsAllowed&&(super.focusin(X),this.enableEditMode())}canvasPointerdown(X){X.button!==0||!this.isInEditMode()||y(this,G)||(this.setInForeground(),X.preventDefault(),X.type!=="mouse"&&this.div.focus(),Pt(this,L,ws).call(this,X.offsetX,X.offsetY))}canvasPointermove(X){X.preventDefault(),Pt(this,L,kr).call(this,X.offsetX,X.offsetY)}canvasPointerup(X){X.preventDefault(),Pt(this,L,Mr).call(this,X)}canvasPointerleave(X){Pt(this,L,Mr).call(this,X)}get isResizable(){return!this.isEmpty()&&y(this,G)}render(){if(this.div)return this.div;let X,ut;this.width&&(X=this.x,ut=this.y),super.render(),W.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ne=>{var Rt;return(Rt=this.div)==null?void 0:Rt.setAttribute("aria-label",ne)});const[kt,Ht,Jt,ae]=Pt(this,L,Ss).call(this);if(this.setAt(kt,Ht,0,0),this.setDims(Jt,ae),Pt(this,L,ji).call(this),this.width){const[ne,Rt]=this.parentDimensions;this.setAspectRatio(this.width*ne,this.height*Rt),this.setAt(X*ne,ut*Rt,this.width*ne,this.height*Rt),Vt(this,Y,!0),Pt(this,L,ui).call(this),this.setDims(this.width*ne,this.height*Rt),Pt(this,L,Yn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Pt(this,L,Bi).call(this),this.div}setDimensions(X,ut){const kt=Math.round(X),Ht=Math.round(ut);if(y(this,J)===kt&&y(this,F)===Ht)return;Vt(this,J,kt),Vt(this,F,Ht),this.canvas.style.visibility="hidden";const[Jt,ae]=this.parentDimensions;this.width=X/Jt,this.height=ut/ae,this.fixAndSetPosition(),y(this,G)&&Pt(this,L,Fr).call(this,X,ut),Pt(this,L,ui).call(this),Pt(this,L,Yn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(X,ut,kt){var ke,qe,ln;if(X instanceof _.InkAnnotationElement)return null;const Ht=super.deserialize(X,ut,kt);Ht.thickness=X.thickness,Ht.color=R.Util.makeHexColor(...X.color),Ht.opacity=X.opacity;const[Jt,ae]=Ht.pageDimensions,ne=Ht.width*Jt,Rt=Ht.height*ae,ge=Ht.parentScale,de=X.thickness/2;Vt(Ht,G,!0),Vt(Ht,J,Math.round(ne)),Vt(Ht,F,Math.round(Rt));const{paths:ze,rect:Ie,rotation:Qe}=X;for(let{bezier:ee}of ze){ee=Pt(ke=se,ot,Ms).call(ke,ee,Ie,Qe);const Ft=[];Ht.paths.push(Ft);let Dt=ge*(ee[0]-de),ye=ge*(ee[1]-de);for(let De=2,gt=ee.length;De<gt;De+=6){const Qt=ge*(ee[De]-de),pe=ge*(ee[De+1]-de),Ce=ge*(ee[De+2]-de),Pe=ge*(ee[De+3]-de),_e=ge*(ee[De+4]-de),it=ge*(ee[De+5]-de);Ft.push([[Dt,ye],[Qt,pe],[Ce,Pe],[_e,it]]),Dt=_e,ye=it}const we=Pt(this,ot,ks).call(this,Ft);Ht.bezierPath2D.push(we)}const Ae=Pt(qe=Ht,L,Dr).call(qe);return Vt(Ht,O,Math.max(W.AnnotationEditor.MIN_SIZE,Ae[2]-Ae[0])),Vt(Ht,nt,Math.max(W.AnnotationEditor.MIN_SIZE,Ae[3]-Ae[1])),Pt(ln=Ht,L,Fr).call(ln,ne,Rt),Ht}serialize(){if(this.isEmpty())return null;const X=this.getRect(0,0),ut=W.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:R.AnnotationEditorType.INK,color:ut,thickness:this.thickness,opacity:this.opacity,paths:Pt(this,L,Fs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,X),pageIndex:this.pageIndex,rect:X,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};nt=new WeakMap,O=new WeakMap,ft=new WeakMap,lt=new WeakMap,q=new WeakMap,V=new WeakMap,et=new WeakMap,G=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,J=new WeakMap,F=new WeakMap,B=new WeakMap,L=new WeakSet,ys=function(X){const ut=this.thickness;this.addCommands({cmd:()=>{this.thickness=X,Pt(this,L,di).call(this)},undo:()=>{this.thickness=ut,Pt(this,L,di).call(this)},mustExec:!0,type:R.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},As=function(X){const ut=this.color;this.addCommands({cmd:()=>{this.color=X,Pt(this,L,Yn).call(this)},undo:()=>{this.color=ut,Pt(this,L,Yn).call(this)},mustExec:!0,type:R.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Es=function(X){X/=100;const ut=this.opacity;this.addCommands({cmd:()=>{this.opacity=X,Pt(this,L,Yn).call(this)},undo:()=>{this.opacity=ut,Pt(this,L,Yn).call(this)},mustExec:!0,type:R.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Ss=function(){const{parentRotation:X,parentDimensions:[ut,kt]}=this;switch(X){case 90:return[0,kt,kt,ut];case 180:return[ut,kt,ut,kt];case 270:return[ut,0,kt,ut];default:return[0,0,ut,kt]}},Rr=function(){const{ctx:X,color:ut,opacity:kt,thickness:Ht,parentScale:Jt,scaleFactor:ae}=this;X.lineWidth=Ht*Jt/ae,X.lineCap="round",X.lineJoin="round",X.miterLimit=10,X.strokeStyle=`${ut}${(0,zt.opacityToHex)(kt)}`},ws=function(X,ut){this.canvas.addEventListener("contextmenu",bt.noContextMenu),this.canvas.addEventListener("pointerleave",y(this,lt)),this.canvas.addEventListener("pointermove",y(this,ft)),this.canvas.addEventListener("pointerup",y(this,q)),this.canvas.removeEventListener("pointerdown",y(this,V)),this.isEditing=!0,y(this,Y)||(Vt(this,Y,!0),Pt(this,L,ui).call(this),this.thickness||(this.thickness=se._defaultThickness),this.color||(this.color=se._defaultColor||W.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=se._defaultOpacity)),this.currentPath.push([X,ut]),Vt(this,U,!1),Pt(this,L,Rr).call(this),Vt(this,B,()=>{Pt(this,L,xs).call(this),y(this,B)&&window.requestAnimationFrame(y(this,B))}),window.requestAnimationFrame(y(this,B))},kr=function(X,ut){const[kt,Ht]=this.currentPath.at(-1);if(this.currentPath.length>1&&X===kt&&ut===Ht)return;const Jt=this.currentPath;let ae=y(this,et);if(Jt.push([X,ut]),Vt(this,U,!0),Jt.length<=2){ae.moveTo(...Jt[0]),ae.lineTo(X,ut);return}Jt.length===3&&(Vt(this,et,ae=new Path2D),ae.moveTo(...Jt[0])),Pt(this,L,Ps).call(this,ae,...Jt.at(-3),...Jt.at(-2),X,ut)},Cs=function(){if(this.currentPath.length===0)return;const X=this.currentPath.at(-1);y(this,et).lineTo(...X)},Ts=function(X,ut){Vt(this,B,null),X=Math.min(Math.max(X,0),this.canvas.width),ut=Math.min(Math.max(ut,0),this.canvas.height),Pt(this,L,kr).call(this,X,ut),Pt(this,L,Cs).call(this);let kt;if(this.currentPath.length!==1)kt=Pt(this,L,Rs).call(this);else{const Rt=[X,ut];kt=[[Rt,Rt.slice(),Rt.slice(),Rt]]}const Ht=y(this,et),Jt=this.currentPath;this.currentPath=[],Vt(this,et,new Path2D);const ae=()=>{this.allRawPaths.push(Jt),this.paths.push(kt),this.bezierPath2D.push(Ht),this.rebuild()},ne=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Pt(this,L,ji).call(this),Pt(this,L,Bi).call(this)),Pt(this,L,di).call(this))};this.addCommands({cmd:ae,undo:ne,mustExec:!0})},xs=function(){if(!y(this,U))return;Vt(this,U,!1);const X=Math.ceil(this.thickness*this.parentScale),ut=this.currentPath.slice(-3),kt=ut.map(ae=>ae[0]),Ht=ut.map(ae=>ae[1]);Math.min(...kt)-X,Math.max(...kt)+X,Math.min(...Ht)-X,Math.max(...Ht)+X;const{ctx:Jt}=this;Jt.save(),Jt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const ae of this.bezierPath2D)Jt.stroke(ae);Jt.stroke(y(this,et)),Jt.restore()},Ps=function(X,ut,kt,Ht,Jt,ae,ne){const Rt=(ut+Ht)/2,ge=(kt+Jt)/2,de=(Ht+ae)/2,ze=(Jt+ne)/2;X.bezierCurveTo(Rt+2*(Ht-Rt)/3,ge+2*(Jt-ge)/3,de+2*(Ht-de)/3,ze+2*(Jt-ze)/3,de,ze)},Rs=function(){const X=this.currentPath;if(X.length<=2)return[[X[0],X[0],X.at(-1),X.at(-1)]];const ut=[];let kt,[Ht,Jt]=X[0];for(kt=1;kt<X.length-2;kt++){const[Ie,Qe]=X[kt],[Ae,ke]=X[kt+1],qe=(Ie+Ae)/2,ln=(Qe+ke)/2,ee=[Ht+2*(Ie-Ht)/3,Jt+2*(Qe-Jt)/3],Ft=[qe+2*(Ie-qe)/3,ln+2*(Qe-ln)/3];ut.push([[Ht,Jt],ee,Ft,[qe,ln]]),[Ht,Jt]=[qe,ln]}const[ae,ne]=X[kt],[Rt,ge]=X[kt+1],de=[Ht+2*(ae-Ht)/3,Jt+2*(ne-Jt)/3],ze=[Rt+2*(ae-Rt)/3,ge+2*(ne-ge)/3];return ut.push([[Ht,Jt],de,ze,[Rt,ge]]),ut},Yn=function(){if(this.isEmpty()){Pt(this,L,Hi).call(this);return}Pt(this,L,Rr).call(this);const{canvas:X,ctx:ut}=this;ut.setTransform(1,0,0,1,0,0),ut.clearRect(0,0,X.width,X.height),Pt(this,L,Hi).call(this);for(const kt of this.bezierPath2D)ut.stroke(kt)},Mr=function(X){this.canvas.removeEventListener("pointerleave",y(this,lt)),this.canvas.removeEventListener("pointermove",y(this,ft)),this.canvas.removeEventListener("pointerup",y(this,q)),this.canvas.addEventListener("pointerdown",y(this,V)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",bt.noContextMenu)},10),Pt(this,L,Ts).call(this,X.offsetX,X.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ji=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",W.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(X=>{var ut;return(ut=this.canvas)==null?void 0:ut.setAttribute("aria-label",X)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Bi=function(){Vt(this,dt,new ResizeObserver(X=>{const ut=X[0].contentRect;ut.width&&ut.height&&this.setDimensions(ut.width,ut.height)})),y(this,dt).observe(this.div)},ui=function(){if(!y(this,Y))return;const[X,ut]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*X),this.canvas.height=Math.ceil(this.height*ut),Pt(this,L,Hi).call(this)},Fr=function(X,ut){const kt=Pt(this,L,Ui).call(this),Ht=(X-kt)/y(this,O),Jt=(ut-kt)/y(this,nt);this.scaleFactor=Math.min(Ht,Jt)},Hi=function(){const X=Pt(this,L,Ui).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+X,this.translationY*this.scaleFactor+X)},ot=new WeakSet,ks=function(X){const ut=new Path2D;for(let kt=0,Ht=X.length;kt<Ht;kt++){const[Jt,ae,ne,Rt]=X[kt];kt===0&&ut.moveTo(...Jt),ut.bezierCurveTo(ae[0],ae[1],ne[0],ne[1],Rt[0],Rt[1])}return ut},Lr=function(X,ut,kt){const[Ht,Jt,ae,ne]=ut;switch(kt){case 0:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2)X[Rt]+=Ht,X[Rt+1]=ne-X[Rt+1];break;case 90:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2){const de=X[Rt];X[Rt]=X[Rt+1]+Ht,X[Rt+1]=de+Jt}break;case 180:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2)X[Rt]=ae-X[Rt],X[Rt+1]+=Jt;break;case 270:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2){const de=X[Rt];X[Rt]=ae-X[Rt+1],X[Rt+1]=ne-de}break;default:throw new Error("Invalid rotation")}return X},Ms=function(X,ut,kt){const[Ht,Jt,ae,ne]=ut;switch(kt){case 0:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2)X[Rt]-=Ht,X[Rt+1]=ne-X[Rt+1];break;case 90:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2){const de=X[Rt];X[Rt]=X[Rt+1]-Jt,X[Rt+1]=de-Ht}break;case 180:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2)X[Rt]=ae-X[Rt],X[Rt+1]-=Jt;break;case 270:for(let Rt=0,ge=X.length;Rt<ge;Rt+=2){const de=X[Rt];X[Rt]=ne-X[Rt+1],X[Rt+1]=ae-de}break;default:throw new Error("Invalid rotation")}return X},Fs=function(X,ut,kt,Ht){var ge,de;const Jt=[],ae=this.thickness/2,ne=X*ut+ae,Rt=X*kt+ae;for(const ze of this.paths){const Ie=[],Qe=[];for(let Ae=0,ke=ze.length;Ae<ke;Ae++){const[qe,ln,ee,Ft]=ze[Ae],Dt=X*qe[0]+ne,ye=X*qe[1]+Rt,we=X*ln[0]+ne,De=X*ln[1]+Rt,gt=X*ee[0]+ne,Qt=X*ee[1]+Rt,pe=X*Ft[0]+ne,Ce=X*Ft[1]+Rt;Ae===0&&(Ie.push(Dt,ye),Qe.push(Dt,ye)),Ie.push(we,De,gt,Qt,pe,Ce),Qe.push(we,De),Ae===ke-1&&Qe.push(pe,Ce)}Jt.push({bezier:Pt(ge=se,ot,Lr).call(ge,Ie,Ht,this.rotation),points:Pt(de=se,ot,Lr).call(de,Qe,Ht,this.rotation)})}return Jt},Dr=function(){let X=1/0,ut=-1/0,kt=1/0,Ht=-1/0;for(const Jt of this.paths)for(const[ae,ne,Rt,ge]of Jt){const de=R.Util.bezierBoundingBox(...ae,...ne,...Rt,...ge);X=Math.min(X,de[0]),kt=Math.min(kt,de[1]),ut=Math.max(ut,de[2]),Ht=Math.max(Ht,de[3])}return[X,kt,ut,Ht]},Ui=function(){return y(this,G)?Math.ceil(this.thickness*this.parentScale):0},di=function(X=!1){if(this.isEmpty())return;if(!y(this,G)){Pt(this,L,Yn).call(this);return}const ut=Pt(this,L,Dr).call(this),kt=Pt(this,L,Ui).call(this);Vt(this,O,Math.max(W.AnnotationEditor.MIN_SIZE,ut[2]-ut[0])),Vt(this,nt,Math.max(W.AnnotationEditor.MIN_SIZE,ut[3]-ut[1]));const Ht=Math.ceil(kt+y(this,O)*this.scaleFactor),Jt=Math.ceil(kt+y(this,nt)*this.scaleFactor),[ae,ne]=this.parentDimensions;this.width=Ht/ae,this.height=Jt/ne,this.setAspectRatio(Ht,Jt);const Rt=this.translationX,ge=this.translationY;this.translationX=-ut[0],this.translationY=-ut[1],Pt(this,L,ui).call(this),Pt(this,L,Yn).call(this),Vt(this,J,Ht),Vt(this,F,Jt),this.setDims(Ht,Jt);const de=X?kt/this.scaleFactor/2:0;this.translate(Rt-this.translationX-de,ge-this.translationY-de)},Wt(se,ot),yn(se,"_defaultColor",null),yn(se,"_defaultOpacity",1),yn(se,"_defaultThickness",1),yn(se,"_type","ink");let pt=se;x.InkEditor=pt},(A,x,vt)=>{var pt,nt,O,ft,lt,q,V,et,G,U,Y,yi,Ai,zi,Ir,Ls,Ds,Or,Wi,Is;Object.defineProperty(x,"__esModule",{value:!0}),x.StampEditor=void 0;var R=vt(1),W=vt(4),_=vt(6),bt=vt(29);const K=class K extends W.AnnotationEditor{constructor(wt){super({...wt,name:"stampEditor"});Wt(this,Y);Wt(this,pt,null);Wt(this,nt,null);Wt(this,O,null);Wt(this,ft,null);Wt(this,lt,null);Wt(this,q,null);Wt(this,V,null);Wt(this,et,null);Wt(this,G,!1);Wt(this,U,!1);Vt(this,ft,wt.bitmapUrl),Vt(this,lt,wt.bitmapFile)}static initialize(wt){W.AnnotationEditor.initialize(wt)}static get supportedTypes(){const wt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,R.shadow)(this,"supportedTypes",wt.map(Mt=>`image/${Mt}`))}static get supportedTypesStr(){return(0,R.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(wt){return this.supportedTypes.includes(wt)}static paste(wt,Mt){Mt.pasteEditor(R.AnnotationEditorType.STAMP,{bitmapFile:wt.getAsFile()})}remove(){var wt,Mt;y(this,nt)&&(Vt(this,pt,null),this._uiManager.imageManager.deleteId(y(this,nt)),(wt=y(this,q))==null||wt.remove(),Vt(this,q,null),(Mt=y(this,V))==null||Mt.disconnect(),Vt(this,V,null)),super.remove()}rebuild(){if(!this.parent){y(this,nt)&&Pt(this,Y,zi).call(this);return}super.rebuild(),this.div!==null&&(y(this,nt)&&Pt(this,Y,zi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(y(this,O)||y(this,pt)||y(this,ft)||y(this,lt))}get isResizable(){return!0}render(){if(this.div)return this.div;let wt,Mt;if(this.width&&(wt=this.x,Mt=this.y),super.render(),this.div.hidden=!0,y(this,pt)?Pt(this,Y,Ir).call(this):Pt(this,Y,zi).call(this),this.width){const[At,qt]=this.parentDimensions;this.setAt(wt*At,Mt*qt,this.width*At,this.height*qt)}return this.div}static deserialize(wt,Mt,At){if(wt instanceof bt.StampAnnotationElement)return null;const qt=super.deserialize(wt,Mt,At),{rect:rt,bitmapUrl:Et,bitmapId:Ot,isSvg:tt,accessibilityData:T}=wt;Ot&&At.imageManager.isValidId(Ot)?Vt(qt,nt,Ot):Vt(qt,ft,Et),Vt(qt,G,tt);const[P,$]=qt.pageDimensions;return qt.width=(rt[2]-rt[0])/P,qt.height=(rt[3]-rt[1])/$,T&&(qt.altTextData=T),qt}serialize(wt=!1,Mt=null){if(this.isEmpty())return null;const At={annotationType:R.AnnotationEditorType.STAMP,bitmapId:y(this,nt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:y(this,G),structTreeParentId:this._structTreeParentId};if(wt)return At.bitmapUrl=Pt(this,Y,Wi).call(this,!0),At.accessibilityData=this.altTextData,At;const{decorative:qt,altText:rt}=this.altTextData;if(!qt&&rt&&(At.accessibilityData={type:"Figure",alt:rt}),Mt===null)return At;Mt.stamps||(Mt.stamps=new Map);const Et=y(this,G)?(At.rect[2]-At.rect[0])*(At.rect[3]-At.rect[1]):null;if(!Mt.stamps.has(y(this,nt)))Mt.stamps.set(y(this,nt),{area:Et,serialized:At}),At.bitmap=Pt(this,Y,Wi).call(this,!1);else if(y(this,G)){const Ot=Mt.stamps.get(y(this,nt));Et>Ot.area&&(Ot.area=Et,Ot.serialized.bitmap.close(),Ot.serialized.bitmap=Pt(this,Y,Wi).call(this,!1))}return At}};pt=new WeakMap,nt=new WeakMap,O=new WeakMap,ft=new WeakMap,lt=new WeakMap,q=new WeakMap,V=new WeakMap,et=new WeakMap,G=new WeakMap,U=new WeakMap,Y=new WeakSet,yi=function(wt,Mt=!1){if(!wt){this.remove();return}Vt(this,pt,wt.bitmap),Mt||(Vt(this,nt,wt.id),Vt(this,G,wt.isSvg)),Pt(this,Y,Ir).call(this)},Ai=function(){Vt(this,O,null),this._uiManager.enableWaiting(!1),y(this,q)&&this.div.focus()},zi=function(){if(y(this,nt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(y(this,nt)).then(Mt=>Pt(this,Y,yi).call(this,Mt,!0)).finally(()=>Pt(this,Y,Ai).call(this));return}if(y(this,ft)){const Mt=y(this,ft);Vt(this,ft,null),this._uiManager.enableWaiting(!0),Vt(this,O,this._uiManager.imageManager.getFromUrl(Mt).then(At=>Pt(this,Y,yi).call(this,At)).finally(()=>Pt(this,Y,Ai).call(this)));return}if(y(this,lt)){const Mt=y(this,lt);Vt(this,lt,null),this._uiManager.enableWaiting(!0),Vt(this,O,this._uiManager.imageManager.getFromFile(Mt).then(At=>Pt(this,Y,yi).call(this,At)).finally(()=>Pt(this,Y,Ai).call(this)));return}const wt=document.createElement("input");wt.type="file",wt.accept=K.supportedTypesStr,Vt(this,O,new Promise(Mt=>{wt.addEventListener("change",async()=>{if(!wt.files||wt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const At=await this._uiManager.imageManager.getFromFile(wt.files[0]);Pt(this,Y,yi).call(this,At)}Mt()}),wt.addEventListener("cancel",()=>{this.remove(),Mt()})}).finally(()=>Pt(this,Y,Ai).call(this))),wt.click()},Ir=function(){const{div:wt}=this;let{width:Mt,height:At}=y(this,pt);const[qt,rt]=this.pageDimensions,Et=.75;if(this.width)Mt=this.width*qt,At=this.height*rt;else if(Mt>Et*qt||At>Et*rt){const P=Math.min(Et*qt/Mt,Et*rt/At);Mt*=P,At*=P}const[Ot,tt]=this.parentDimensions;this.setDims(Mt*Ot/qt,At*tt/rt),this._uiManager.enableWaiting(!1);const T=Vt(this,q,document.createElement("canvas"));wt.append(T),wt.hidden=!1,Pt(this,Y,Or).call(this,Mt,At),Pt(this,Y,Is).call(this),y(this,U)||(this.parent.addUndoableEditor(this),Vt(this,U,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Ls=function(wt,Mt){var Et;const[At,qt]=this.parentDimensions;this.width=wt/At,this.height=Mt/qt,this.setDims(wt,Mt),(Et=this._initialOptions)!=null&&Et.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,y(this,et)!==null&&clearTimeout(y(this,et)),Vt(this,et,setTimeout(()=>{Vt(this,et,null),Pt(this,Y,Or).call(this,wt,Mt)},200))},Ds=function(wt,Mt){const{width:At,height:qt}=y(this,pt);let rt=At,Et=qt,Ot=y(this,pt);for(;rt>2*wt||Et>2*Mt;){const tt=rt,T=Et;rt>2*wt&&(rt=rt>=16384?Math.floor(rt/2)-1:Math.ceil(rt/2)),Et>2*Mt&&(Et=Et>=16384?Math.floor(Et/2)-1:Math.ceil(Et/2));const P=new OffscreenCanvas(rt,Et);P.getContext("2d").drawImage(Ot,0,0,tt,T,0,0,rt,Et),Ot=P.transferToImageBitmap()}return Ot},Or=function(wt,Mt){wt=Math.ceil(wt),Mt=Math.ceil(Mt);const At=y(this,q);if(!At||At.width===wt&&At.height===Mt)return;At.width=wt,At.height=Mt;const qt=y(this,G)?y(this,pt):Pt(this,Y,Ds).call(this,wt,Mt),rt=At.getContext("2d");rt.filter=this._uiManager.hcmFilter,rt.drawImage(qt,0,0,qt.width,qt.height,0,0,wt,Mt)},Wi=function(wt){if(wt){if(y(this,G)){const qt=this._uiManager.imageManager.getSvgUrl(y(this,nt));if(qt)return qt}const Mt=document.createElement("canvas");return{width:Mt.width,height:Mt.height}=y(this,pt),Mt.getContext("2d").drawImage(y(this,pt),0,0),Mt.toDataURL()}if(y(this,G)){const[Mt,At]=this.pageDimensions,qt=Math.round(this.width*Mt*_.PixelsPerInch.PDF_TO_CSS_UNITS),rt=Math.round(this.height*At*_.PixelsPerInch.PDF_TO_CSS_UNITS),Et=new OffscreenCanvas(qt,rt);return Et.getContext("2d").drawImage(y(this,pt),0,0,y(this,pt).width,y(this,pt).height,0,0,qt,rt),Et.transferToImageBitmap()}return structuredClone(y(this,pt))},Is=function(){Vt(this,V,new ResizeObserver(wt=>{const Mt=wt[0].contentRect;Mt.width&&Mt.height&&Pt(this,Y,Ls).call(this,Mt.width,Mt.height)})),y(this,V).observe(this.div)},yn(K,"_type","stamp");let zt=K;x.StampEditor=zt}],__webpack_module_cache__={};function __w_pdfjs_require__(A){var x=__webpack_module_cache__[A];if(x!==void 0)return x.exports;var vt=__webpack_module_cache__[A]={exports:{}};return __webpack_modules__[A](vt,vt.exports,__w_pdfjs_require__),vt.exports}var __webpack_exports__={};return(()=>{var A=__webpack_exports__;Object.defineProperty(A,"__esModule",{value:!0}),Object.defineProperty(A,"AbortException",{enumerable:!0,get:function(){return x.AbortException}}),Object.defineProperty(A,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _.AnnotationEditorLayer}}),Object.defineProperty(A,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return x.AnnotationEditorParamsType}}),Object.defineProperty(A,"AnnotationEditorType",{enumerable:!0,get:function(){return x.AnnotationEditorType}}),Object.defineProperty(A,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return bt.AnnotationEditorUIManager}}),Object.defineProperty(A,"AnnotationLayer",{enumerable:!0,get:function(){return zt.AnnotationLayer}}),Object.defineProperty(A,"AnnotationMode",{enumerable:!0,get:function(){return x.AnnotationMode}}),Object.defineProperty(A,"CMapCompressionType",{enumerable:!0,get:function(){return x.CMapCompressionType}}),Object.defineProperty(A,"DOMSVGFactory",{enumerable:!0,get:function(){return R.DOMSVGFactory}}),Object.defineProperty(A,"FeatureTest",{enumerable:!0,get:function(){return x.FeatureTest}}),Object.defineProperty(A,"GlobalWorkerOptions",{enumerable:!0,get:function(){return pt.GlobalWorkerOptions}}),Object.defineProperty(A,"ImageKind",{enumerable:!0,get:function(){return x.ImageKind}}),Object.defineProperty(A,"InvalidPDFException",{enumerable:!0,get:function(){return x.InvalidPDFException}}),Object.defineProperty(A,"MissingPDFException",{enumerable:!0,get:function(){return x.MissingPDFException}}),Object.defineProperty(A,"OPS",{enumerable:!0,get:function(){return x.OPS}}),Object.defineProperty(A,"PDFDataRangeTransport",{enumerable:!0,get:function(){return vt.PDFDataRangeTransport}}),Object.defineProperty(A,"PDFDateString",{enumerable:!0,get:function(){return R.PDFDateString}}),Object.defineProperty(A,"PDFWorker",{enumerable:!0,get:function(){return vt.PDFWorker}}),Object.defineProperty(A,"PasswordResponses",{enumerable:!0,get:function(){return x.PasswordResponses}}),Object.defineProperty(A,"PermissionFlag",{enumerable:!0,get:function(){return x.PermissionFlag}}),Object.defineProperty(A,"PixelsPerInch",{enumerable:!0,get:function(){return R.PixelsPerInch}}),Object.defineProperty(A,"PromiseCapability",{enumerable:!0,get:function(){return x.PromiseCapability}}),Object.defineProperty(A,"RenderingCancelledException",{enumerable:!0,get:function(){return R.RenderingCancelledException}}),Object.defineProperty(A,"SVGGraphics",{enumerable:!0,get:function(){return vt.SVGGraphics}}),Object.defineProperty(A,"UnexpectedResponseException",{enumerable:!0,get:function(){return x.UnexpectedResponseException}}),Object.defineProperty(A,"Util",{enumerable:!0,get:function(){return x.Util}}),Object.defineProperty(A,"VerbosityLevel",{enumerable:!0,get:function(){return x.VerbosityLevel}}),Object.defineProperty(A,"XfaLayer",{enumerable:!0,get:function(){return nt.XfaLayer}}),Object.defineProperty(A,"build",{enumerable:!0,get:function(){return vt.build}}),Object.defineProperty(A,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return x.createValidAbsoluteUrl}}),Object.defineProperty(A,"getDocument",{enumerable:!0,get:function(){return vt.getDocument}}),Object.defineProperty(A,"getFilenameFromUrl",{enumerable:!0,get:function(){return R.getFilenameFromUrl}}),Object.defineProperty(A,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return R.getPdfFilenameFromUrl}}),Object.defineProperty(A,"getXfaPageViewport",{enumerable:!0,get:function(){return R.getXfaPageViewport}}),Object.defineProperty(A,"isDataScheme",{enumerable:!0,get:function(){return R.isDataScheme}}),Object.defineProperty(A,"isPdfFile",{enumerable:!0,get:function(){return R.isPdfFile}}),Object.defineProperty(A,"loadScript",{enumerable:!0,get:function(){return R.loadScript}}),Object.defineProperty(A,"noContextMenu",{enumerable:!0,get:function(){return R.noContextMenu}}),Object.defineProperty(A,"normalizeUnicode",{enumerable:!0,get:function(){return x.normalizeUnicode}}),Object.defineProperty(A,"renderTextLayer",{enumerable:!0,get:function(){return W.renderTextLayer}}),Object.defineProperty(A,"setLayerDimensions",{enumerable:!0,get:function(){return R.setLayerDimensions}}),Object.defineProperty(A,"shadow",{enumerable:!0,get:function(){return x.shadow}}),Object.defineProperty(A,"updateTextLayer",{enumerable:!0,get:function(){return W.updateTextLayer}}),Object.defineProperty(A,"version",{enumerable:!0,get:function(){return vt.version}});var x=__w_pdfjs_require__(1),vt=__w_pdfjs_require__(2),R=__w_pdfjs_require__(6),W=__w_pdfjs_require__(26),_=__w_pdfjs_require__(27),bt=__w_pdfjs_require__(5),zt=__w_pdfjs_require__(29),pt=__w_pdfjs_require__(14),nt=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,lib$1={exports:{}},core_min={};(function(A){var x=reactExports,vt=pdfExports;function R(w){var H=Object.create(null);return w&&Object.keys(w).forEach(function(mt){if(mt!=="default"){var _t=Object.getOwnPropertyDescriptor(w,mt);Object.defineProperty(H,mt,_t.get?_t:{enumerable:!0,get:function(){return w[mt]}})}}),H.default=w,Object.freeze(H)}var W,_=R(x),bt=R(vt);A.AnnotationType=void 0,(W=A.AnnotationType||(A.AnnotationType={}))[W.Text=1]="Text",W[W.Link=2]="Link",W[W.FreeText=3]="FreeText",W[W.Line=4]="Line",W[W.Square=5]="Square",W[W.Circle=6]="Circle",W[W.Polygon=7]="Polygon",W[W.Polyline=8]="Polyline",W[W.Highlight=9]="Highlight",W[W.Underline=10]="Underline",W[W.Squiggly=11]="Squiggly",W[W.StrikeOut=12]="StrikeOut",W[W.Stamp=13]="Stamp",W[W.Caret=14]="Caret",W[W.Ink=15]="Ink",W[W.Popup=16]="Popup",W[W.FileAttachment=17]="FileAttachment";var zt=function(w,H){return zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(mt,_t){mt.__proto__=_t}||function(mt,_t){for(var St in _t)Object.prototype.hasOwnProperty.call(_t,St)&&(mt[St]=_t[St])},zt(w,H)};function pt(w,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function mt(){this.constructor=w}zt(w,H),w.prototype=H===null?Object.create(H):(mt.prototype=H.prototype,new mt)}var nt,O=function(){return O=Object.assign||function(w){for(var H,mt=1,_t=arguments.length;mt<_t;mt++)for(var St in H=arguments[mt])Object.prototype.hasOwnProperty.call(H,St)&&(w[St]=H[St]);return w},O.apply(this,arguments)};A.TextDirection=void 0,(nt=A.TextDirection||(A.TextDirection={})).RightToLeft="RTL",nt.LeftToRight="LTR";var ft,lt=_.createContext({currentTheme:"light",direction:A.TextDirection.LeftToRight,setCurrentTheme:function(){}}),q=function(w){var H=[];return Object.keys(w).forEach(function(mt){mt&&w[mt]&&H.push(mt)}),H.join(" ")},V=typeof window<"u"?_.useLayoutEffect:_.useEffect,et=function(w){var H=_.useRef(null),mt=w.once,_t=w.threshold,St=w.onVisibilityChanged;return V(function(){var Tt=H.current;if(Tt){var Ut=new IntersectionObserver(function(Lt){Lt.forEach(function(yt){var jt=yt.isIntersecting,It=yt.intersectionRatio;St({isVisible:jt,ratio:It}),jt&&mt&&(Ut.unobserve(Tt),Ut.disconnect())})},{threshold:_t||0});return Ut.observe(Tt),function(){Ut.unobserve(Tt),Ut.disconnect()}}},[]),H},G=function(w){var H=w.children,mt=w.ignoreDirection,_t=mt!==void 0&&mt,St=w.size,Tt=St===void 0?24:St,Ut=_.useContext(lt).direction,Lt=!_t&&Ut===A.TextDirection.RightToLeft,yt="".concat(Tt||24,"px");return _.createElement("svg",{"aria-hidden":"true",className:q({"rpv-core__icon":!0,"rpv-core__icon--rtl":Lt}),focusable:"false",height:yt,viewBox:"0 0 24 24",width:yt},H)},U=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},Y=function(w){var H=w.children,mt=w.testId,_t=w.onClick,St=_.useContext(lt).direction===A.TextDirection.RightToLeft,Tt=mt?{"data-testid":mt}:{};return _.createElement("button",O({className:q({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":St}),type:"button",onClick:_t},Tt),H)},dt=function(w){var H=w.size,mt=H===void 0?"4rem":H,_t=w.testId,St=_.useState(!1),Tt=St[0],Ut=St[1],Lt=_t?{"data-testid":_t}:{},yt=et({onVisibilityChanged:function(jt){Ut(jt.isVisible)}});return _.createElement("div",O({},Lt,{className:q({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Tt}),ref:yt,style:{height:mt,width:mt}}))},J=function(w){var H=w.ariaLabel,mt=H===void 0?"":H,_t=w.autoFocus,St=_t!==void 0&&_t,Tt=w.placeholder,Ut=Tt===void 0?"":Tt,Lt=w.testId,yt=w.type,jt=yt===void 0?"text":yt,It=w.value,ce=It===void 0?"":It,le=w.onChange,oe=w.onKeyDown,ve=oe===void 0?function(){}:oe,me=_.useContext(lt).direction,fe=_.useRef(),nn=me===A.TextDirection.RightToLeft,je={ref:fe,"data-testid":"","aria-label":mt,className:q({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":nn}),placeholder:Ut,value:ce,onChange:function(He){return le(He.target.value)},onKeyDown:ve};return Lt&&(je["data-testid"]=Lt),V(function(){if(St){var He=fe.current;if(He){var Ge=window.scrollX,Me=window.scrollY;He.focus(),window.scrollTo(Ge,Me)}}},[]),jt==="text"?_.createElement("input",O({type:"text"},je)):_.createElement("input",O({type:"password"},je))};(function(w){w[w.ExitFullScreen=0]="ExitFullScreen",w[w.FullScreenChange=1]="FullScreenChange",w[w.FullScreenElement=2]="FullScreenElement",w[w.FullScreenEnabled=3]="FullScreenEnabled",w[w.RequestFullScreen=4]="RequestFullScreen"})(ft||(ft={}));var F,B={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},L={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},N={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},j=typeof window<"u",ht=j&&(ft.FullScreenEnabled in document&&B||L.FullScreenEnabled in document&&L||N.FullScreenEnabled in document&&N)||B,D=function(){return j&&ht.FullScreenEnabled in document&&document[ht.FullScreenEnabled]===!0},K=function(w){return j?w[ht.ExitFullScreen]():Promise.resolve({})},ct=function(){return j?document[ht.FullScreenElement]:null},Gt=function(w,H){var mt=_.useRef(),_t=function(){mt.current&&clearTimeout(mt.current)};return _.useEffect(function(){return function(){return _t()}},[]),_.useCallback(function(){for(var St=[],Tt=0;Tt<arguments.length;Tt++)St[Tt]=arguments[Tt];_t(),mt.current=setTimeout(function(){w.apply(void 0,St)},H)},[w,H])},wt=function(){var w=_.useRef(!1);return _.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]),w},Mt=function(w){var H=_.useRef(w);return _.useEffect(function(){H.current=w},[w]),H.current};(function(w){w.NotRenderedYet="NotRenderedYet",w.Rendering="Rendering",w.Rendered="Rendered"})(F||(F={}));var At,qt=-9999,rt=function(w){var H=w.doc,mt=H.numPages,_t=H.loadingTask.docId,St=_.useMemo(function(){return Array(mt).fill(null).map(function(Lt,yt){return{pageIndex:yt,renderStatus:F.NotRenderedYet,visibility:qt}})},[_t]),Tt=_.useRef({currentRenderingPage:-1,startRange:0,endRange:mt-1,visibilities:St}),Ut=function(Lt,yt){Tt.current.visibilities[Lt].visibility=yt};return{getHighestPriorityPage:function(){var Lt=Tt.current.visibilities.slice(Tt.current.startRange,Tt.current.endRange+1).filter(function(le){return le.visibility>qt});if(!Lt.length)return-1;for(var yt=Lt[0].pageIndex,jt=Lt[Lt.length-1].pageIndex,It=Lt.length,ce=0;ce<It;ce++){if(Lt[ce].renderStatus===F.Rendering)return-1;if(Lt[ce].renderStatus===F.NotRenderedYet)return Lt[ce].pageIndex}return jt+1<mt&&Tt.current.visibilities[jt+1].renderStatus!==F.Rendered?jt+1:yt-1>=0&&Tt.current.visibilities[yt-1].renderStatus!==F.Rendered?yt-1:-1},isInRange:function(Lt){return Lt>=Tt.current.startRange&&Lt<=Tt.current.endRange},markNotRendered:function(){for(var Lt=0;Lt<mt;Lt++)Tt.current.visibilities[Lt].renderStatus=F.NotRenderedYet},markRendered:function(Lt){Tt.current.visibilities[Lt].renderStatus=F.Rendered},markRendering:function(Lt){Tt.current.currentRenderingPage!==-1&&Tt.current.currentRenderingPage!==Lt&&Tt.current.visibilities[Tt.current.currentRenderingPage].renderStatus===F.Rendering&&(Tt.current.visibilities[Tt.current.currentRenderingPage].renderStatus=F.NotRenderedYet),Tt.current.visibilities[Lt].renderStatus=F.Rendering,Tt.current.currentRenderingPage=Lt},setOutOfRange:function(Lt){Ut(Lt,qt)},setRange:function(Lt,yt){Tt.current.startRange=Lt,Tt.current.endRange=yt;for(var jt=0;jt<mt;jt++)(jt<Lt||jt>yt)&&(Tt.current.visibilities[jt].visibility=qt,Tt.current.visibilities[jt].renderStatus=F.NotRenderedYet)},setVisibility:Ut}},Et={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Ot=_.createContext({l10n:Et,setL10n:function(){}}),tt=0,T=function(){return tt++},P=function(w,H,mt){var _t=function(St){var Tt=H.current;if(Tt){var Ut=St.target;if(Ut instanceof Element&&Ut.shadowRoot){var Lt=St.composedPath();Lt.length>0&&!Tt.contains(Lt[0])&&mt()}else Tt.contains(Ut)||mt()}};_.useEffect(function(){if(w){var St={capture:!0};return document.addEventListener("click",_t,St),function(){document.removeEventListener("click",_t,St)}}},[])},$=function(w){var H=function(mt){mt.key==="Escape"&&w()};_.useEffect(function(){return document.addEventListener("keyup",H),function(){document.removeEventListener("keyup",H)}},[])},at=function(w){var H=w.ariaControlsSuffix,mt=w.children,_t=w.closeOnClickOutside,St=w.closeOnEscape,Tt=w.onToggle,Ut=_.useRef(),Lt=_.useContext(lt).direction===A.TextDirection.RightToLeft;return _.useEffect(function(){var yt=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=yt}},[]),$(function(){Ut.current&&St&&Tt()}),P(_t,Ut,Tt),V(function(){var yt=Ut.current;if(yt){var jt=.75*document.body.clientHeight;yt.getBoundingClientRect().height>=jt&&(yt.style.overflow="auto",yt.style.maxHeight="".concat(jt,"px"))}},[]),_.createElement("div",{"aria-modal":"true",className:q({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Lt}),id:"rpv-core__modal-body-".concat(H),ref:Ut,role:"dialog",tabIndex:-1},mt)},ot=function(w){var H=w.children;return _.createElement("div",{className:"rpv-core__modal-overlay"},H)};A.ToggleStatus=void 0,(At=A.ToggleStatus||(A.ToggleStatus={})).Close="Close",At.Open="Open",At.Toggle="Toggle";var st,xt=function(w){var H=_.useState(w),mt=H[0],_t=H[1];return{opened:mt,toggle:function(St){switch(St){case A.ToggleStatus.Close:_t(!1);break;case A.ToggleStatus.Open:_t(!0);break;case A.ToggleStatus.Toggle:default:_t(function(Tt){return!Tt})}}}},$t=function(w){var H=w.content,mt=w.isOpened,_t=mt!==void 0&&mt,St=w.target,Tt=xt(_t),Ut=Tt.opened,Lt=Tt.toggle;return _.createElement(_.Fragment,null,St&&St(Lt,Ut),Ut&&H(Lt))};A.Position=void 0,(st=A.Position||(A.Position={})).TopLeft="TOP_LEFT",st.TopCenter="TOP_CENTER",st.TopRight="TOP_RIGHT",st.RightTop="RIGHT_TOP",st.RightCenter="RIGHT_CENTER",st.RightBottom="RIGHT_BOTTOM",st.BottomLeft="BOTTOM_LEFT",st.BottomCenter="BOTTOM_CENTER",st.BottomRight="BOTTOM_RIGHT",st.LeftTop="LEFT_TOP",st.LeftCenter="LEFT_CENTER",st.LeftBottom="LEFT_BOTTOM";var Kt,Zt,te,re,se,Nt,Bt,X,ut=function(w,H,mt,_t,St){V(function(){var Tt=H.current,Ut=w.current,Lt=mt.current;if(Ut&&Tt&&Lt){var yt=Lt.getBoundingClientRect(),jt=function(le,oe,ve,me){var fe=oe.getBoundingClientRect(),nn=le.getBoundingClientRect(),je=nn.height,He=nn.width,Ge=0,Me=0;switch(ve){case A.Position.TopLeft:Ge=fe.top-je,Me=fe.left;break;case A.Position.TopCenter:Ge=fe.top-je,Me=fe.left+fe.width/2-He/2;break;case A.Position.TopRight:Ge=fe.top-je,Me=fe.left+fe.width-He;break;case A.Position.RightTop:Ge=fe.top,Me=fe.left+fe.width;break;case A.Position.RightCenter:Ge=fe.top+fe.height/2-je/2,Me=fe.left+fe.width;break;case A.Position.RightBottom:Ge=fe.top+fe.height-je,Me=fe.left+fe.width;break;case A.Position.BottomLeft:Ge=fe.top+fe.height,Me=fe.left;break;case A.Position.BottomCenter:Ge=fe.top+fe.height,Me=fe.left+fe.width/2-He/2;break;case A.Position.BottomRight:Ge=fe.top+fe.height,Me=fe.left+fe.width-He;break;case A.Position.LeftTop:Ge=fe.top,Me=fe.left-He;break;case A.Position.LeftCenter:Ge=fe.top+fe.height/2-je/2,Me=fe.left-He;break;case A.Position.LeftBottom:Ge=fe.top+fe.height-je,Me=fe.left-He}return{left:Me+(me.left||0),top:Ge+(me.top||0)}}(Ut,Tt,_t,St),It=jt.top,ce=jt.left;Ut.style.top="".concat(It-yt.top,"px"),Ut.style.left="".concat(ce-yt.left,"px")}},[])},kt=function(w){var H,mt=w.customClassName,_t=w.position;return _.createElement("div",{className:q((H={"rpv-core__arrow":!0,"rpv-core__arrow--tl":_t===A.Position.TopLeft,"rpv-core__arrow--tc":_t===A.Position.TopCenter,"rpv-core__arrow--tr":_t===A.Position.TopRight,"rpv-core__arrow--rt":_t===A.Position.RightTop,"rpv-core__arrow--rc":_t===A.Position.RightCenter,"rpv-core__arrow--rb":_t===A.Position.RightBottom,"rpv-core__arrow--bl":_t===A.Position.BottomLeft,"rpv-core__arrow--bc":_t===A.Position.BottomCenter,"rpv-core__arrow--br":_t===A.Position.BottomRight,"rpv-core__arrow--lt":_t===A.Position.LeftTop,"rpv-core__arrow--lc":_t===A.Position.LeftCenter,"rpv-core__arrow--lb":_t===A.Position.LeftBottom},H["".concat(mt)]=mt!=="",H))})},Ht=function(w){var H=w.ariaControlsSuffix,mt=w.children,_t=w.closeOnClickOutside,St=w.offset,Tt=w.position,Ut=w.targetRef,Lt=w.onClose,yt=_.useRef(),jt=_.useRef(),It=_.useRef(),ce=_.useContext(lt).direction===A.TextDirection.RightToLeft;P(_t,yt,Lt),ut(yt,Ut,It,Tt,St),V(function(){var oe=jt.current;if(oe){var ve=.75*document.body.clientHeight;oe.getBoundingClientRect().height>=ve&&(oe.style.overflow="auto",oe.style.maxHeight="".concat(ve,"px"))}},[]);var le="rpv-core__popover-body-inner-".concat(H);return _.createElement(_.Fragment,null,_.createElement("div",{ref:It,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{"aria-describedby":le,className:q({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":ce}),id:"rpv-core__popover-body-".concat(H),ref:yt,role:"dialog",tabIndex:-1},_.createElement(kt,{customClassName:"rpv-core__popover-body-arrow",position:Tt}),_.createElement("div",{id:le,ref:jt},mt)))},Jt=function(w){var H=w.closeOnEscape,mt=w.onClose,_t=_.useRef();return $(function(){_t.current&&H&&mt()}),_.createElement("div",{className:"rpv-core__popover-overlay",ref:_t})},ae=function(w){var H=w.ariaControlsSuffix,mt=w.children,_t=w.contentRef,St=w.offset,Tt=w.position,Ut=w.targetRef,Lt=_.useRef(),yt=_.useContext(lt).direction===A.TextDirection.RightToLeft;return ut(_t,Ut,Lt,Tt,St),_.createElement(_.Fragment,null,_.createElement("div",{ref:Lt,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{className:q({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":yt}),id:"rpv-core__tooltip-body-".concat(H),ref:_t,role:"tooltip"},_.createElement(kt,{customClassName:"rpv-core__tooltip-body-arrow",position:Tt}),_.createElement("div",{className:"rpv-core__tooltip-body-content"},mt)))};A.FullScreenMode=void 0,(Kt=A.FullScreenMode||(A.FullScreenMode={})).Normal="Normal",Kt.Entering="Entering",Kt.Entered="Entered",Kt.EnteredCompletely="EnteredCompletely",Kt.Exitting="Exitting",Kt.Exited="Exited",A.LayerRenderStatus=void 0,(Zt=A.LayerRenderStatus||(A.LayerRenderStatus={}))[Zt.PreRender=0]="PreRender",Zt[Zt.DidRender=1]="DidRender",A.PageMode=void 0,(te=A.PageMode||(A.PageMode={})).Attachments="UseAttachments",te.Bookmarks="UseOutlines",te.ContentGroup="UseOC",te.Default="UserNone",te.FullScreen="FullScreen",te.Thumbnails="UseThumbs",A.PasswordStatus=void 0,(re=A.PasswordStatus||(A.PasswordStatus={})).RequiredPassword="RequiredPassword",re.WrongPassword="WrongPassword",A.RotateDirection=void 0,(se=A.RotateDirection||(A.RotateDirection={})).Backward="Backward",se.Forward="Forward",A.ScrollMode=void 0,(Nt=A.ScrollMode||(A.ScrollMode={})).Page="Page",Nt.Horizontal="Horizontal",Nt.Vertical="Vertical",Nt.Wrapped="Wrapped",A.SpecialZoomLevel=void 0,(Bt=A.SpecialZoomLevel||(A.SpecialZoomLevel={})).ActualSize="ActualSize",Bt.PageFit="PageFit",Bt.PageWidth="PageWidth",A.ViewMode=void 0,(X=A.ViewMode||(A.ViewMode={})).DualPage="DualPage",X.DualPageWithCover="DualPageWithCover",X.SinglePage="SinglePage";var ne,Rt=function(w,H){return w.reduce(function(mt,_t,St){return St%H?mt[mt.length-1].push(_t):mt.push([_t]),mt},[])},ge=function(w,H){switch(H[1].name){case"XYZ":return{bottomOffset:function(mt,_t){return H[3]===null?_t:H[3]},leftOffset:function(mt,_t){return H[2]===null?0:H[2]},pageIndex:w,scaleTo:H[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:w,scaleTo:A.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:H[2],leftOffset:0,pageIndex:w,scaleTo:A.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:w,scaleTo:1}}},de=new Map,ze=new Map,Ie=function(w,H){return"".concat(w.loadingTask.docId,"___").concat(H.num,"R").concat(H.gen===0?"":H.gen)},Qe=function(w,H,mt){de.set(Ie(w,H),mt)},Ae=function(w,H){if(!w)return Promise.reject("The document is not loaded yet");var mt="".concat(w.loadingTask.docId,"___").concat(H),_t=ze.get(mt);return _t?Promise.resolve(_t):new Promise(function(St,Tt){w.getPage(H+1).then(function(Ut){ze.set(mt,Ut),Ut.ref&&Qe(w,Ut.ref,H),St(Ut)})})},ke=function(w,H){return new Promise(function(mt){new Promise(function(_t){typeof H=="string"?w.getDestination(H).then(function(St){_t(St)}):_t(H)}).then(function(_t){if(typeof _t[0]=="object"&&_t[0]!==null){var St=_t[0],Tt=function(Lt,yt){var jt=Ie(Lt,yt);return de.has(jt)?de.get(jt):null}(w,St);Tt===null?w.getPageIndex(St).then(function(Lt){Qe(w,St,Lt),ke(w,H).then(function(yt){return mt(yt)})}):mt(ge(Tt,_t))}else{var Ut=ge(_t[0],_t);mt(Ut)}})})};(function(w){w[w.Solid=1]="Solid",w[w.Dashed=2]="Dashed",w[w.Beveled=3]="Beveled",w[w.Inset=4]="Inset",w[w.Underline=5]="Underline"})(ne||(ne={}));var qe,ln=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),ee=function(w,H,mt,_t){var St=parseInt(w,10);return St>=H&&St<=mt?St:_t},Ft=function(w){return w.contentsObj?w.contentsObj.str:w.contents||""},Dt=function(w){return w.titleObj?w.titleObj.str:w.title||""},ye=function(w){var H=w.annotation,mt=_.useContext(lt).direction,_t=Dt(H),St=Ft(H),Tt=mt===A.TextDirection.RightToLeft,Ut=_.useRef(),Lt="";if(H.modificationDate){var yt=function(jt){var It=ln.exec(jt);if(!It)return null;var ce=parseInt(It[1],10),le=ee(It[2],1,12,1)-1,oe=ee(It[3],1,31,1),ve=ee(It[4],0,23,0),me=ee(It[5],0,59,0),fe=ee(It[6],0,59,0),nn=It[7]||"Z",je=ee(It[8],0,23,0),He=ee(It[9],0,59,0);switch(nn){case"-":ve+=je,me+=He;break;case"+":ve-=je,me-=He}return new Date(Date.UTC(ce,le,oe,ve,me,fe))}(H.modificationDate);Lt=yt?"".concat(yt.toLocaleDateString(),", ").concat(yt.toLocaleTimeString()):""}return _.useLayoutEffect(function(){if(Ut.current){var jt=document.querySelector('[data-annotation-id="'.concat(H.id,'"]'));if(jt){var It=jt;return It.style.zIndex+=1,function(){It.style.zIndex="".concat(parseInt(It.style.zIndex,10)-1)}}}},[]),_.createElement("div",{ref:Ut,className:q({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Tt}),style:{top:H.annotationType===A.AnnotationType.Popup?"":"100%"}},_t&&_.createElement(_.Fragment,null,_.createElement("div",{className:q({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Tt,"rpv-core__annotation-popup-title--rtl":Tt})},_t),_.createElement("div",{className:"rpv-core__annotation-popup-date"},Lt)),St&&_.createElement("div",{className:"rpv-core__annotation-popup-content"},St.split(`
`).map(function(jt,It){return _.createElement(_.Fragment,{key:It},jt,_.createElement("br",null))})))};(function(w){w.Click="Click",w.Hover="Hover"})(qe||(qe={}));var we,De=function(w){var H,mt=w.annotation,_t=w.children,St=w.ignoreBorder,Tt=w.hasPopup,Ut=w.isRenderable,Lt=w.page,yt=w.viewport,jt=mt.rect,It=function(){var We=xt(!1),un=We.opened,cn=We.toggle,dn=_.useState(qe.Hover),hn=dn[0],gn=dn[1];return{opened:un,closeOnHover:function(){hn===qe.Hover&&cn(A.ToggleStatus.Close)},openOnHover:function(){hn===qe.Hover&&cn(A.ToggleStatus.Open)},toggleOnClick:function(){switch(hn){case qe.Click:un&&gn(qe.Hover),cn(A.ToggleStatus.Toggle);break;case qe.Hover:gn(qe.Click),cn(A.ToggleStatus.Open)}}}}(),ce=It.closeOnHover,le=It.opened,oe=It.openOnHover,ve=It.toggleOnClick,me=(H=[jt[0],Lt.view[3]+Lt.view[1]-jt[1],jt[2],Lt.view[3]+Lt.view[1]-jt[3]],[Math.min(H[0],H[2]),Math.min(H[1],H[3]),Math.max(H[0],H[2]),Math.max(H[1],H[3])]),fe=jt[2]-jt[0],nn=jt[3]-jt[1],je={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!St&&mt.borderStyle.width>0){switch(mt.borderStyle.style){case ne.Dashed:je.borderStyle="dashed";break;case ne.Solid:je.borderStyle="solid";break;case ne.Underline:je=Object.assign({borderBottomStyle:"solid"},je);case ne.Beveled:case ne.Inset:}var He=mt.borderStyle.width;je.borderWidth="".concat(He,"px"),mt.borderStyle.style!==ne.Underline&&(fe-=2*He,nn-=2*He);var Ge=mt.borderStyle,Me=Ge.horizontalCornerRadius,Xe=Ge.verticalCornerRadius;(Me>0||Xe>0)&&(je.borderRadius="".concat(Me,"px / ").concat(Xe,"px")),mt.color?je.borderColor="rgb(".concat(0|mt.color[0],", ").concat(0|mt.color[1],", ").concat(0|mt.color[2],")"):je.borderWidth="0"}return _.createElement(_.Fragment,null,Ut&&_t({popup:{opened:le,closeOnHover:ce,openOnHover:oe,toggleOnClick:ve},slot:{attrs:{style:Object.assign({height:"".concat(nn,"px"),left:"".concat(me[0],"px"),top:"".concat(me[1],"px"),transform:"matrix(".concat(yt.transform.join(","),")"),transformOrigin:"-".concat(me[0],"px -").concat(me[1],"px"),width:"".concat(fe,"px")},je)},children:_.createElement(_.Fragment,null,Tt&&le&&_.createElement(ye,{annotation:mt}))}}))},gt=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Qt=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut),yt=H.rect,jt=yt[2]-yt[0],It=yt[3]-yt[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(le){return _.createElement("div",O({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(jt," ").concat(It),width:"".concat(jt,"px")},_.createElement("circle",{cy:It/2,fill:"none",rx:jt/2-ce/2,ry:It/2-ce/2,stroke:"transparent",strokeWidth:ce||1})),le.slot.children)})},pe=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=Dt(H),Tt=Ft(H),Ut=!(H.hasPopup!==!1||!St&&!Tt),Lt=function(){var yt,jt,It,ce,le=H.file;le&&(yt=le.filename,jt=le.content,It=typeof jt=="string"?"":URL.createObjectURL(new Blob([jt],{type:""})),(ce=document.createElement("a")).style.display="none",ce.href=It||yt,ce.setAttribute("download",function(oe){var ve=oe.split("/").pop();return ve?ve.split("#")[0].split("?")[0]:oe}(yt)),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),It&&URL.revokeObjectURL(It))};return _.createElement(De,{annotation:H,hasPopup:Ut,ignoreBorder:!0,isRenderable:!0,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onDoubleClick:Lt,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Ce=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Pe=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=Dt(H),Tt=Ft(H),Ut=!(!St&&!Tt),Lt=!H.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(H.parentType)!==-1;return V(function(){if(H.parentId){var yt=document.querySelector('[data-annotation-id="'.concat(H.parentId,'"]')),jt=document.querySelector('[data-annotation-id="'.concat(H.id,'"]'));if(yt&&jt){var It=parseFloat(yt.style.left),ce=parseFloat(yt.style.top)+parseFloat(yt.style.height);jt.style.left="".concat(It,"px"),jt.style.top="".concat(ce,"px"),jt.style.transformOrigin="-".concat(It,"px -").concat(ce,"px")}}},[]),_.createElement(De,{annotation:H,hasPopup:Lt,ignoreBorder:!1,isRenderable:Ut,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":H.id}),_.createElement(ye,{annotation:H}))})},_e=function(w){var H=w.annotation,mt=w.childAnnotation,_t=w.page,St=w.viewport,Tt=H.hasPopup===!1,Ut=Dt(H),Lt=Ft(H),yt=!!(H.hasPopup||Ut||Lt);if(H.quadPoints&&H.quadPoints.length>0){var jt=H.quadPoints.map(function(It){return Object.assign({},H,{rect:[It[2].x,It[2].y,It[1].x,It[1].y],quadPoints:[]})});return _.createElement(_.Fragment,null,jt.map(function(It,ce){return _.createElement(_e,{key:ce,annotation:It,childAnnotation:mt,page:_t,viewport:St})}))}return _.createElement(De,{annotation:H,hasPopup:Tt,ignoreBorder:!0,isRenderable:yt,page:_t,viewport:St},function(It){return _.createElement(_.Fragment,null,_.createElement("div",O({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":H.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),It.slot.children),mt&&mt.annotationType===A.AnnotationType.Popup&&It.popup.opened&&_.createElement(Pe,{annotation:mt,page:_t,viewport:St}))})},it=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut),yt=H.rect,jt=yt[2]-yt[0],It=yt[3]-yt[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(le){return _.createElement("div",O({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),H.inkLists&&H.inkLists.length&&_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(jt," ").concat(It),width:"".concat(jt,"px")},H.inkLists.map(function(oe,ve){return _.createElement("polyline",{key:ve,fill:"none",stroke:"transparent",strokeWidth:ce||1,points:oe.map(function(me){return"".concat(me.x-yt[0],",").concat(yt[3]-me.y)}).join(" ")})})),le.slot.children)})},Q=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut),yt=H.rect,jt=yt[2]-yt[0],It=yt[3]-yt[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(le){return _.createElement("div",O({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(jt," ").concat(It),width:"".concat(jt,"px")},_.createElement("line",{stroke:"transparent",strokeWidth:ce||1,x1:yt[2]-H.lineCoordinates[0],x2:yt[2]-H.lineCoordinates[2],y1:yt[3]-H.lineCoordinates[1],y2:yt[3]-H.lineCoordinates[3]})),le.slot.children)})},Ct=/^([^\w]*)(javascript|data|vbscript)/im,Xt=/&#(\w+)(^\w|;)?/g,Yt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ie=/^([^:]+):/gm,ue=function(w,H){var mt,_t=(mt=w||"",mt.replace(Xt,function(Lt,yt){return String.fromCharCode(yt)})).replace(Yt,"").trim();if(!_t)return H;var St=_t[0];if(St==="."||St==="/")return _t;var Tt=_t.match(ie);if(!Tt)return _t;var Ut=Tt[0];return Ct.test(Ut)?H:_t},Te=function(w){var H,mt=w.annotation,_t=w.annotationContainerRef,St=w.doc,Tt=w.outlines,Ut=w.page,Lt=w.pageIndex,yt=w.scale,jt=w.viewport,It=w.onExecuteNamedAction,ce=w.onJumpFromLinkAnnotation,le=w.onJumpToDest,oe=_.useRef(),ve=Tt&&Tt.length&&mt.dest&&typeof mt.dest=="string"?(H=Tt.find(function(je){return je.dest===mt.dest}))===null||H===void 0?void 0:H.title:"",me=!!(mt.url||mt.dest||mt.action||mt.unsafeUrl),fe={};if(mt.url||mt.unsafeUrl){var nn=ue(mt.url||mt.unsafeUrl,"");nn?fe={"data-target":"external",href:nn,rel:"noopener noreferrer nofollow",target:mt.newWindow?"_blank":"",title:nn}:me=!1}else fe={href:"","data-annotation-link":mt.id,onClick:function(je){je.preventDefault(),mt.action?It(mt.action):ke(St,mt.dest).then(function(He){var Ge=oe.current,Me=_t.current;if(Ge&&Me){var Xe=Ge.getBoundingClientRect();Me.style.setProperty("height","100%"),Me.style.setProperty("width","100%");var We=Me.getBoundingClientRect();Me.style.removeProperty("height"),Me.style.removeProperty("width");var un=(Xe.left-We.left)/yt,cn=(We.bottom-Xe.bottom+Xe.height)/yt;ce({bottomOffset:cn,label:ve,leftOffset:un,pageIndex:Lt})}le(He)})}};return ve&&(fe=Object.assign({},fe,{title:ve,"aria-label":ve})),_.createElement(De,{annotation:mt,hasPopup:!1,ignoreBorder:!1,isRenderable:me,page:Ut,viewport:jt},function(je){return _.createElement("div",O({},je.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":mt.id,"data-testid":"core__annotation--link-".concat(mt.id)}),_.createElement("a",O({ref:oe},fe)))})},Ee=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut),yt=H.rect,jt=yt[2]-yt[0],It=yt[3]-yt[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(le){return _.createElement("div",O({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),H.vertices&&H.vertices.length&&_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(jt," ").concat(It),width:"".concat(jt,"px")},_.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:ce||1,points:H.vertices.map(function(oe){return"".concat(oe.x-yt[0],",").concat(yt[3]-oe.y)}).join(" ")})),le.slot.children)})},be=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut),yt=H.rect,jt=yt[2]-yt[0],It=yt[3]-yt[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(le){return _.createElement("div",O({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),H.vertices&&H.vertices.length&&_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(jt," ").concat(It),width:"".concat(jt,"px")},_.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:ce||1,points:H.vertices.map(function(oe){return"".concat(oe.x-yt[0],",").concat(yt[3]-oe.y)}).join(" ")})),le.slot.children)})},$e=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut),yt=H.rect,jt=yt[2]-yt[0],It=yt[3]-yt[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(le){return _.createElement("div",O({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(jt," ").concat(It),width:"".concat(jt,"px")},_.createElement("rect",{height:It-ce,fill:"none",stroke:"transparent",strokeWidth:ce||1,x:ce/2,y:ce/2,width:jt-ce})),le.slot.children)})},Se=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Re=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Be=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Ke=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),_.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),_.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),_.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},sn=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),_.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),_.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),_.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),_.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),_.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),_.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),_.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),_.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),_.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},pn=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),_.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Fn=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),_.createElement("path",{d:"M6 4.5L6 0.5"}),_.createElement("path",{d:"M18 4.5L18 0.5"}),_.createElement("path",{d:"M10 4.5L10 0.5"}),_.createElement("path",{d:"M14 4.5L14 0.5"}))},Cn=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),_.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),_.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Wn=function(){return _.createElement(G,{size:16},_.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},$n=function(w){var H=w.annotation,mt=w.childAnnotation,_t=w.page,St=w.viewport,Tt=H.hasPopup===!1,Ut=Dt(H),Lt=Ft(H),yt=!!(H.hasPopup||Ut||Lt),jt=H.name?H.name.toLowerCase():"";return _.createElement(De,{annotation:H,hasPopup:Tt,ignoreBorder:!1,isRenderable:yt,page:_t,viewport:St},function(It){return _.createElement(_.Fragment,null,_.createElement("div",O({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":H.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),jt&&_.createElement("div",{className:"rpv-core__annotation-text-icon"},jt==="check"&&_.createElement(U,null),jt==="comment"&&_.createElement(Ke,null),jt==="help"&&_.createElement(sn,null),jt==="insert"&&_.createElement(Wn,null),jt==="key"&&_.createElement(pn,null),jt==="note"&&_.createElement(Fn,null),(jt==="newparagraph"||jt==="paragraph")&&_.createElement(Cn,null)),It.slot.children),mt&&mt.annotationType===A.AnnotationType.Popup&&It.popup.opened&&_.createElement(Pe,{annotation:mt,page:_t,viewport:St}))})},Gn=function(w){var H=w.annotation,mt=w.page,_t=w.viewport,St=H.hasPopup===!1,Tt=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Tt||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:mt,viewport:_t},function(yt){return _.createElement("div",O({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":H.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),yt.slot.children)})},Ei=function(w){var H=w.annotations,mt=w.doc,_t=w.outlines,St=w.page,Tt=w.pageIndex,Ut=w.plugins,Lt=w.rotation,yt=w.scale,jt=w.onExecuteNamedAction,It=w.onJumpFromLinkAnnotation,ce=w.onJumpToDest,le=_.useRef(),oe=St.getViewport({rotation:Lt,scale:yt}).clone({dontFlip:!0}),ve=H.filter(function(me){return!me.parentId});return V(function(){var me=le.current;me&&Ut.forEach(function(fe){fe.onAnnotationLayerRender&&fe.onAnnotationLayerRender({annotations:ve,container:me,pageIndex:Tt,rotation:Lt,scale:yt})})},[]),_.createElement("div",{ref:le,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Tt)},ve.map(function(me){var fe=H.find(function(nn){return nn.parentId===me.id});switch(me.annotationType){case A.AnnotationType.Caret:return _.createElement(gt,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Circle:return _.createElement(Qt,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.FileAttachment:return _.createElement(pe,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.FreeText:return _.createElement(Ce,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Highlight:return _.createElement(_e,{key:me.id,annotation:me,childAnnotation:fe,page:St,viewport:oe});case A.AnnotationType.Ink:return _.createElement(it,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Line:return _.createElement(Q,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Link:return _.createElement(Te,{key:me.id,annotation:me,annotationContainerRef:le,doc:mt,outlines:_t,page:St,pageIndex:Tt,scale:yt,viewport:oe,onExecuteNamedAction:jt,onJumpFromLinkAnnotation:It,onJumpToDest:ce});case A.AnnotationType.Polygon:return _.createElement(Ee,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Polyline:return _.createElement(be,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Popup:return _.createElement(Pe,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Square:return _.createElement($e,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Squiggly:return _.createElement(Se,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Stamp:return _.createElement(Re,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.StrikeOut:return _.createElement(Be,{key:me.id,annotation:me,page:St,viewport:oe});case A.AnnotationType.Text:return _.createElement($n,{key:me.id,annotation:me,childAnnotation:fe,page:St,viewport:oe});case A.AnnotationType.Underline:return _.createElement(Gn,{key:me.id,annotation:me,page:St,viewport:oe});default:return _.createElement(_.Fragment,{key:me.id})}}))},Os=function(w){var H=w.page,mt=w.renderAnnotations,_t=wt(),St=_.useState({loading:!0,annotations:[]}),Tt=St[0],Ut=St[1];return _.useEffect(function(){H.getAnnotations({intent:"display"}).then(function(Lt){_t.current&&Ut({loading:!1,annotations:Lt})})},[]),Tt.loading?_.createElement(_.Fragment,null):mt(Tt.annotations)},Ns=function(w){var H=w.doc,mt=w.outlines,_t=w.page,St=w.pageIndex,Tt=w.plugins,Ut=w.rotation,Lt=w.scale,yt=w.onExecuteNamedAction,jt=w.onJumpFromLinkAnnotation,It=w.onJumpToDest;return _.createElement(Os,{page:_t,renderAnnotations:function(ce){return _.createElement(Ei,{annotations:ce,doc:H,outlines:mt,page:_t,pageIndex:St,plugins:Tt,rotation:Ut,scale:Lt,onExecuteNamedAction:yt,onJumpFromLinkAnnotation:jt,onJumpToDest:It})}})},Si=function(w,H){var mt=w%H;return mt===0?w:Math.floor(w-mt)},js=function(w){var H=w.canvasLayerRef,mt=w.height,_t=w.page,St=w.pageIndex,Tt=w.plugins,Ut=w.rotation,Lt=w.scale,yt=w.width,jt=w.onRenderCanvasCompleted,It=_.useRef();return V(function(){var ce=It.current;ce&&ce.cancel();var le=H.current;le.removeAttribute("data-testid"),Tt.forEach(function(We){We.onCanvasLayerRender&&We.onCanvasLayerRender({ele:le,pageIndex:St,rotation:Ut,scale:Lt,status:A.LayerRenderStatus.PreRender})});var oe=_t.getViewport({rotation:Ut,scale:Lt}),ve=window.devicePixelRatio||1,me=Math.sqrt(16777216/(oe.width*oe.height)),fe=ve>me;fe?le.style.transform="scale(1, 1)":le.style.removeProperty("transform");var nn=Math.min(me,ve),je=function(We,un){var cn,dn;if(Math.floor(We)===We)return[We,1];var hn=1/We;if(hn>un)return[1,un];if(Math.floor(hn)===hn)return[1,hn];for(var gn=We>1?hn:We,kn=0,Sn=1,Mn=1,Tn=1;;){var Pn=kn+Mn,Rn=Sn+Tn;if(Rn>un)break;gn<=Pn/Rn?(Mn=(cn=[Pn,Rn])[0],Tn=cn[1]):(kn=(dn=[Pn,Rn])[0],Sn=dn[1])}return gn<(kn/Sn+Mn/Tn)/2?gn===We?[kn,Sn]:[Sn,kn]:gn===We?[Mn,Tn]:[Tn,Mn]}(nn,8),He=je[0],Ge=je[1];le.width=Si(oe.width*nn,He),le.height=Si(oe.height*nn,He),le.style.width="".concat(Si(oe.width,Ge),"px"),le.style.height="".concat(Si(oe.height,Ge),"px"),le.hidden=!0;var Me=le.getContext("2d",{alpha:!1}),Xe=fe||ve!==1?[nn,0,0,nn,0,0]:null;return It.current=_t.render({canvasContext:Me,transform:Xe,viewport:oe}),It.current.promise.then(function(){le.hidden=!1,le.setAttribute("data-testid","core__canvas-layer-".concat(St)),Tt.forEach(function(We){We.onCanvasLayerRender&&We.onCanvasLayerRender({ele:le,pageIndex:St,rotation:Ut,scale:Lt,status:A.LayerRenderStatus.DidRender})}),jt()},function(){jt()}),function(){le&&(le.width=0,le.height=0)}},[]),_.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(mt,"px"),width:"".concat(yt,"px")}},_.createElement("canvas",{ref:H}))},Bs=function(w){var H=w.height,mt=w.page,_t=w.rotation,St=w.scale,Tt=w.width,Ut=_.useRef();return V(function(){var Lt=Ut.current,yt=mt.getViewport({rotation:_t,scale:St});mt.getOperatorList().then(function(jt){(function(){var It=Ut.current;It&&(It.innerHTML="")})(),new bt.SVGGraphics(mt.commonObjs,mt.objs).getSVG(jt,yt).then(function(It){It.style.height="".concat(H,"px"),It.style.width="".concat(Tt,"px"),Lt.appendChild(It)})})},[]),_.createElement("div",{className:"rpv-core__svg-layer",ref:Ut})},Hs=function(w){var H=w.containerRef,mt=w.page,_t=w.pageIndex,St=w.plugins,Tt=w.rotation,Ut=w.scale,Lt=w.onRenderTextCompleted,yt=_.useRef(),jt=function(){var It=H.current;It&&([].slice.call(It.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(ce){return It.removeChild(ce)}),[].slice.call(It.querySelectorAll('br[role="presentation"]')).forEach(function(ce){return It.removeChild(ce)}))};return V(function(){var It=yt.current;It&&It.cancel();var ce=H.current;if(ce){ce.removeAttribute("data-testid");var le=mt.getViewport({rotation:Tt,scale:Ut});return St.forEach(function(oe){oe.onTextLayerRender&&oe.onTextLayerRender({ele:ce,pageIndex:_t,scale:Ut,status:A.LayerRenderStatus.PreRender})}),mt.getTextContent().then(function(oe){jt(),yt.current=bt.renderTextLayer({container:ce,textContent:oe,textContentSource:oe,viewport:le}),yt.current.promise.then(function(){ce.setAttribute("data-testid","core__text-layer-".concat(_t)),[].slice.call(ce.children).forEach(function(ve){ve.classList.contains("rpv-core__text-layer-text--not")||ve.classList.add("rpv-core__text-layer-text")}),St.forEach(function(ve){ve.onTextLayerRender&&ve.onTextLayerRender({ele:ce,pageIndex:_t,scale:Ut,status:A.LayerRenderStatus.DidRender})}),Lt()},function(){ce.removeAttribute("data-testid"),Lt()})}),function(){var oe;jt(),(oe=yt.current)===null||oe===void 0||oe.cancel()}}},[]),_.createElement("div",{className:"rpv-core__text-layer",ref:H})},Us=function(w){var H=w.doc,mt=w.measureRef,_t=w.outlines,St=w.pageIndex,Tt=w.pageRotation,Ut=w.pageSize,Lt=w.plugins,yt=w.renderPage,jt=w.renderQueueKey,It=w.rotation,ce=w.scale,le=w.shouldRender,oe=w.viewMode,ve=w.onExecuteNamedAction,me=w.onJumpFromLinkAnnotation,fe=w.onJumpToDest,nn=w.onRenderCompleted,je=w.onRotatePage,He=wt(),Ge=_.useState(null),Me=Ge[0],Xe=Ge[1],We=_.useState(!1),un=We[0],cn=We[1],dn=_.useState(!1),hn=dn[0],gn=dn[1],kn=_.useRef(),Sn=_.useRef(),Mn=Math.abs(It+Tt)%180==0,Tn=Ut.pageWidth*ce,Pn=Ut.pageHeight*ce,Rn=Mn?Tn:Pn,xn=Mn?Pn:Tn,jn=(Ut.rotation+It+Tt)%360,qn=_.useRef(0),Vn=yt||function(In){return _.createElement(_.Fragment,null,In.canvasLayer.children,In.textLayer.children,In.annotationLayer.children)};return _.useEffect(function(){Xe(null),cn(!1),gn(!1)},[Tt,It,ce]),_.useEffect(function(){le&&He.current&&!Me&&Ae(H,St).then(function(In){He.current&&(qn.current=jt,Xe(In))})},[le,Me]),_.useEffect(function(){un&&hn&&(jt!==qn.current?(Xe(null),cn(!1),gn(!1)):nn(St))},[un,hn]),_.createElement("div",{className:q({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":oe===A.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":oe===A.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":oe===A.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(St),ref:mt,style:{height:"".concat(xn,"px"),width:"".concat(Rn,"px")}},Me?_.createElement(_.Fragment,null,Vn({annotationLayer:{attrs:{},children:_.createElement(Ns,{doc:H,outlines:_t,page:Me,pageIndex:St,plugins:Lt,rotation:jn,scale:ce,onExecuteNamedAction:ve,onJumpFromLinkAnnotation:me,onJumpToDest:fe})},canvasLayer:{attrs:{},children:_.createElement(js,{canvasLayerRef:kn,height:xn,page:Me,pageIndex:St,plugins:Lt,rotation:jn,scale:ce,width:Rn,onRenderCanvasCompleted:function(){He.current&&cn(!0)}})},canvasLayerRendered:un,doc:H,height:xn,pageIndex:St,rotation:jn,scale:ce,svgLayer:{attrs:{},children:_.createElement(Bs,{height:xn,page:Me,rotation:jn,scale:ce,width:Rn})},textLayer:{attrs:{},children:_.createElement(Hs,{containerRef:Sn,page:Me,pageIndex:St,plugins:Lt,rotation:jn,scale:ce,onRenderTextCompleted:function(){He.current&&gn(!0)}})},textLayerRendered:hn,width:Rn,markRendered:nn,onRotatePage:function(In){return je(St,In)}}),Lt.map(function(In,Bn){return In.renderPageLayer?_.createElement(_.Fragment,{key:Bn},In.renderPageLayer({canvasLayerRef:kn,canvasLayerRendered:un,doc:H,height:xn,pageIndex:St,rotation:jn,scale:ce,textLayerRef:Sn,textLayerRendered:hn,width:Rn})):_.createElement(_.Fragment,{key:Bn})})):_.createElement(dt,{testId:"core__page-layer-loading-".concat(St)}))},zs=function(w,H){var mt=H.rect;return w.height!==mt.height||w.width!==mt.width?mt:w};(function(w){w.Horizontal="Horizontal",w.Vertical="Vertical",w.Both="Both"})(we||(we={}));var Ws=function(w){return 1-Math.pow(1-w,4)},wi=1e-4,Nr={left:0,top:0},jr={capture:!1,passive:!0},Vs=function(w){var H=w.elementRef,mt=w.enableSmoothScroll,_t=w.isRtl,St=w.scrollDirection,Tt=w.onSmoothScroll,Ut=_.useState(Nr),Lt=Ut[0],yt=Ut[1],jt=_.useState(H.current),It=jt[0],ce=jt[1],le=_t?-1:1,oe=_.useRef(St);oe.current=St;var ve=_.useRef(Nr),me=_.useRef(!0),fe=_.useCallback(function(){me.current=!0,mt&&yt(ve.current),Tt(!1)},[]),nn=_.useCallback(function(){if(It){switch(oe.current){case we.Horizontal:ve.current={left:le*It.scrollLeft,top:0};break;case we.Both:ve.current={left:le*It.scrollLeft,top:It.scrollTop};break;case we.Vertical:default:ve.current={left:0,top:It.scrollTop}}mt&&!me.current||yt(ve.current)}},[It]);V(function(){ce(H.current)}),V(function(){if(It)return It.addEventListener("scroll",nn,jr),function(){It.removeEventListener("scroll",nn,jr)}},[It]);var je=_.useCallback(function(He,Ge){var Me=H.current;if(!Me)return Promise.resolve();var Xe={left:0,top:0};switch(oe.current){case we.Horizontal:Xe.left=le*He.left;break;case we.Both:Xe.left=le*He.left,Xe.top=He.top;break;case we.Vertical:default:Xe.top=He.top}return Ge?(me.current=!1,Tt(!0),new Promise(function(We,un){(function(cn,dn,hn,gn,kn,Sn){kn===void 0&&(kn=function(Bn){return Bn}),Sn===void 0&&(Sn=function(){});var Mn=0,Tn=0,Pn=!1;switch(dn){case we.Horizontal:Tn=cn.scrollLeft,Mn=0;case we.Both:Tn=cn.scrollLeft,Mn=cn.scrollTop;break;case we.Vertical:default:Tn=0,Mn=cn.scrollTop}var Rn=function(){Pn||(Pn=!0,cn.scrollLeft=hn.left,cn.scrollTop=hn.top,Sn())};if(Math.abs(Mn-hn.top)<=wi&&dn===we.Vertical)Rn();else if(Math.abs(Tn-hn.left)<=wi&&dn===we.Horizontal)Rn();else{var xn,jn=-1,qn=Tn-hn.left,Vn=Mn-hn.top,In=function(Bn){jn===-1&&(jn=Bn);var Xn=Bn-jn,Ve=Math.min(Xn/gn,1),Ue=kn(Ve),Fe={left:Tn-qn*Ue,top:Mn-Vn*Ue};switch(dn){case we.Horizontal:cn.scrollLeft=Fe.left;break;case we.Both:cn.scrollLeft=Fe.left,cn.scrollTop=Fe.top;break;case we.Vertical:default:cn.scrollTop=Fe.top}Math.abs(Fe.top-hn.top)<=wi&&Math.abs(Fe.left-hn.left)<=wi&&!Pn&&(window.cancelAnimationFrame(xn),Rn()),Xn<gn?xn=window.requestAnimationFrame(In):window.cancelAnimationFrame(xn)};xn=window.requestAnimationFrame(In)}})(Me,oe.current,Xe,400,Ws,function(){fe(),We()})})):new Promise(function(We,un){switch(oe.current){case we.Horizontal:Me.scrollLeft=Xe.left;break;case we.Both:Me.scrollLeft=Xe.left,Me.scrollTop=Xe.top;break;case we.Vertical:default:Me.scrollTop=Xe.top}We()})},[H]);return{scrollOffset:Lt,scrollTo:je}},hi=function(w,H,mt){return Math.max(w,Math.min(mt,H))},$s=function(w,H){if(H!==A.ViewMode.DualPageWithCover)return 0;if(!function(St){var Tt=St.length;if(Tt===1)return!1;for(var Ut=1;Ut<Tt;Ut++)if(St[Ut].height!==St[0].height||St[Ut].width!==St[0].width)return!0;return!1}(w))return 2*w[0].width;var mt=Rt(w.slice(1),2).map(function(St){return St.length===2?St[0].width+St[1].width:St[0].width}),_t=[w[0].width].concat(mt);return Math.max.apply(Math,_t)},Gs={left:0,top:0},qs={left:0,top:0},Vi={left:0,top:0},Xs={left:0,top:0},Ys={height:0,width:0},Br={left:0,top:0},Hr="data-virtual-index",Ks=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Zs=function(w){var H=w.enableSmoothScroll,mt=w.isRtl,_t=w.numberOfItems,St=w.parentRef,Tt=w.setRenderRange,Ut=w.sizes,Lt=w.scrollMode,yt=w.viewMode,jt=_.useState(!1),It=jt[0],ce=jt[1],le=_.useCallback(function(Ve){return ce(Ve)},[]),oe=_.useRef(Lt);oe.current=Lt;var ve=_.useRef(yt);ve.current=yt;var me=Lt===A.ScrollMode.Wrapped||yt===A.ViewMode.DualPageWithCover||yt===A.ViewMode.DualPage?we.Both:Lt===A.ScrollMode.Horizontal?we.Horizontal:we.Vertical,fe=Vs({elementRef:St,enableSmoothScroll:H,isRtl:mt,scrollDirection:me,onSmoothScroll:le}),nn=fe.scrollOffset,je=fe.scrollTo,He=function(Ve){var Ue=Ve.elementRef,Fe=_.useState(Ue.current),Oe=Fe[0],Le=Fe[1],Ye=_.useRef(!1),Ze=_.useReducer(zs,{height:0,width:0}),Ne=Ze[0],xe=Ze[1];return V(function(){Ue.current!==Oe&&Le(Ue.current)}),V(function(){if(Oe&&!Ye.current){Ye.current=!0;var tn=Oe.getBoundingClientRect(),rn=tn.height,An=tn.width;xe({rect:{height:rn,width:An}})}},[Oe]),_.useEffect(function(){if(Oe){var tn=new ResizeObserver(function(rn,An){rn.forEach(function(vn){if(vn.target===Oe){var On=vn.contentRect,Hn=On.height,en=On.width;xe({rect:{height:Hn,width:en}})}})});return tn.observe(Oe),function(){tn.unobserve(Oe)}}},[Oe]),Ne}({elementRef:St}),Ge=_.useRef({scrollOffset:Br,measurements:[]});Ge.current.scrollOffset=nn;var Me=_.useMemo(function(){return Array(_t).fill(-1)},[]),Xe=_.useState(Me),We=Xe[0],un=Xe[1],cn=_.useMemo(function(){var Ve=new IntersectionObserver(function(Ue){Ue.forEach(function(Fe){var Oe=Fe.isIntersecting?Fe.intersectionRatio:-1,Le=Fe.target.getAttribute(Hr);if(Le){var Ye=parseInt(Le,10);0<=Ye&&Ye<_t&&un(function(Ze){return Ze[Ye]=Oe,function(Ne,xe,tn){for(var rn,An=0,vn=xe.length;An<vn;An++)!rn&&An in xe||(rn||(rn=Array.prototype.slice.call(xe,0,An)),rn[An]=xe[An]);return Ne.concat(rn||Array.prototype.slice.call(xe))}([],Ze)})}})},{threshold:Ks});return Ve},[]),dn=_.useMemo(function(){return Lt===A.ScrollMode.Page&&yt===A.ViewMode.SinglePage?function(Ve,Ue,Fe){for(var Oe=[],Le=0;Le<Ve;Le++){var Ye={height:Math.max(Ue.height,Fe[Le].height),width:Math.max(Ue.width,Fe[Le].width)},Ze=Le===0?Xs:Oe[Le-1].end,Ne={left:Ze.left+Ye.width,top:Ze.top+Ye.height};Oe[Le]={index:Le,start:Ze,size:Ye,end:Ne,visibility:-1}}return Oe}(_t,He,Ut):yt===A.ViewMode.DualPageWithCover?function(Ve,Ue,Fe,Oe){for(var Le=[],Ye=0,Ze=0,Ne=Vi,xe=0;xe<Ve;xe++){var tn=xe===0?{height:Oe===A.ScrollMode.Page?Math.max(Ue.height,Fe[xe].height):Fe[xe].height,width:Oe===A.ScrollMode.Page?Math.max(Ue.width,Fe[xe].width):Fe[xe].width}:{height:Oe===A.ScrollMode.Page?Math.max(Ue.height,Fe[xe].height):Fe[xe].height,width:Math.max(Ue.width/2,Fe[xe].width)};Oe===A.ScrollMode.Page?Ne=xe===0?Vi:{left:xe%2==0?tn.width:0,top:Math.floor((xe-1)/2)*tn.height+Le[0].end.top}:xe===0?(Ne=Vi,Ye=Fe[0].height,Ze=0):xe%2==1?(Ne={left:0,top:Ye+=Ze},Ze=xe===Ve-1?Fe[xe].height:Math.max(Fe[xe].height,Fe[xe+1].height)):Ne={left:Le[xe-1].end.left,top:Ye};var rn={left:Ne.left+tn.width,top:Ne.top+tn.height};Le[xe]={index:xe,start:Ne,size:tn,end:rn,visibility:-1}}return Le}(_t,He,Ut,Lt):yt===A.ViewMode.DualPage?function(Ve,Ue,Fe,Oe){for(var Le=[],Ye=0,Ze=0,Ne=qs,xe=0;xe<Ve;xe++){var tn={height:Oe===A.ScrollMode.Page?Math.max(Ue.height,Fe[xe].height):Fe[xe].height,width:Math.max(Ue.width/2,Fe[xe].width)};Oe===A.ScrollMode.Page?Ne={left:xe%2==0?0:tn.width,top:Math.floor(xe/2)*tn.height}:xe%2==0?(Ne={left:0,top:Ye+=Ze},Ze=xe===Ve-1?Fe[xe].height:Math.max(Fe[xe].height,Fe[xe+1].height)):Ne={left:Le[xe-1].end.left,top:Ye};var rn={left:Ne.left+tn.width,top:Ne.top+tn.height};Le[xe]={index:xe,start:Ne,size:tn,end:rn,visibility:-1}}return Le}(_t,He,Ut,Lt):function(Ve,Ue,Fe,Oe){for(var Le=[],Ye=0,Ze={left:0,top:0},Ne=0,xe=Gs,tn=0;tn<Ve;tn++){var rn=Fe[tn];if(tn===0)Ye=rn.width,Ze={left:0,top:0},Ne=rn.height;else switch(Oe){case A.ScrollMode.Wrapped:(Ye+=rn.width)<Ue.width?(xe={left:Le[tn-1].end.left,top:Ze.top},Ne=Math.max(Ne,rn.height)):(Ye=rn.width,Ze={left:(xe={left:Ze.left,top:Ze.top+Ne}).left,top:xe.top},Ne=rn.height);break;case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:xe=Le[tn-1].end}var An={left:xe.left+rn.width,top:xe.top+rn.height};Le[tn]={index:tn,start:xe,size:rn,end:An,visibility:-1}}return Le}(_t,He,Ut,Lt)},[Lt,Ut,yt,He]),hn=dn[_t-1]?{height:dn[_t-1].end.top,width:dn[_t-1].end.left}:Ys;Ge.current.measurements=dn;var gn=_.useMemo(function(){var Ve=function(tn,rn,An,vn){var On=0;switch(tn){case we.Horizontal:On=vn.left;break;case we.Vertical:default:On=vn.top}var Hn=rn.length-1,en=function(bn,Kn,si,Ti){for(;bn<=Kn;){var ei=(bn+Kn)/2|0,fi=Ti(ei);if(fi<si)bn=ei+1;else{if(!(fi>si))return ei;Kn=ei-1}}return bn>0?bn-1:0}(0,Hn,On,function(bn){switch(tn){case we.Horizontal:return rn[bn].start.left;case we.Both:case we.Vertical:default:return rn[bn].start.top}});if(tn===we.Both)for(var Nn=rn[en].start.top;en-1>=0&&rn[en-1].start.top===Nn&&rn[en-1].start.left>=vn.left;)en--;for(var En=en;En<=Hn;){var wn={top:rn[En].start.top-vn.top,left:rn[En].start.left-vn.left},Ln={height:An.height-wn.top,width:An.width-wn.left};if(tn===we.Horizontal&&Ln.width<0||tn===we.Vertical&&Ln.height<0||tn===we.Both&&(Ln.width<0||Ln.height<0))break;En++}return{start:en,end:En}}(me,dn,He,nn),Ue=Ve.start,Fe=Ve.end,Oe=We.slice(hi(0,_t,Ue),hi(0,_t,Fe)),Le=Ue+Oe.reduce(function(tn,rn,An,vn){return rn>vn[tn]?An:tn},0),Ye=Le=hi(0,_t-1,Le),Ze=Tt({endPage:Fe,numPages:_t,startPage:Ue}),Ne=Ze.startPage,xe=Ze.endPage;switch(Ne=Math.max(Ne,0),xe=Math.min(xe,_t-1),yt){case A.ViewMode.DualPageWithCover:Le>0&&(Ye=Le%2==1?Le:Le-1),Ne=Ne===0?0:Ne%2==1?Ne:Ne-1,_t-(xe=xe%2==1?xe-1:xe)<=2&&(xe=_t-1);break;case A.ViewMode.DualPage:Ye=Le%2==0?Le:Le-1,Ne=Ne%2==0?Ne:Ne-1,xe=xe%2==1?xe:xe-1;break;case A.ViewMode.SinglePage:default:Ye=Le}return{startPage:Ne,endPage:xe,maxVisbilityIndex:Ye}},[dn,He,nn,yt,We]),kn=gn.startPage,Sn=gn.endPage,Mn=gn.maxVisbilityIndex,Tn=_.useMemo(function(){for(var Ve=[],Ue=function(Oe){var Le=dn[Oe],Ye=O(O({},Le),{visibility:We[Oe]!==void 0?We[Oe]:-1,measureRef:function(Ze){Ze&&(Ze.setAttribute(Hr,"".concat(Oe)),cn.observe(Ze))}});Ve.push(Ye)},Fe=kn;Fe<=Sn;Fe++)Ue(Fe);return Ve},[kn,Sn,We,dn]),Pn=_.useCallback(function(Ve,Ue){var Fe=Ge.current.measurements[hi(0,_t-1,Ve)],Oe=oe.current===A.ScrollMode.Page?Br:Ue;return Fe?je({left:Oe.left+Fe.start.left,top:Oe.top+Fe.start.top},H):Promise.resolve()},[je,H]),Rn=_.useCallback(function(Ve,Ue){var Fe=Ge.current.measurements,Oe=Fe[Ve].start,Le=Fe.find(function(Ze){return Ze.start.top-Oe.top>1e-12});if(!Le)return Promise.resolve();var Ye=Le.index;switch(ve.current){case A.ViewMode.DualPage:Ye=Ye%2==0?Ye:Ye+1;break;case A.ViewMode.DualPageWithCover:Ye=Ye%2==1?Ye:Ye+1}return Pn(Ye,Ue)},[]),xn=_.useCallback(function(Ve,Ue){for(var Fe=Ge.current.measurements,Oe=Fe[Ve].start,Le=Ve,Ye=!1,Ze=_t-1;Ze>=0;Ze--)if(Oe.top-Fe[Ze].start.top>1e-12){Ye=!0,Le=Fe[Ze].index;break}if(!Ye)return Promise.resolve();switch(ve.current){case A.ViewMode.DualPage:Le=Le%2==0?Le:Le-1;break;case A.ViewMode.DualPageWithCover:Le=Le%2==0?Le-1:Le}return Le===Ve&&(Le=Ve-1),Pn(Le,Ue)},[]),jn=_.useCallback(function(Ve,Ue){if(ve.current===A.ViewMode.DualPageWithCover||ve.current===A.ViewMode.DualPage)return Rn(Ve,Ue);switch(oe.current){case A.ScrollMode.Wrapped:return Rn(Ve,Ue);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Pn(Ve+1,Ue)}},[]),qn=_.useCallback(function(Ve,Ue){if(ve.current===A.ViewMode.DualPageWithCover||ve.current===A.ViewMode.DualPage)return xn(Ve,Ue);switch(oe.current){case A.ScrollMode.Wrapped:return xn(Ve,Ue);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Pn(Ve-1,Ue)}},[]),Vn=_.useCallback(function(){return function(Ve,Ue){switch(Ue){case A.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Ve.width,"px")};case A.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Ve.height,"px"),width:"100%"}}}(hn,oe.current)},[hn]),In=_.useCallback(function(Ve){return function(Ue,Fe,Oe){return Oe!==A.ScrollMode.Page?{}:{height:"".concat(Fe.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ue.start.top,"px)")}}(Ve,He,oe.current)},[He]),Bn=_.useCallback(function(Ve){return function(Ue,Fe,Oe,Le,Ye){var Ze,Ne,xe,tn,rn,An,vn,On=Fe?"right":"left",Hn=Fe?-1:1,en=Oe.length,Nn=Ue.start.left*Hn,En=Ue.size,wn=En.height,Ln=En.width;if(Le===A.ViewMode.DualPageWithCover){var bn=Ye===A.ScrollMode.Page?0:Ue.start.top;return Ue.index===0||en%2==0&&Ue.index===en-1?((Ze={height:"".concat(wn,"px"),minWidth:"".concat($s(Oe,Le),"px"),width:"100%"})[On]=0,Ze.position="absolute",Ze.top=0,Ze.transform="translate(".concat(Nn,"px, ").concat(bn,"px)"),Ze):((Ne={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,Ne.position="absolute",Ne.top=0,Ne.transform="translate(".concat(Nn,"px, ").concat(bn,"px)"),Ne)}if(Le===A.ViewMode.DualPage)return(xe={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,xe.position="absolute",xe.top=0,xe.transform="translate(".concat(Nn,"px, ").concat(Ye===A.ScrollMode.Page?0:Ue.start.top,"px)"),xe;switch(Ye){case A.ScrollMode.Horizontal:return(tn={height:"100%",width:"".concat(Ln,"px")})[On]=0,tn.position="absolute",tn.top=0,tn.transform="translateX(".concat(Nn,"px)"),tn;case A.ScrollMode.Page:return(rn={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,rn.position="absolute",rn.top=0,rn;case A.ScrollMode.Wrapped:return(An={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,An.position="absolute",An.top=0,An.transform="translate(".concat(Nn,"px, ").concat(Ue.start.top,"px)"),An;case A.ScrollMode.Vertical:default:return(vn={height:"".concat(wn,"px"),width:"100%"})[On]=0,vn.position="absolute",vn.top=0,vn.transform="translateY(".concat(Ue.start.top,"px)"),vn}}(Ve,mt,Ut,ve.current,oe.current)},[mt,Ut]),Xn=_.useCallback(function(Ve,Ue){var Fe=Ge.current,Oe=Fe.measurements,Le=Fe.scrollOffset,Ye=Oe[hi(0,_t-1,Ue)];if(Ye){var Ze=oe.current===A.ScrollMode.Page?{left:Ye.start.left,top:Ye.start.top}:{left:Le.left*Ve,top:Le.top*Ve};return je(Ze,!1)}return Promise.resolve()},[]);return _.useEffect(function(){return function(){cn.disconnect()}},[]),{boundingClientRect:He,isSmoothScrolling:It,startPage:kn,endPage:Sn,maxVisbilityIndex:Mn,virtualItems:Tn,getContainerStyles:Vn,getItemContainerStyles:In,getItemStyles:Bn,scrollToItem:Pn,scrollToNextItem:jn,scrollToPreviousItem:qn,zoom:Xn}},$i=function(w,H,mt,_t,St,Tt){var Ut=mt;switch(!0){case(St===A.ViewMode.DualPageWithCover&&Tt>=3):case(St===A.ViewMode.DualPage&&Tt>=3):Ut=2*mt;break;default:Ut=mt}switch(_t){case A.SpecialZoomLevel.ActualSize:return 1;case A.SpecialZoomLevel.PageFit:return Math.min((w.clientWidth-17)/Ut,(w.clientHeight-16)/H);case A.SpecialZoomLevel.PageWidth:return(w.clientWidth-17)/Ut}},Js=function(w){var H,mt,_t=w.getCurrentPage,St=(H=50,mt=_.useRef([]),_.useEffect(function(){return function(){mt.current=[]}},[]),{push:function(jt){var It=mt.current;It.length+1>H&&It.shift(),It.push(jt),mt.current=It},map:function(jt){return mt.current.map(function(It){return jt(It)})},pop:function(){var jt=mt.current;if(jt.length===0)return null;var It=jt.pop();return mt.current=jt,It}}),Tt=function(jt){var It=_.useRef([]);return _.useEffect(function(){return function(){It.current=[]}},[]),{dequeue:function(){var ce=It.current;if(ce.length===0)return null;var le=ce.shift();return It.current=ce,le||null},enqueue:function(ce){var le=It.current;le.length+1>jt&&le.pop(),It.current=[ce].concat(le)},map:function(ce){return It.current.map(function(le){return ce(le)})}}}(50),Ut=function(){var jt=Tt.dequeue();return jt&&St.push(jt),jt&&jt.pageIndex===_t()?Ut():jt},Lt=function(){var jt=St.pop();return jt&&Tt.enqueue(jt),jt&&jt.pageIndex===_t()?Lt():jt},yt=_.useCallback(function(jt){St.push(jt)},[]);return{getNextDestination:Ut,getPreviousDestination:Lt,markVisitedDestination:yt}},Ur=function(w){var H=[];return w.map(function(mt){H=H.concat(mt).concat(function(_t){var St=[];return _t.items&&_t.items.length>0&&(St=St.concat(Ur(_t.items))),St}(mt))}),H},zr={capture:!1,passive:!0},Qs={height:0,width:0},Gi={height:0,width:0},ta=function(w){var H=w.getCurrentPage,mt=w.getCurrentScrollMode,_t=w.jumpToPage,St=w.targetRef,Tt=_.useState(A.FullScreenMode.Normal),Ut=Tt[0],Lt=Tt[1],yt=function(){var We=_.useState(Qs),un=We[0],cn=We[1],dn=Gt(function(){cn({height:window.innerHeight,width:window.innerWidth})},100);return V(function(){return window.addEventListener("resize",dn,zr),function(){window.removeEventListener("resize",dn,zr)}},[]),un}(),jt=_.useState(Gi),It=jt[0],ce=jt[1],le=_.useRef(Gi),oe=_.useRef(H()),ve=_.useRef(Gi),me=_.useState(St.current),fe=me[0],nn=me[1],je=_.useRef();V(function(){St.current!==fe&&nn(St.current)},[]),V(function(){if(fe){var We=new ResizeObserver(function(un){un.forEach(function(cn){var dn=cn.target.getBoundingClientRect(),hn=dn.height,gn=dn.width;ce({height:hn,width:gn})})});return We.observe(fe),function(){We.unobserve(fe),We.disconnect()}}},[fe]);var He=_.useCallback(function(We){var un=ct();return un&&un!==We?(Lt(A.FullScreenMode.Normal),K(un)):Promise.resolve()},[]),Ge=_.useCallback(function(We){We&&D()&&(nn(We),He(We).then(function(){je.current=We,Lt(A.FullScreenMode.Entering),function(un){j&&un[ht.RequestFullScreen]()}(We)}))},[]),Me=_.useCallback(function(){ct()&&(Lt(A.FullScreenMode.Exitting),K(document))},[]),Xe=_.useCallback(function(){fe&&ct()!==fe&&Lt(A.FullScreenMode.Exitting)},[fe]);return _.useEffect(function(){switch(Ut){case A.FullScreenMode.Entering:je.current&&(je.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),oe.current=H(),le.current={height:window.innerHeight,width:window.innerWidth};break;case A.FullScreenMode.Entered:mt()===A.ScrollMode.Page?_t(oe.current).then(function(){Lt(A.FullScreenMode.EnteredCompletely)}):Lt(A.FullScreenMode.EnteredCompletely);break;case A.FullScreenMode.Exitting:je.current&&(je.current.style.backgroundColor="",je.current=null),oe.current=H();break;case A.FullScreenMode.Exited:Lt(A.FullScreenMode.Normal),mt()===A.ScrollMode.Page&&_t(oe.current)}},[Ut]),_.useEffect(function(){if(Ut!==A.FullScreenMode.Normal)return Ut===A.FullScreenMode.Entering&&yt.height===It.height&&yt.width===It.width&&yt.height>0&&yt.width>0&&(ve.current.height===0||yt.height==ve.current.height)?(ve.current={height:window.innerHeight,width:window.innerWidth},void Lt(A.FullScreenMode.Entered)):void(Ut===A.FullScreenMode.Exitting&&le.current.height===yt.height&&le.current.width===yt.width&&yt.height>0&&yt.width>0&&Lt(A.FullScreenMode.Exited))},[Ut,yt,It]),_.useEffect(function(){var We;return We=Xe,j&&document.addEventListener(ht.FullScreenChange,We),function(){(function(un){j&&document.removeEventListener(ht.FullScreenChange,un)})(Xe)}},[fe]),{enterFullScreenMode:Ge,exitFullScreenMode:Me,fullScreenMode:Ut}},ea={buildPageStyles:function(){return{}},transformSize:function(w){return w.size}},ri={left:0,top:0},na=function(w){var H=w.currentFile,mt=w.defaultScale,_t=w.doc,St=w.enableSmoothScroll,Tt=w.initialPage,Ut=w.initialRotation,Lt=w.initialScale,yt=w.pageLayout,jt=w.pageSizes,It=w.plugins,ce=w.renderPage,le=w.scrollMode,oe=w.setRenderRange,ve=w.viewMode,me=w.viewerState,fe=w.onDocumentLoad,nn=w.onOpenFile,je=w.onPageChange,He=w.onRotate,Ge=w.onRotatePage,Me=w.onZoom,Xe=_t.numPages,We=_t.loadingTask.docId,un=_.useContext(Ot).l10n,cn=_.useContext(lt),dn=cn.direction===A.TextDirection.RightToLeft,hn=_.useRef(),gn=_.useRef(),kn=_.useState(Tt),Sn=kn[0],Mn=kn[1],Tn=_.useRef(null),Pn=Js({getCurrentPage:function(){return en.current.pageIndex}}),Rn=_.useState(Ut),xn=Rn[0],jn=Rn[1],qn=Mt(xn),Vn=_.useState(!1),In=Vn[0],Bn=Vn[1],Xn=_.useState(new Map),Ve=Xn[0],Ue=Xn[1],Fe=_.useState(le),Oe=Fe[0],Le=Fe[1],Ye=Mt(Oe),Ze=_.useState(ve),Ne=Ze[0],xe=Ze[1],tn=Mt(Ne),rn=function(he){var Je=wt(),an=_.useState([]),mn=an[0],fn=an[1];return _.useEffect(function(){he.getOutline().then(function(on){if(Je.current&&on!==null){var Dn=Ur(on);fn(Dn)}})},[]),mn}(_t),An=_.useState(Lt),vn=An[0],On=An[1],Hn=Mt(vn),en=_.useRef(me),Nn=_.useRef(typeof mt=="string"?mt:null),En=_.useRef(-1),wn=_.useRef(-1),Ln=_.useRef(Tt),bn=ta({getCurrentPage:function(){return en.current.pageIndex},getCurrentScrollMode:function(){return en.current.scrollMode},jumpToPage:function(he){return Jn(he)},targetRef:gn}),Kn=_.useState(-1),si=Kn[0],Ti=Kn[1],ei=_.useState(0),fi=ei[0],la=ei[1],Un=rt({doc:_t});_.useEffect(function(){return function(){de.clear(),ze.clear()}},[We]);var Gr=_.useMemo(function(){return Object.assign({},ea,yt)},[]),ca=_.useMemo(function(){return Array(Xe).fill(0).map(function(he,Je){var an=[jt[Je].pageHeight,jt[Je].pageWidth],mn=Math.abs(xn)%180==0?{height:an[0],width:an[1]}:{height:an[1],width:an[0]},fn={height:mn.height*vn,width:mn.width*vn};return Gr.transformSize({numPages:Xe,pageIndex:Je,size:fn})})},[xn,vn]),_n=Zs({enableSmoothScroll:St,isRtl:dn,numberOfItems:Xe,parentRef:gn,scrollMode:Oe,setRenderRange:oe,sizes:ca,viewMode:Ne}),ua=Gt(function(){!Nn.current||en.current.fullScreenMode!==A.FullScreenMode.Normal||Tt>0&&Ln.current===Tt||ni(Nn.current)},200);(function(he){var Je=he.targetRef,an=he.onResize;V(function(){var mn=new ResizeObserver(function(on){on.forEach(function(Dn){an(Dn.target)})}),fn=Je.current;if(fn)return mn.observe(fn),function(){mn.unobserve(fn)}},[])})({targetRef:gn,onResize:ua});var Zn=function(he){var Je=he;It.forEach(function(an){an.onViewerStateChange&&(Je=an.onViewerStateChange(Je))}),en.current=Je},da=function(){return gn.current},ha=function(){return en.current},fa=_.useCallback(function(he){Pn.markVisitedDestination(he)},[]),Yi=_.useCallback(function(he){var Je=he.pageIndex,an=he.bottomOffset,mn=he.leftOffset,fn=he.scaleTo,on=gn.current,Dn=en.current;return on&&Dn?new Promise(function(Qn,er){Ae(_t,Je).then(function(xi){var ti=xi.getViewport({scale:1}),Pi=0,ts=(typeof an=="function"?an(ti.width,ti.height):an)||0,Ri=(typeof mn=="function"?mn(ti.width,ti.height):mn)||0,ai=Dn.scale;switch(fn){case A.SpecialZoomLevel.PageFit:Pi=0,Ri=0,ni(A.SpecialZoomLevel.PageFit);break;case A.SpecialZoomLevel.PageWidth:ai=$i(on,jt[Je].pageHeight,jt[Je].pageWidth,A.SpecialZoomLevel.PageWidth,ve,Xe),Pi=(ti.height-ts)*ai,Ri*=ai,ni(ai);break;default:Pi=(ti.height-ts)*ai,Ri*=ai}switch(Dn.scrollMode){case A.ScrollMode.Horizontal:_n.scrollToItem(Je,{left:Ri,top:0}).then(function(){Qn()});break;case A.ScrollMode.Vertical:default:_n.scrollToItem(Je,{left:0,top:Pi}).then(function(){Qn()})}})}):Promise.resolve()},[]),qr=_.useCallback(function(he){return Pn.markVisitedDestination(he),Yi(he)},[]),pa=_.useCallback(function(){var he=Pn.getNextDestination();return he?Yi(he):Promise.resolve()},[]),ga=_.useCallback(function(){var he=Pn.getPreviousDestination();return he?Yi(he):Promise.resolve()},[]),ma=_.useCallback(function(){return _n.scrollToNextItem(en.current.pageIndex,ri)},[]),Jn=_.useCallback(function(he){return 0<=he&&he<Xe?_n.scrollToItem(he,ri):Promise.resolve()},[]),ba=_.useCallback(function(){return _n.scrollToPreviousItem(en.current.pageIndex,ri)},[]),Xr=_.useCallback(function(he){var Je,an;(Je=he.name,an=Je.split(/\./).pop(),an?an.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(mn){var fn=new FileReader;fn.readAsArrayBuffer(he),fn.onload=function(){var on=new Uint8Array(fn.result);mn(on)}}).then(function(mn){nn(he.name,mn)})},[nn]),Yr=_.useCallback(function(he){var Je=he===A.RotateDirection.Backward?-90:90,an=en.current.rotation,mn=an===360||an===-360?Je:an+Je;Un.markNotRendered(),jn(mn),Zn(O(O({},en.current),{rotation:mn})),He({direction:he,doc:_t,rotation:mn})},[]),Ki=_.useCallback(function(he,Je){var an=Je===A.RotateDirection.Backward?-90:90,mn=en.current.pagesRotation,fn=(mn.has(he)?mn.get(he):Ut)+an,on=mn.set(he,fn);Ue(on),Bn(function(Dn){return!Dn}),Zn(O(O({},en.current),{pagesRotation:on,rotatedPage:he})),Ge({direction:Je,doc:_t,pageIndex:he,rotation:fn}),Un.markRendering(he),Ti(he)},[]),Kr=_.useCallback(function(he){Zn(O(O({},en.current),{scrollMode:he})),Le(he)},[]),Zr=_.useCallback(function(he){Zn(O(O({},en.current),{viewMode:he})),xe(he)},[]),ni=_.useCallback(function(he){var Je=gn.current,an=en.current.pageIndex;if(!(an<0||an>=Xe)){var mn=jt[an].pageHeight,fn=jt[an].pageWidth,on=Je?typeof he=="string"?$i(Je,mn,fn,he,en.current.viewMode,Xe):he:1;Nn.current=typeof he=="string"?he:null,on!==en.current.scale&&(la(function(Dn){return Dn+1}),Un.markNotRendered(),On(on),Me({doc:_t,scale:on}),Zn(O(O({},en.current),{scale:on})))}},[]),va=_.useCallback(function(he){bn.enterFullScreenMode(he)},[]),_a=_.useCallback(function(){bn.exitFullScreenMode()},[]);_.useEffect(function(){Zn(O(O({},en.current),{fullScreenMode:bn.fullScreenMode}))},[bn.fullScreenMode]),_.useEffect(function(){var he={enterFullScreenMode:va,exitFullScreenMode:_a,getPagesContainer:da,getViewerState:ha,jumpToDestination:qr,jumpToNextDestination:pa,jumpToPreviousDestination:ga,jumpToNextPage:ma,jumpToPreviousPage:ba,jumpToPage:Jn,openFile:Xr,rotate:Yr,rotatePage:Ki,setViewerState:Zn,switchScrollMode:Kr,switchViewMode:Zr,zoom:ni};return It.forEach(function(Je){Je.install&&Je.install(he)}),function(){It.forEach(function(Je){Je.uninstall&&Je.uninstall(he)})}},[We]),_.useEffect(function(){fe({doc:_t,file:H}),It.forEach(function(he){he.onDocumentLoad&&he.onDocumentLoad({doc:_t,file:H})})},[We]);var Zi,Ji,Qi,Jr=_n.boundingClientRect;Zi=function(){Tt&&Jn(Tt)},Ji=Jr.height>0&&Jr.width>0,Qi=_.useRef(!1),V(function(){Ji&&!Qi.current&&(Qi.current=!0,Zi())},[Zi,Ji]),V(function(){var he=en.current.pageIndex;he>-1&&Ye!==Oe&&_n.scrollToItem(he,ri).then(function(){bn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(St||Un.markNotRendered(),En.current=-1)})},[Oe]),V(function(){var he=en.current.pageIndex;he>-1&&qn!==xn&&_n.scrollToItem(he,ri)},[xn]),V(function(){Hn!=0&&Hn!=en.current.scale&&_n.zoom(en.current.scale/Hn,en.current.pageIndex).then(function(){bn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(wn.current=-1)})},[vn]),V(function(){if(tn!==en.current.viewMode){var he=_n.startPage,Je=_n.endPage,an=_n.virtualItems;Un.markNotRendered(),Un.setRange(he,Je);for(var mn=function(on){var Dn=an.find(function(Qn){return Qn.index===on});Dn&&Un.setVisibility(on,Dn.visibility)},fn=he;fn<=Je;fn++)mn(fn);tr()}},[Ne]),V(function(){var he=en.current.pageIndex;he>-1&&tn!==Ne&&_n.scrollToItem(he,ri)},[Ne]),V(function(){var he=en.current.pageIndex;he>0&&he===Tt&&Ln.current===Tt&&Nn.current&&(Ln.current=-1,ni(Nn.current))},[Sn]),_.useEffect(function(){_n.isSmoothScrolling||Tn.current!==null&&Tn.current===Sn||(Tn.current=Sn,je({currentPage:Sn,doc:_t}))},[Sn,_n.isSmoothScrolling]),_.useEffect(function(){bn.fullScreenMode===A.FullScreenMode.Entering&&en.current.scrollMode===A.ScrollMode.Page&&(En.current=en.current.pageIndex),bn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&en.current.scrollMode===A.ScrollMode.Page&&St&&(En.current=-1),bn.fullScreenMode===A.FullScreenMode.EnteredCompletely&&Nn.current&&(wn.current=en.current.pageIndex,ni(Nn.current))},[bn.fullScreenMode]),_.useEffect(function(){if(bn.fullScreenMode!==A.FullScreenMode.Entering&&bn.fullScreenMode!==A.FullScreenMode.Exitting&&!_n.isSmoothScrolling){var he=_n.startPage,Je=_n.endPage,an=_n.maxVisbilityIndex,mn=_n.virtualItems,fn=an,on=bn.fullScreenMode===A.FullScreenMode.Entered||bn.fullScreenMode===A.FullScreenMode.EnteredCompletely;if(!(on&&fn!==En.current&&En.current>-1||on&&fn!==wn.current&&wn.current>-1)){Mn(fn),Zn(O(O({},en.current),{pageIndex:fn})),Un.setRange(he,Je);for(var Dn=function(er){var xi=mn.find(function(ti){return ti.index===er});xi&&Un.setVisibility(er,xi.visibility)},Qn=he;Qn<=Je;Qn++)Dn(Qn);tr()}}},[_n.startPage,_n.endPage,_n.isSmoothScrolling,_n.maxVisbilityIndex,bn.fullScreenMode,In,xn,vn]);var ya=_.useCallback(function(he){Un.markRendered(he),tr()},[fi]),tr=function(){var he=Un.getHighestPriorityPage();he>-1&&Un.isInRange(he)&&(Un.markRendering(he),Ti(he))},Aa=function(he){var Je=Sn-1,an=Sn+1;switch(he){case"FirstPage":Jn(0);break;case"LastPage":Jn(Xe-1);break;case"NextPage":an<Xe&&Jn(an);break;case"PrevPage":Je>=0&&Jn(Je)}},Ea=_.useCallback(function(){var he=_n.virtualItems,Je=[];switch(Ne){case A.ViewMode.DualPage:Je=Rt(he,2);break;case A.ViewMode.DualPageWithCover:he.length&&(Je=he[0].index===0?[[he[0]]].concat(Rt(he.slice(1),2)):Rt(he,2));break;case A.ViewMode.SinglePage:default:Je=Rt(he,1)}var an=un&&un.core?un.core.pageLabel:"Page {{pageIndex}}",mn={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:hn,style:{height:"100%"}},children:_.createElement(_.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:q({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Oe===A.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":dn,"rpv-core__inner-pages--single":Oe===A.ScrollMode.Page,"rpv-core__inner-pages--vertical":Oe===A.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Oe===A.ScrollMode.Wrapped}),ref:gn,style:{height:"100%",position:"relative"}},children:_.createElement("div",{"data-testid":"core__inner-current-page-".concat(Sn),style:Object.assign({"--scale-factor":vn},_n.getContainerStyles())},Je.map(function(fn){return _.createElement("div",{className:q({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Oe===A.ScrollMode.Page}),style:_n.getItemContainerStyles(fn[0]),key:"".concat(fn[0].index,"-").concat(Ne)},fn.map(function(on){var Dn=Ne===A.ViewMode.DualPageWithCover&&(on.index===0||Xe%2==0&&on.index===Xe-1);return _.createElement("div",{"aria-label":an.replace("{{pageIndex}}","".concat(on.index+1)),className:q({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Ne===A.ViewMode.DualPage&&on.index%2==0,"rpv-core__inner-page--dual-odd":Ne===A.ViewMode.DualPage&&on.index%2==1,"rpv-core__inner-page--dual-cover":Dn,"rpv-core__inner-page--dual-cover-even":Ne===A.ViewMode.DualPageWithCover&&!Dn&&on.index%2==0,"rpv-core__inner-page--dual-cover-odd":Ne===A.ViewMode.DualPageWithCover&&!Dn&&on.index%2==1,"rpv-core__inner-page--single":Ne===A.ViewMode.SinglePage&&Oe===A.ScrollMode.Page}),role:"region",key:"".concat(on.index,"-").concat(Ne),style:Object.assign({},_n.getItemStyles(on),Gr.buildPageStyles({numPages:Xe,pageIndex:on.index,scrollMode:Oe,viewMode:Ne}))},_.createElement(Us,{doc:_t,measureRef:on.measureRef,outlines:rn,pageIndex:on.index,pageRotation:Ve.has(on.index)?Ve.get(on.index):0,pageSize:jt[on.index],plugins:It,renderPage:ce,renderQueueKey:fi,rotation:xn,scale:vn,shouldRender:si===on.index,viewMode:Ne,onExecuteNamedAction:Aa,onJumpFromLinkAnnotation:fa,onJumpToDest:qr,onRenderCompleted:ya,onRotatePage:Ki}))}))}))}};return It.forEach(function(fn){fn.renderViewer&&(mn=fn.renderViewer({containerRef:hn,doc:_t,pagesContainerRef:gn,pagesRotation:Ve,pageSizes:jt,rotation:xn,slot:mn,themeContext:cn,jumpToPage:Jn,openFile:Xr,rotate:Yr,rotatePage:Ki,switchScrollMode:Kr,switchViewMode:Zr,zoom:ni}))}),mn},[It,_n]),Qr=_.useCallback(function(he){return _.createElement("div",O({},he.attrs,{style:he.attrs&&he.attrs.style?he.attrs.style:{}}),he.children,he.subSlot&&Qr(he.subSlot))},[]);return Qr(Ea())},Wr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ia=function(w){var H=w.defaultScale,mt=w.doc,_t=w.render,St=w.scrollMode,Tt=w.viewMode,Ut=_.useRef(),Lt=_.useState({pageSizes:[],scale:0}),yt=Lt[0],jt=Lt[1];return _.useLayoutEffect(function(){var It=Array(mt.numPages).fill(0).map(function(ce,le){return new Promise(function(oe,ve){Ae(mt,le).then(function(me){var fe=me.getViewport({scale:1});oe({pageHeight:fe.height,pageWidth:fe.width,rotation:fe.rotation})})})});Promise.all(It).then(function(ce){var le=Ut.current;if(le&&ce.length!==0){var oe=ce[0].pageWidth,ve=ce[0].pageHeight,me=le.parentElement,fe=(me.clientWidth-45)/oe,nn=(me.clientHeight-45)/ve,je=fe;switch(St){case A.ScrollMode.Horizontal:je=Math.min(fe,nn);break;case A.ScrollMode.Vertical:default:je=fe}var He,Ge,Me=H?typeof H=="string"?$i(me,ve,oe,H,Tt,mt.numPages):H:(He=je,(Ge=Wr.findIndex(function(Xe){return Xe>=He}))===-1||Ge===0?He:Wr[Ge-1]);jt({pageSizes:ce,scale:Me})}})},[mt.loadingTask.docId]),yt.pageSizes.length===0||yt.scale===0?_.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Ut},_.createElement(dt,null)):_t(yt.pageSizes,yt.scale)},Ci=function(){},qi=function(w){function H(mt,_t){var St=w.call(this)||this;return St.verifyPassword=mt,St.passwordStatus=_t,St}return pt(H,w),H}(Ci),ra=function(w){var H=w.passwordStatus,mt=w.renderProtectedView,_t=w.verifyPassword,St=w.onDocumentAskPassword,Tt=_.useContext(Ot).l10n,Ut=_.useState(""),Lt=Ut[0],yt=Ut[1],jt=_.useContext(lt).direction===A.TextDirection.RightToLeft,It=function(){return _t(Lt)};return _.useEffect(function(){St&&St({verifyPassword:_t})},[]),mt?mt({passwordStatus:H,verifyPassword:_t}):_.createElement("div",{className:"rpv-core__asking-password-wrapper"},_.createElement("div",{className:q({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":jt})},_.createElement("div",{className:"rpv-core__asking-password-message"},H===A.PasswordStatus.RequiredPassword&&Tt.core.askingPassword.requirePasswordToOpen,H===A.PasswordStatus.WrongPassword&&Tt.core.wrongPassword.tryAgain),_.createElement("div",{className:"rpv-core__asking-password-body"},_.createElement("div",{className:q({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!jt,"rpv-core__asking-password-input--rtl":jt})},_.createElement(J,{testId:"core__asking-password-input",type:"password",value:Lt,onChange:yt,onKeyDown:function(ce){ce.key==="Enter"&&It()}})),_.createElement(Y,{onClick:It},Tt.core.askingPassword.submit))))},Vr=function(w){function H(mt){var _t=w.call(this)||this;return _t.doc=mt,_t}return pt(H,w),H}(Ci),$r=function(w){function H(mt){var _t=w.call(this)||this;return _t.error=mt,_t}return pt(H,w),H}(Ci),Xi=function(w){function H(mt){var _t=w.call(this)||this;return _t.percentages=mt,_t}return pt(H,w),H}(Ci),sa=function(w){var H=w.characterMap,mt=w.file,_t=w.httpHeaders,St=w.render,Tt=w.renderError,Ut=w.renderLoader,Lt=w.renderProtectedView,yt=w.transformGetDocumentParams,jt=w.withCredentials,It=w.onDocumentAskPassword,ce=_.useContext(lt).direction===A.TextDirection.RightToLeft,le=_.useState(new Xi(0)),oe=le[0],ve=le[1],me=_.useRef(""),fe=wt();return _.useEffect(function(){me.current="",ve(new Xi(0));var nn=new bt.PDFWorker({name:"PDFWorker_".concat(Date.now())}),je=Object.assign({httpHeaders:_t,withCredentials:jt,worker:nn},typeof mt=="string"?{url:mt}:{data:mt},H?{cMapUrl:H.url,cMapPacked:H.isCompressed}:{}),He=yt?yt(je):je,Ge=bt.getDocument(He);return Ge.onPassword=function(Me,Xe){switch(Xe){case bt.PasswordResponses.NEED_PASSWORD:fe.current&&ve(new qi(Me,A.PasswordStatus.RequiredPassword));break;case bt.PasswordResponses.INCORRECT_PASSWORD:fe.current&&ve(new qi(Me,A.PasswordStatus.WrongPassword))}},Ge.onProgress=function(Me){var Xe=Me.total>0?Math.min(100,100*Me.loaded/Me.total):100;fe.current&&me.current===""&&ve(new Xi(Xe))},Ge.promise.then(function(Me){me.current=Me.loadingTask.docId,fe.current&&ve(new Vr(Me))},function(Me){return fe.current&&!nn.destroyed&&ve(new $r({message:Me.message||"Cannot load document",name:Me.name}))}),function(){Ge.destroy(),nn.destroy()}},[mt]),oe instanceof qi?_.createElement(ra,{passwordStatus:oe.passwordStatus,renderProtectedView:Lt,verifyPassword:oe.verifyPassword,onDocumentAskPassword:It}):oe instanceof Vr?St(oe.doc):oe instanceof $r?Tt?Tt(oe.error):_.createElement("div",{className:q({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":ce})},_.createElement("div",{className:"rpv-core__doc-error-text"},oe.error.message)):_.createElement("div",{"data-testid":"core__doc-loading",className:q({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":ce})},Ut?Ut(oe.percentages):_.createElement(dt,null))},aa=function(w,H){var mt=_.useMemo(function(){return w==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":w},[]),_t=_.useState(mt),St=_t[0],Tt=_t[1],Ut=Mt(St);return _.useEffect(function(){if(w==="auto"){var Lt=window.matchMedia("(prefers-color-scheme: dark)"),yt=function(jt){Tt(jt.matches?"dark":"light")};return Lt.addEventListener("change",yt),function(){return Lt.removeEventListener("change",yt)}}},[]),_.useEffect(function(){St!==Ut&&H&&H(St)},[St]),_.useEffect(function(){w!==St&&Tt(w)},[w]),{currentTheme:St,setCurrentTheme:Tt}},oa=function(w){return{startPage:w.startPage-3,endPage:w.endPage+3}};A.Button=function(w){var H=w.children,mt=w.testId,_t=w.onClick,St=_.useContext(lt).direction===A.TextDirection.RightToLeft,Tt=mt?{"data-testid":mt}:{};return _.createElement("button",O({className:q({"rpv-core__button":!0,"rpv-core__button--rtl":St}),type:"button",onClick:_t},Tt),H)},A.Icon=G,A.LazyRender=function(w){var H=w.attrs,mt=w.children,_t=w.testId,St=_.useState(!1),Tt=St[0],Ut=St[1],Lt=_t?O(O({},H),{"data-testid":_t}):H,yt=et({once:!0,onVisibilityChanged:function(jt){jt.isVisible&&Ut(!0)}});return _.createElement("div",O({ref:yt},Lt),Tt&&mt)},A.LocalizationContext=Ot,A.Menu=function(w){var H=w.children,mt=_.useRef(),_t=_.useRef([]),St=_.useContext(lt).direction===A.TextDirection.RightToLeft,Tt=function(Lt){if(mt.current)switch(Lt.key){case"Tab":Lt.preventDefault();break;case"ArrowDown":Lt.preventDefault(),Ut(function(yt,jt){return jt+1});break;case"ArrowUp":Lt.preventDefault(),Ut(function(yt,jt){return jt-1});break;case"End":Lt.preventDefault(),Ut(function(yt,jt){return yt.length-1});break;case"Home":Lt.preventDefault(),Ut(function(yt,jt){return 0})}},Ut=function(Lt){if(mt.current){var yt=_t.current,jt=yt.findIndex(function(ce){return ce.getAttribute("tabindex")==="0"}),It=Math.min(yt.length-1,Math.max(0,Lt(yt,jt)));jt>=0&&jt<=yt.length-1&&yt[jt].setAttribute("tabindex","-1"),yt[It].setAttribute("tabindex","0"),yt[It].focus()}};return V(function(){var Lt=mt.current;if(Lt){var yt=function(jt){var It=[];return jt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(ce){if(ce instanceof HTMLElement){var le=ce.parentElement;(le===jt||window.getComputedStyle(le).display!=="none")&&It.push(ce)}}),It}(Lt);_t.current=yt}},[]),V(function(){return document.addEventListener("keydown",Tt),function(){document.removeEventListener("keydown",Tt)}},[]),_.createElement("div",{ref:mt,"aria-orientation":"vertical",className:q({"rpv-core__menu":!0,"rpv-core__menu--rtl":St}),role:"menu",tabIndex:0},H)},A.MenuDivider=function(){return _.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},A.MenuItem=function(w){var H=w.checked,mt=H!==void 0&&H,_t=w.children,St=w.icon,Tt=St===void 0?null:St,Ut=w.isDisabled,Lt=Ut!==void 0&&Ut,yt=w.testId,jt=w.onClick,It=_.useContext(lt).direction===A.TextDirection.RightToLeft,ce=yt?{"data-testid":yt}:{};return _.createElement("button",O({className:q({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Lt,"rpv-core__menu-item--ltr":!It,"rpv-core__menu-item--rtl":It}),role:"menuitem",tabIndex:-1,type:"button",onClick:jt},ce),_.createElement("div",{className:q({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!It,"rpv-core__menu-item-icon--rtl":It})},Tt),_.createElement("div",{className:q({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!It,"rpv-core__menu-item-label--rtl":It})},_t),_.createElement("div",{className:q({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!It,"rpv-core__menu-item-check--rtl":It})},mt&&_.createElement(U,null)))},A.MinimalButton=function(w){var H=w.ariaLabel,mt=H===void 0?"":H,_t=w.ariaKeyShortcuts,St=_t===void 0?"":_t,Tt=w.children,Ut=w.isDisabled,Lt=Ut!==void 0&&Ut,yt=w.isSelected,jt=yt!==void 0&&yt,It=w.testId,ce=w.onClick,le=_.useContext(lt).direction===A.TextDirection.RightToLeft,oe=It?{"data-testid":It}:{};return _.createElement("button",O({"aria-label":mt},St&&{"aria-keyshortcuts":St},Lt&&{"aria-disabled":!0},{className:q({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Lt,"rpv-core__minimal-button--rtl":le,"rpv-core__minimal-button--selected":jt}),type:"button",onClick:ce},oe),Tt)},A.Modal=function(w){var H=w.ariaControlsSuffix,mt=w.closeOnClickOutside,_t=w.closeOnEscape,St=w.content,Tt=w.isOpened,Ut=Tt!==void 0&&Tt,Lt=w.target,yt=H||"".concat(T());return _.createElement($t,{target:Lt?function(jt,It){return _.createElement("div",{"aria-expanded":It?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(yt)},Lt(jt,It))}:null,content:function(jt){return _.createElement(ot,null,_.createElement(at,{ariaControlsSuffix:yt,closeOnClickOutside:mt,closeOnEscape:_t,onToggle:jt},St(jt)))},isOpened:Ut})},A.Popover=function(w){var H=w.ariaHasPopup,mt=H===void 0?"dialog":H,_t=w.ariaControlsSuffix,St=w.closeOnClickOutside,Tt=w.closeOnEscape,Ut=w.content,Lt=w.lockScroll,yt=Lt===void 0||Lt,jt=w.offset,It=w.position,ce=w.target,le=xt(!1),oe=le.opened,ve=le.toggle,me=_.useRef(),fe=_.useMemo(function(){return _t||"".concat(T())},[]);return _.createElement("div",{ref:me,"aria-expanded":oe?"true":"false","aria-haspopup":mt,"aria-controls":"rpv-core__popver-body-".concat(fe)},ce(ve,oe),oe&&_.createElement(_.Fragment,null,yt&&_.createElement(Jt,{closeOnEscape:Tt,onClose:ve}),_.createElement(Ht,{ariaControlsSuffix:fe,closeOnClickOutside:St,offset:jt,position:It,targetRef:me,onClose:ve},Ut(ve))))},A.PrimaryButton=Y,A.ProgressBar=function(w){var H=w.progress,mt=_.useContext(lt).direction===A.TextDirection.RightToLeft;return _.createElement("div",{className:q({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":mt})},_.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(H,"%")}},H,"%"))},A.Separator=function(){return _.createElement("div",{className:"rpv-core__separator"})},A.Spinner=dt,A.Splitter=function(w){var H=w.constrain,mt=_.useContext(lt).direction===A.TextDirection.RightToLeft,_t=_.useRef(),St=_.useRef(),Tt=_.useRef(),Ut=_.useRef(0),Lt=_.useRef(0),yt=_.useRef(0),jt=_.useRef(0),It={capture:!0},ce=function(oe){var ve=_t.current,me=St.current,fe=Tt.current;if(ve&&me&&fe){var nn=jt.current,je=oe.clientX-Ut.current,He=yt.current+(mt?-je:je),Ge=ve.parentElement.getBoundingClientRect().width,Me=100*He/Ge;if(ve.classList.add("rpv-core__splitter--resizing"),H){var Xe=Ge-He-nn;if(!H({firstHalfPercentage:Me,firstHalfSize:He,secondHalfPercentage:100*Xe/Ge,secondHalfSize:Xe}))return}me.style.width="".concat(Me,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),me.classList.add("rpv-core__splitter-sibling--resizing"),fe.classList.add("rpv-core__splitter-sibling--resizing")}},le=function(oe){var ve=_t.current,me=St.current,fe=Tt.current;ve&&me&&fe&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),ve.classList.remove("rpv-core__splitter--resizing"),me.classList.remove("rpv-core__splitter-sibling--resizing"),fe.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",ce,It),document.removeEventListener("mouseup",le,It))};return _.useEffect(function(){var oe=_t.current;oe&&(jt.current=oe.getBoundingClientRect().width,St.current=oe.previousElementSibling,Tt.current=oe.nextElementSibling)},[]),_.createElement("div",{ref:_t,className:"rpv-core__splitter",onMouseDown:function(oe){var ve=St.current;ve&&(Ut.current=oe.clientX,Lt.current=oe.clientY,yt.current=ve.getBoundingClientRect().width,document.addEventListener("mousemove",ce,It),document.addEventListener("mouseup",le,It))}})},A.TextBox=J,A.ThemeContext=lt,A.Tooltip=function(w){var H=w.ariaControlsSuffix,mt=w.content,_t=w.offset,St=w.position,Tt=w.target,Ut=xt(!1),Lt=Ut.opened,yt=Ut.toggle,jt=_.useRef(),It=_.useRef(),ce=_.useMemo(function(){return H||"".concat(T())},[]);$(function(){jt.current&&document.activeElement&&jt.current.contains(document.activeElement)&&oe()});var le=function(){yt(A.ToggleStatus.Open)},oe=function(){yt(A.ToggleStatus.Close)};return _.createElement(_.Fragment,null,_.createElement("div",{ref:jt,"aria-describedby":"rpv-core__tooltip-body-".concat(ce),onBlur:function(ve){ve.relatedTarget instanceof HTMLElement&&ve.currentTarget.parentElement&&ve.currentTarget.parentElement.contains(ve.relatedTarget)?It.current&&(It.current.style.display="none"):oe()},onFocus:le,onMouseEnter:le,onMouseLeave:oe},Tt),Lt&&_.createElement(ae,{ariaControlsSuffix:ce,contentRef:It,offset:_t,position:St,targetRef:jt},mt()))},A.Viewer=function(w){var H=w.characterMap,mt=w.defaultScale,_t=w.enableSmoothScroll,St=_t===void 0||_t,Tt=w.fileUrl,Ut=w.httpHeaders,Lt=Ut===void 0?{}:Ut,yt=w.initialPage,jt=yt===void 0?0:yt,It=w.pageLayout,ce=w.initialRotation,le=ce===void 0?0:ce,oe=w.localization,ve=w.plugins,me=ve===void 0?[]:ve,fe=w.renderError,nn=w.renderLoader,je=w.renderPage,He=w.renderProtectedView,Ge=w.scrollMode,Me=Ge===void 0?A.ScrollMode.Vertical:Ge,Xe=w.setRenderRange,We=Xe===void 0?oa:Xe,un=w.transformGetDocumentParams,cn=w.theme,dn=cn===void 0?{direction:A.TextDirection.LeftToRight,theme:"light"}:cn,hn=w.viewMode,gn=hn===void 0?A.ViewMode.SinglePage:hn,kn=w.withCredentials,Sn=kn!==void 0&&kn,Mn=w.onDocumentAskPassword,Tn=w.onDocumentLoad,Pn=Tn===void 0?function(){}:Tn,Rn=w.onPageChange,xn=Rn===void 0?function(){}:Rn,jn=w.onRotate,qn=jn===void 0?function(){}:jn,Vn=w.onRotatePage,In=Vn===void 0?function(){}:Vn,Bn=w.onSwitchTheme,Xn=Bn===void 0?function(){}:Bn,Ve=w.onZoom,Ue=Ve===void 0?function(){}:Ve,Fe=_.useState({data:Tt,name:typeof Tt=="string"?Tt:"",shouldLoad:!1}),Oe=Fe[0],Le=Fe[1],Ye=function(En,wn){Le({data:wn,name:En,shouldLoad:!0})},Ze=_.useState(!1),Ne=Ze[0],xe=Ze[1],tn=Mt(Oe);_.useEffect(function(){var En,wn,Ln,bn;En=tn.data,bn=typeof(wn=Tt),(Ln=typeof En)=="string"&&bn==="string"&&En===wn||Ln==="object"&&bn==="object"&&En.length===wn.length&&En.every(function(Kn,si){return Kn===wn[si]})||Le({data:Tt,name:typeof Tt=="string"?Tt:"",shouldLoad:Ne})},[Tt,Ne]);var rn=et({onVisibilityChanged:function(En){xe(En.isVisible),En.isVisible&&Le(function(wn){return Object.assign({},wn,{shouldLoad:!0})})}}),An=typeof dn=="string"?{direction:A.TextDirection.LeftToRight,theme:dn}:dn,vn=_.useState(oe||Et),On=vn[0],Hn=vn[1],en={l10n:On,setL10n:Hn},Nn=Object.assign({},{direction:An.direction},aa(An.theme||"light",Xn));return _.useEffect(function(){oe&&Hn(oe)},[oe]),_.createElement(Ot.Provider,{value:en},_.createElement(lt.Provider,{value:Nn},_.createElement("div",{ref:rn,className:"rpv-core__viewer rpv-core__viewer--".concat(Nn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Oe.shouldLoad&&_.createElement(sa,{characterMap:H,file:Oe.data,httpHeaders:Lt,render:function(En){return _.createElement(ia,{defaultScale:mt,doc:En,render:function(wn,Ln){return _.createElement(na,{currentFile:{data:Oe.data,name:Oe.name},defaultScale:mt,doc:En,enableSmoothScroll:St,initialPage:jt,initialRotation:le,initialScale:Ln,pageLayout:It,pageSizes:wn,plugins:me,renderPage:je,scrollMode:Me,setRenderRange:We,viewMode:gn,viewerState:{file:Oe,fullScreenMode:A.FullScreenMode.Normal,pageIndex:-1,pageHeight:wn[0].pageHeight,pageWidth:wn[0].pageWidth,pagesRotation:new Map,rotation:le,scale:Ln,scrollMode:Me,viewMode:gn},onDocumentLoad:Pn,onOpenFile:Ye,onPageChange:xn,onRotate:qn,onRotatePage:In,onZoom:Ue})},scrollMode:Me,viewMode:gn})},renderError:fe,renderLoader:nn,renderProtectedView:He,transformGetDocumentParams:un,withCredentials:Sn,onDocumentAskPassword:Mn}))))},A.Worker=function(w){var H=w.children,mt=w.workerUrl;return bt.GlobalWorkerOptions.workerSrc=mt,_.createElement(_.Fragment,null,H)},A.chunk=Rt,A.classNames=q,A.createStore=function(w){var H=w||{},mt={},_t=function(Tt,Ut){var Lt;H=O(O({},H),((Lt={})[Tt]=Ut,Lt)),(mt[Tt]||[]).forEach(function(yt){return yt(H[Tt])})},St=function(Tt){return H[Tt]};return{subscribe:function(Tt,Ut){mt[Tt]=(mt[Tt]||[]).concat(Ut)},unsubscribe:function(Tt,Ut){mt[Tt]=(mt[Tt]||[]).filter(function(Lt){return Lt!==Ut})},update:function(Tt,Ut){_t(Tt,Ut)},updateCurrentValue:function(Tt,Ut){var Lt=St(Tt);Lt!==void 0&&_t(Tt,Ut(Lt))},get:function(Tt){return St(Tt)}}},A.getDestination=ke,A.getPage=Ae,A.isFullScreenEnabled=D,A.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},A.useDebounceCallback=Gt,A.useIntersectionObserver=et,A.useIsMounted=wt,A.useIsomorphicLayoutEffect=V,A.usePrevious=Mt,A.useRenderQueue=rt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$1.exports=core_min;var libExports$1=lib$1.exports,lib={exports:{}},zoom_min={},e=libExports$1;function t(A){var x=Object.create(null);return A&&Object.keys(A).forEach(function(vt){if(vt!=="default"){var R=Object.getOwnPropertyDescriptor(A,vt);Object.defineProperty(x,vt,R.get?R:{enumerable:!0,get:function(){return A[vt]}})}}),x.default=A,Object.freeze(x)}var n=t(reactExports),o=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c=function(){return c=Object.assign||function(A){for(var x,vt=1,R=arguments.length;vt<R;vt++)for(var W in x=arguments[vt])Object.prototype.hasOwnProperty.call(x,W)&&(A[W]=x[W]);return A},c.apply(this,arguments)},a=function(A){var x=n.useState(A.get("scale")||0),vt=x[0],R=x[1],W=function(_){R(_)};return n.useEffect(function(){return A.subscribe("scale",W),function(){A.unsubscribe("scale",W)}},[]),{scale:vt}},u=function(A){var x=A.children,vt=A.store;return(x||function(R){return n.createElement(n.Fragment,null,"".concat(Math.round(100*R.scale),"%"))})({scale:a(vt).scale})},l={passive:!1},i=null,s=function(A){var x=A.pagesContainerRef,vt=A.store,R=e.useDebounceCallback(function(_){var bt=vt.get("zoom");bt&&bt(_)},40),W=function(_){if(_.ctrlKey){_.preventDefault();var bt=_.target.getBoundingClientRect(),zt=1-_.deltaY/100,pt=_.clientX-bt.left,nt=_.clientY-bt.top,O=vt.get("scale"),ft=(i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(pt,nt).scale(zt).translate(-pt,-nt).scale(O);R(ft.a)}};return e.useIsomorphicLayoutEffect(function(){var _=x.current;if(_)return _.addEventListener("wheel",W,l),function(){_.removeEventListener("wheel",W)}},[]),n.createElement(n.Fragment,null)},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f=function(A){return m.find(function(x){return x>A})||A},v=function(A){var x=m.findIndex(function(vt){return vt>=A});return x===-1||x===0?A:m[x-1]},p=function(A){var x=A.containerRef,vt=A.store,R=function(W){if(!W.shiftKey&&!W.altKey&&(e.isMac()?W.metaKey:W.ctrlKey)){var _=x.current;if(_&&document.activeElement&&_.contains(document.activeElement)){var bt=vt.get("zoom");if(bt){var zt=vt.get("scale")||1,pt=1;switch(W.key){case"-":pt=v(zt);break;case"=":pt=f(zt);break;case"0":pt=1;break;default:pt=zt}pt!==zt&&(W.preventDefault(),bt(pt))}}}};return n.useEffect(function(){if(x.current)return document.addEventListener("keydown",R),function(){document.removeEventListener("keydown",R)}},[x.current]),n.createElement(n.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E={left:0,top:8},d=function(A){var x=A.levels,vt=x===void 0?z:x,R=A.scale,W=A.onZoom,_=n.useContext(e.LocalizationContext).l10n,bt=n.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,zt=_&&_.zoom?_.zoom.zoomDocument:"Zoom document";return n.createElement(e.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e.Position.BottomCenter,target:function(pt){return n.createElement(e.MinimalButton,{ariaLabel:zt,testId:"zoom__popover-target",onClick:function(){pt()}},n.createElement("span",{className:"rpv-zoom__popover-target"},n.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!bt,"rpv-zoom__popover-target-scale--rtl":bt})},Math.round(100*R),"%"),n.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(pt){return n.createElement(e.Menu,null,Object.keys(e.SpecialZoomLevel).map(function(nt){var O=nt;return n.createElement(e.MenuItem,{key:O,onClick:function(){pt(),W(O)}},function(ft){switch(ft){case e.SpecialZoomLevel.ActualSize:return _&&_.zoom?_.zoom.actualSize:"Actual size";case e.SpecialZoomLevel.PageFit:return _&&_.zoom?_.zoom.pageFit:"Page fit";case e.SpecialZoomLevel.PageWidth:return _&&_.zoom?_.zoom.pageWidth:"Page width"}}(O))}),n.createElement(e.MenuDivider,null),vt.map(function(nt){return n.createElement(e.MenuItem,{key:nt,onClick:function(){pt(),W(nt)}},"".concat(Math.round(100*nt),"%"))}))},offset:E,closeOnClickOutside:!0,closeOnEscape:!0})},g=function(A){var x=A.children,vt=A.levels,R=A.store;return(x||function(W){return n.createElement(d,{levels:vt,scale:W.scale,onZoom:W.onZoom})})({scale:a(R).scale,onZoom:function(W){var _=R.get("zoom");_&&_(W)}})},C={left:0,top:8},h=function(A){var x=A.enableShortcuts,vt=A.onClick,R=n.useContext(e.LocalizationContext).l10n,W=R&&R.zoom?R.zoom.zoomIn:"Zoom in",_=x?e.isMac()?"Meta+=":"Ctrl+=":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-in",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:W,testId:"zoom__in-button",onClick:vt},n.createElement(o,null)),content:function(){return W},offset:C})},b=function(A){var x=A.children,vt=A.enableShortcuts,R=A.store,W=a(R).scale;return(x||h)({enableShortcuts:vt,onClick:function(){var _=R.get("zoom");_&&_(f(W))}})},k=function(A){var x=A.onClick,vt=n.useContext(e.LocalizationContext).l10n,R=vt&&vt.zoom?vt.zoom.zoomIn:"Zoom in";return n.createElement(e.MenuItem,{icon:n.createElement(o,null),testId:"zoom__in-menu",onClick:x},R)},S={left:0,top:8},M=function(A){var x=A.enableShortcuts,vt=A.onClick,R=n.useContext(e.LocalizationContext).l10n,W=R&&R.zoom?R.zoom.zoomOut:"Zoom out",_=x?e.isMac()?"Meta+-":"Ctrl+-":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-out",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:W,testId:"zoom__out-button",onClick:vt},n.createElement(r,null)),content:function(){return W},offset:S})},I=function(A){var x=A.children,vt=A.enableShortcuts,R=A.store,W=a(R).scale;return(x||M)({enableShortcuts:vt,onClick:function(){var _=R.get("zoom");_&&_(v(W))}})},Z=function(A){var x=A.onClick,vt=n.useContext(e.LocalizationContext).l10n,R=vt&&vt.zoom?vt.zoom.zoomOut:"Zoom out";return n.createElement(e.MenuItem,{icon:n.createElement(r,null),testId:"zoom__out-menu",onClick:x},R)};zoom_min.ZoomInIcon=o,zoom_min.ZoomOutIcon=r,zoom_min.zoomPlugin=function(A){var x=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),vt=n.useMemo(function(){return e.createStore({})},[]),R=function(bt){return n.createElement(b,c({enableShortcuts:x.enableShortcuts},bt,{store:vt}))},W=function(bt){return n.createElement(I,c({enableShortcuts:x.enableShortcuts},bt,{store:vt}))},_=function(bt){return n.createElement(g,c({},bt,{store:vt}))};return{renderViewer:function(bt){var zt=bt.slot;if(!x.enableShortcuts)return zt;var pt={children:n.createElement(n.Fragment,null,n.createElement(p,{containerRef:bt.containerRef,store:vt}),n.createElement(s,{pagesContainerRef:bt.pagesContainerRef,store:vt}),zt.children)};return c(c({},zt),pt)},install:function(bt){vt.update("zoom",bt.zoom)},onViewerStateChange:function(bt){return vt.update("scale",bt.scale),bt},zoomTo:function(bt){var zt=vt.get("zoom");zt&&zt(bt)},CurrentScale:function(bt){return n.createElement(u,c({},bt,{store:vt}))},ZoomIn:R,ZoomInButton:function(){return n.createElement(R,null,function(bt){return n.createElement(h,c({},bt))})},ZoomInMenuItem:function(bt){return n.createElement(R,null,function(zt){return n.createElement(k,{onClick:function(){zt.onClick(),bt.onClick()}})})},ZoomOut:W,ZoomOutButton:function(){return n.createElement(W,null,function(bt){return n.createElement(M,c({},bt))})},ZoomOutMenuItem:function(bt){return n.createElement(W,null,function(zt){return n.createElement(Z,{onClick:function(){zt.onClick(),bt.onClick()}})})},Zoom:_,ZoomPopover:function(bt){return n.createElement(_,null,function(zt){return n.createElement(d,c({levels:bt==null?void 0:bt.levels},zt))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=zoom_min;var libExports=lib.exports;const PDFViewer=({selectedPdf:A="",handleCloseViewer:x,handleDownload:vt,openDialog:R})=>{const W=libExports.zoomPlugin(),{ZoomInButton:_,ZoomOutButton:bt}=W,[zt]=reactExports.useState(1),nt=A||giphy404;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Dialog,{open:R,onClose:x,fullWidth:!0,maxWidth:"md","aria-labelledby":"pdf-viewer-title",PaperProps:{sx:{borderRadius:0,width:"100vw",height:"100vh",margin:0,maxWidth:"100vw",maxHeight:"100vh"}},children:[jsxRuntimeExports.jsxs(DialogTitle,{id:"pdf-viewer-title",sx:{display:"flex",textAlign:"center",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(IconButton,{onClick:x,sx:{mr:1},children:[jsxRuntimeExports.jsx(Visibility,{sx:{fontSize:"1.5rem"}})," "]}),nt.split("/").pop()]}),jsxRuntimeExports.jsx(Tooltip,{title:"Close viewer",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{onClick:x,children:jsxRuntimeExports.jsx(Close,{color:"warning",sx:{fontSize:"1.5rem"}})})})]}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs("div",{className:"pdf-content-container",style:{position:"relative",height:"100%"},children:[jsxRuntimeExports.jsx(libExports$1.Worker,{workerUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports$1.Viewer,{fileUrl:nt,defaultScale:zt,plugins:[W]})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"absolute",top:10,right:10},children:[jsxRuntimeExports.jsx(_,{}),jsxRuntimeExports.jsx(bt,{})]})]}),jsxRuntimeExports.jsx("style",{children:`
                /* Webkit browsers */
                ::-webkit-scrollbar {
                width: 5px; /* Adjust width */
                height: 5px; /* Adjust height */
                }
                ::-webkit-scrollbar-thumb {
                background-color: rgba(0, 0, 0, 0.5); /* Scrollbar thumb color */
                border-radius: 10px; /* Rounded edges */
                }
                ::-webkit-scrollbar-track {
                background: transparent; /* Track background color */
                }
                /* For Firefox */
                * {
                scrollbar-width: thin;
                scrollbar-color: rgba(0, 0, 0, 0.5) transparent;
                }

                @media (max-width: 600px) {
                .pdf-content-container {
                  width: 100% !important; /* Full width on small screens */
                  max-width: 100% !important;
                  height: 100% !important;
                  max-height: 100% !important;
                }
                }
                `})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Tooltip,{title:"Contact",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{color:"secondary",onClick:()=>window.location.href=`mailto:${email}`,children:jsxRuntimeExports.jsx(Email,{sx:{fontSize:"1.5rem"}})})}),jsxRuntimeExports.jsx(Tooltip,{title:"Download",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{color:"secondary",onClick:vt,children:jsxRuntimeExports.jsx(Download,{sx:{fontSize:"1.5rem"}})})})]})]})})},Library=()=>{const[A,x]=reactExports.useState([]),[vt,R]=reactExports.useState(null),[W,_]=reactExports.useState(!1),bt=reactExports.useCallback(async(O,ft=3)=>{try{return(await pdfExports.getDocument(O).promise).numPages}catch(lt){return console.error("Error loading PDF:",lt),ft>0?(console.log(`Retrying... (${4-ft} attempts left)`),await new Promise(q=>setTimeout(q,1e3)),bt(O,ft-1)):-1}},[]);reactExports.useEffect(()=>{pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const O=async()=>{try{const q=await(await fetch("/library.json")).json();let V=!1;const et=await Promise.all(q.map(async G=>{if(typeof G.pages=="number"&&!isNaN(G.pages))return G;let U=await bt(G.file);return(typeof U!="number"||isNaN(U))&&(U=-1),V=!0,{...G,pages:U}}));V&&await ft(et),x(et)}catch(lt){console.error("Error loading library.json:",lt)}},ft=async lt=>{try{const q=await fetch("/library.json",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(lt)});if(!q.ok)throw new Error(`Failed to update library.json: ${q.statusText}`);console.log("Successfully wrote to the Library")}catch(q){console.error("Error saving to library.json:",q)}};O()},[bt]);const zt=O=>{R(O),_(!0)},pt=()=>{_(!1),R(null)},nt=()=>{if(vt){const O=document.createElement("a");O.href=vt,O.download=vt.split("/").pop()||"document.pdf",O.click()}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Meta,{title:"Library"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",overflowY:"auto",width:"100%",alignItems:"center",height:"90%",padding:"1em"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h3",gutterBottom:!0,children:"Library"}),jsxRuntimeExports.jsx(Typography,{fontStyle:"italic",mb:"1em",color:"text.secondary",children:"A curated collection of papers and presentations."}),jsxRuntimeExports.jsx(TableContainer,{sx:{maxWidth:800,bgcolor:"background.paper",borderRadius:"15px",padding:"0.5em"},children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"#"}),jsxRuntimeExports.jsx(TableCell,{children:"Title"}),jsxRuntimeExports.jsx(TableCell,{children:"Pages"})]})}),jsxRuntimeExports.jsx(TableBody,{children:A.map((O,ft)=>jsxRuntimeExports.jsxs(TableRow,{onClick:()=>zt(O.file),sx:{textTransform:"none",cursor:"pointer","&:hover":{bgcolor:"background.default"}},children:[jsxRuntimeExports.jsx(TableCell,{children:ft+1}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:O.title})}),jsxRuntimeExports.jsx(TableCell,{children:O.pages!==-1?O.pages:jsxRuntimeExports.jsx(CircularProgress,{size:24})})]},ft))})]})})]}),jsxRuntimeExports.jsx(PDFViewer,{selectedPdf:vt||"",handleCloseViewer:pt,handleDownload:nt,openDialog:W})]})};export{Library as default};
