var Ea=Object.defineProperty;var es=T=>{throw TypeError(T)};var wa=(T,D,Tt)=>D in T?Ea(T,D,{enumerable:!0,configurable:!0,writable:!0,value:Tt}):T[D]=Tt;var yn=(T,D,Tt)=>wa(T,typeof D!="symbol"?D+"":D,Tt),nr=(T,D,Tt)=>D.has(T)||es("Cannot "+Tt);var y=(T,D,Tt)=>(nr(T,D,"read from private field"),Tt?Tt.call(T):D.get(T)),zt=(T,D,Tt)=>D.has(T)?es("Cannot add the same private member more than once"):D instanceof WeakSet?D.add(T):D.set(T,Tt),Wt=(T,D,Tt,L)=>(nr(T,D,"write to private field"),L?L.call(T,Tt):D.set(T,Tt),Tt),xt=(T,D,Tt)=>(nr(T,D,"access private method"),Tt);var pi=(T,D,Tt,L)=>({set _(G){Wt(T,D,G,Tt)},get _(){return y(T,D,L)}});import{j as jsxRuntimeExports,h as Dialog,l as DialogTitle,I as IconButton,V as Visibility,f as Tooltip,C as Close,k as DialogContent,U as DialogActions,W as Email,X as Download,a as Typography,Y as TableContainer,Z as Table,$ as TableHead,a0 as TableRow,a1 as TableCell,a2 as TableBody,q as CircularProgress}from"./mui-vendor-CtzqAcQ0.js";import{r as reactExports}from"./react-vendor-CCVJ8uki.js";import{c as commonjsRequire,r as require$$0}from"./___vite-browser-external_commonjs-proxy-CtPASe7f.js";import{M as Meta}from"./Meta-BE7nnOe4.js";import{e as email,g as giphy404}from"./index-kdnt9PLx.js";import"./index.esm-BoEB-bSG.js";var pdf={exports:{}};(function(module,exports){(function(D,Tt){module.exports=D.pdfjsLib=Tt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(T,D)=>{var ln;Object.defineProperty(D,"__esModule",{value:!0}),D.VerbosityLevel=D.Util=D.UnknownErrorException=D.UnexpectedResponseException=D.TextRenderingMode=D.RenderingIntentFlag=D.PromiseCapability=D.PermissionFlag=D.PasswordResponses=D.PasswordException=D.PageActionEventType=D.OPS=D.MissingPDFException=D.MAX_IMAGE_SIZE_TO_CACHE=D.LINE_FACTOR=D.LINE_DESCENT_FACTOR=D.InvalidPDFException=D.ImageKind=D.IDENTITY_MATRIX=D.FormatError=D.FeatureTest=D.FONT_IDENTITY_MATRIX=D.DocumentActionEventType=D.CMapCompressionType=D.BaseException=D.BASELINE_FACTOR=D.AnnotationType=D.AnnotationReplyType=D.AnnotationPrefix=D.AnnotationMode=D.AnnotationFlag=D.AnnotationFieldFlag=D.AnnotationEditorType=D.AnnotationEditorPrefix=D.AnnotationEditorParamsType=D.AnnotationBorderStyleType=D.AnnotationActionEventType=D.AbortException=void 0,D.assert=it,D.bytesToString=Kt,D.createValidAbsoluteUrl=Ot,D.getModificationDate=he,D.getUuid=Re,D.getVerbosityLevel=Et,D.info=Mt,D.isArrayBuffer=kt,D.isArrayEqual=ge,D.isNodeJS=void 0,D.normalizeUnicode=Ae,D.objectFromMap=se,D.objectSize=re,D.setVerbosityLevel=Gt,D.shadow=tt,D.string32=te,D.stringToBytes=Zt,D.stringToPDFString=Jt,D.stringToUTF8String=ae,D.unreachable=qt,D.utf8StringToString=ne,D.warn=yt;const Tt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");D.isNodeJS=Tt;const L=[1,0,0,1,0,0];D.IDENTITY_MATRIX=L;const G=[.001,0,0,.001,0,0];D.FONT_IDENTITY_MATRIX=G;const _=1e7;D.MAX_IMAGE_SIZE_TO_CACHE=_;const vt=1.35;D.LINE_FACTOR=vt;const $t=.35;D.LINE_DESCENT_FACTOR=$t;const mt=$t/vt;D.BASELINE_FACTOR=mt;const st={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};D.RenderingIntentFlag=st;const N={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};D.AnnotationMode=N;const gt="pdfjs_internal_editor_";D.AnnotationEditorPrefix=gt;const ct={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};D.AnnotationEditorType=ct;const X={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};D.AnnotationEditorParamsType=X;const V={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};D.PermissionFlag=V;const et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};D.TextRenderingMode=et;const q={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};D.ImageKind=q;const U={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};D.AnnotationType=U;const Y={GROUP:"Group",REPLY:"R"};D.AnnotationReplyType=Y;const dt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};D.AnnotationFlag=dt;const J={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};D.AnnotationFieldFlag=J;const x={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};D.AnnotationBorderStyleType=x;const j={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};D.AnnotationActionEventType=j;const R={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};D.DocumentActionEventType=R;const O={O:"PageOpen",C:"PageClose"};D.PageActionEventType=O;const B={ERRORS:0,WARNINGS:1,INFOS:5};D.VerbosityLevel=B;const ht={NONE:0,BINARY:1};D.CMapCompressionType=ht;const F={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};D.OPS=F;const K={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};D.PasswordResponses=K;let lt=B.WARNINGS;function Gt(ee){Number.isInteger(ee)&&(lt=ee)}function Et(){return lt}function Mt(ee){lt>=B.INFOS&&console.log(`Info: ${ee}`)}function yt(ee){lt>=B.WARNINGS&&console.log(`Warning: ${ee}`)}function qt(ee){throw new Error(ee)}function it(ee,Ft){ee||qt(Ft)}function At(ee){switch(ee==null?void 0:ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ot(ee,Ft=null,Dt=null){if(!ee)return null;try{if(Dt&&typeof ee=="string"){if(Dt.addDefaultProtocol&&ee.startsWith("www.")){const we=ee.match(/\./g);(we==null?void 0:we.length)>=2&&(ee=`http://${ee}`)}if(Dt.tryConvertEncoding)try{ee=ae(ee)}catch{}}const ye=Ft?new URL(ee,Ft):new URL(ee);if(At(ye))return ye}catch{}return null}function tt(ee,Ft,Dt,ye=!1){return Object.defineProperty(ee,Ft,{value:Dt,enumerable:!ye,configurable:!0,writable:!1}),Dt}const w=function(){function Ft(Dt,ye){this.constructor===Ft&&qt("Cannot initialize BaseException."),this.message=Dt,this.name=ye}return Ft.prototype=new Error,Ft.constructor=Ft,Ft}();D.BaseException=w;class P extends w{constructor(Ft,Dt){super(Ft,"PasswordException"),this.code=Dt}}D.PasswordException=P;class W extends w{constructor(Ft,Dt){super(Ft,"UnknownErrorException"),this.details=Dt}}D.UnknownErrorException=W;class at extends w{constructor(Ft){super(Ft,"InvalidPDFException")}}D.InvalidPDFException=at;class ot extends w{constructor(Ft){super(Ft,"MissingPDFException")}}D.MissingPDFException=ot;class rt extends w{constructor(Ft,Dt){super(Ft,"UnexpectedResponseException"),this.status=Dt}}D.UnexpectedResponseException=rt;class Pt extends w{constructor(Ft){super(Ft,"FormatError")}}D.FormatError=Pt;class Vt extends w{constructor(Ft){super(Ft,"AbortException")}}D.AbortException=Vt;function Kt(ee){(typeof ee!="object"||(ee==null?void 0:ee.length)===void 0)&&qt("Invalid argument for bytesToString");const Ft=ee.length,Dt=8192;if(Ft<Dt)return String.fromCharCode.apply(null,ee);const ye=[];for(let we=0;we<Ft;we+=Dt){const De=Math.min(we+Dt,Ft),ft=ee.subarray(we,De);ye.push(String.fromCharCode.apply(null,ft))}return ye.join("")}function Zt(ee){typeof ee!="string"&&qt("Invalid argument for stringToBytes");const Ft=ee.length,Dt=new Uint8Array(Ft);for(let ye=0;ye<Ft;++ye)Dt[ye]=ee.charCodeAt(ye)&255;return Dt}function te(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,ee&255)}function re(ee){return Object.keys(ee).length}function se(ee){const Ft=Object.create(null);for(const[Dt,ye]of ee)Ft[Dt]=ye;return Ft}function Nt(){const ee=new Uint8Array(4);return ee[0]=1,new Uint32Array(ee.buffer,0,1)[0]===1}function jt(){try{return new Function(""),!0}catch{return!1}}class ${static get isLittleEndian(){return tt(this,"isLittleEndian",Nt())}static get isEvalSupported(){return tt(this,"isEvalSupported",jt())}static get isOffscreenCanvasSupported(){return tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?tt(this,"platform",{isWin:!1,isMac:!1}):tt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Ft,Dt;return tt(this,"isCSSRoundSupported",(Dt=(Ft=globalThis.CSS)==null?void 0:Ft.supports)==null?void 0:Dt.call(Ft,"width: round(1.5px, 1px)"))}}D.FeatureTest=$;const ut=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class Rt{static makeHexColor(Ft,Dt,ye){return`#${ut[Ft]}${ut[Dt]}${ut[ye]}`}static scaleMinMax(Ft,Dt){let ye;Ft[0]?(Ft[0]<0&&(ye=Dt[0],Dt[0]=Dt[1],Dt[1]=ye),Dt[0]*=Ft[0],Dt[1]*=Ft[0],Ft[3]<0&&(ye=Dt[2],Dt[2]=Dt[3],Dt[3]=ye),Dt[2]*=Ft[3],Dt[3]*=Ft[3]):(ye=Dt[0],Dt[0]=Dt[2],Dt[2]=ye,ye=Dt[1],Dt[1]=Dt[3],Dt[3]=ye,Ft[1]<0&&(ye=Dt[2],Dt[2]=Dt[3],Dt[3]=ye),Dt[2]*=Ft[1],Dt[3]*=Ft[1],Ft[2]<0&&(ye=Dt[0],Dt[0]=Dt[1],Dt[1]=ye),Dt[0]*=Ft[2],Dt[1]*=Ft[2]),Dt[0]+=Ft[4],Dt[1]+=Ft[4],Dt[2]+=Ft[5],Dt[3]+=Ft[5]}static transform(Ft,Dt){return[Ft[0]*Dt[0]+Ft[2]*Dt[1],Ft[1]*Dt[0]+Ft[3]*Dt[1],Ft[0]*Dt[2]+Ft[2]*Dt[3],Ft[1]*Dt[2]+Ft[3]*Dt[3],Ft[0]*Dt[4]+Ft[2]*Dt[5]+Ft[4],Ft[1]*Dt[4]+Ft[3]*Dt[5]+Ft[5]]}static applyTransform(Ft,Dt){const ye=Ft[0]*Dt[0]+Ft[1]*Dt[2]+Dt[4],we=Ft[0]*Dt[1]+Ft[1]*Dt[3]+Dt[5];return[ye,we]}static applyInverseTransform(Ft,Dt){const ye=Dt[0]*Dt[3]-Dt[1]*Dt[2],we=(Ft[0]*Dt[3]-Ft[1]*Dt[2]+Dt[2]*Dt[5]-Dt[4]*Dt[3])/ye,De=(-Ft[0]*Dt[1]+Ft[1]*Dt[0]+Dt[4]*Dt[1]-Dt[5]*Dt[0])/ye;return[we,De]}static getAxialAlignedBoundingBox(Ft,Dt){const ye=this.applyTransform(Ft,Dt),we=this.applyTransform(Ft.slice(2,4),Dt),De=this.applyTransform([Ft[0],Ft[3]],Dt),ft=this.applyTransform([Ft[2],Ft[1]],Dt);return[Math.min(ye[0],we[0],De[0],ft[0]),Math.min(ye[1],we[1],De[1],ft[1]),Math.max(ye[0],we[0],De[0],ft[0]),Math.max(ye[1],we[1],De[1],ft[1])]}static inverseTransform(Ft){const Dt=Ft[0]*Ft[3]-Ft[1]*Ft[2];return[Ft[3]/Dt,-Ft[1]/Dt,-Ft[2]/Dt,Ft[0]/Dt,(Ft[2]*Ft[5]-Ft[4]*Ft[3])/Dt,(Ft[4]*Ft[1]-Ft[5]*Ft[0])/Dt]}static singularValueDecompose2dScale(Ft){const Dt=[Ft[0],Ft[2],Ft[1],Ft[3]],ye=Ft[0]*Dt[0]+Ft[1]*Dt[2],we=Ft[0]*Dt[1]+Ft[1]*Dt[3],De=Ft[2]*Dt[0]+Ft[3]*Dt[2],ft=Ft[2]*Dt[1]+Ft[3]*Dt[3],Qt=(ye+ft)/2,pe=Math.sqrt((ye+ft)**2-4*(ye*ft-De*we))/2,Ce=Qt+pe||1,xe=Qt-pe||1;return[Math.sqrt(Ce),Math.sqrt(xe)]}static normalizeRect(Ft){const Dt=Ft.slice(0);return Ft[0]>Ft[2]&&(Dt[0]=Ft[2],Dt[2]=Ft[0]),Ft[1]>Ft[3]&&(Dt[1]=Ft[3],Dt[3]=Ft[1]),Dt}static intersect(Ft,Dt){const ye=Math.max(Math.min(Ft[0],Ft[2]),Math.min(Dt[0],Dt[2])),we=Math.min(Math.max(Ft[0],Ft[2]),Math.max(Dt[0],Dt[2]));if(ye>we)return null;const De=Math.max(Math.min(Ft[1],Ft[3]),Math.min(Dt[1],Dt[3])),ft=Math.min(Math.max(Ft[1],Ft[3]),Math.max(Dt[1],Dt[3]));return De>ft?null:[ye,De,we,ft]}static bezierBoundingBox(Ft,Dt,ye,we,De,ft,Qt,pe){const Ce=[],xe=[[],[]];let _e,nt,Q,wt,Xt,Yt,ie,ue;for(let Ge=0;Ge<2;++Ge){if(Ge===0?(nt=6*Ft-12*ye+6*De,_e=-3*Ft+9*ye-9*De+3*Qt,Q=3*ye-3*Ft):(nt=6*Dt-12*we+6*ft,_e=-3*Dt+9*we-9*ft+3*pe,Q=3*we-3*Dt),Math.abs(_e)<1e-12){if(Math.abs(nt)<1e-12)continue;wt=-Q/nt,0<wt&&wt<1&&Ce.push(wt);continue}ie=nt*nt-4*Q*_e,ue=Math.sqrt(ie),!(ie<0)&&(Xt=(-nt+ue)/(2*_e),0<Xt&&Xt<1&&Ce.push(Xt),Yt=(-nt-ue)/(2*_e),0<Yt&&Yt<1&&Ce.push(Yt))}let Pe=Ce.length,Se;const ve=Pe;for(;Pe--;)wt=Ce[Pe],Se=1-wt,xe[0][Pe]=Se*Se*Se*Ft+3*Se*Se*wt*ye+3*Se*wt*wt*De+wt*wt*wt*Qt,xe[1][Pe]=Se*Se*Se*Dt+3*Se*Se*wt*we+3*Se*wt*wt*ft+wt*wt*wt*pe;return xe[0][ve]=Ft,xe[1][ve]=Dt,xe[0][ve+1]=Qt,xe[1][ve+1]=pe,xe[0].length=xe[1].length=ve+2,[Math.min(...xe[0]),Math.min(...xe[1]),Math.max(...xe[0]),Math.max(...xe[1])]}}D.Util=Rt;const Ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Jt(ee){if(ee[0]>="ï"){let Dt;if(ee[0]==="þ"&&ee[1]==="ÿ"?Dt="utf-16be":ee[0]==="ÿ"&&ee[1]==="þ"?Dt="utf-16le":ee[0]==="ï"&&ee[1]==="»"&&ee[2]==="¿"&&(Dt="utf-8"),Dt)try{const ye=new TextDecoder(Dt,{fatal:!0}),we=Zt(ee);return ye.decode(we)}catch(ye){yt(`stringToPDFString: "${ye}".`)}}const Ft=[];for(let Dt=0,ye=ee.length;Dt<ye;Dt++){const we=Ht[ee.charCodeAt(Dt)];Ft.push(we?String.fromCharCode(we):ee.charAt(Dt))}return Ft.join("")}function ae(ee){return decodeURIComponent(escape(ee))}function ne(ee){return unescape(encodeURIComponent(ee))}function kt(ee){return typeof ee=="object"&&(ee==null?void 0:ee.byteLength)!==void 0}function ge(ee,Ft){if(ee.length!==Ft.length)return!1;for(let Dt=0,ye=ee.length;Dt<ye;Dt++)if(ee[Dt]!==Ft[Dt])return!1;return!0}function he(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class ze{constructor(){zt(this,ln,!1);this.promise=new Promise((Ft,Dt)=>{this.resolve=ye=>{Wt(this,ln,!0),Ft(ye)},this.reject=ye=>{Wt(this,ln,!0),Dt(ye)}})}get settled(){return y(this,ln)}}ln=new WeakMap,D.PromiseCapability=ze;let Ie=null,Qe=null;function Ae(ee){return Ie||(Ie=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Qe=new Map([["ﬅ","ſt"]])),ee.replaceAll(Ie,(Ft,Dt,ye)=>Dt?Dt.normalize("NFKC"):Qe.get(ye))}function Re(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ee);else for(let Ft=0;Ft<32;Ft++)ee[Ft]=Math.floor(Math.random()*255);return Kt(ee)}const Xe="pdfjs_internal_id_";D.AnnotationPrefix=Xe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var T,Tt,L,G,oi,Ri,$t,mt,st,N,gt,ct,X,V,et,Mi,U,Y,ir,J,x;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(R){if(typeof R=="string"||R instanceof URL?R={url:R}:(0,_util.isArrayBuffer)(R)&&(R={data:R}),typeof R!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!R.url&&!R.data&&!R.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const O=new PDFDocumentLoadingTask,{docId:B}=O,ht=R.url?getUrlProp(R.url):null,F=R.data?getDataProp(R.data):null,K=R.httpHeaders||null,lt=R.withCredentials===!0,Gt=R.password??null,Et=R.range instanceof PDFDataRangeTransport?R.range:null,Mt=Number.isInteger(R.rangeChunkSize)&&R.rangeChunkSize>0?R.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let yt=R.worker instanceof PDFWorker?R.worker:null;const qt=R.verbosity,it=typeof R.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(R.docBaseUrl)?R.docBaseUrl:null,At=typeof R.cMapUrl=="string"?R.cMapUrl:null,Ot=R.cMapPacked!==!1,tt=R.CMapReaderFactory||DefaultCMapReaderFactory,w=typeof R.standardFontDataUrl=="string"?R.standardFontDataUrl:null,P=R.StandardFontDataFactory||DefaultStandardFontDataFactory,W=R.stopAtErrors!==!0,at=Number.isInteger(R.maxImageSize)&&R.maxImageSize>-1?R.maxImageSize:-1,ot=R.isEvalSupported!==!1,rt=typeof R.isOffscreenCanvasSupported=="boolean"?R.isOffscreenCanvasSupported:!_util.isNodeJS,Pt=Number.isInteger(R.canvasMaxAreaInBytes)?R.canvasMaxAreaInBytes:-1,Vt=typeof R.disableFontFace=="boolean"?R.disableFontFace:_util.isNodeJS,Kt=R.fontExtraProperties===!0,Zt=R.enableXfa===!0,te=R.ownerDocument||globalThis.document,re=R.disableRange===!0,se=R.disableStream===!0,Nt=R.disableAutoFetch===!0,jt=R.pdfBug===!0,$=Et?Et.length:R.length??NaN,ut=typeof R.useSystemFonts=="boolean"?R.useSystemFonts:!_util.isNodeJS&&!Vt,Rt=typeof R.useWorkerFetch=="boolean"?R.useWorkerFetch:tt===_display_utils.DOMCMapReaderFactory&&P===_display_utils.DOMStandardFontDataFactory&&At&&w&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(w,document.baseURI),Ht=R.canvasFactory||new DefaultCanvasFactory({ownerDocument:te}),Jt=R.filterFactory||new DefaultFilterFactory({docId:B,ownerDocument:te}),ae=null;(0,_util.setVerbosityLevel)(qt);const ne={canvasFactory:Ht,filterFactory:Jt};if(Rt||(ne.cMapReaderFactory=new tt({baseUrl:At,isCompressed:Ot}),ne.standardFontDataFactory=new P({baseUrl:w})),!yt){const he={verbosity:qt,port:_worker_options.GlobalWorkerOptions.workerPort};yt=he.port?PDFWorker.fromPort(he):new PDFWorker(he),O._worker=yt}const kt={docId:B,apiVersion:"3.11.174",data:F,password:Gt,disableAutoFetch:Nt,rangeChunkSize:Mt,length:$,docBaseUrl:it,enableXfa:Zt,evaluatorOptions:{maxImageSize:at,disableFontFace:Vt,ignoreErrors:W,isEvalSupported:ot,isOffscreenCanvasSupported:rt,canvasMaxAreaInBytes:Pt,fontExtraProperties:Kt,useSystemFonts:ut,cMapUrl:Rt?At:null,standardFontDataUrl:Rt?w:null}},ge={ignoreErrors:W,isEvalSupported:ot,disableFontFace:Vt,fontExtraProperties:Kt,enableXfa:Zt,ownerDocument:te,disableAutoFetch:Nt,pdfBug:jt,styleElement:ae};return yt.promise.then(function(){if(O.destroyed)throw new Error("Loading aborted");const he=_fetchDocument(yt,kt),ze=new Promise(function(Ie){let Qe;Et?Qe=new _transport_stream.PDFDataTransportStream({length:$,initialData:Et.initialData,progressiveDone:Et.progressiveDone,contentDispositionFilename:Et.contentDispositionFilename,disableRange:re,disableStream:se},Et):F||(Qe=(Re=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Re):(0,_display_utils.isValidFetchUrl)(Re.url)?new _displayFetch_stream.PDFFetchStream(Re):new _displayNetwork.PDFNetworkStream(Re))({url:ht,length:$,httpHeaders:K,withCredentials:lt,rangeChunkSize:Mt,disableRange:re,disableStream:se})),Ie(Qe)});return Promise.all([he,ze]).then(function([Ie,Qe]){if(O.destroyed)throw new Error("Loading aborted");const Ae=new _message_handler.MessageHandler(B,Ie,yt.port),Re=new WorkerTransport(Ae,O,Qe,ge,ne);O._transport=Re,Ae.send("Ready",null)})}).catch(O._capability.reject),O}async function _fetchDocument(R,O){if(R.destroyed)throw new Error("Worker was destroyed");const B=await R.messageHandler.sendWithPromise("GetDocRequest",O,O.data?[O.data.buffer]:null);if(R.destroyed)throw new Error("Worker was destroyed");return B}function getUrlProp(R){if(R instanceof URL)return R.href;try{return new URL(R,window.location).href}catch{if(_util.isNodeJS&&typeof R=="string")return R}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(R){if(_util.isNodeJS&&typeof Buffer<"u"&&R instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength)return R;if(typeof R=="string")return(0,_util.stringToBytes)(R);if(typeof R=="object"&&!isNaN(R==null?void 0:R.length)||(0,_util.isArrayBuffer)(R))return new Uint8Array(R);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const D=class D{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${pi(D,T)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var O,B,ht;this.destroyed=!0;try{(O=this._worker)!=null&&O.port&&(this._worker._pendingDestroy=!0),await((B=this._transport)==null?void 0:B.destroy())}catch(F){throw(ht=this._worker)!=null&&ht.port&&delete this._worker._pendingDestroy,F}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};T=new WeakMap,zt(D,T,0);let PDFDocumentLoadingTask=D;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(O,B,ht=!1,F=null){this.length=O,this.initialData=B,this.progressiveDone=ht,this.contentDispositionFilename=F,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(O){this._rangeListeners.push(O)}addProgressListener(O){this._progressListeners.push(O)}addProgressiveReadListener(O){this._progressiveReadListeners.push(O)}addProgressiveDoneListener(O){this._progressiveDoneListeners.push(O)}onDataRange(O,B){for(const ht of this._rangeListeners)ht(O,B)}onDataProgress(O,B){this._readyCapability.promise.then(()=>{for(const ht of this._progressListeners)ht(O,B)})}onDataProgressiveRead(O){this._readyCapability.promise.then(()=>{for(const B of this._progressiveReadListeners)B(O)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const O of this._progressiveDoneListeners)O()})}transportReady(){this._readyCapability.resolve()}requestDataRange(O,B){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(O,B){this._pdfInfo=O,this._transport=B,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(ht=>{if(!ht)return ht;const F=[];for(const K in ht)F.push(...ht[K]);return F}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(O){return this._transport.getPage(O)}getPageIndex(O){return this._transport.getPageIndex(O)}getDestinations(){return this._transport.getDestinations()}getDestination(O){return this._transport.getDestination(O)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(O=!1){return this._transport.startCleanup(O||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(O,B,ht,F=!1){zt(this,G);zt(this,Tt,null);zt(this,L,!1);this._pageIndex=O,this._pageInfo=B,this._transport=ht,this._stats=F?new _display_utils.StatTimer:null,this._pdfBug=F,this.commonObjs=ht.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:O,rotation:B=this.rotate,offsetX:ht=0,offsetY:F=0,dontFlip:K=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:O,rotation:B,offsetX:ht,offsetY:F,dontFlip:K})}getAnnotations({intent:O="display"}={}){const B=this._transport.getRenderingIntent(O);return this._transport.getAnnotations(this._pageIndex,B.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var O;return((O=this._transport._htmlForXfa)==null?void 0:O.children[this._pageIndex])||null}render({canvasContext:O,viewport:B,intent:ht="display",annotationMode:F=_util.AnnotationMode.ENABLE,transform:K=null,background:lt=null,optionalContentConfigPromise:Gt=null,annotationCanvasMap:Et=null,pageColors:Mt=null,printAnnotationStorage:yt=null}){var P,W;(P=this._stats)==null||P.time("Overall");const qt=this._transport.getRenderingIntent(ht,F,yt);Wt(this,L,!1),xt(this,G,Ri).call(this),Gt||(Gt=this._transport.getOptionalContentConfig());let it=this._intentStates.get(qt.cacheKey);it||(it=Object.create(null),this._intentStates.set(qt.cacheKey,it)),it.streamReaderCancelTimeout&&(clearTimeout(it.streamReaderCancelTimeout),it.streamReaderCancelTimeout=null);const At=!!(qt.renderingIntent&_util.RenderingIntentFlag.PRINT);it.displayReadyCapability||(it.displayReadyCapability=new _util.PromiseCapability,it.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(W=this._stats)==null||W.time("Page Request"),this._pumpOperatorList(qt));const Ot=at=>{var ot,rt;it.renderTasks.delete(tt),(this._maybeCleanupAfterRender||At)&&Wt(this,L,!0),xt(this,G,oi).call(this,!At),at?(tt.capability.reject(at),this._abortOperatorList({intentState:it,reason:at instanceof Error?at:new Error(at)})):tt.capability.resolve(),(ot=this._stats)==null||ot.timeEnd("Rendering"),(rt=this._stats)==null||rt.timeEnd("Overall")},tt=new InternalRenderTask({callback:Ot,params:{canvasContext:O,viewport:B,transform:K,background:lt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Et,operatorList:it.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!At,pdfBug:this._pdfBug,pageColors:Mt});(it.renderTasks||(it.renderTasks=new Set)).add(tt);const w=tt.task;return Promise.all([it.displayReadyCapability.promise,Gt]).then(([at,ot])=>{var rt;if(this.destroyed){Ot();return}(rt=this._stats)==null||rt.time("Rendering"),tt.initializeGraphics({transparency:at,optionalContentConfig:ot}),tt.operatorListChanged()}).catch(Ot),w}getOperatorList({intent:O="display",annotationMode:B=_util.AnnotationMode.ENABLE,printAnnotationStorage:ht=null}={}){var Et;function F(){lt.operatorList.lastChunk&&(lt.opListReadCapability.resolve(lt.operatorList),lt.renderTasks.delete(Gt))}const K=this._transport.getRenderingIntent(O,B,ht,!0);let lt=this._intentStates.get(K.cacheKey);lt||(lt=Object.create(null),this._intentStates.set(K.cacheKey,lt));let Gt;return lt.opListReadCapability||(Gt=Object.create(null),Gt.operatorListChanged=F,lt.opListReadCapability=new _util.PromiseCapability,(lt.renderTasks||(lt.renderTasks=new Set)).add(Gt),lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Et=this._stats)==null||Et.time("Page Request"),this._pumpOperatorList(K)),lt.opListReadCapability.promise}streamTextContent({includeMarkedContent:O=!1,disableNormalization:B=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:O===!0,disableNormalization:B===!0},{highWaterMark:100,size(F){return F.items.length}})}getTextContent(O={}){if(this._transport._htmlForXfa)return this.getXfa().then(ht=>_xfa_text.XfaText.textContent(ht));const B=this.streamTextContent(O);return new Promise(function(ht,F){function K(){lt.read().then(function({value:Et,done:Mt}){if(Mt){ht(Gt);return}Object.assign(Gt.styles,Et.styles),Gt.items.push(...Et.items),K()},F)}const lt=B.getReader(),Gt={items:[],styles:Object.create(null)};K()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const O=[];for(const B of this._intentStates.values())if(this._abortOperatorList({intentState:B,reason:new Error("Page was destroyed."),force:!0}),!B.opListReadCapability)for(const ht of B.renderTasks)O.push(ht.completed),ht.cancel();return this.objs.clear(),Wt(this,L,!1),xt(this,G,Ri).call(this),Promise.all(O)}cleanup(O=!1){Wt(this,L,!0);const B=xt(this,G,oi).call(this,!1);return O&&B&&this._stats&&(this._stats=new _display_utils.StatTimer),B}_startRenderPage(O,B){var F,K;const ht=this._intentStates.get(B);ht&&((F=this._stats)==null||F.timeEnd("Page Request"),(K=ht.displayReadyCapability)==null||K.resolve(O))}_renderPageChunk(O,B){for(let ht=0,F=O.length;ht<F;ht++)B.operatorList.fnArray.push(O.fnArray[ht]),B.operatorList.argsArray.push(O.argsArray[ht]);B.operatorList.lastChunk=O.lastChunk,B.operatorList.separateAnnots=O.separateAnnots;for(const ht of B.renderTasks)ht.operatorListChanged();O.lastChunk&&xt(this,G,oi).call(this,!0)}_pumpOperatorList({renderingIntent:O,cacheKey:B,annotationStorageSerializable:ht}){const{map:F,transfers:K}=ht,Gt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:O,cacheKey:B,annotationStorage:F},K).getReader(),Et=this._intentStates.get(B);Et.streamReader=Gt;const Mt=()=>{Gt.read().then(({value:yt,done:qt})=>{if(qt){Et.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(yt,Et),Mt())},yt=>{if(Et.streamReader=null,!this._transport.destroyed){if(Et.operatorList){Et.operatorList.lastChunk=!0;for(const qt of Et.renderTasks)qt.operatorListChanged();xt(this,G,oi).call(this,!0)}if(Et.displayReadyCapability)Et.displayReadyCapability.reject(yt);else if(Et.opListReadCapability)Et.opListReadCapability.reject(yt);else throw yt}})};Mt()}_abortOperatorList({intentState:O,reason:B,force:ht=!1}){if(O.streamReader){if(O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null),!ht){if(O.renderTasks.size>0)return;if(B instanceof _display_utils.RenderingCancelledException){let F=RENDERING_CANCELLED_TIMEOUT;B.extraDelay>0&&B.extraDelay<1e3&&(F+=B.extraDelay),O.streamReaderCancelTimeout=setTimeout(()=>{O.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:O,reason:B,force:!0})},F);return}}if(O.streamReader.cancel(new _util.AbortException(B.message)).catch(()=>{}),O.streamReader=null,!this._transport.destroyed){for(const[F,K]of this._intentStates)if(K===O){this._intentStates.delete(F);break}this.cleanup()}}}get stats(){return this._stats}}Tt=new WeakMap,L=new WeakMap,G=new WeakSet,oi=function(O=!1){if(xt(this,G,Ri).call(this),!y(this,L)||this.destroyed)return!1;if(O)return Wt(this,Tt,setTimeout(()=>{Wt(this,Tt,null),xt(this,G,oi).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:B,operatorList:ht}of this._intentStates.values())if(B.size>0||!ht.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Wt(this,L,!1),!0},Ri=function(){y(this,Tt)&&(clearTimeout(y(this,Tt)),Wt(this,Tt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){zt(this,$t,new Set);zt(this,mt,Promise.resolve())}postMessage(O,B){const ht={data:structuredClone(O,B?{transfer:B}:null)};y(this,mt).then(()=>{for(const F of y(this,$t))F.call(this,ht)})}addEventListener(O,B){y(this,$t).add(B)}removeEventListener(O,B){y(this,$t).delete(B)}terminate(){y(this,$t).clear()}}$t=new WeakMap,mt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const R=(st=document==null?void 0:document.currentScript)==null?void 0:st.src;R&&(PDFWorkerUtil.fallbackWorkerSrc=R.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(R,O){let B;try{if(B=new URL(R),!B.origin||B.origin==="null")return!1}catch{return!1}const ht=new URL(O,B);return B.origin===ht.origin},PDFWorkerUtil.createCDNWrapper=function(R){const O=`importScripts("${R}");`;return URL.createObjectURL(new Blob([O]))}}const _PDFWorker=class _PDFWorker{constructor({name:R=null,port:O=null,verbosity:B=(0,_util.getVerbosityLevel)()}={}){var ht;if(this.name=R,this.destroyed=!1,this.verbosity=B,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,O){if((ht=y(_PDFWorker,N))!=null&&ht.has(O))throw new Error("Cannot use more than one PDFWorker per port.");(y(_PDFWorker,N)||Wt(_PDFWorker,N,new WeakMap)).set(O,this),this._initializeFromPort(O);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(R){this._port=R,this._messageHandler=new _message_handler.MessageHandler("main","worker",R),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:R}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,R)||(R=PDFWorkerUtil.createCDNWrapper(new URL(R,window.location).href));const O=new Worker(R),B=new _message_handler.MessageHandler("main","worker",O),ht=()=>{O.removeEventListener("error",F),B.destroy(),O.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},F=()=>{this._webWorker||ht()};O.addEventListener("error",F),B.on("test",lt=>{if(O.removeEventListener("error",F),this.destroyed){ht();return}lt?(this._messageHandler=B,this._port=O,this._webWorker=O,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),B.destroy(),O.terminate())}),B.on("ready",lt=>{if(O.removeEventListener("error",F),this.destroyed){ht();return}try{K()}catch{this._setupFakeWorker()}});const K=()=>{const lt=new Uint8Array;B.send("test",lt,[lt.buffer])};K();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(R=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const O=new LoopbackPort;this._port=O;const B=`fake${PDFWorkerUtil.fakeWorkerId++}`,ht=new _message_handler.MessageHandler(B+"_worker",B,O);R.setup(ht,O);const F=new _message_handler.MessageHandler(B,B+"_worker",O);this._messageHandler=F,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})}).catch(R=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${R.message}".`))})}destroy(){var R;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(R=y(_PDFWorker,N))==null||R.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(R){var B;if(!(R!=null&&R.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const O=(B=y(this,N))==null?void 0:B.get(R.port);if(O){if(O._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return O}return new _PDFWorker(R)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var R;try{return((R=globalThis.pdfjsWorker)==null?void 0:R.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};N=new WeakMap,zt(_PDFWorker,N);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(O,B,ht,F,K){zt(this,et);zt(this,gt,new Map);zt(this,ct,new Map);zt(this,X,new Map);zt(this,V,null);this.messageHandler=O,this.loadingTask=B,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:F.ownerDocument,styleElement:F.styleElement}),this._params=F,this.canvasFactory=K.canvasFactory,this.filterFactory=K.filterFactory,this.cMapReaderFactory=K.cMapReaderFactory,this.standardFontDataFactory=K.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ht,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(O,B=_util.AnnotationMode.ENABLE,ht=null,F=!1){let K=_util.RenderingIntentFlag.DISPLAY,lt=_annotation_storage.SerializableEmpty;switch(O){case"any":K=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":K=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${O}`)}switch(B){case _util.AnnotationMode.DISABLE:K+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:K+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:K+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,lt=(K&_util.RenderingIntentFlag.PRINT&&ht instanceof _annotation_storage.PrintAnnotationStorage?ht:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${B}`)}return F&&(K+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:K,cacheKey:`${K}_${lt.hash}`,annotationStorageSerializable:lt}}destroy(){var ht;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(ht=y(this,V))==null||ht.reject(new Error("Worker was destroyed during onPassword callback"));const O=[];for(const F of y(this,ct).values())O.push(F._destroy());y(this,ct).clear(),y(this,X).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const B=this.messageHandler.sendWithPromise("Terminate",null);return O.push(B),Promise.all(O).then(()=>{var F;this.commonObjs.clear(),this.fontLoader.clear(),y(this,gt).clear(),this.filterFactory.destroy(),(F=this._networkStream)==null||F.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:O,loadingTask:B}=this;O.on("GetReader",(ht,F)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=K=>{this._lastProgress={loaded:K.loaded,total:K.total}},F.onPull=()=>{this._fullReader.read().then(function({value:K,done:lt}){if(lt){F.close();return}(0,_util.assert)(K instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),F.enqueue(new Uint8Array(K),1,[K])}).catch(K=>{F.error(K)})},F.onCancel=K=>{this._fullReader.cancel(K),F.ready.catch(lt=>{if(!this.destroyed)throw lt})}}),O.on("ReaderHeadersReady",ht=>{const F=new _util.PromiseCapability,K=this._fullReader;return K.headersReady.then(()=>{var lt;(!K.isStreamingSupported||!K.isRangeSupported)&&(this._lastProgress&&((lt=B.onProgress)==null||lt.call(B,this._lastProgress)),K.onProgress=Gt=>{var Et;(Et=B.onProgress)==null||Et.call(B,{loaded:Gt.loaded,total:Gt.total})}),F.resolve({isStreamingSupported:K.isStreamingSupported,isRangeSupported:K.isRangeSupported,contentLength:K.contentLength})},F.reject),F.promise}),O.on("GetRangeReader",(ht,F)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const K=this._networkStream.getRangeReader(ht.begin,ht.end);if(!K){F.close();return}F.onPull=()=>{K.read().then(function({value:lt,done:Gt}){if(Gt){F.close();return}(0,_util.assert)(lt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),F.enqueue(new Uint8Array(lt),1,[lt])}).catch(lt=>{F.error(lt)})},F.onCancel=lt=>{K.cancel(lt),F.ready.catch(Gt=>{if(!this.destroyed)throw Gt})}}),O.on("GetDoc",({pdfInfo:ht})=>{this._numPages=ht.numPages,this._htmlForXfa=ht.htmlForXfa,delete ht.htmlForXfa,B._capability.resolve(new PDFDocumentProxy(ht,this))}),O.on("DocException",function(ht){let F;switch(ht.name){case"PasswordException":F=new _util.PasswordException(ht.message,ht.code);break;case"InvalidPDFException":F=new _util.InvalidPDFException(ht.message);break;case"MissingPDFException":F=new _util.MissingPDFException(ht.message);break;case"UnexpectedResponseException":F=new _util.UnexpectedResponseException(ht.message,ht.status);break;case"UnknownErrorException":F=new _util.UnknownErrorException(ht.message,ht.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}B._capability.reject(F)}),O.on("PasswordRequest",ht=>{if(Wt(this,V,new _util.PromiseCapability),B.onPassword){const F=K=>{K instanceof Error?y(this,V).reject(K):y(this,V).resolve({password:K})};try{B.onPassword(F,ht.code)}catch(K){y(this,V).reject(K)}}else y(this,V).reject(new _util.PasswordException(ht.message,ht.code));return y(this,V).promise}),O.on("DataLoaded",ht=>{var F;(F=B.onProgress)==null||F.call(B,{loaded:ht.length,total:ht.length}),this.downloadInfoCapability.resolve(ht)}),O.on("StartRenderPage",ht=>{if(this.destroyed)return;y(this,ct).get(ht.pageIndex)._startRenderPage(ht.transparency,ht.cacheKey)}),O.on("commonobj",([ht,F,K])=>{var lt;if(!this.destroyed&&!this.commonObjs.has(ht))switch(F){case"Font":const Gt=this._params;if("error"in K){const yt=K.error;(0,_util.warn)(`Error during font loading: ${yt}`),this.commonObjs.resolve(ht,yt);break}const Et=Gt.pdfBug&&((lt=globalThis.FontInspector)!=null&&lt.enabled)?(yt,qt)=>globalThis.FontInspector.fontAdded(yt,qt):null,Mt=new _font_loader.FontFaceObject(K,{isEvalSupported:Gt.isEvalSupported,disableFontFace:Gt.disableFontFace,ignoreErrors:Gt.ignoreErrors,inspectFont:Et});this.fontLoader.bind(Mt).catch(yt=>O.sendWithPromise("FontFallback",{id:ht})).finally(()=>{!Gt.fontExtraProperties&&Mt.data&&(Mt.data=null),this.commonObjs.resolve(ht,Mt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ht,K);break;default:throw new Error(`Got unknown common object type ${F}`)}}),O.on("obj",([ht,F,K,lt])=>{var Et;if(this.destroyed)return;const Gt=y(this,ct).get(F);if(!Gt.objs.has(ht))switch(K){case"Image":if(Gt.objs.resolve(ht,lt),lt){let Mt;if(lt.bitmap){const{width:yt,height:qt}=lt;Mt=yt*qt*4}else Mt=((Et=lt.data)==null?void 0:Et.length)||0;Mt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Gt._maybeCleanupAfterRender=!0)}break;case"Pattern":Gt.objs.resolve(ht,lt);break;default:throw new Error(`Got unknown object type ${K}`)}}),O.on("DocProgress",ht=>{var F;this.destroyed||(F=B.onProgress)==null||F.call(B,{loaded:ht.loaded,total:ht.total})}),O.on("FetchBuiltInCMap",ht=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(ht):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),O.on("FetchStandardFontData",ht=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(ht):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ht;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:O,transfers:B}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:O,filename:((ht=this._fullReader)==null?void 0:ht.filename)??null},B).finally(()=>{this.annotationStorage.resetModified()})}getPage(O){if(!Number.isInteger(O)||O<=0||O>this._numPages)return Promise.reject(new Error("Invalid page request."));const B=O-1,ht=y(this,X).get(B);if(ht)return ht;const F=this.messageHandler.sendWithPromise("GetPage",{pageIndex:B}).then(K=>{if(this.destroyed)throw new Error("Transport destroyed");const lt=new PDFPageProxy(B,K,this,this._params.pdfBug);return y(this,ct).set(B,lt),lt});return y(this,X).set(B,F),F}getPageIndex(O){return typeof O!="object"||O===null||!Number.isInteger(O.num)||O.num<0||!Number.isInteger(O.gen)||O.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:O.num,gen:O.gen})}getAnnotations(O,B){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:O,intent:B})}getFieldObjects(){return xt(this,et,Mi).call(this,"GetFieldObjects")}hasJSActions(){return xt(this,et,Mi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(O){return typeof O!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:O})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return xt(this,et,Mi).call(this,"GetDocJSActions")}getPageJSActions(O){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:O})}getStructTree(O){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:O})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(O=>new _optional_content_config.OptionalContentConfig(O))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const O="GetMetadata",B=y(this,gt).get(O);if(B)return B;const ht=this.messageHandler.sendWithPromise(O,null).then(F=>{var K,lt;return{info:F[0],metadata:F[1]?new _metadata.Metadata(F[1]):null,contentDispositionFilename:((K=this._fullReader)==null?void 0:K.filename)??null,contentLength:((lt=this._fullReader)==null?void 0:lt.contentLength)??null}});return y(this,gt).set(O,ht),ht}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(O=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const B of y(this,ct).values())if(!B.cleanup())throw new Error(`startCleanup: Page ${B.pageNumber} is currently rendering.`);this.commonObjs.clear(),O||this.fontLoader.clear(),y(this,gt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:O,enableXfa:B}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:O,enableXfa:B})}}gt=new WeakMap,ct=new WeakMap,X=new WeakMap,V=new WeakMap,et=new WeakSet,Mi=function(O,B=null){const ht=y(this,gt).get(O);if(ht)return ht;const F=this.messageHandler.sendWithPromise(O,B);return y(this,gt).set(O,F),F};class PDFObjects{constructor(){zt(this,Y);zt(this,U,Object.create(null))}get(O,B=null){if(B){const F=xt(this,Y,ir).call(this,O);return F.capability.promise.then(()=>B(F.data)),null}const ht=y(this,U)[O];if(!(ht!=null&&ht.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${O}.`);return ht.data}has(O){const B=y(this,U)[O];return(B==null?void 0:B.capability.settled)||!1}resolve(O,B=null){const ht=xt(this,Y,ir).call(this,O);ht.data=B,ht.capability.resolve()}clear(){var O;for(const B in y(this,U)){const{data:ht}=y(this,U)[B];(O=ht==null?void 0:ht.bitmap)==null||O.close()}Wt(this,U,Object.create(null))}}U=new WeakMap,Y=new WeakSet,ir=function(O){var B;return(B=y(this,U))[O]||(B[O]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(O){zt(this,J,null);Wt(this,J,O),this.onContinue=null}get promise(){return y(this,J).capability.promise}cancel(O=0){y(this,J).cancel(null,O)}get separateAnnots(){const{separateAnnots:O}=y(this,J).operatorList;if(!O)return!1;const{annotationCanvasMap:B}=y(this,J);return O.form||O.canvas&&(B==null?void 0:B.size)>0}}J=new WeakMap,exports.RenderTask=RenderTask;const j=class j{constructor({callback:O,params:B,objs:ht,commonObjs:F,annotationCanvasMap:K,operatorList:lt,pageIndex:Gt,canvasFactory:Et,filterFactory:Mt,useRequestAnimationFrame:yt=!1,pdfBug:qt=!1,pageColors:it=null}){this.callback=O,this.params=B,this.objs=ht,this.commonObjs=F,this.annotationCanvasMap=K,this.operatorListIdx=null,this.operatorList=lt,this._pageIndex=Gt,this.canvasFactory=Et,this.filterFactory=Mt,this._pdfBug=qt,this.pageColors=it,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=yt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=B.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:O=!1,optionalContentConfig:B}){var Gt,Et;if(this.cancelled)return;if(this._canvas){if(y(j,x).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");y(j,x).add(this._canvas)}this._pdfBug&&((Gt=globalThis.StepperManager)!=null&&Gt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:ht,viewport:F,transform:K,background:lt}=this.params;this.gfx=new _canvas.CanvasGraphics(ht,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:B},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:K,viewport:F,transparency:O,background:lt}),this.operatorListIdx=0,this.graphicsReady=!0,(Et=this.graphicsReadyCallback)==null||Et.call(this)}cancel(O=null,B=0){var ht;this.running=!1,this.cancelled=!0,(ht=this.gfx)==null||ht.endDrawing(),y(j,x).delete(this._canvas),this.callback(O||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,B))}operatorListChanged(){var O;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(O=this.stepper)==null||O.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),y(j,x).delete(this._canvas),this.callback())))}};x=new WeakMap,zt(j,x,new WeakSet);let InternalRenderTask=j;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(T,D,Tt)=>{var st,N,gt,ns,X;Object.defineProperty(D,"__esModule",{value:!0}),D.SerializableEmpty=D.PrintAnnotationStorage=D.AnnotationStorage=void 0;var L=Tt(1),G=Tt(4),_=Tt(8);const vt=Object.freeze({map:null,hash:"",transfers:void 0});D.SerializableEmpty=vt;class $t{constructor(){zt(this,gt);zt(this,st,!1);zt(this,N,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(et,q){const U=y(this,N).get(et);return U===void 0?q:Object.assign(q,U)}getRawValue(et){return y(this,N).get(et)}remove(et){if(y(this,N).delete(et),y(this,N).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const q of y(this,N).values())if(q instanceof G.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(et,q){const U=y(this,N).get(et);let Y=!1;if(U!==void 0)for(const[dt,J]of Object.entries(q))U[dt]!==J&&(Y=!0,U[dt]=J);else Y=!0,y(this,N).set(et,q);Y&&xt(this,gt,ns).call(this),q instanceof G.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(q.constructor._type)}has(et){return y(this,N).has(et)}getAll(){return y(this,N).size>0?(0,L.objectFromMap)(y(this,N)):null}setAll(et){for(const[q,U]of Object.entries(et))this.setValue(q,U)}get size(){return y(this,N).size}resetModified(){y(this,st)&&(Wt(this,st,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new mt(this)}get serializable(){if(y(this,N).size===0)return vt;const et=new Map,q=new _.MurmurHash3_64,U=[],Y=Object.create(null);let dt=!1;for(const[J,x]of y(this,N)){const j=x instanceof G.AnnotationEditor?x.serialize(!1,Y):x;j&&(et.set(J,j),q.update(`${J}:${JSON.stringify(j)}`),dt||(dt=!!j.bitmap))}if(dt)for(const J of et.values())J.bitmap&&U.push(J.bitmap);return et.size>0?{map:et,hash:q.hexdigest(),transfers:U}:vt}}st=new WeakMap,N=new WeakMap,gt=new WeakSet,ns=function(){y(this,st)||(Wt(this,st,!0),typeof this.onSetModified=="function"&&this.onSetModified())},D.AnnotationStorage=$t;class mt extends $t{constructor(q){super();zt(this,X);const{map:U,hash:Y,transfers:dt}=q.serializable,J=structuredClone(U,dt?{transfer:dt}:null);Wt(this,X,{map:J,hash:Y,transfers:dt})}get print(){(0,L.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return y(this,X)}}X=new WeakMap,D.PrintAnnotationStorage=mt},(T,D,Tt)=>{var mt,st,N,gt,ct,X,V,et,q,U,Y,dt,J,x,j,rr,sr,B,ar,or,is,rs,ss,lr,as;Object.defineProperty(D,"__esModule",{value:!0}),D.AnnotationEditor=void 0;var L=Tt(5),G=Tt(1),_=Tt(6);const yt=class yt{constructor(it){zt(this,j);zt(this,mt,"");zt(this,st,!1);zt(this,N,null);zt(this,gt,null);zt(this,ct,null);zt(this,X,!1);zt(this,V,null);zt(this,et,this.focusin.bind(this));zt(this,q,this.focusout.bind(this));zt(this,U,!1);zt(this,Y,!1);zt(this,dt,!1);yn(this,"_initialOptions",Object.create(null));yn(this,"_uiManager",null);yn(this,"_focusEventsAllowed",!0);yn(this,"_l10nPromise",null);zt(this,J,!1);zt(this,x,yt._zIndex++);this.constructor===yt&&(0,G.unreachable)("Cannot initialize AnnotationEditor."),this.parent=it.parent,this.id=it.id,this.width=this.height=null,this.pageIndex=it.parent.pageIndex,this.name=it.name,this.div=null,this._uiManager=it.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=it.isCentered,this._structTreeParentId=null;const{rotation:At,rawDims:{pageWidth:Ot,pageHeight:tt,pageX:w,pageY:P}}=this.parent.viewport;this.rotation=At,this.pageRotation=(360+At-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Ot,tt],this.pageTranslation=[w,P];const[W,at]=this.parentDimensions;this.x=it.x/W,this.y=it.y/at,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,G.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(it){const At=new $t({id:it.parent.getNextId(),parent:it.parent,uiManager:it._uiManager});At.annotationElementId=it.annotationElementId,At.deleted=!0,At._uiManager.addToAnnotationStorage(At)}static initialize(it,At=null){if(yt._l10nPromise||(yt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(tt=>[tt,it.get(tt)]))),At!=null&&At.strings)for(const tt of At.strings)yt._l10nPromise.set(tt,it.get(tt));if(yt._borderLineWidth!==-1)return;const Ot=getComputedStyle(document.documentElement);yt._borderLineWidth=parseFloat(Ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(it,At){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(it){return!1}static paste(it,At){(0,G.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return y(this,J)}set _isDraggable(it){var At;Wt(this,J,it),(At=this.div)==null||At.classList.toggle("draggable",it)}center(){const[it,At]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*At/(it*2),this.y+=this.width*it/(At*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*At/(it*2),this.y-=this.width*it/(At*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(it){this._uiManager.addCommands(it)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=y(this,x)}setParent(it){it!==null&&(this.pageIndex=it.pageIndex,this.pageDimensions=it.pageDimensions),this.parent=it}focusin(it){this._focusEventsAllowed&&(y(this,U)?Wt(this,U,!1):this.parent.setSelected(this))}focusout(it){var Ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const At=it.relatedTarget;At!=null&&At.closest(`#${this.id}`)||(it.preventDefault(),(Ot=this.parent)!=null&&Ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(it,At,Ot,tt){const[w,P]=this.parentDimensions;[Ot,tt]=this.screenToPageTranslation(Ot,tt),this.x=(it+Ot)/w,this.y=(At+tt)/P,this.fixAndSetPosition()}translate(it,At){xt(this,j,rr).call(this,this.parentDimensions,it,At)}translateInPage(it,At){xt(this,j,rr).call(this,this.pageDimensions,it,At),this.div.scrollIntoView({block:"nearest"})}drag(it,At){const[Ot,tt]=this.parentDimensions;if(this.x+=it/Ot,this.y+=At/tt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:rt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,rt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:w,y:P}=this;const[W,at]=xt(this,j,sr).call(this);w+=W,P+=at,this.div.style.left=`${(100*w).toFixed(2)}%`,this.div.style.top=`${(100*P).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[it,At]=this.pageDimensions;let{x:Ot,y:tt,width:w,height:P}=this;switch(w*=it,P*=At,Ot*=it,tt*=At,this.rotation){case 0:Ot=Math.max(0,Math.min(it-w,Ot)),tt=Math.max(0,Math.min(At-P,tt));break;case 90:Ot=Math.max(0,Math.min(it-P,Ot)),tt=Math.min(At,Math.max(w,tt));break;case 180:Ot=Math.min(it,Math.max(w,Ot)),tt=Math.min(At,Math.max(P,tt));break;case 270:Ot=Math.min(it,Math.max(P,Ot)),tt=Math.max(0,Math.min(At-w,tt));break}this.x=Ot/=it,this.y=tt/=At;const[W,at]=xt(this,j,sr).call(this);Ot+=W,tt+=at;const{style:ot}=this.div;ot.left=`${(100*Ot).toFixed(2)}%`,ot.top=`${(100*tt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(it,At){var Ot;return xt(Ot=yt,B,ar).call(Ot,it,At,this.parentRotation)}pageTranslationToScreen(it,At){var Ot;return xt(Ot=yt,B,ar).call(Ot,it,At,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:it,pageDimensions:[At,Ot]}=this,tt=At*it,w=Ot*it;return G.FeatureTest.isCSSRoundSupported?[Math.round(tt),Math.round(w)]:[tt,w]}setDims(it,At){var w;const[Ot,tt]=this.parentDimensions;this.div.style.width=`${(100*it/Ot).toFixed(2)}%`,y(this,X)||(this.div.style.height=`${(100*At/tt).toFixed(2)}%`),(w=y(this,N))==null||w.classList.toggle("small",it<yt.SMALL_EDITOR_SIZE||At<yt.SMALL_EDITOR_SIZE)}fixDims(){const{style:it}=this.div,{height:At,width:Ot}=it,tt=Ot.endsWith("%"),w=!y(this,X)&&At.endsWith("%");if(tt&&w)return;const[P,W]=this.parentDimensions;tt||(it.width=`${(100*parseFloat(Ot)/P).toFixed(2)}%`),!y(this,X)&&!w&&(it.height=`${(100*parseFloat(At)/W).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(y(this,N))return;const it=Wt(this,N,document.createElement("button"));it.className="altText";const At=await yt._l10nPromise.get("editor_alt_text_button_label");it.textContent=At,it.setAttribute("aria-label",At),it.tabIndex="0",it.addEventListener("contextmenu",_.noContextMenu),it.addEventListener("pointerdown",Ot=>Ot.stopPropagation()),it.addEventListener("click",Ot=>{Ot.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),it.addEventListener("keydown",Ot=>{Ot.target===it&&Ot.key==="Enter"&&(Ot.preventDefault(),this._uiManager.editAltText(this))}),xt(this,j,lr).call(this),this.div.append(it),yt.SMALL_EDITOR_SIZE||(yt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(it.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:y(this,mt),decorative:y(this,st)}}set altTextData({altText:it,decorative:At}){y(this,mt)===it&&y(this,st)===At||(Wt(this,mt,it),Wt(this,st,At),xt(this,j,lr).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",y(this,et)),this.div.addEventListener("focusout",y(this,q));const[it,At]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*At/it).toFixed(2)}%`,this.div.style.maxHeight=`${(100*it/At).toFixed(2)}%`);const[Ot,tt]=this.getInitialTranslation();return this.translate(Ot,tt),(0,L.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(it){const{isMac:At}=G.FeatureTest.platform;if(it.button!==0||it.ctrlKey&&At){it.preventDefault();return}Wt(this,U,!0),xt(this,j,as).call(this,it)}moveInDOM(){var it;(it=this.parent)==null||it.moveEditorInDOM(this)}_setParentAndPosition(it,At,Ot){it.changeParent(this),this.x=At,this.y=Ot,this.fixAndSetPosition()}getRect(it,At){const Ot=this.parentScale,[tt,w]=this.pageDimensions,[P,W]=this.pageTranslation,at=it/Ot,ot=At/Ot,rt=this.x*tt,Pt=this.y*w,Vt=this.width*tt,Kt=this.height*w;switch(this.rotation){case 0:return[rt+at+P,w-Pt-ot-Kt+W,rt+at+Vt+P,w-Pt-ot+W];case 90:return[rt+ot+P,w-Pt+at+W,rt+ot+Kt+P,w-Pt+at+Vt+W];case 180:return[rt-at-Vt+P,w-Pt+ot+W,rt-at+P,w-Pt+ot+Kt+W];case 270:return[rt-ot-Kt+P,w-Pt-at-Vt+W,rt-ot+P,w-Pt-at+W];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(it,At){const[Ot,tt,w,P]=it,W=w-Ot,at=P-tt;switch(this.rotation){case 0:return[Ot,At-P,W,at];case 90:return[Ot,At-tt,at,W];case 180:return[w,At-tt,W,at];case 270:return[w,At-P,at,W];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Wt(this,dt,!0)}disableEditMode(){Wt(this,dt,!1)}isInEditMode(){return y(this,dt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var it,At;(it=this.div)==null||it.addEventListener("focusin",y(this,et)),(At=this.div)==null||At.addEventListener("focusout",y(this,q))}serialize(it=!1,At=null){(0,G.unreachable)("An editor must be serializable")}static deserialize(it,At,Ot){const tt=new this.prototype.constructor({parent:At,id:At.getNextId(),uiManager:Ot});tt.rotation=it.rotation;const[w,P]=tt.pageDimensions,[W,at,ot,rt]=tt.getRectInCurrentCoords(it.rect,P);return tt.x=W/w,tt.y=at/P,tt.width=ot/w,tt.height=rt/P,tt}remove(){var it;this.div.removeEventListener("focusin",y(this,et)),this.div.removeEventListener("focusout",y(this,q)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(it=y(this,N))==null||it.remove(),Wt(this,N,null),Wt(this,gt,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(xt(this,j,is).call(this),y(this,V).classList.remove("hidden"))}select(){var it;this.makeResizable(),(it=this.div)==null||it.classList.add("selectedEditor")}unselect(){var it,At,Ot;(it=y(this,V))==null||it.classList.add("hidden"),(At=this.div)==null||At.classList.remove("selectedEditor"),(Ot=this.div)!=null&&Ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(it,At){}disableEditing(){y(this,N)&&(y(this,N).hidden=!0)}enableEditing(){y(this,N)&&(y(this,N).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return y(this,Y)}set isEditing(it){Wt(this,Y,it),this.parent&&(it?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(it,At){Wt(this,X,!0);const Ot=it/At,{style:tt}=this.div;tt.aspectRatio=Ot,tt.height="auto"}static get MIN_SIZE(){return 16}};mt=new WeakMap,st=new WeakMap,N=new WeakMap,gt=new WeakMap,ct=new WeakMap,X=new WeakMap,V=new WeakMap,et=new WeakMap,q=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,J=new WeakMap,x=new WeakMap,j=new WeakSet,rr=function([it,At],Ot,tt){[Ot,tt]=this.screenToPageTranslation(Ot,tt),this.x+=Ot/it,this.y+=tt/At,this.fixAndSetPosition()},sr=function(){const[it,At]=this.parentDimensions,{_borderLineWidth:Ot}=yt,tt=Ot/it,w=Ot/At;switch(this.rotation){case 90:return[-tt,w];case 180:return[tt,w];case 270:return[tt,-w];default:return[-tt,-w]}},B=new WeakSet,ar=function(it,At,Ot){switch(Ot){case 90:return[At,-it];case 180:return[-it,-At];case 270:return[-At,it];default:return[it,At]}},or=function(it){switch(it){case 90:{const[At,Ot]=this.pageDimensions;return[0,-At/Ot,Ot/At,0]}case 180:return[-1,0,0,-1];case 270:{const[At,Ot]=this.pageDimensions;return[0,At/Ot,-Ot/At,0]}default:return[1,0,0,1]}},is=function(){if(y(this,V))return;Wt(this,V,document.createElement("div")),y(this,V).classList.add("resizers");const it=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||it.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const At of it){const Ot=document.createElement("div");y(this,V).append(Ot),Ot.classList.add("resizer",At),Ot.addEventListener("pointerdown",xt(this,j,rs).bind(this,At)),Ot.addEventListener("contextmenu",_.noContextMenu)}this.div.prepend(y(this,V))},rs=function(it,At){At.preventDefault();const{isMac:Ot}=G.FeatureTest.platform;if(At.button!==0||At.ctrlKey&&Ot)return;const tt=xt(this,j,ss).bind(this,it),w=this._isDraggable;this._isDraggable=!1;const P={passive:!0,capture:!0};window.addEventListener("pointermove",tt,P);const W=this.x,at=this.y,ot=this.width,rt=this.height,Pt=this.parent.div.style.cursor,Vt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(At.target).cursor;const Kt=()=>{this._isDraggable=w,window.removeEventListener("pointerup",Kt),window.removeEventListener("blur",Kt),window.removeEventListener("pointermove",tt,P),this.parent.div.style.cursor=Pt,this.div.style.cursor=Vt;const Zt=this.x,te=this.y,re=this.width,se=this.height;Zt===W&&te===at&&re===ot&&se===rt||this.addCommands({cmd:()=>{this.width=re,this.height=se,this.x=Zt,this.y=te;const[Nt,jt]=this.parentDimensions;this.setDims(Nt*re,jt*se),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=rt,this.x=W,this.y=at;const[Nt,jt]=this.parentDimensions;this.setDims(Nt*ot,jt*rt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Kt),window.addEventListener("blur",Kt)},ss=function(it,At){const[Ot,tt]=this.parentDimensions,w=this.x,P=this.y,W=this.width,at=this.height,ot=yt.MIN_SIZE/Ot,rt=yt.MIN_SIZE/tt,Pt=Ae=>Math.round(Ae*1e4)/1e4,Vt=xt(this,j,or).call(this,this.rotation),Kt=(Ae,Re)=>[Vt[0]*Ae+Vt[2]*Re,Vt[1]*Ae+Vt[3]*Re],Zt=xt(this,j,or).call(this,360-this.rotation),te=(Ae,Re)=>[Zt[0]*Ae+Zt[2]*Re,Zt[1]*Ae+Zt[3]*Re];let re,se,Nt=!1,jt=!1;switch(it){case"topLeft":Nt=!0,re=(Ae,Re)=>[0,0],se=(Ae,Re)=>[Ae,Re];break;case"topMiddle":re=(Ae,Re)=>[Ae/2,0],se=(Ae,Re)=>[Ae/2,Re];break;case"topRight":Nt=!0,re=(Ae,Re)=>[Ae,0],se=(Ae,Re)=>[0,Re];break;case"middleRight":jt=!0,re=(Ae,Re)=>[Ae,Re/2],se=(Ae,Re)=>[0,Re/2];break;case"bottomRight":Nt=!0,re=(Ae,Re)=>[Ae,Re],se=(Ae,Re)=>[0,0];break;case"bottomMiddle":re=(Ae,Re)=>[Ae/2,Re],se=(Ae,Re)=>[Ae/2,0];break;case"bottomLeft":Nt=!0,re=(Ae,Re)=>[0,Re],se=(Ae,Re)=>[Ae,0];break;case"middleLeft":jt=!0,re=(Ae,Re)=>[0,Re/2],se=(Ae,Re)=>[Ae,Re/2];break}const $=re(W,at),ut=se(W,at);let Rt=Kt(...ut);const Ht=Pt(w+Rt[0]),Jt=Pt(P+Rt[1]);let ae=1,ne=1,[kt,ge]=this.screenToPageTranslation(At.movementX,At.movementY);if([kt,ge]=te(kt/Ot,ge/tt),Nt){const Ae=Math.hypot(W,at);ae=ne=Math.max(Math.min(Math.hypot(ut[0]-$[0]-kt,ut[1]-$[1]-ge)/Ae,1/W,1/at),ot/W,rt/at)}else jt?ae=Math.max(ot,Math.min(1,Math.abs(ut[0]-$[0]-kt)))/W:ne=Math.max(rt,Math.min(1,Math.abs(ut[1]-$[1]-ge)))/at;const he=Pt(W*ae),ze=Pt(at*ne);Rt=Kt(...se(he,ze));const Ie=Ht-Rt[0],Qe=Jt-Rt[1];this.width=he,this.height=ze,this.x=Ie,this.y=Qe,this.setDims(Ot*he,tt*ze),this.fixAndSetPosition()},lr=async function(){var Ot;const it=y(this,N);if(!it)return;if(!y(this,mt)&&!y(this,st)){it.classList.remove("done"),(Ot=y(this,gt))==null||Ot.remove();return}yt._l10nPromise.get("editor_alt_text_edit_button_label").then(tt=>{it.setAttribute("aria-label",tt)});let At=y(this,gt);if(!At){Wt(this,gt,At=document.createElement("span")),At.className="tooltip",At.setAttribute("role","tooltip");const tt=At.id=`alt-text-tooltip-${this.id}`;it.setAttribute("aria-describedby",tt);const w=100;it.addEventListener("mouseenter",()=>{Wt(this,ct,setTimeout(()=>{Wt(this,ct,null),y(this,gt).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},w))}),it.addEventListener("mouseleave",()=>{var P;clearTimeout(y(this,ct)),Wt(this,ct,null),(P=y(this,gt))==null||P.classList.remove("show")})}it.classList.add("done"),At.innerText=y(this,st)?await yt._l10nPromise.get("editor_alt_text_decorative_tooltip"):y(this,mt),At.parentNode||it.append(At)},as=function(it){if(!this._isDraggable)return;const At=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Ot,tt;At&&(Ot={passive:!0,capture:!0},tt=P=>{const[W,at]=this.screenToPageTranslation(P.movementX,P.movementY);this._uiManager.dragSelectedEditors(W,at)},window.addEventListener("pointermove",tt,Ot));const w=()=>{if(window.removeEventListener("pointerup",w),window.removeEventListener("blur",w),At&&window.removeEventListener("pointermove",tt,Ot),Wt(this,U,!1),!this._uiManager.endDragSession()){const{isMac:P}=G.FeatureTest.platform;it.ctrlKey&&!P||it.shiftKey||it.metaKey&&P?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",w),window.addEventListener("blur",w)},zt(yt,B),yn(yt,"_borderLineWidth",-1),yn(yt,"_colorManager",new L.ColorManager),yn(yt,"_zIndex",1),yn(yt,"SMALL_EDITOR_SIZE",0);let vt=yt;D.AnnotationEditor=vt;class $t extends vt{constructor(it){super(it),this.annotationElementId=it.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(T,D,Tt)=>{var X,V,et,q,U,cr,J,x,j,R,O,os,F,K,lt,Gt,Et,Mt,yt,qt,it,At,Ot,tt,w,P,W,at,ot,rt,Pt,Vt,Kt,Zt,te,re,se,Nt,jt,$,ut,Rt,Ht,Jt,ae,ne,kt,ls,ur,hr,Fi,dr,fr,zn,gi,cs,us,pr,mi,gr;Object.defineProperty(D,"__esModule",{value:!0}),D.KeyboardManager=D.CommandManager=D.ColorManager=D.AnnotationEditorUIManager=void 0,D.bindEvents=_,D.opacityToHex=vt;var L=Tt(1),G=Tt(6);function _(De,ft,Qt){for(const pe of Qt)ft.addEventListener(pe,De[pe].bind(De))}function vt(De){return Math.round(Math.min(255,Math.max(1,255*De))).toString(16).padStart(2,"0")}class $t{constructor(){zt(this,X,0)}getId(){return`${L.AnnotationEditorPrefix}${pi(this,X)._++}`}}X=new WeakMap;const dt=class dt{constructor(){zt(this,U);zt(this,V,(0,L.getUuid)());zt(this,et,0);zt(this,q,null)}static get _isSVGFittingCanvas(){const ft='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pe=new OffscreenCanvas(1,3).getContext("2d"),Ce=new Image;Ce.src=ft;const xe=Ce.decode().then(()=>(pe.drawImage(Ce,0,0,1,1,0,0,1,3),new Uint32Array(pe.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,L.shadow)(this,"_isSVGFittingCanvas",xe)}async getFromFile(ft){const{lastModified:Qt,name:pe,size:Ce,type:xe}=ft;return xt(this,U,cr).call(this,`${Qt}_${pe}_${Ce}_${xe}`,ft)}async getFromUrl(ft){return xt(this,U,cr).call(this,ft,ft)}async getFromId(ft){y(this,q)||Wt(this,q,new Map);const Qt=y(this,q).get(ft);return Qt?Qt.bitmap?(Qt.refCounter+=1,Qt):Qt.file?this.getFromFile(Qt.file):this.getFromUrl(Qt.url):null}getSvgUrl(ft){const Qt=y(this,q).get(ft);return Qt!=null&&Qt.isSvg?Qt.svgUrl:null}deleteId(ft){y(this,q)||Wt(this,q,new Map);const Qt=y(this,q).get(ft);Qt&&(Qt.refCounter-=1,Qt.refCounter===0&&(Qt.bitmap=null))}isValidId(ft){return ft.startsWith(`image_${y(this,V)}_`)}};V=new WeakMap,et=new WeakMap,q=new WeakMap,U=new WeakSet,cr=async function(ft,Qt){y(this,q)||Wt(this,q,new Map);let pe=y(this,q).get(ft);if(pe===null)return null;if(pe!=null&&pe.bitmap)return pe.refCounter+=1,pe;try{pe||(pe={bitmap:null,id:`image_${y(this,V)}_${pi(this,et)._++}`,refCounter:0,isSvg:!1});let Ce;if(typeof Qt=="string"){pe.url=Qt;const xe=await fetch(Qt);if(!xe.ok)throw new Error(xe.statusText);Ce=await xe.blob()}else Ce=pe.file=Qt;if(Ce.type==="image/svg+xml"){const xe=dt._isSVGFittingCanvas,_e=new FileReader,nt=new Image,Q=new Promise((wt,Xt)=>{nt.onload=()=>{pe.bitmap=nt,pe.isSvg=!0,wt()},_e.onload=async()=>{const Yt=pe.svgUrl=_e.result;nt.src=await xe?`${Yt}#svgView(preserveAspectRatio(none))`:Yt},nt.onerror=_e.onerror=Xt});_e.readAsDataURL(Ce),await Q}else pe.bitmap=await createImageBitmap(Ce);pe.refCounter=1}catch(Ce){console.error(Ce),pe=null}return y(this,q).set(ft,pe),pe&&y(this,q).set(pe.id,pe),pe};let mt=dt;class st{constructor(ft=128){zt(this,J,[]);zt(this,x,!1);zt(this,j);zt(this,R,-1);Wt(this,j,ft)}add({cmd:ft,undo:Qt,mustExec:pe,type:Ce=NaN,overwriteIfSameType:xe=!1,keepUndo:_e=!1}){if(pe&&ft(),y(this,x))return;const nt={cmd:ft,undo:Qt,type:Ce};if(y(this,R)===-1){y(this,J).length>0&&(y(this,J).length=0),Wt(this,R,0),y(this,J).push(nt);return}if(xe&&y(this,J)[y(this,R)].type===Ce){_e&&(nt.undo=y(this,J)[y(this,R)].undo),y(this,J)[y(this,R)]=nt;return}const Q=y(this,R)+1;Q===y(this,j)?y(this,J).splice(0,1):(Wt(this,R,Q),Q<y(this,J).length&&y(this,J).splice(Q)),y(this,J).push(nt)}undo(){y(this,R)!==-1&&(Wt(this,x,!0),y(this,J)[y(this,R)].undo(),Wt(this,x,!1),Wt(this,R,y(this,R)-1))}redo(){y(this,R)<y(this,J).length-1&&(Wt(this,R,y(this,R)+1),Wt(this,x,!0),y(this,J)[y(this,R)].cmd(),Wt(this,x,!1))}hasSomethingToUndo(){return y(this,R)!==-1}hasSomethingToRedo(){return y(this,R)<y(this,J).length-1}destroy(){Wt(this,J,null)}}J=new WeakMap,x=new WeakMap,j=new WeakMap,R=new WeakMap,D.CommandManager=st;class N{constructor(ft){zt(this,O);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Qt}=L.FeatureTest.platform;for(const[pe,Ce,xe={}]of ft)for(const _e of pe){const nt=_e.startsWith("mac+");Qt&&nt?(this.callbacks.set(_e.slice(4),{callback:Ce,options:xe}),this.allKeys.add(_e.split("+").at(-1))):!Qt&&!nt&&(this.callbacks.set(_e,{callback:Ce,options:xe}),this.allKeys.add(_e.split("+").at(-1)))}}exec(ft,Qt){if(!this.allKeys.has(Qt.key))return;const pe=this.callbacks.get(xt(this,O,os).call(this,Qt));if(!pe)return;const{callback:Ce,options:{bubbles:xe=!1,args:_e=[],checker:nt=null}}=pe;nt&&!nt(ft,Qt)||(Ce.bind(ft,..._e)(),xe||(Qt.stopPropagation(),Qt.preventDefault()))}}O=new WeakSet,os=function(ft){ft.altKey&&this.buffer.push("alt"),ft.ctrlKey&&this.buffer.push("ctrl"),ft.metaKey&&this.buffer.push("meta"),ft.shiftKey&&this.buffer.push("shift"),this.buffer.push(ft.key);const Qt=this.buffer.join("+");return this.buffer.length=0,Qt},D.KeyboardManager=N;const ht=class ht{get _colors(){const ft=new Map([["CanvasText",null],["Canvas",null]]);return(0,G.getColorValues)(ft),(0,L.shadow)(this,"_colors",ft)}convert(ft){const Qt=(0,G.getRGB)(ft);if(!window.matchMedia("(forced-colors: active)").matches)return Qt;for(const[pe,Ce]of this._colors)if(Ce.every((xe,_e)=>xe===Qt[_e]))return ht._colorsMapping.get(pe);return Qt}getHexCode(ft){const Qt=this._colors.get(ft);return Qt?L.Util.makeHexColor(...Qt):ft}};yn(ht,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let gt=ht;D.ColorManager=gt;const we=class we{constructor(ft,Qt,pe,Ce,xe,_e){zt(this,kt);zt(this,F,null);zt(this,K,new Map);zt(this,lt,new Map);zt(this,Gt,null);zt(this,Et,null);zt(this,Mt,new st);zt(this,yt,0);zt(this,qt,new Set);zt(this,it,null);zt(this,At,null);zt(this,Ot,new Set);zt(this,tt,null);zt(this,w,new $t);zt(this,P,!1);zt(this,W,!1);zt(this,at,null);zt(this,ot,L.AnnotationEditorType.NONE);zt(this,rt,new Set);zt(this,Pt,null);zt(this,Vt,this.blur.bind(this));zt(this,Kt,this.focus.bind(this));zt(this,Zt,this.copy.bind(this));zt(this,te,this.cut.bind(this));zt(this,re,this.paste.bind(this));zt(this,se,this.keydown.bind(this));zt(this,Nt,this.onEditingAction.bind(this));zt(this,jt,this.onPageChanging.bind(this));zt(this,$,this.onScaleChanging.bind(this));zt(this,ut,this.onRotationChanging.bind(this));zt(this,Rt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});zt(this,Ht,[0,0]);zt(this,Jt,null);zt(this,ae,null);zt(this,ne,null);Wt(this,ae,ft),Wt(this,ne,Qt),Wt(this,Gt,pe),this._eventBus=Ce,this._eventBus._on("editingaction",y(this,Nt)),this._eventBus._on("pagechanging",y(this,jt)),this._eventBus._on("scalechanging",y(this,$)),this._eventBus._on("rotationchanging",y(this,ut)),Wt(this,Et,xe.annotationStorage),Wt(this,tt,xe.filterFactory),Wt(this,Pt,_e),this.viewParameters={realScale:G.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const ft=we.prototype,Qt=xe=>{const{activeElement:_e}=document;return _e&&y(xe,ae).contains(_e)&&xe.hasSomethingToControl()},pe=this.TRANSLATE_SMALL,Ce=this.TRANSLATE_BIG;return(0,L.shadow)(this,"_keyboardManager",new N([[["ctrl+a","mac+meta+a"],ft.selectAll],[["ctrl+z","mac+meta+z"],ft.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],ft.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],ft.delete],[["Escape","mac+Escape"],ft.unselectAll],[["ArrowLeft","mac+ArrowLeft"],ft.translateSelectedEditors,{args:[-pe,0],checker:Qt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],ft.translateSelectedEditors,{args:[-Ce,0],checker:Qt}],[["ArrowRight","mac+ArrowRight"],ft.translateSelectedEditors,{args:[pe,0],checker:Qt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],ft.translateSelectedEditors,{args:[Ce,0],checker:Qt}],[["ArrowUp","mac+ArrowUp"],ft.translateSelectedEditors,{args:[0,-pe],checker:Qt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],ft.translateSelectedEditors,{args:[0,-Ce],checker:Qt}],[["ArrowDown","mac+ArrowDown"],ft.translateSelectedEditors,{args:[0,pe],checker:Qt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],ft.translateSelectedEditors,{args:[0,Ce],checker:Qt}]]))}destroy(){xt(this,kt,Fi).call(this),xt(this,kt,ur).call(this),this._eventBus._off("editingaction",y(this,Nt)),this._eventBus._off("pagechanging",y(this,jt)),this._eventBus._off("scalechanging",y(this,$)),this._eventBus._off("rotationchanging",y(this,ut));for(const ft of y(this,lt).values())ft.destroy();y(this,lt).clear(),y(this,K).clear(),y(this,Ot).clear(),Wt(this,F,null),y(this,rt).clear(),y(this,Mt).destroy(),y(this,Gt).destroy()}get hcmFilter(){return(0,L.shadow)(this,"hcmFilter",y(this,Pt)?y(this,tt).addHCMFilter(y(this,Pt).foreground,y(this,Pt).background):"none")}get direction(){return(0,L.shadow)(this,"direction",getComputedStyle(y(this,ae)).direction)}editAltText(ft){var Qt;(Qt=y(this,Gt))==null||Qt.editAltText(this,ft)}onPageChanging({pageNumber:ft}){Wt(this,yt,ft-1)}focusMainContainer(){y(this,ae).focus()}findParent(ft,Qt){for(const pe of y(this,lt).values()){const{x:Ce,y:xe,width:_e,height:nt}=pe.div.getBoundingClientRect();if(ft>=Ce&&ft<=Ce+_e&&Qt>=xe&&Qt<=xe+nt)return pe}return null}disableUserSelect(ft=!1){y(this,ne).classList.toggle("noUserSelect",ft)}addShouldRescale(ft){y(this,Ot).add(ft)}removeShouldRescale(ft){y(this,Ot).delete(ft)}onScaleChanging({scale:ft}){this.commitOrRemove(),this.viewParameters.realScale=ft*G.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Qt of y(this,Ot))Qt.onScaleChanging()}onRotationChanging({pagesRotation:ft}){this.commitOrRemove(),this.viewParameters.rotation=ft}addToAnnotationStorage(ft){!ft.isEmpty()&&y(this,Et)&&!y(this,Et).has(ft.id)&&y(this,Et).setValue(ft.id,ft)}blur(){if(!this.hasSelection)return;const{activeElement:ft}=document;for(const Qt of y(this,rt))if(Qt.div.contains(ft)){Wt(this,at,[Qt,ft]),Qt._focusEventsAllowed=!1;break}}focus(){if(!y(this,at))return;const[ft,Qt]=y(this,at);Wt(this,at,null),Qt.addEventListener("focusin",()=>{ft._focusEventsAllowed=!0},{once:!0}),Qt.focus()}addEditListeners(){xt(this,kt,hr).call(this),xt(this,kt,dr).call(this)}removeEditListeners(){xt(this,kt,Fi).call(this),xt(this,kt,fr).call(this)}copy(ft){var pe;if(ft.preventDefault(),(pe=y(this,F))==null||pe.commitOrRemove(),!this.hasSelection)return;const Qt=[];for(const Ce of y(this,rt)){const xe=Ce.serialize(!0);xe&&Qt.push(xe)}Qt.length!==0&&ft.clipboardData.setData("application/pdfjs",JSON.stringify(Qt))}cut(ft){this.copy(ft),this.delete()}paste(ft){ft.preventDefault();const{clipboardData:Qt}=ft;for(const xe of Qt.items)for(const _e of y(this,At))if(_e.isHandlingMimeForPasting(xe.type)){_e.paste(xe,this.currentLayer);return}let pe=Qt.getData("application/pdfjs");if(!pe)return;try{pe=JSON.parse(pe)}catch(xe){(0,L.warn)(`paste: "${xe.message}".`);return}if(!Array.isArray(pe))return;this.unselectAll();const Ce=this.currentLayer;try{const xe=[];for(const Q of pe){const wt=Ce.deserialize(Q);if(!wt)return;xe.push(wt)}const _e=()=>{for(const Q of xe)xt(this,kt,pr).call(this,Q);xt(this,kt,gr).call(this,xe)},nt=()=>{for(const Q of xe)Q.remove()};this.addCommands({cmd:_e,undo:nt,mustExec:!0})}catch(xe){(0,L.warn)(`paste: "${xe.message}".`)}}keydown(ft){var Qt;(Qt=this.getActive())!=null&&Qt.shouldGetKeyboardEvents()||we._keyboardManager.exec(this,ft)}onEditingAction(ft){["undo","redo","delete","selectAll"].includes(ft.name)&&this[ft.name]()}setEditingState(ft){ft?(xt(this,kt,ls).call(this),xt(this,kt,hr).call(this),xt(this,kt,dr).call(this),xt(this,kt,zn).call(this,{isEditing:y(this,ot)!==L.AnnotationEditorType.NONE,isEmpty:xt(this,kt,mi).call(this),hasSomethingToUndo:y(this,Mt).hasSomethingToUndo(),hasSomethingToRedo:y(this,Mt).hasSomethingToRedo(),hasSelectedEditor:!1})):(xt(this,kt,ur).call(this),xt(this,kt,Fi).call(this),xt(this,kt,fr).call(this),xt(this,kt,zn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(ft){if(!y(this,At)){Wt(this,At,ft);for(const Qt of y(this,At))xt(this,kt,gi).call(this,Qt.defaultPropertiesToUpdate)}}getId(){return y(this,w).getId()}get currentLayer(){return y(this,lt).get(y(this,yt))}getLayer(ft){return y(this,lt).get(ft)}get currentPageIndex(){return y(this,yt)}addLayer(ft){y(this,lt).set(ft.pageIndex,ft),y(this,P)?ft.enable():ft.disable()}removeLayer(ft){y(this,lt).delete(ft.pageIndex)}updateMode(ft,Qt=null){if(y(this,ot)!==ft){if(Wt(this,ot,ft),ft===L.AnnotationEditorType.NONE){this.setEditingState(!1),xt(this,kt,us).call(this);return}this.setEditingState(!0),xt(this,kt,cs).call(this),this.unselectAll();for(const pe of y(this,lt).values())pe.updateMode(ft);if(Qt){for(const pe of y(this,K).values())if(pe.annotationElementId===Qt){this.setSelected(pe),pe.enterInEditMode();break}}}}updateToolbar(ft){ft!==y(this,ot)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:ft})}updateParams(ft,Qt){if(y(this,At)){if(ft===L.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(ft);return}for(const pe of y(this,rt))pe.updateParams(ft,Qt);for(const pe of y(this,At))pe.updateDefaultParams(ft,Qt)}}enableWaiting(ft=!1){if(y(this,W)!==ft){Wt(this,W,ft);for(const Qt of y(this,lt).values())ft?Qt.disableClick():Qt.enableClick(),Qt.div.classList.toggle("waiting",ft)}}getEditors(ft){const Qt=[];for(const pe of y(this,K).values())pe.pageIndex===ft&&Qt.push(pe);return Qt}getEditor(ft){return y(this,K).get(ft)}addEditor(ft){y(this,K).set(ft.id,ft)}removeEditor(ft){var Qt;y(this,K).delete(ft.id),this.unselect(ft),(!ft.annotationElementId||!y(this,qt).has(ft.annotationElementId))&&((Qt=y(this,Et))==null||Qt.remove(ft.id))}addDeletedAnnotationElement(ft){y(this,qt).add(ft.annotationElementId),ft.deleted=!0}isDeletedAnnotationElement(ft){return y(this,qt).has(ft)}removeDeletedAnnotationElement(ft){y(this,qt).delete(ft.annotationElementId),ft.deleted=!1}setActiveEditor(ft){y(this,F)!==ft&&(Wt(this,F,ft),ft&&xt(this,kt,gi).call(this,ft.propertiesToUpdate))}toggleSelected(ft){if(y(this,rt).has(ft)){y(this,rt).delete(ft),ft.unselect(),xt(this,kt,zn).call(this,{hasSelectedEditor:this.hasSelection});return}y(this,rt).add(ft),ft.select(),xt(this,kt,gi).call(this,ft.propertiesToUpdate),xt(this,kt,zn).call(this,{hasSelectedEditor:!0})}setSelected(ft){for(const Qt of y(this,rt))Qt!==ft&&Qt.unselect();y(this,rt).clear(),y(this,rt).add(ft),ft.select(),xt(this,kt,gi).call(this,ft.propertiesToUpdate),xt(this,kt,zn).call(this,{hasSelectedEditor:!0})}isSelected(ft){return y(this,rt).has(ft)}unselect(ft){ft.unselect(),y(this,rt).delete(ft),xt(this,kt,zn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return y(this,rt).size!==0}undo(){y(this,Mt).undo(),xt(this,kt,zn).call(this,{hasSomethingToUndo:y(this,Mt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:xt(this,kt,mi).call(this)})}redo(){y(this,Mt).redo(),xt(this,kt,zn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,Mt).hasSomethingToRedo(),isEmpty:xt(this,kt,mi).call(this)})}addCommands(ft){y(this,Mt).add(ft),xt(this,kt,zn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:xt(this,kt,mi).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ft=[...y(this,rt)],Qt=()=>{for(const Ce of ft)Ce.remove()},pe=()=>{for(const Ce of ft)xt(this,kt,pr).call(this,Ce)};this.addCommands({cmd:Qt,undo:pe,mustExec:!0})}commitOrRemove(){var ft;(ft=y(this,F))==null||ft.commitOrRemove()}hasSomethingToControl(){return y(this,F)||this.hasSelection}selectAll(){for(const ft of y(this,rt))ft.commit();xt(this,kt,gr).call(this,y(this,K).values())}unselectAll(){if(y(this,F)){y(this,F).commitOrRemove();return}if(this.hasSelection){for(const ft of y(this,rt))ft.unselect();y(this,rt).clear(),xt(this,kt,zn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(ft,Qt,pe=!1){if(pe||this.commitOrRemove(),!this.hasSelection)return;y(this,Ht)[0]+=ft,y(this,Ht)[1]+=Qt;const[Ce,xe]=y(this,Ht),_e=[...y(this,rt)],nt=1e3;y(this,Jt)&&clearTimeout(y(this,Jt)),Wt(this,Jt,setTimeout(()=>{Wt(this,Jt,null),y(this,Ht)[0]=y(this,Ht)[1]=0,this.addCommands({cmd:()=>{for(const Q of _e)y(this,K).has(Q.id)&&Q.translateInPage(Ce,xe)},undo:()=>{for(const Q of _e)y(this,K).has(Q.id)&&Q.translateInPage(-Ce,-xe)},mustExec:!1})},nt));for(const Q of _e)Q.translateInPage(ft,Qt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Wt(this,it,new Map);for(const ft of y(this,rt))y(this,it).set(ft,{savedX:ft.x,savedY:ft.y,savedPageIndex:ft.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!y(this,it))return!1;this.disableUserSelect(!1);const ft=y(this,it);Wt(this,it,null);let Qt=!1;for(const[{x:Ce,y:xe,pageIndex:_e},nt]of ft)nt.newX=Ce,nt.newY=xe,nt.newPageIndex=_e,Qt||(Qt=Ce!==nt.savedX||xe!==nt.savedY||_e!==nt.savedPageIndex);if(!Qt)return!1;const pe=(Ce,xe,_e,nt)=>{if(y(this,K).has(Ce.id)){const Q=y(this,lt).get(nt);Q?Ce._setParentAndPosition(Q,xe,_e):(Ce.pageIndex=nt,Ce.x=xe,Ce.y=_e)}};return this.addCommands({cmd:()=>{for(const[Ce,{newX:xe,newY:_e,newPageIndex:nt}]of ft)pe(Ce,xe,_e,nt)},undo:()=>{for(const[Ce,{savedX:xe,savedY:_e,savedPageIndex:nt}]of ft)pe(Ce,xe,_e,nt)},mustExec:!0}),!0}dragSelectedEditors(ft,Qt){if(y(this,it))for(const pe of y(this,it).keys())pe.drag(ft,Qt)}rebuild(ft){if(ft.parent===null){const Qt=this.getLayer(ft.pageIndex);Qt?(Qt.changeParent(ft),Qt.addOrRebuild(ft)):(this.addEditor(ft),this.addToAnnotationStorage(ft),ft.rebuild())}else ft.parent.addOrRebuild(ft)}isActive(ft){return y(this,F)===ft}getActive(){return y(this,F)}getMode(){return y(this,ot)}get imageManager(){return(0,L.shadow)(this,"imageManager",new mt)}};F=new WeakMap,K=new WeakMap,lt=new WeakMap,Gt=new WeakMap,Et=new WeakMap,Mt=new WeakMap,yt=new WeakMap,qt=new WeakMap,it=new WeakMap,At=new WeakMap,Ot=new WeakMap,tt=new WeakMap,w=new WeakMap,P=new WeakMap,W=new WeakMap,at=new WeakMap,ot=new WeakMap,rt=new WeakMap,Pt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,Zt=new WeakMap,te=new WeakMap,re=new WeakMap,se=new WeakMap,Nt=new WeakMap,jt=new WeakMap,$=new WeakMap,ut=new WeakMap,Rt=new WeakMap,Ht=new WeakMap,Jt=new WeakMap,ae=new WeakMap,ne=new WeakMap,kt=new WeakSet,ls=function(){window.addEventListener("focus",y(this,Kt)),window.addEventListener("blur",y(this,Vt))},ur=function(){window.removeEventListener("focus",y(this,Kt)),window.removeEventListener("blur",y(this,Vt))},hr=function(){window.addEventListener("keydown",y(this,se),{capture:!0})},Fi=function(){window.removeEventListener("keydown",y(this,se),{capture:!0})},dr=function(){document.addEventListener("copy",y(this,Zt)),document.addEventListener("cut",y(this,te)),document.addEventListener("paste",y(this,re))},fr=function(){document.removeEventListener("copy",y(this,Zt)),document.removeEventListener("cut",y(this,te)),document.removeEventListener("paste",y(this,re))},zn=function(ft){Object.entries(ft).some(([pe,Ce])=>y(this,Rt)[pe]!==Ce)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,Rt),ft)})},gi=function(ft){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:ft})},cs=function(){if(!y(this,P)){Wt(this,P,!0);for(const ft of y(this,lt).values())ft.enable()}},us=function(){if(this.unselectAll(),y(this,P)){Wt(this,P,!1);for(const ft of y(this,lt).values())ft.disable()}},pr=function(ft){const Qt=y(this,lt).get(ft.pageIndex);Qt?Qt.addOrRebuild(ft):this.addEditor(ft)},mi=function(){if(y(this,K).size===0)return!0;if(y(this,K).size===1)for(const ft of y(this,K).values())return ft.isEmpty();return!1},gr=function(ft){y(this,rt).clear();for(const Qt of ft)Qt.isEmpty()||(y(this,rt).add(Qt),Qt.select());xt(this,kt,zn).call(this,{hasSelectedEditor:!0})},yn(we,"TRANSLATE_SMALL",1),yn(we,"TRANSLATE_BIG",10);let ct=we;D.AnnotationEditorUIManager=ct},(T,D,Tt)=>{var yt,qt,it,At,Ot,tt,w,P,W,at,ot,rt,li,ci,mr,Li,Di,vi,bi;Object.defineProperty(D,"__esModule",{value:!0}),D.StatTimer=D.RenderingCancelledException=D.PixelsPerInch=D.PageViewport=D.PDFDateString=D.DOMStandardFontDataFactory=D.DOMSVGFactory=D.DOMFilterFactory=D.DOMCanvasFactory=D.DOMCMapReaderFactory=void 0,D.deprecated=R,D.getColorValues=K,D.getCurrentTransform=lt,D.getCurrentTransformInverse=Gt,D.getFilenameFromUrl=U,D.getPdfFilenameFromUrl=Y,D.getRGB=F,D.getXfaPageViewport=ht,D.isDataScheme=et,D.isPdfFile=q,D.isValidFetchUrl=J,D.loadScript=j,D.noContextMenu=x,D.setLayerDimensions=Et;var L=Tt(7),G=Tt(1);const _="http://www.w3.org/2000/svg",Mt=class Mt{};yn(Mt,"CSS",96),yn(Mt,"PDF",72),yn(Mt,"PDF_TO_CSS_UNITS",Mt.CSS/Mt.PDF);let vt=Mt;D.PixelsPerInch=vt;class $t extends L.BaseFilterFactory{constructor({docId:$,ownerDocument:ut=globalThis.document}={}){super();zt(this,rt);zt(this,yt);zt(this,qt);zt(this,it);zt(this,At);zt(this,Ot);zt(this,tt);zt(this,w);zt(this,P);zt(this,W);zt(this,at);zt(this,ot,0);Wt(this,it,$),Wt(this,At,ut)}addFilter($){if(!$)return"none";let ut=y(this,rt,li).get($);if(ut)return ut;let Rt,Ht,Jt,ae;if($.length===1){const he=$[0],ze=new Array(256);for(let Ie=0;Ie<256;Ie++)ze[Ie]=he[Ie]/255;ae=Rt=Ht=Jt=ze.join(",")}else{const[he,ze,Ie]=$,Qe=new Array(256),Ae=new Array(256),Re=new Array(256);for(let Xe=0;Xe<256;Xe++)Qe[Xe]=he[Xe]/255,Ae[Xe]=ze[Xe]/255,Re[Xe]=Ie[Xe]/255;Rt=Qe.join(","),Ht=Ae.join(","),Jt=Re.join(","),ae=`${Rt}${Ht}${Jt}`}if(ut=y(this,rt,li).get(ae),ut)return y(this,rt,li).set($,ut),ut;const ne=`g_${y(this,it)}_transfer_map_${pi(this,ot)._++}`,kt=`url(#${ne})`;y(this,rt,li).set($,kt),y(this,rt,li).set(ae,kt);const ge=xt(this,rt,Li).call(this,ne);return xt(this,rt,vi).call(this,Rt,Ht,Jt,ge),kt}addHCMFilter($,ut){var ze;const Rt=`${$}-${ut}`;if(y(this,tt)===Rt)return y(this,w);if(Wt(this,tt,Rt),Wt(this,w,"none"),(ze=y(this,Ot))==null||ze.remove(),!$||!ut)return y(this,w);const Ht=xt(this,rt,bi).call(this,$);$=G.Util.makeHexColor(...Ht);const Jt=xt(this,rt,bi).call(this,ut);if(ut=G.Util.makeHexColor(...Jt),y(this,rt,ci).style.color="",$==="#000000"&&ut==="#ffffff"||$===ut)return y(this,w);const ae=new Array(256);for(let Ie=0;Ie<=255;Ie++){const Qe=Ie/255;ae[Ie]=Qe<=.03928?Qe/12.92:((Qe+.055)/1.055)**2.4}const ne=ae.join(","),kt=`g_${y(this,it)}_hcm_filter`,ge=Wt(this,P,xt(this,rt,Li).call(this,kt));xt(this,rt,vi).call(this,ne,ne,ne,ge),xt(this,rt,mr).call(this,ge);const he=(Ie,Qe)=>{const Ae=Ht[Ie]/255,Re=Jt[Ie]/255,Xe=new Array(Qe+1);for(let ln=0;ln<=Qe;ln++)Xe[ln]=Ae+ln/Qe*(Re-Ae);return Xe.join(",")};return xt(this,rt,vi).call(this,he(0,5),he(1,5),he(2,5),ge),Wt(this,w,`url(#${kt})`),y(this,w)}addHighlightHCMFilter($,ut,Rt,Ht){var Re;const Jt=`${$}-${ut}-${Rt}-${Ht}`;if(y(this,W)===Jt)return y(this,at);if(Wt(this,W,Jt),Wt(this,at,"none"),(Re=y(this,P))==null||Re.remove(),!$||!ut)return y(this,at);const[ae,ne]=[$,ut].map(xt(this,rt,bi).bind(this));let kt=Math.round(.2126*ae[0]+.7152*ae[1]+.0722*ae[2]),ge=Math.round(.2126*ne[0]+.7152*ne[1]+.0722*ne[2]),[he,ze]=[Rt,Ht].map(xt(this,rt,bi).bind(this));ge<kt&&([kt,ge,he,ze]=[ge,kt,ze,he]),y(this,rt,ci).style.color="";const Ie=(Xe,ln,ee)=>{const Ft=new Array(256),Dt=(ge-kt)/ee,ye=Xe/255,we=(ln-Xe)/(255*ee);let De=0;for(let ft=0;ft<=ee;ft++){const Qt=Math.round(kt+ft*Dt),pe=ye+ft*we;for(let Ce=De;Ce<=Qt;Ce++)Ft[Ce]=pe;De=Qt+1}for(let ft=De;ft<256;ft++)Ft[ft]=Ft[De-1];return Ft.join(",")},Qe=`g_${y(this,it)}_hcm_highlight_filter`,Ae=Wt(this,P,xt(this,rt,Li).call(this,Qe));return xt(this,rt,mr).call(this,Ae),xt(this,rt,vi).call(this,Ie(he[0],ze[0],5),Ie(he[1],ze[1],5),Ie(he[2],ze[2],5),Ae),Wt(this,at,`url(#${Qe})`),y(this,at)}destroy($=!1){$&&(y(this,w)||y(this,at))||(y(this,qt)&&(y(this,qt).parentNode.parentNode.remove(),Wt(this,qt,null)),y(this,yt)&&(y(this,yt).clear(),Wt(this,yt,null)),Wt(this,ot,0))}}yt=new WeakMap,qt=new WeakMap,it=new WeakMap,At=new WeakMap,Ot=new WeakMap,tt=new WeakMap,w=new WeakMap,P=new WeakMap,W=new WeakMap,at=new WeakMap,ot=new WeakMap,rt=new WeakSet,li=function(){return y(this,yt)||Wt(this,yt,new Map)},ci=function(){if(!y(this,qt)){const $=y(this,At).createElement("div"),{style:ut}=$;ut.visibility="hidden",ut.contain="strict",ut.width=ut.height=0,ut.position="absolute",ut.top=ut.left=0,ut.zIndex=-1;const Rt=y(this,At).createElementNS(_,"svg");Rt.setAttribute("width",0),Rt.setAttribute("height",0),Wt(this,qt,y(this,At).createElementNS(_,"defs")),$.append(Rt),Rt.append(y(this,qt)),y(this,At).body.append($)}return y(this,qt)},mr=function($){const ut=y(this,At).createElementNS(_,"feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),$.append(ut)},Li=function($){const ut=y(this,At).createElementNS(_,"filter");return ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("id",$),y(this,rt,ci).append(ut),ut},Di=function($,ut,Rt){const Ht=y(this,At).createElementNS(_,ut);Ht.setAttribute("type","discrete"),Ht.setAttribute("tableValues",Rt),$.append(Ht)},vi=function($,ut,Rt,Ht){const Jt=y(this,At).createElementNS(_,"feComponentTransfer");Ht.append(Jt),xt(this,rt,Di).call(this,Jt,"feFuncR",$),xt(this,rt,Di).call(this,Jt,"feFuncG",ut),xt(this,rt,Di).call(this,Jt,"feFuncB",Rt)},bi=function($){return y(this,rt,ci).style.color=$,F(getComputedStyle(y(this,rt,ci)).getPropertyValue("color"))},D.DOMFilterFactory=$t;class mt extends L.BaseCanvasFactory{constructor({ownerDocument:jt=globalThis.document}={}){super(),this._document=jt}_createCanvas(jt,$){const ut=this._document.createElement("canvas");return ut.width=jt,ut.height=$,ut}}D.DOMCanvasFactory=mt;async function st(Nt,jt=!1){if(J(Nt,document.baseURI)){const $=await fetch(Nt);if(!$.ok)throw new Error($.statusText);return jt?new Uint8Array(await $.arrayBuffer()):(0,G.stringToBytes)(await $.text())}return new Promise(($,ut)=>{const Rt=new XMLHttpRequest;Rt.open("GET",Nt,!0),jt&&(Rt.responseType="arraybuffer"),Rt.onreadystatechange=()=>{if(Rt.readyState===XMLHttpRequest.DONE){if(Rt.status===200||Rt.status===0){let Ht;if(jt&&Rt.response?Ht=new Uint8Array(Rt.response):!jt&&Rt.responseText&&(Ht=(0,G.stringToBytes)(Rt.responseText)),Ht){$(Ht);return}}ut(new Error(Rt.statusText))}},Rt.send(null)})}class N extends L.BaseCMapReaderFactory{_fetchData(jt,$){return st(jt,this.isCompressed).then(ut=>({cMapData:ut,compressionType:$}))}}D.DOMCMapReaderFactory=N;class gt extends L.BaseStandardFontDataFactory{_fetchData(jt){return st(jt,!0)}}D.DOMStandardFontDataFactory=gt;class ct extends L.BaseSVGFactory{_createSVG(jt){return document.createElementNS(_,jt)}}D.DOMSVGFactory=ct;class X{constructor({viewBox:jt,scale:$,rotation:ut,offsetX:Rt=0,offsetY:Ht=0,dontFlip:Jt=!1}){this.viewBox=jt,this.scale=$,this.rotation=ut,this.offsetX=Rt,this.offsetY=Ht;const ae=(jt[2]+jt[0])/2,ne=(jt[3]+jt[1])/2;let kt,ge,he,ze;switch(ut%=360,ut<0&&(ut+=360),ut){case 180:kt=-1,ge=0,he=0,ze=1;break;case 90:kt=0,ge=1,he=1,ze=0;break;case 270:kt=0,ge=-1,he=-1,ze=0;break;case 0:kt=1,ge=0,he=0,ze=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Jt&&(he=-he,ze=-ze);let Ie,Qe,Ae,Re;kt===0?(Ie=Math.abs(ne-jt[1])*$+Rt,Qe=Math.abs(ae-jt[0])*$+Ht,Ae=(jt[3]-jt[1])*$,Re=(jt[2]-jt[0])*$):(Ie=Math.abs(ae-jt[0])*$+Rt,Qe=Math.abs(ne-jt[1])*$+Ht,Ae=(jt[2]-jt[0])*$,Re=(jt[3]-jt[1])*$),this.transform=[kt*$,ge*$,he*$,ze*$,Ie-kt*$*ae-he*$*ne,Qe-ge*$*ae-ze*$*ne],this.width=Ae,this.height=Re}get rawDims(){const{viewBox:jt}=this;return(0,G.shadow)(this,"rawDims",{pageWidth:jt[2]-jt[0],pageHeight:jt[3]-jt[1],pageX:jt[0],pageY:jt[1]})}clone({scale:jt=this.scale,rotation:$=this.rotation,offsetX:ut=this.offsetX,offsetY:Rt=this.offsetY,dontFlip:Ht=!1}={}){return new X({viewBox:this.viewBox.slice(),scale:jt,rotation:$,offsetX:ut,offsetY:Rt,dontFlip:Ht})}convertToViewportPoint(jt,$){return G.Util.applyTransform([jt,$],this.transform)}convertToViewportRectangle(jt){const $=G.Util.applyTransform([jt[0],jt[1]],this.transform),ut=G.Util.applyTransform([jt[2],jt[3]],this.transform);return[$[0],$[1],ut[0],ut[1]]}convertToPdfPoint(jt,$){return G.Util.applyInverseTransform([jt,$],this.transform)}}D.PageViewport=X;class V extends G.BaseException{constructor(jt,$=0){super(jt,"RenderingCancelledException"),this.extraDelay=$}}D.RenderingCancelledException=V;function et(Nt){const jt=Nt.length;let $=0;for(;$<jt&&Nt[$].trim()==="";)$++;return Nt.substring($,$+5).toLowerCase()==="data:"}function q(Nt){return typeof Nt=="string"&&/\.pdf$/i.test(Nt)}function U(Nt,jt=!1){return jt||([Nt]=Nt.split(/[#?]/,1)),Nt.substring(Nt.lastIndexOf("/")+1)}function Y(Nt,jt="document.pdf"){if(typeof Nt!="string")return jt;if(et(Nt))return(0,G.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),jt;const $=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ut=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Rt=$.exec(Nt);let Ht=ut.exec(Rt[1])||ut.exec(Rt[2])||ut.exec(Rt[3]);if(Ht&&(Ht=Ht[0],Ht.includes("%")))try{Ht=ut.exec(decodeURIComponent(Ht))[0]}catch{}return Ht||jt}class dt{constructor(){yn(this,"started",Object.create(null));yn(this,"times",[])}time(jt){jt in this.started&&(0,G.warn)(`Timer is already running for ${jt}`),this.started[jt]=Date.now()}timeEnd(jt){jt in this.started||(0,G.warn)(`Timer has not been started for ${jt}`),this.times.push({name:jt,start:this.started[jt],end:Date.now()}),delete this.started[jt]}toString(){const jt=[];let $=0;for(const{name:ut}of this.times)$=Math.max(ut.length,$);for(const{name:ut,start:Rt,end:Ht}of this.times)jt.push(`${ut.padEnd($)} ${Ht-Rt}ms
`);return jt.join("")}}D.StatTimer=dt;function J(Nt,jt){try{const{protocol:$}=jt?new URL(Nt,jt):new URL(Nt);return $==="http:"||$==="https:"}catch{return!1}}function x(Nt){Nt.preventDefault()}function j(Nt,jt=!1){return new Promise(($,ut)=>{const Rt=document.createElement("script");Rt.src=Nt,Rt.onload=function(Ht){jt&&Rt.remove(),$(Ht)},Rt.onerror=function(){ut(new Error(`Cannot load script at: ${Rt.src}`))},(document.head||document.documentElement).append(Rt)})}function R(Nt){console.log("Deprecated API usage: "+Nt)}let O;class B{static toDateObject(jt){if(!jt||typeof jt!="string")return null;O||(O=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $=O.exec(jt);if(!$)return null;const ut=parseInt($[1],10);let Rt=parseInt($[2],10);Rt=Rt>=1&&Rt<=12?Rt-1:0;let Ht=parseInt($[3],10);Ht=Ht>=1&&Ht<=31?Ht:1;let Jt=parseInt($[4],10);Jt=Jt>=0&&Jt<=23?Jt:0;let ae=parseInt($[5],10);ae=ae>=0&&ae<=59?ae:0;let ne=parseInt($[6],10);ne=ne>=0&&ne<=59?ne:0;const kt=$[7]||"Z";let ge=parseInt($[8],10);ge=ge>=0&&ge<=23?ge:0;let he=parseInt($[9],10)||0;return he=he>=0&&he<=59?he:0,kt==="-"?(Jt+=ge,ae+=he):kt==="+"&&(Jt-=ge,ae-=he),new Date(Date.UTC(ut,Rt,Ht,Jt,ae,ne))}}D.PDFDateString=B;function ht(Nt,{scale:jt=1,rotation:$=0}){const{width:ut,height:Rt}=Nt.attributes.style,Ht=[0,0,parseInt(ut),parseInt(Rt)];return new X({viewBox:Ht,scale:jt,rotation:$})}function F(Nt){if(Nt.startsWith("#")){const jt=parseInt(Nt.slice(1),16);return[(jt&16711680)>>16,(jt&65280)>>8,jt&255]}return Nt.startsWith("rgb(")?Nt.slice(4,-1).split(",").map(jt=>parseInt(jt)):Nt.startsWith("rgba(")?Nt.slice(5,-1).split(",").map(jt=>parseInt(jt)).slice(0,3):((0,G.warn)(`Not a valid color format: "${Nt}"`),[0,0,0])}function K(Nt){const jt=document.createElement("span");jt.style.visibility="hidden",document.body.append(jt);for(const $ of Nt.keys()){jt.style.color=$;const ut=window.getComputedStyle(jt).color;Nt.set($,F(ut))}jt.remove()}function lt(Nt){const{a:jt,b:$,c:ut,d:Rt,e:Ht,f:Jt}=Nt.getTransform();return[jt,$,ut,Rt,Ht,Jt]}function Gt(Nt){const{a:jt,b:$,c:ut,d:Rt,e:Ht,f:Jt}=Nt.getTransform().invertSelf();return[jt,$,ut,Rt,Ht,Jt]}function Et(Nt,jt,$=!1,ut=!0){if(jt instanceof X){const{pageWidth:Rt,pageHeight:Ht}=jt.rawDims,{style:Jt}=Nt,ae=G.FeatureTest.isCSSRoundSupported,ne=`var(--scale-factor) * ${Rt}px`,kt=`var(--scale-factor) * ${Ht}px`,ge=ae?`round(${ne}, 1px)`:`calc(${ne})`,he=ae?`round(${kt}, 1px)`:`calc(${kt})`;!$||jt.rotation%180===0?(Jt.width=ge,Jt.height=he):(Jt.width=he,Jt.height=ge)}ut&&Nt.setAttribute("data-main-rotation",jt.rotation)}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.BaseStandardFontDataFactory=D.BaseSVGFactory=D.BaseFilterFactory=D.BaseCanvasFactory=D.BaseCMapReaderFactory=void 0;var L=Tt(1);class G{constructor(){this.constructor===G&&(0,L.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(N){return"none"}addHCMFilter(N,gt){return"none"}addHighlightHCMFilter(N,gt,ct,X){return"none"}destroy(N=!1){}}D.BaseFilterFactory=G;class _{constructor(){this.constructor===_&&(0,L.unreachable)("Cannot initialize BaseCanvasFactory.")}create(N,gt){if(N<=0||gt<=0)throw new Error("Invalid canvas size");const ct=this._createCanvas(N,gt);return{canvas:ct,context:ct.getContext("2d")}}reset(N,gt,ct){if(!N.canvas)throw new Error("Canvas is not specified");if(gt<=0||ct<=0)throw new Error("Invalid canvas size");N.canvas.width=gt,N.canvas.height=ct}destroy(N){if(!N.canvas)throw new Error("Canvas is not specified");N.canvas.width=0,N.canvas.height=0,N.canvas=null,N.context=null}_createCanvas(N,gt){(0,L.unreachable)("Abstract method `_createCanvas` called.")}}D.BaseCanvasFactory=_;class vt{constructor({baseUrl:N=null,isCompressed:gt=!0}){this.constructor===vt&&(0,L.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=N,this.isCompressed=gt}async fetch({name:N}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!N)throw new Error("CMap name must be specified.");const gt=this.baseUrl+N+(this.isCompressed?".bcmap":""),ct=this.isCompressed?L.CMapCompressionType.BINARY:L.CMapCompressionType.NONE;return this._fetchData(gt,ct).catch(X=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${gt}`)})}_fetchData(N,gt){(0,L.unreachable)("Abstract method `_fetchData` called.")}}D.BaseCMapReaderFactory=vt;class $t{constructor({baseUrl:N=null}){this.constructor===$t&&(0,L.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=N}async fetch({filename:N}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!N)throw new Error("Font filename must be specified.");const gt=`${this.baseUrl}${N}`;return this._fetchData(gt).catch(ct=>{throw new Error(`Unable to load font data at: ${gt}`)})}_fetchData(N){(0,L.unreachable)("Abstract method `_fetchData` called.")}}D.BaseStandardFontDataFactory=$t;class mt{constructor(){this.constructor===mt&&(0,L.unreachable)("Cannot initialize BaseSVGFactory.")}create(N,gt,ct=!1){if(N<=0||gt<=0)throw new Error("Invalid SVG dimensions");const X=this._createSVG("svg:svg");return X.setAttribute("version","1.1"),ct||(X.setAttribute("width",`${N}px`),X.setAttribute("height",`${gt}px`)),X.setAttribute("preserveAspectRatio","none"),X.setAttribute("viewBox",`0 0 ${N} ${gt}`),X}createElement(N){if(typeof N!="string")throw new Error("Invalid SVG element type");return this._createSVG(N)}_createSVG(N){(0,L.unreachable)("Abstract method `_createSVG` called.")}}D.BaseSVGFactory=mt},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.MurmurHash3_64=void 0;var L=Tt(1);const G=3285377520,_=4294901760,vt=65535;class $t{constructor(st){this.h1=st?st&4294967295:G,this.h2=st?st&4294967295:G}update(st){let N,gt;if(typeof st=="string"){N=new Uint8Array(st.length*2),gt=0;for(let R=0,O=st.length;R<O;R++){const B=st.charCodeAt(R);B<=255?N[gt++]=B:(N[gt++]=B>>>8,N[gt++]=B&255)}}else if((0,L.isArrayBuffer)(st))N=st.slice(),gt=N.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ct=gt>>2,X=gt-ct*4,V=new Uint32Array(N.buffer,0,ct);let et=0,q=0,U=this.h1,Y=this.h2;const dt=3432918353,J=461845907,x=dt&vt,j=J&vt;for(let R=0;R<ct;R++)R&1?(et=V[R],et=et*dt&_|et*x&vt,et=et<<15|et>>>17,et=et*J&_|et*j&vt,U^=et,U=U<<13|U>>>19,U=U*5+3864292196):(q=V[R],q=q*dt&_|q*x&vt,q=q<<15|q>>>17,q=q*J&_|q*j&vt,Y^=q,Y=Y<<13|Y>>>19,Y=Y*5+3864292196);switch(et=0,X){case 3:et^=N[ct*4+2]<<16;case 2:et^=N[ct*4+1]<<8;case 1:et^=N[ct*4],et=et*dt&_|et*x&vt,et=et<<15|et>>>17,et=et*J&_|et*j&vt,ct&1?U^=et:Y^=et}this.h1=U,this.h2=Y}hexdigest(){let st=this.h1,N=this.h2;return st^=N>>>1,st=st*3981806797&_|st*36045&vt,N=N*4283543511&_|((N<<16|st>>>16)*2950163797&_)>>>16,st^=N>>>1,st=st*444984403&_|st*60499&vt,N=N*3301882366&_|((N<<16|st>>>16)*3120437893&_)>>>16,st^=N>>>1,(st>>>0).toString(16).padStart(8,"0")+(N>>>0).toString(16).padStart(8,"0")}}D.MurmurHash3_64=$t},(T,D,Tt)=>{var vt;Object.defineProperty(D,"__esModule",{value:!0}),D.FontLoader=D.FontFaceObject=void 0;var L=Tt(1);class G{constructor({ownerDocument:mt=globalThis.document,styleElement:st=null}){zt(this,vt,new Set);this._document=mt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(mt){this.nativeFontFaces.add(mt),this._document.fonts.add(mt)}removeNativeFontFace(mt){this.nativeFontFaces.delete(mt),this._document.fonts.delete(mt)}insertRule(mt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const st=this.styleElement.sheet;st.insertRule(mt,st.cssRules.length)}clear(){for(const mt of this.nativeFontFaces)this._document.fonts.delete(mt);this.nativeFontFaces.clear(),y(this,vt).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(mt){if(!(!mt||y(this,vt).has(mt.loadedName))){if((0,L.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:st,src:N,style:gt}=mt,ct=new FontFace(st,N,gt);this.addNativeFontFace(ct);try{await ct.load(),y(this,vt).add(st)}catch{(0,L.warn)(`Cannot load system font: ${mt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ct)}return}(0,L.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(mt){if(mt.attached||mt.missingFile&&!mt.systemFontInfo)return;if(mt.attached=!0,mt.systemFontInfo){await this.loadSystemFont(mt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const N=mt.createNativeFontFace();if(N){this.addNativeFontFace(N);try{await N.loaded}catch(gt){throw(0,L.warn)(`Failed to load font '${N.family}': '${gt}'.`),mt.disableFontFace=!0,gt}}return}const st=mt.createFontFaceRule();if(st){if(this.insertRule(st),this.isSyncFontLoadingSupported)return;await new Promise(N=>{const gt=this._queueLoadingCallback(N);this._prepareFontLoadEvent(mt,gt)})}}get isFontLoadingAPISupported(){var st;const mt=!!((st=this._document)!=null&&st.fonts);return(0,L.shadow)(this,"isFontLoadingAPISupported",mt)}get isSyncFontLoadingSupported(){let mt=!1;return(L.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(mt=!0),(0,L.shadow)(this,"isSyncFontLoadingSupported",mt)}_queueLoadingCallback(mt){function st(){for((0,L.assert)(!gt.done,"completeRequest() cannot be called twice."),gt.done=!0;N.length>0&&N[0].done;){const ct=N.shift();setTimeout(ct.callback,0)}}const{loadingRequests:N}=this,gt={done:!1,complete:st,callback:mt};return N.push(gt),gt}get _loadTestFont(){const mt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,L.shadow)(this,"_loadTestFont",mt)}_prepareFontLoadEvent(mt,st){function N(F,K){return F.charCodeAt(K)<<24|F.charCodeAt(K+1)<<16|F.charCodeAt(K+2)<<8|F.charCodeAt(K+3)&255}function gt(F,K,lt,Gt){const Et=F.substring(0,K),Mt=F.substring(K+lt);return Et+Gt+Mt}let ct,X;const V=this._document.createElement("canvas");V.width=1,V.height=1;const et=V.getContext("2d");let q=0;function U(F,K){if(++q>30){(0,L.warn)("Load test font never loaded."),K();return}if(et.font="30px "+F,et.fillText(".",0,20),et.getImageData(0,0,1,1).data[3]>0){K();return}setTimeout(U.bind(null,F,K))}const Y=`lt${Date.now()}${this.loadTestFontId++}`;let dt=this._loadTestFont;dt=gt(dt,976,Y.length,Y);const x=16,j=1482184792;let R=N(dt,x);for(ct=0,X=Y.length-3;ct<X;ct+=4)R=R-j+N(Y,ct)|0;ct<Y.length&&(R=R-j+N(Y+"XXX",ct)|0),dt=gt(dt,x,4,(0,L.string32)(R));const O=`url(data:font/opentype;base64,${btoa(dt)});`,B=`@font-face {font-family:"${Y}";src:${O}}`;this.insertRule(B);const ht=this._document.createElement("div");ht.style.visibility="hidden",ht.style.width=ht.style.height="10px",ht.style.position="absolute",ht.style.top=ht.style.left="0px";for(const F of[mt.loadedName,Y]){const K=this._document.createElement("span");K.textContent="Hi",K.style.fontFamily=F,ht.append(K)}this._document.body.append(ht),U(Y,()=>{ht.remove(),st.complete()})}}vt=new WeakMap,D.FontLoader=G;class _{constructor(mt,{isEvalSupported:st=!0,disableFontFace:N=!1,ignoreErrors:gt=!1,inspectFont:ct=null}){this.compiledGlyphs=Object.create(null);for(const X in mt)this[X]=mt[X];this.isEvalSupported=st!==!1,this.disableFontFace=N===!0,this.ignoreErrors=gt===!0,this._inspectFont=ct}createNativeFontFace(){var st;if(!this.data||this.disableFontFace)return null;let mt;if(!this.cssFontInfo)mt=new FontFace(this.loadedName,this.data,{});else{const N={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(N.style=`oblique ${this.cssFontInfo.italicAngle}deg`),mt=new FontFace(this.cssFontInfo.fontFamily,this.data,N)}return(st=this._inspectFont)==null||st.call(this,this),mt}createFontFaceRule(){var gt;if(!this.data||this.disableFontFace)return null;const mt=(0,L.bytesToString)(this.data),st=`url(data:${this.mimetype};base64,${btoa(mt)});`;let N;if(!this.cssFontInfo)N=`@font-face {font-family:"${this.loadedName}";src:${st}}`;else{let ct=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ct+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),N=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ct}src:${st}}`}return(gt=this._inspectFont)==null||gt.call(this,this,st),N}getPathGenerator(mt,st){if(this.compiledGlyphs[st]!==void 0)return this.compiledGlyphs[st];let N;try{N=mt.get(this.loadedName+"_path_"+st)}catch(gt){if(!this.ignoreErrors)throw gt;return(0,L.warn)(`getPathGenerator - ignoring character: "${gt}".`),this.compiledGlyphs[st]=function(ct,X){}}if(this.isEvalSupported&&L.FeatureTest.isEvalSupported){const gt=[];for(const ct of N){const X=ct.args!==void 0?ct.args.join(","):"";gt.push("c.",ct.cmd,"(",X,`);
`)}return this.compiledGlyphs[st]=new Function("c","size",gt.join(""))}return this.compiledGlyphs[st]=function(gt,ct){for(const X of N)X.cmd==="scale"&&(X.args=[ct,-ct]),gt[X.cmd].apply(gt,X.args)}}}D.FontFaceObject=_},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.NodeStandardFontDataFactory=D.NodeFilterFactory=D.NodeCanvasFactory=D.NodeCMapReaderFactory=void 0;var L=Tt(7);Tt(1);const G=function(st){return new Promise((N,gt)=>{require$$0.readFile(st,(X,V)=>{if(X||!V){gt(new Error(X));return}N(new Uint8Array(V))})})};class _ extends L.BaseFilterFactory{}D.NodeFilterFactory=_;class vt extends L.BaseCanvasFactory{_createCanvas(N,gt){return require$$0.createCanvas(N,gt)}}D.NodeCanvasFactory=vt;class $t extends L.BaseCMapReaderFactory{_fetchData(N,gt){return G(N).then(ct=>({cMapData:ct,compressionType:gt}))}}D.NodeCMapReaderFactory=$t;class mt extends L.BaseStandardFontDataFactory{_fetchData(N){return G(N)}}D.NodeStandardFontDataFactory=mt},(T,D,Tt)=>{var qt,vr,br;Object.defineProperty(D,"__esModule",{value:!0}),D.CanvasGraphics=void 0;var L=Tt(1),G=Tt(6),_=Tt(12),vt=Tt(13);const $t=16,mt=100,st=4096,N=15,gt=10,ct=1e3,X=16;function V(tt,w){if(tt._removeMirroring)throw new Error("Context is already forwarding operations.");tt.__originalSave=tt.save,tt.__originalRestore=tt.restore,tt.__originalRotate=tt.rotate,tt.__originalScale=tt.scale,tt.__originalTranslate=tt.translate,tt.__originalTransform=tt.transform,tt.__originalSetTransform=tt.setTransform,tt.__originalResetTransform=tt.resetTransform,tt.__originalClip=tt.clip,tt.__originalMoveTo=tt.moveTo,tt.__originalLineTo=tt.lineTo,tt.__originalBezierCurveTo=tt.bezierCurveTo,tt.__originalRect=tt.rect,tt.__originalClosePath=tt.closePath,tt.__originalBeginPath=tt.beginPath,tt._removeMirroring=()=>{tt.save=tt.__originalSave,tt.restore=tt.__originalRestore,tt.rotate=tt.__originalRotate,tt.scale=tt.__originalScale,tt.translate=tt.__originalTranslate,tt.transform=tt.__originalTransform,tt.setTransform=tt.__originalSetTransform,tt.resetTransform=tt.__originalResetTransform,tt.clip=tt.__originalClip,tt.moveTo=tt.__originalMoveTo,tt.lineTo=tt.__originalLineTo,tt.bezierCurveTo=tt.__originalBezierCurveTo,tt.rect=tt.__originalRect,tt.closePath=tt.__originalClosePath,tt.beginPath=tt.__originalBeginPath,delete tt._removeMirroring},tt.save=function(){w.save(),this.__originalSave()},tt.restore=function(){w.restore(),this.__originalRestore()},tt.translate=function(W,at){w.translate(W,at),this.__originalTranslate(W,at)},tt.scale=function(W,at){w.scale(W,at),this.__originalScale(W,at)},tt.transform=function(W,at,ot,rt,Pt,Vt){w.transform(W,at,ot,rt,Pt,Vt),this.__originalTransform(W,at,ot,rt,Pt,Vt)},tt.setTransform=function(W,at,ot,rt,Pt,Vt){w.setTransform(W,at,ot,rt,Pt,Vt),this.__originalSetTransform(W,at,ot,rt,Pt,Vt)},tt.resetTransform=function(){w.resetTransform(),this.__originalResetTransform()},tt.rotate=function(W){w.rotate(W),this.__originalRotate(W)},tt.clip=function(W){w.clip(W),this.__originalClip(W)},tt.moveTo=function(P,W){w.moveTo(P,W),this.__originalMoveTo(P,W)},tt.lineTo=function(P,W){w.lineTo(P,W),this.__originalLineTo(P,W)},tt.bezierCurveTo=function(P,W,at,ot,rt,Pt){w.bezierCurveTo(P,W,at,ot,rt,Pt),this.__originalBezierCurveTo(P,W,at,ot,rt,Pt)},tt.rect=function(P,W,at,ot){w.rect(P,W,at,ot),this.__originalRect(P,W,at,ot)},tt.closePath=function(){w.closePath(),this.__originalClosePath()},tt.beginPath=function(){w.beginPath(),this.__originalBeginPath()}}class et{constructor(w){this.canvasFactory=w,this.cache=Object.create(null)}getCanvas(w,P,W){let at;return this.cache[w]!==void 0?(at=this.cache[w],this.canvasFactory.reset(at,P,W)):(at=this.canvasFactory.create(P,W),this.cache[w]=at),at}delete(w){delete this.cache[w]}clear(){for(const w in this.cache){const P=this.cache[w];this.canvasFactory.destroy(P),delete this.cache[w]}}}function q(tt,w,P,W,at,ot,rt,Pt,Vt,Kt){const[Zt,te,re,se,Nt,jt]=(0,G.getCurrentTransform)(tt);if(te===0&&re===0){const Rt=rt*Zt+Nt,Ht=Math.round(Rt),Jt=Pt*se+jt,ae=Math.round(Jt),ne=(rt+Vt)*Zt+Nt,kt=Math.abs(Math.round(ne)-Ht)||1,ge=(Pt+Kt)*se+jt,he=Math.abs(Math.round(ge)-ae)||1;return tt.setTransform(Math.sign(Zt),0,0,Math.sign(se),Ht,ae),tt.drawImage(w,P,W,at,ot,0,0,kt,he),tt.setTransform(Zt,te,re,se,Nt,jt),[kt,he]}if(Zt===0&&se===0){const Rt=Pt*re+Nt,Ht=Math.round(Rt),Jt=rt*te+jt,ae=Math.round(Jt),ne=(Pt+Kt)*re+Nt,kt=Math.abs(Math.round(ne)-Ht)||1,ge=(rt+Vt)*te+jt,he=Math.abs(Math.round(ge)-ae)||1;return tt.setTransform(0,Math.sign(te),Math.sign(re),0,Ht,ae),tt.drawImage(w,P,W,at,ot,0,0,he,kt),tt.setTransform(Zt,te,re,se,Nt,jt),[he,kt]}tt.drawImage(w,P,W,at,ot,rt,Pt,Vt,Kt);const $=Math.hypot(Zt,te),ut=Math.hypot(re,se);return[$*Vt,ut*Kt]}function U(tt){const{width:w,height:P}=tt;if(w>ct||P>ct)return null;const W=1e3,at=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ot=w+1;let rt=new Uint8Array(ot*(P+1)),Pt,Vt,Kt;const Zt=w+7&-8;let te=new Uint8Array(Zt*P),re=0;for(const ut of tt.data){let Rt=128;for(;Rt>0;)te[re++]=ut&Rt?0:255,Rt>>=1}let se=0;for(re=0,te[re]!==0&&(rt[0]=1,++se),Vt=1;Vt<w;Vt++)te[re]!==te[re+1]&&(rt[Vt]=te[re]?2:1,++se),re++;for(te[re]!==0&&(rt[Vt]=2,++se),Pt=1;Pt<P;Pt++){re=Pt*Zt,Kt=Pt*ot,te[re-Zt]!==te[re]&&(rt[Kt]=te[re]?1:8,++se);let ut=(te[re]?4:0)+(te[re-Zt]?8:0);for(Vt=1;Vt<w;Vt++)ut=(ut>>2)+(te[re+1]?4:0)+(te[re-Zt+1]?8:0),at[ut]&&(rt[Kt+Vt]=at[ut],++se),re++;if(te[re-Zt]!==te[re]&&(rt[Kt+Vt]=te[re]?2:4,++se),se>W)return null}for(re=Zt*(P-1),Kt=Pt*ot,te[re]!==0&&(rt[Kt]=8,++se),Vt=1;Vt<w;Vt++)te[re]!==te[re+1]&&(rt[Kt+Vt]=te[re]?4:8,++se),re++;if(te[re]!==0&&(rt[Kt+Vt]=4,++se),se>W)return null;const Nt=new Int32Array([0,ot,-1,0,-ot,0,0,0,1]),jt=new Path2D;for(Pt=0;se&&Pt<=P;Pt++){let ut=Pt*ot;const Rt=ut+w;for(;ut<Rt&&!rt[ut];)ut++;if(ut===Rt)continue;jt.moveTo(ut%ot,Pt);const Ht=ut;let Jt=rt[ut];do{const ae=Nt[Jt];do ut+=ae;while(!rt[ut]);const ne=rt[ut];ne!==5&&ne!==10?(Jt=ne,rt[ut]=0):(Jt=ne&51*Jt>>4,rt[ut]&=Jt>>2|Jt<<2),jt.lineTo(ut%ot,ut/ot|0),rt[ut]||--se}while(Ht!==ut);--Pt}return te=null,rt=null,function(ut){ut.save(),ut.scale(1/w,-1/P),ut.translate(0,-P),ut.fill(jt),ut.beginPath(),ut.restore()}}class Y{constructor(w,P){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=L.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=L.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=L.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,w,P])}clone(){const w=Object.create(this);return w.clipBox=this.clipBox.slice(),w}setCurrentPoint(w,P){this.x=w,this.y=P}updatePathMinMax(w,P,W){[P,W]=L.Util.applyTransform([P,W],w),this.minX=Math.min(this.minX,P),this.minY=Math.min(this.minY,W),this.maxX=Math.max(this.maxX,P),this.maxY=Math.max(this.maxY,W)}updateRectMinMax(w,P){const W=L.Util.applyTransform(P,w),at=L.Util.applyTransform(P.slice(2),w);this.minX=Math.min(this.minX,W[0],at[0]),this.minY=Math.min(this.minY,W[1],at[1]),this.maxX=Math.max(this.maxX,W[0],at[0]),this.maxY=Math.max(this.maxY,W[1],at[1])}updateScalingPathMinMax(w,P){L.Util.scaleMinMax(w,P),this.minX=Math.min(this.minX,P[0]),this.maxX=Math.max(this.maxX,P[1]),this.minY=Math.min(this.minY,P[2]),this.maxY=Math.max(this.maxY,P[3])}updateCurvePathMinMax(w,P,W,at,ot,rt,Pt,Vt,Kt,Zt){const te=L.Util.bezierBoundingBox(P,W,at,ot,rt,Pt,Vt,Kt);if(Zt){Zt[0]=Math.min(Zt[0],te[0],te[2]),Zt[1]=Math.max(Zt[1],te[0],te[2]),Zt[2]=Math.min(Zt[2],te[1],te[3]),Zt[3]=Math.max(Zt[3],te[1],te[3]);return}this.updateRectMinMax(w,te)}getPathBoundingBox(w=_.PathType.FILL,P=null){const W=[this.minX,this.minY,this.maxX,this.maxY];if(w===_.PathType.STROKE){P||(0,L.unreachable)("Stroke bounding box must include transform.");const at=L.Util.singularValueDecompose2dScale(P),ot=at[0]*this.lineWidth/2,rt=at[1]*this.lineWidth/2;W[0]-=ot,W[1]-=rt,W[2]+=ot,W[3]+=rt}return W}updateClipFromPath(){const w=L.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(w||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(w){this.clipBox=w,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(w=_.PathType.FILL,P=null){return L.Util.intersect(this.clipBox,this.getPathBoundingBox(w,P))}}function dt(tt,w){if(typeof ImageData<"u"&&w instanceof ImageData){tt.putImageData(w,0,0);return}const P=w.height,W=w.width,at=P%X,ot=(P-at)/X,rt=at===0?ot:ot+1,Pt=tt.createImageData(W,X);let Vt=0,Kt;const Zt=w.data,te=Pt.data;let re,se,Nt,jt;if(w.kind===L.ImageKind.GRAYSCALE_1BPP){const $=Zt.byteLength,ut=new Uint32Array(te.buffer,0,te.byteLength>>2),Rt=ut.length,Ht=W+7>>3,Jt=4294967295,ae=L.FeatureTest.isLittleEndian?4278190080:255;for(re=0;re<rt;re++){for(Nt=re<ot?X:at,Kt=0,se=0;se<Nt;se++){const ne=$-Vt;let kt=0;const ge=ne>Ht?W:ne*8-7,he=ge&-8;let ze=0,Ie=0;for(;kt<he;kt+=8)Ie=Zt[Vt++],ut[Kt++]=Ie&128?Jt:ae,ut[Kt++]=Ie&64?Jt:ae,ut[Kt++]=Ie&32?Jt:ae,ut[Kt++]=Ie&16?Jt:ae,ut[Kt++]=Ie&8?Jt:ae,ut[Kt++]=Ie&4?Jt:ae,ut[Kt++]=Ie&2?Jt:ae,ut[Kt++]=Ie&1?Jt:ae;for(;kt<ge;kt++)ze===0&&(Ie=Zt[Vt++],ze=128),ut[Kt++]=Ie&ze?Jt:ae,ze>>=1}for(;Kt<Rt;)ut[Kt++]=0;tt.putImageData(Pt,0,re*X)}}else if(w.kind===L.ImageKind.RGBA_32BPP){for(se=0,jt=W*X*4,re=0;re<ot;re++)te.set(Zt.subarray(Vt,Vt+jt)),Vt+=jt,tt.putImageData(Pt,0,se),se+=X;re<rt&&(jt=W*at*4,te.set(Zt.subarray(Vt,Vt+jt)),tt.putImageData(Pt,0,se))}else if(w.kind===L.ImageKind.RGB_24BPP)for(Nt=X,jt=W*Nt,re=0;re<rt;re++){for(re>=ot&&(Nt=at,jt=W*Nt),Kt=0,se=jt;se--;)te[Kt++]=Zt[Vt++],te[Kt++]=Zt[Vt++],te[Kt++]=Zt[Vt++],te[Kt++]=255;tt.putImageData(Pt,0,re*X)}else throw new Error(`bad image kind: ${w.kind}`)}function J(tt,w){if(w.bitmap){tt.drawImage(w.bitmap,0,0);return}const P=w.height,W=w.width,at=P%X,ot=(P-at)/X,rt=at===0?ot:ot+1,Pt=tt.createImageData(W,X);let Vt=0;const Kt=w.data,Zt=Pt.data;for(let te=0;te<rt;te++){const re=te<ot?X:at;({srcPos:Vt}=(0,vt.convertBlackAndWhiteToRGBA)({src:Kt,srcPos:Vt,dest:Zt,width:W,height:re,nonBlackColor:0})),tt.putImageData(Pt,0,te*X)}}function x(tt,w){const P=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const W of P)tt[W]!==void 0&&(w[W]=tt[W]);tt.setLineDash!==void 0&&(w.setLineDash(tt.getLineDash()),w.lineDashOffset=tt.lineDashOffset)}function j(tt){if(tt.strokeStyle=tt.fillStyle="#000000",tt.fillRule="nonzero",tt.globalAlpha=1,tt.lineWidth=1,tt.lineCap="butt",tt.lineJoin="miter",tt.miterLimit=10,tt.globalCompositeOperation="source-over",tt.font="10px sans-serif",tt.setLineDash!==void 0&&(tt.setLineDash([]),tt.lineDashOffset=0),!L.isNodeJS){const{filter:w}=tt;w!=="none"&&w!==""&&(tt.filter="none")}}function R(tt,w,P,W){const at=tt.length;for(let ot=3;ot<at;ot+=4){const rt=tt[ot];if(rt===0)tt[ot-3]=w,tt[ot-2]=P,tt[ot-1]=W;else if(rt<255){const Pt=255-rt;tt[ot-3]=tt[ot-3]*rt+w*Pt>>8,tt[ot-2]=tt[ot-2]*rt+P*Pt>>8,tt[ot-1]=tt[ot-1]*rt+W*Pt>>8}}}function O(tt,w,P){const W=tt.length,at=1/255;for(let ot=3;ot<W;ot+=4){const rt=P?P[tt[ot]]:tt[ot];w[ot]=w[ot]*rt*at|0}}function B(tt,w,P){const W=tt.length;for(let at=3;at<W;at+=4){const ot=tt[at-3]*77+tt[at-2]*152+tt[at-1]*28;w[at]=P?w[at]*P[ot>>8]>>8:w[at]*ot>>16}}function ht(tt,w,P,W,at,ot,rt,Pt,Vt,Kt,Zt){const te=!!ot,re=te?ot[0]:0,se=te?ot[1]:0,Nt=te?ot[2]:0,jt=at==="Luminosity"?B:O,ut=Math.min(W,Math.ceil(1048576/P));for(let Rt=0;Rt<W;Rt+=ut){const Ht=Math.min(ut,W-Rt),Jt=tt.getImageData(Pt-Kt,Rt+(Vt-Zt),P,Ht),ae=w.getImageData(Pt,Rt+Vt,P,Ht);te&&R(Jt.data,re,se,Nt),jt(Jt.data,ae.data,rt),w.putImageData(ae,Pt,Rt+Vt)}}function F(tt,w,P,W){const at=W[0],ot=W[1],rt=W[2]-at,Pt=W[3]-ot;rt===0||Pt===0||(ht(w.context,P,rt,Pt,w.subtype,w.backdrop,w.transferMap,at,ot,w.offsetX,w.offsetY),tt.save(),tt.globalAlpha=1,tt.globalCompositeOperation="source-over",tt.setTransform(1,0,0,1,0,0),tt.drawImage(P.canvas,0,0),tt.restore())}function K(tt,w){const P=L.Util.singularValueDecompose2dScale(tt);P[0]=Math.fround(P[0]),P[1]=Math.fround(P[1]);const W=Math.fround((globalThis.devicePixelRatio||1)*G.PixelsPerInch.PDF_TO_CSS_UNITS);return w!==void 0?w:P[0]<=W||P[1]<=W}const lt=["butt","round","square"],Gt=["miter","round","bevel"],Et={},Mt={},Ot=class Ot{constructor(w,P,W,at,ot,{optionalContentConfig:rt,markedContentStack:Pt=null},Vt,Kt){zt(this,qt);this.ctx=w,this.current=new Y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=P,this.objs=W,this.canvasFactory=at,this.filterFactory=ot,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Pt||[],this.optionalContentConfig=rt,this.cachedCanvases=new et(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Vt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(w,P=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):P}beginDrawing({transform:w,viewport:P,transparency:W=!1,background:at=null}){const ot=this.ctx.canvas.width,rt=this.ctx.canvas.height,Pt=this.ctx.fillStyle;if(this.ctx.fillStyle=at||"#ffffff",this.ctx.fillRect(0,0,ot,rt),this.ctx.fillStyle=Pt,W){const Vt=this.cachedCanvases.getCanvas("transparent",ot,rt);this.compositeCtx=this.ctx,this.transparentCanvas=Vt.canvas,this.ctx=Vt.context,this.ctx.save(),this.ctx.transform(...(0,G.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),j(this.ctx),w&&(this.ctx.transform(...w),this.outputScaleX=w[0],this.outputScaleY=w[0]),this.ctx.transform(...P.transform),this.viewportScale=P.scale,this.baseTransform=(0,G.getCurrentTransform)(this.ctx)}executeOperatorList(w,P,W,at){const ot=w.argsArray,rt=w.fnArray;let Pt=P||0;const Vt=ot.length;if(Vt===Pt)return Pt;const Kt=Vt-Pt>gt&&typeof W=="function",Zt=Kt?Date.now()+N:0;let te=0;const re=this.commonObjs,se=this.objs;let Nt;for(;;){if(at!==void 0&&Pt===at.nextBreakPoint)return at.breakIt(Pt,W),Pt;if(Nt=rt[Pt],Nt!==L.OPS.dependency)this[Nt].apply(this,ot[Pt]);else for(const jt of ot[Pt]){const $=jt.startsWith("g_")?re:se;if(!$.has(jt))return $.get(jt,W),Pt}if(Pt++,Pt===Vt)return Pt;if(Kt&&++te>gt){if(Date.now()>Zt)return W(),Pt;te=0}}}endDrawing(){xt(this,qt,vr).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const w of this._cachedBitmapsMap.values()){for(const P of w.values())typeof HTMLCanvasElement<"u"&&P instanceof HTMLCanvasElement&&(P.width=P.height=0);w.clear()}this._cachedBitmapsMap.clear(),xt(this,qt,br).call(this)}_scaleImage(w,P){const W=w.width,at=w.height;let ot=Math.max(Math.hypot(P[0],P[1]),1),rt=Math.max(Math.hypot(P[2],P[3]),1),Pt=W,Vt=at,Kt="prescale1",Zt,te;for(;ot>2&&Pt>1||rt>2&&Vt>1;){let re=Pt,se=Vt;ot>2&&Pt>1&&(re=Pt>=16384?Math.floor(Pt/2)-1||1:Math.ceil(Pt/2),ot/=Pt/re),rt>2&&Vt>1&&(se=Vt>=16384?Math.floor(Vt/2)-1||1:Math.ceil(Vt)/2,rt/=Vt/se),Zt=this.cachedCanvases.getCanvas(Kt,re,se),te=Zt.context,te.clearRect(0,0,re,se),te.drawImage(w,0,0,Pt,Vt,0,0,re,se),w=Zt.canvas,Pt=re,Vt=se,Kt=Kt==="prescale1"?"prescale2":"prescale1"}return{img:w,paintWidth:Pt,paintHeight:Vt}}_createMaskCanvas(w){const P=this.ctx,{width:W,height:at}=w,ot=this.current.fillColor,rt=this.current.patternFill,Pt=(0,G.getCurrentTransform)(P);let Vt,Kt,Zt,te;if((w.bitmap||w.data)&&w.count>1){const kt=w.bitmap||w.data.buffer;Kt=JSON.stringify(rt?Pt:[Pt.slice(0,4),ot]),Vt=this._cachedBitmapsMap.get(kt),Vt||(Vt=new Map,this._cachedBitmapsMap.set(kt,Vt));const ge=Vt.get(Kt);if(ge&&!rt){const he=Math.round(Math.min(Pt[0],Pt[2])+Pt[4]),ze=Math.round(Math.min(Pt[1],Pt[3])+Pt[5]);return{canvas:ge,offsetX:he,offsetY:ze}}Zt=ge}Zt||(te=this.cachedCanvases.getCanvas("maskCanvas",W,at),J(te.context,w));let re=L.Util.transform(Pt,[1/W,0,0,-1/at,0,0]);re=L.Util.transform(re,[1,0,0,1,0,-at]);const se=L.Util.applyTransform([0,0],re),Nt=L.Util.applyTransform([W,at],re),jt=L.Util.normalizeRect([se[0],se[1],Nt[0],Nt[1]]),$=Math.round(jt[2]-jt[0])||1,ut=Math.round(jt[3]-jt[1])||1,Rt=this.cachedCanvases.getCanvas("fillCanvas",$,ut),Ht=Rt.context,Jt=Math.min(se[0],Nt[0]),ae=Math.min(se[1],Nt[1]);Ht.translate(-Jt,-ae),Ht.transform(...re),Zt||(Zt=this._scaleImage(te.canvas,(0,G.getCurrentTransformInverse)(Ht)),Zt=Zt.img,Vt&&rt&&Vt.set(Kt,Zt)),Ht.imageSmoothingEnabled=K((0,G.getCurrentTransform)(Ht),w.interpolate),q(Ht,Zt,0,0,Zt.width,Zt.height,0,0,W,at),Ht.globalCompositeOperation="source-in";const ne=L.Util.transform((0,G.getCurrentTransformInverse)(Ht),[1,0,0,1,-Jt,-ae]);return Ht.fillStyle=rt?ot.getPattern(P,this,ne,_.PathType.FILL):ot,Ht.fillRect(0,0,W,at),Vt&&!rt&&(this.cachedCanvases.delete("fillCanvas"),Vt.set(Kt,Rt.canvas)),{canvas:Rt.canvas,offsetX:Math.round(Jt),offsetY:Math.round(ae)}}setLineWidth(w){w!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=w,this.ctx.lineWidth=w}setLineCap(w){this.ctx.lineCap=lt[w]}setLineJoin(w){this.ctx.lineJoin=Gt[w]}setMiterLimit(w){this.ctx.miterLimit=w}setDash(w,P){const W=this.ctx;W.setLineDash!==void 0&&(W.setLineDash(w),W.lineDashOffset=P)}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(const[P,W]of w)switch(P){case"LW":this.setLineWidth(W);break;case"LC":this.setLineCap(W);break;case"LJ":this.setLineJoin(W);break;case"ML":this.setMiterLimit(W);break;case"D":this.setDash(W[0],W[1]);break;case"RI":this.setRenderingIntent(W);break;case"FL":this.setFlatness(W);break;case"Font":this.setFont(W[0],W[1]);break;case"CA":this.current.strokeAlpha=W;break;case"ca":this.current.fillAlpha=W,this.ctx.globalAlpha=W;break;case"BM":this.ctx.globalCompositeOperation=W;break;case"SMask":this.current.activeSMask=W?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(W);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const w=this.inSMaskMode;this.current.activeSMask&&!w?this.beginSMaskMode():!this.current.activeSMask&&w&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const w=this.ctx.canvas.width,P=this.ctx.canvas.height,W="smaskGroupAt"+this.groupLevel,at=this.cachedCanvases.getCanvas(W,w,P);this.suspendedCtx=this.ctx,this.ctx=at.context;const ot=this.ctx;ot.setTransform(...(0,G.getCurrentTransform)(this.suspendedCtx)),x(this.suspendedCtx,ot),V(ot,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),x(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(w){if(!this.current.activeSMask)return;w?(w[0]=Math.floor(w[0]),w[1]=Math.floor(w[1]),w[2]=Math.ceil(w[2]),w[3]=Math.ceil(w[3])):w=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const P=this.current.activeSMask,W=this.suspendedCtx;F(W,P,this.ctx,w),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(x(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const w=this.current;this.stateStack.push(w),this.current=w.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),x(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(w,P,W,at,ot,rt){this.ctx.transform(w,P,W,at,ot,rt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(w,P,W){const at=this.ctx,ot=this.current;let rt=ot.x,Pt=ot.y,Vt,Kt;const Zt=(0,G.getCurrentTransform)(at),te=Zt[0]===0&&Zt[3]===0||Zt[1]===0&&Zt[2]===0,re=te?W.slice(0):null;for(let se=0,Nt=0,jt=w.length;se<jt;se++)switch(w[se]|0){case L.OPS.rectangle:rt=P[Nt++],Pt=P[Nt++];const $=P[Nt++],ut=P[Nt++],Rt=rt+$,Ht=Pt+ut;at.moveTo(rt,Pt),$===0||ut===0?at.lineTo(Rt,Ht):(at.lineTo(Rt,Pt),at.lineTo(Rt,Ht),at.lineTo(rt,Ht)),te||ot.updateRectMinMax(Zt,[rt,Pt,Rt,Ht]),at.closePath();break;case L.OPS.moveTo:rt=P[Nt++],Pt=P[Nt++],at.moveTo(rt,Pt),te||ot.updatePathMinMax(Zt,rt,Pt);break;case L.OPS.lineTo:rt=P[Nt++],Pt=P[Nt++],at.lineTo(rt,Pt),te||ot.updatePathMinMax(Zt,rt,Pt);break;case L.OPS.curveTo:Vt=rt,Kt=Pt,rt=P[Nt+4],Pt=P[Nt+5],at.bezierCurveTo(P[Nt],P[Nt+1],P[Nt+2],P[Nt+3],rt,Pt),ot.updateCurvePathMinMax(Zt,Vt,Kt,P[Nt],P[Nt+1],P[Nt+2],P[Nt+3],rt,Pt,re),Nt+=6;break;case L.OPS.curveTo2:Vt=rt,Kt=Pt,at.bezierCurveTo(rt,Pt,P[Nt],P[Nt+1],P[Nt+2],P[Nt+3]),ot.updateCurvePathMinMax(Zt,Vt,Kt,rt,Pt,P[Nt],P[Nt+1],P[Nt+2],P[Nt+3],re),rt=P[Nt+2],Pt=P[Nt+3],Nt+=4;break;case L.OPS.curveTo3:Vt=rt,Kt=Pt,rt=P[Nt+2],Pt=P[Nt+3],at.bezierCurveTo(P[Nt],P[Nt+1],rt,Pt,rt,Pt),ot.updateCurvePathMinMax(Zt,Vt,Kt,P[Nt],P[Nt+1],rt,Pt,rt,Pt,re),Nt+=4;break;case L.OPS.closePath:at.closePath();break}te&&ot.updateScalingPathMinMax(Zt,re),ot.setCurrentPoint(rt,Pt)}closePath(){this.ctx.closePath()}stroke(w=!0){const P=this.ctx,W=this.current.strokeColor;P.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof W=="object"&&(W!=null&&W.getPattern)?(P.save(),P.strokeStyle=W.getPattern(P,this,(0,G.getCurrentTransformInverse)(P),_.PathType.STROKE),this.rescaleAndStroke(!1),P.restore()):this.rescaleAndStroke(!0)),w&&this.consumePath(this.current.getClippedPathBoundingBox()),P.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(w=!0){const P=this.ctx,W=this.current.fillColor,at=this.current.patternFill;let ot=!1;at&&(P.save(),P.fillStyle=W.getPattern(P,this,(0,G.getCurrentTransformInverse)(P),_.PathType.FILL),ot=!0);const rt=this.current.getClippedPathBoundingBox();this.contentVisible&&rt!==null&&(this.pendingEOFill?(P.fill("evenodd"),this.pendingEOFill=!1):P.fill()),ot&&P.restore(),w&&this.consumePath(rt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Et}eoClip(){this.pendingClip=Mt}beginText(){this.current.textMatrix=L.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const w=this.pendingTextPaths,P=this.ctx;if(w===void 0){P.beginPath();return}P.save(),P.beginPath();for(const W of w)P.setTransform(...W.transform),P.translate(W.x,W.y),W.addToPath(P,W.fontSize);P.restore(),P.clip(),P.beginPath(),delete this.pendingTextPaths}setCharSpacing(w){this.current.charSpacing=w}setWordSpacing(w){this.current.wordSpacing=w}setHScale(w){this.current.textHScale=w/100}setLeading(w){this.current.leading=-w}setFont(w,P){var Zt;const W=this.commonObjs.get(w),at=this.current;if(!W)throw new Error(`Can't find font for ${w}`);if(at.fontMatrix=W.fontMatrix||L.FONT_IDENTITY_MATRIX,(at.fontMatrix[0]===0||at.fontMatrix[3]===0)&&(0,L.warn)("Invalid font matrix for font "+w),P<0?(P=-P,at.fontDirection=-1):at.fontDirection=1,this.current.font=W,this.current.fontSize=P,W.isType3Font)return;const ot=W.loadedName||"sans-serif",rt=((Zt=W.systemFontInfo)==null?void 0:Zt.css)||`"${ot}", ${W.fallbackName}`;let Pt="normal";W.black?Pt="900":W.bold&&(Pt="bold");const Vt=W.italic?"italic":"normal";let Kt=P;P<$t?Kt=$t:P>mt&&(Kt=mt),this.current.fontSizeScale=P/Kt,this.ctx.font=`${Vt} ${Pt} ${Kt}px ${rt}`}setTextRenderingMode(w){this.current.textRenderingMode=w}setTextRise(w){this.current.textRise=w}moveText(w,P){this.current.x=this.current.lineX+=w,this.current.y=this.current.lineY+=P}setLeadingMoveText(w,P){this.setLeading(-P),this.moveText(w,P)}setTextMatrix(w,P,W,at,ot,rt){this.current.textMatrix=[w,P,W,at,ot,rt],this.current.textMatrixScale=Math.hypot(w,P),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(w,P,W,at){const ot=this.ctx,rt=this.current,Pt=rt.font,Vt=rt.textRenderingMode,Kt=rt.fontSize/rt.fontSizeScale,Zt=Vt&L.TextRenderingMode.FILL_STROKE_MASK,te=!!(Vt&L.TextRenderingMode.ADD_TO_PATH_FLAG),re=rt.patternFill&&!Pt.missingFile;let se;(Pt.disableFontFace||te||re)&&(se=Pt.getPathGenerator(this.commonObjs,w)),Pt.disableFontFace||re?(ot.save(),ot.translate(P,W),ot.beginPath(),se(ot,Kt),at&&ot.setTransform(...at),(Zt===L.TextRenderingMode.FILL||Zt===L.TextRenderingMode.FILL_STROKE)&&ot.fill(),(Zt===L.TextRenderingMode.STROKE||Zt===L.TextRenderingMode.FILL_STROKE)&&ot.stroke(),ot.restore()):((Zt===L.TextRenderingMode.FILL||Zt===L.TextRenderingMode.FILL_STROKE)&&ot.fillText(w,P,W),(Zt===L.TextRenderingMode.STROKE||Zt===L.TextRenderingMode.FILL_STROKE)&&ot.strokeText(w,P,W)),te&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,G.getCurrentTransform)(ot),x:P,y:W,fontSize:Kt,addToPath:se})}get isFontSubpixelAAEnabled(){const{context:w}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);w.scale(1.5,1),w.fillText("I",0,10);const P=w.getImageData(0,0,10,10).data;let W=!1;for(let at=3;at<P.length;at+=4)if(P[at]>0&&P[at]<255){W=!0;break}return(0,L.shadow)(this,"isFontSubpixelAAEnabled",W)}showText(w){const P=this.current,W=P.font;if(W.isType3Font)return this.showType3Text(w);const at=P.fontSize;if(at===0)return;const ot=this.ctx,rt=P.fontSizeScale,Pt=P.charSpacing,Vt=P.wordSpacing,Kt=P.fontDirection,Zt=P.textHScale*Kt,te=w.length,re=W.vertical,se=re?1:-1,Nt=W.defaultVMetrics,jt=at*P.fontMatrix[0],$=P.textRenderingMode===L.TextRenderingMode.FILL&&!W.disableFontFace&&!P.patternFill;ot.save(),ot.transform(...P.textMatrix),ot.translate(P.x,P.y+P.textRise),Kt>0?ot.scale(Zt,-1):ot.scale(Zt,1);let ut;if(P.patternFill){ot.save();const ne=P.fillColor.getPattern(ot,this,(0,G.getCurrentTransformInverse)(ot),_.PathType.FILL);ut=(0,G.getCurrentTransform)(ot),ot.restore(),ot.fillStyle=ne}let Rt=P.lineWidth;const Ht=P.textMatrixScale;if(Ht===0||Rt===0){const ne=P.textRenderingMode&L.TextRenderingMode.FILL_STROKE_MASK;(ne===L.TextRenderingMode.STROKE||ne===L.TextRenderingMode.FILL_STROKE)&&(Rt=this.getSinglePixelWidth())}else Rt/=Ht;if(rt!==1&&(ot.scale(rt,rt),Rt/=rt),ot.lineWidth=Rt,W.isInvalidPDFjsFont){const ne=[];let kt=0;for(const ge of w)ne.push(ge.unicode),kt+=ge.width;ot.fillText(ne.join(""),0,0),P.x+=kt*jt*Zt,ot.restore(),this.compose();return}let Jt=0,ae;for(ae=0;ae<te;++ae){const ne=w[ae];if(typeof ne=="number"){Jt+=se*ne*at/1e3;continue}let kt=!1;const ge=(ne.isSpace?Vt:0)+Pt,he=ne.fontChar,ze=ne.accent;let Ie,Qe,Ae=ne.width;if(re){const Xe=ne.vmetric||Nt,ln=-(ne.vmetric?Xe[1]:Ae*.5)*jt,ee=Xe[2]*jt;Ae=Xe?-Xe[0]:Ae,Ie=ln/rt,Qe=(Jt+ee)/rt}else Ie=Jt/rt,Qe=0;if(W.remeasure&&Ae>0){const Xe=ot.measureText(he).width*1e3/at*rt;if(Ae<Xe&&this.isFontSubpixelAAEnabled){const ln=Ae/Xe;kt=!0,ot.save(),ot.scale(ln,1),Ie/=ln}else Ae!==Xe&&(Ie+=(Ae-Xe)/2e3*at/rt)}if(this.contentVisible&&(ne.isInFont||W.missingFile)){if($&&!ze)ot.fillText(he,Ie,Qe);else if(this.paintChar(he,Ie,Qe,ut),ze){const Xe=Ie+at*ze.offset.x/rt,ln=Qe-at*ze.offset.y/rt;this.paintChar(ze.fontChar,Xe,ln,ut)}}const Re=re?Ae*jt-ge*Kt:Ae*jt+ge*Kt;Jt+=Re,kt&&ot.restore()}re?P.y-=Jt:P.x+=Jt*Zt,ot.restore(),this.compose()}showType3Text(w){const P=this.ctx,W=this.current,at=W.font,ot=W.fontSize,rt=W.fontDirection,Pt=at.vertical?1:-1,Vt=W.charSpacing,Kt=W.wordSpacing,Zt=W.textHScale*rt,te=W.fontMatrix||L.FONT_IDENTITY_MATRIX,re=w.length,se=W.textRenderingMode===L.TextRenderingMode.INVISIBLE;let Nt,jt,$,ut;if(!(se||ot===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,P.save(),P.transform(...W.textMatrix),P.translate(W.x,W.y),P.scale(Zt,rt),Nt=0;Nt<re;++Nt){if(jt=w[Nt],typeof jt=="number"){ut=Pt*jt*ot/1e3,this.ctx.translate(ut,0),W.x+=ut*Zt;continue}const Rt=(jt.isSpace?Kt:0)+Vt,Ht=at.charProcOperatorList[jt.operatorListId];if(!Ht){(0,L.warn)(`Type3 character "${jt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=jt,this.save(),P.scale(ot,ot),P.transform(...te),this.executeOperatorList(Ht),this.restore()),$=L.Util.applyTransform([jt.width,0],te)[0]*ot+Rt,P.translate($,0),W.x+=$*Zt}P.restore(),this.processingType3=null}}setCharWidth(w,P){}setCharWidthAndBounds(w,P,W,at,ot,rt){this.ctx.rect(W,at,ot-W,rt-at),this.ctx.clip(),this.endPath()}getColorN_Pattern(w){let P;if(w[0]==="TilingPattern"){const W=w[1],at=this.baseTransform||(0,G.getCurrentTransform)(this.ctx),ot={createCanvasGraphics:rt=>new Ot(rt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};P=new _.TilingPattern(w,W,this.ctx,ot,at)}else P=this._getPattern(w[1],w[2]);return P}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(w,P,W){const at=L.Util.makeHexColor(w,P,W);this.ctx.strokeStyle=at,this.current.strokeColor=at}setFillRGBColor(w,P,W){const at=L.Util.makeHexColor(w,P,W);this.ctx.fillStyle=at,this.current.fillColor=at,this.current.patternFill=!1}_getPattern(w,P=null){let W;return this.cachedPatterns.has(w)?W=this.cachedPatterns.get(w):(W=(0,_.getShadingPattern)(this.getObject(w)),this.cachedPatterns.set(w,W)),P&&(W.matrix=P),W}shadingFill(w){if(!this.contentVisible)return;const P=this.ctx;this.save();const W=this._getPattern(w);P.fillStyle=W.getPattern(P,this,(0,G.getCurrentTransformInverse)(P),_.PathType.SHADING);const at=(0,G.getCurrentTransformInverse)(P);if(at){const{width:ot,height:rt}=P.canvas,[Pt,Vt,Kt,Zt]=L.Util.getAxialAlignedBoundingBox([0,0,ot,rt],at);this.ctx.fillRect(Pt,Vt,Kt-Pt,Zt-Vt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,L.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,L.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(w,P){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(w)&&w.length===6&&this.transform(...w),this.baseTransform=(0,G.getCurrentTransform)(this.ctx),P)){const W=P[2]-P[0],at=P[3]-P[1];this.ctx.rect(P[0],P[1],W,at),this.current.updateRectMinMax((0,G.getCurrentTransform)(this.ctx),P),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(w){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const P=this.ctx;w.isolated||(0,L.info)("TODO: Support non-isolated groups."),w.knockout&&(0,L.warn)("Knockout groups not supported.");const W=(0,G.getCurrentTransform)(P);if(w.matrix&&P.transform(...w.matrix),!w.bbox)throw new Error("Bounding box is required.");let at=L.Util.getAxialAlignedBoundingBox(w.bbox,(0,G.getCurrentTransform)(P));const ot=[0,0,P.canvas.width,P.canvas.height];at=L.Util.intersect(at,ot)||[0,0,0,0];const rt=Math.floor(at[0]),Pt=Math.floor(at[1]);let Vt=Math.max(Math.ceil(at[2])-rt,1),Kt=Math.max(Math.ceil(at[3])-Pt,1),Zt=1,te=1;Vt>st&&(Zt=Vt/st,Vt=st),Kt>st&&(te=Kt/st,Kt=st),this.current.startNewPathAndClipBox([0,0,Vt,Kt]);let re="groupAt"+this.groupLevel;w.smask&&(re+="_smask_"+this.smaskCounter++%2);const se=this.cachedCanvases.getCanvas(re,Vt,Kt),Nt=se.context;Nt.scale(1/Zt,1/te),Nt.translate(-rt,-Pt),Nt.transform(...W),w.smask?this.smaskStack.push({canvas:se.canvas,context:Nt,offsetX:rt,offsetY:Pt,scaleX:Zt,scaleY:te,subtype:w.smask.subtype,backdrop:w.smask.backdrop,transferMap:w.smask.transferMap||null,startTransformInverse:null}):(P.setTransform(1,0,0,1,0,0),P.translate(rt,Pt),P.scale(Zt,te),P.save()),x(P,Nt),this.ctx=Nt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(P),this.groupLevel++}endGroup(w){if(!this.contentVisible)return;this.groupLevel--;const P=this.ctx,W=this.groupStack.pop();if(this.ctx=W,this.ctx.imageSmoothingEnabled=!1,w.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const at=(0,G.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...at);const ot=L.Util.getAxialAlignedBoundingBox([0,0,P.canvas.width,P.canvas.height],at);this.ctx.drawImage(P.canvas,0,0),this.ctx.restore(),this.compose(ot)}}beginAnnotation(w,P,W,at,ot){if(xt(this,qt,vr).call(this),j(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(P)&&P.length===4){const rt=P[2]-P[0],Pt=P[3]-P[1];if(ot&&this.annotationCanvasMap){W=W.slice(),W[4]-=P[0],W[5]-=P[1],P=P.slice(),P[0]=P[1]=0,P[2]=rt,P[3]=Pt;const[Vt,Kt]=L.Util.singularValueDecompose2dScale((0,G.getCurrentTransform)(this.ctx)),{viewportScale:Zt}=this,te=Math.ceil(rt*this.outputScaleX*Zt),re=Math.ceil(Pt*this.outputScaleY*Zt);this.annotationCanvas=this.canvasFactory.create(te,re);const{canvas:se,context:Nt}=this.annotationCanvas;this.annotationCanvasMap.set(w,se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Nt,this.ctx.save(),this.ctx.setTransform(Vt,0,0,-Kt,0,Pt*Kt),j(this.ctx)}else j(this.ctx),this.ctx.rect(P[0],P[1],rt,Pt),this.ctx.clip(),this.endPath()}this.current=new Y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...W),this.transform(...at)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),xt(this,qt,br).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(w){if(!this.contentVisible)return;const P=w.count;w=this.getObject(w.data,w),w.count=P;const W=this.ctx,at=this.processingType3;if(at&&(at.compiled===void 0&&(at.compiled=U(w)),at.compiled)){at.compiled(W);return}const ot=this._createMaskCanvas(w),rt=ot.canvas;W.save(),W.setTransform(1,0,0,1,0,0),W.drawImage(rt,ot.offsetX,ot.offsetY),W.restore(),this.compose()}paintImageMaskXObjectRepeat(w,P,W=0,at=0,ot,rt){if(!this.contentVisible)return;w=this.getObject(w.data,w);const Pt=this.ctx;Pt.save();const Vt=(0,G.getCurrentTransform)(Pt);Pt.transform(P,W,at,ot,0,0);const Kt=this._createMaskCanvas(w);Pt.setTransform(1,0,0,1,Kt.offsetX-Vt[4],Kt.offsetY-Vt[5]);for(let Zt=0,te=rt.length;Zt<te;Zt+=2){const re=L.Util.transform(Vt,[P,W,at,ot,rt[Zt],rt[Zt+1]]),[se,Nt]=L.Util.applyTransform([0,0],re);Pt.drawImage(Kt.canvas,se,Nt)}Pt.restore(),this.compose()}paintImageMaskXObjectGroup(w){if(!this.contentVisible)return;const P=this.ctx,W=this.current.fillColor,at=this.current.patternFill;for(const ot of w){const{data:rt,width:Pt,height:Vt,transform:Kt}=ot,Zt=this.cachedCanvases.getCanvas("maskCanvas",Pt,Vt),te=Zt.context;te.save();const re=this.getObject(rt,ot);J(te,re),te.globalCompositeOperation="source-in",te.fillStyle=at?W.getPattern(te,this,(0,G.getCurrentTransformInverse)(P),_.PathType.FILL):W,te.fillRect(0,0,Pt,Vt),te.restore(),P.save(),P.transform(...Kt),P.scale(1,-1),q(P,Zt.canvas,0,0,Pt,Vt,0,-1,1,1),P.restore()}this.compose()}paintImageXObject(w){if(!this.contentVisible)return;const P=this.getObject(w);if(!P){(0,L.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(P)}paintImageXObjectRepeat(w,P,W,at){if(!this.contentVisible)return;const ot=this.getObject(w);if(!ot){(0,L.warn)("Dependent image isn't ready yet");return}const rt=ot.width,Pt=ot.height,Vt=[];for(let Kt=0,Zt=at.length;Kt<Zt;Kt+=2)Vt.push({transform:[P,0,0,W,at[Kt],at[Kt+1]],x:0,y:0,w:rt,h:Pt});this.paintInlineImageXObjectGroup(ot,Vt)}applyTransferMapsToCanvas(w){return this.current.transferMaps!=="none"&&(w.filter=this.current.transferMaps,w.drawImage(w.canvas,0,0),w.filter="none"),w.canvas}applyTransferMapsToBitmap(w){if(this.current.transferMaps==="none")return w.bitmap;const{bitmap:P,width:W,height:at}=w,ot=this.cachedCanvases.getCanvas("inlineImage",W,at),rt=ot.context;return rt.filter=this.current.transferMaps,rt.drawImage(P,0,0),rt.filter="none",ot.canvas}paintInlineImageXObject(w){if(!this.contentVisible)return;const P=w.width,W=w.height,at=this.ctx;if(this.save(),!L.isNodeJS){const{filter:Pt}=at;Pt!=="none"&&Pt!==""&&(at.filter="none")}at.scale(1/P,-1/W);let ot;if(w.bitmap)ot=this.applyTransferMapsToBitmap(w);else if(typeof HTMLElement=="function"&&w instanceof HTMLElement||!w.data)ot=w;else{const Vt=this.cachedCanvases.getCanvas("inlineImage",P,W).context;dt(Vt,w),ot=this.applyTransferMapsToCanvas(Vt)}const rt=this._scaleImage(ot,(0,G.getCurrentTransformInverse)(at));at.imageSmoothingEnabled=K((0,G.getCurrentTransform)(at),w.interpolate),q(at,rt.img,0,0,rt.paintWidth,rt.paintHeight,0,-W,P,W),this.compose(),this.restore()}paintInlineImageXObjectGroup(w,P){if(!this.contentVisible)return;const W=this.ctx;let at;if(w.bitmap)at=w.bitmap;else{const ot=w.width,rt=w.height,Vt=this.cachedCanvases.getCanvas("inlineImage",ot,rt).context;dt(Vt,w),at=this.applyTransferMapsToCanvas(Vt)}for(const ot of P)W.save(),W.transform(...ot.transform),W.scale(1,-1),q(W,at,ot.x,ot.y,ot.w,ot.h,0,-1,1,1),W.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(w){}markPointProps(w,P){}beginMarkedContent(w){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(w,P){w==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(P)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(w){const P=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(w);const W=this.ctx;this.pendingClip&&(P||(this.pendingClip===Mt?W.clip("evenodd"):W.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),W.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const w=(0,G.getCurrentTransform)(this.ctx);if(w[1]===0&&w[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(w[0]),Math.abs(w[3]));else{const P=Math.abs(w[0]*w[3]-w[2]*w[1]),W=Math.hypot(w[0],w[2]),at=Math.hypot(w[1],w[3]);this._cachedGetSinglePixelWidth=Math.max(W,at)/P}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:w}=this.current,{a:P,b:W,c:at,d:ot}=this.ctx.getTransform();let rt,Pt;if(W===0&&at===0){const Vt=Math.abs(P),Kt=Math.abs(ot);if(Vt===Kt)if(w===0)rt=Pt=1/Vt;else{const Zt=Vt*w;rt=Pt=Zt<1?1/Zt:1}else if(w===0)rt=1/Vt,Pt=1/Kt;else{const Zt=Vt*w,te=Kt*w;rt=Zt<1?1/Zt:1,Pt=te<1?1/te:1}}else{const Vt=Math.abs(P*ot-W*at),Kt=Math.hypot(P,W),Zt=Math.hypot(at,ot);if(w===0)rt=Zt/Vt,Pt=Kt/Vt;else{const te=w*Vt;rt=Zt>te?Zt/te:1,Pt=Kt>te?Kt/te:1}}this._cachedScaleForStroking[0]=rt,this._cachedScaleForStroking[1]=Pt}return this._cachedScaleForStroking}rescaleAndStroke(w){const{ctx:P}=this,{lineWidth:W}=this.current,[at,ot]=this.getScaleForStroking();if(P.lineWidth=W||1,at===1&&ot===1){P.stroke();return}const rt=P.getLineDash();if(w&&P.save(),P.scale(at,ot),rt.length>0){const Pt=Math.max(at,ot);P.setLineDash(rt.map(Vt=>Vt/Pt)),P.lineDashOffset/=Pt}P.stroke(),w&&P.restore()}isContentVisible(){for(let w=this.markedContentStack.length-1;w>=0;w--)if(!this.markedContentStack[w].visible)return!1;return!0}};qt=new WeakSet,vr=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},br=function(){if(this.pageColors){const w=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(w!=="none"){const P=this.ctx.filter;this.ctx.filter=w,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=P}}};let yt=Ot;D.CanvasGraphics=yt;for(const tt in L.OPS)yt.prototype[tt]!==void 0&&(yt.prototype[L.OPS[tt]]=yt.prototype[tt])},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.TilingPattern=D.PathType=void 0,D.getShadingPattern=X;var L=Tt(1),G=Tt(6);const _={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};D.PathType=_;function vt(U,Y){if(!Y)return;const dt=Y[2]-Y[0],J=Y[3]-Y[1],x=new Path2D;x.rect(Y[0],Y[1],dt,J),U.clip(x)}class $t{constructor(){this.constructor===$t&&(0,L.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,L.unreachable)("Abstract method `getPattern` called.")}}class mt extends $t{constructor(Y){super(),this._type=Y[1],this._bbox=Y[2],this._colorStops=Y[3],this._p0=Y[4],this._p1=Y[5],this._r0=Y[6],this._r1=Y[7],this.matrix=null}_createGradient(Y){let dt;this._type==="axial"?dt=Y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(dt=Y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const J of this._colorStops)dt.addColorStop(J[0],J[1]);return dt}getPattern(Y,dt,J,x){let j;if(x===_.STROKE||x===_.FILL){const R=dt.current.getClippedPathBoundingBox(x,(0,G.getCurrentTransform)(Y))||[0,0,0,0],O=Math.ceil(R[2]-R[0])||1,B=Math.ceil(R[3]-R[1])||1,ht=dt.cachedCanvases.getCanvas("pattern",O,B,!0),F=ht.context;F.clearRect(0,0,F.canvas.width,F.canvas.height),F.beginPath(),F.rect(0,0,F.canvas.width,F.canvas.height),F.translate(-R[0],-R[1]),J=L.Util.transform(J,[1,0,0,1,R[0],R[1]]),F.transform(...dt.baseTransform),this.matrix&&F.transform(...this.matrix),vt(F,this._bbox),F.fillStyle=this._createGradient(F),F.fill(),j=Y.createPattern(ht.canvas,"no-repeat");const K=new DOMMatrix(J);j.setTransform(K)}else vt(Y,this._bbox),j=this._createGradient(Y);return j}}function st(U,Y,dt,J,x,j,R,O){const B=Y.coords,ht=Y.colors,F=U.data,K=U.width*4;let lt;B[dt+1]>B[J+1]&&(lt=dt,dt=J,J=lt,lt=j,j=R,R=lt),B[J+1]>B[x+1]&&(lt=J,J=x,x=lt,lt=R,R=O,O=lt),B[dt+1]>B[J+1]&&(lt=dt,dt=J,J=lt,lt=j,j=R,R=lt);const Gt=(B[dt]+Y.offsetX)*Y.scaleX,Et=(B[dt+1]+Y.offsetY)*Y.scaleY,Mt=(B[J]+Y.offsetX)*Y.scaleX,yt=(B[J+1]+Y.offsetY)*Y.scaleY,qt=(B[x]+Y.offsetX)*Y.scaleX,it=(B[x+1]+Y.offsetY)*Y.scaleY;if(Et>=it)return;const At=ht[j],Ot=ht[j+1],tt=ht[j+2],w=ht[R],P=ht[R+1],W=ht[R+2],at=ht[O],ot=ht[O+1],rt=ht[O+2],Pt=Math.round(Et),Vt=Math.round(it);let Kt,Zt,te,re,se,Nt,jt,$;for(let ut=Pt;ut<=Vt;ut++){if(ut<yt){const ne=ut<Et?0:(Et-ut)/(Et-yt);Kt=Gt-(Gt-Mt)*ne,Zt=At-(At-w)*ne,te=Ot-(Ot-P)*ne,re=tt-(tt-W)*ne}else{let ne;ut>it?ne=1:yt===it?ne=0:ne=(yt-ut)/(yt-it),Kt=Mt-(Mt-qt)*ne,Zt=w-(w-at)*ne,te=P-(P-ot)*ne,re=W-(W-rt)*ne}let Rt;ut<Et?Rt=0:ut>it?Rt=1:Rt=(Et-ut)/(Et-it),se=Gt-(Gt-qt)*Rt,Nt=At-(At-at)*Rt,jt=Ot-(Ot-ot)*Rt,$=tt-(tt-rt)*Rt;const Ht=Math.round(Math.min(Kt,se)),Jt=Math.round(Math.max(Kt,se));let ae=K*ut+Ht*4;for(let ne=Ht;ne<=Jt;ne++)Rt=(Kt-ne)/(Kt-se),Rt<0?Rt=0:Rt>1&&(Rt=1),F[ae++]=Zt-(Zt-Nt)*Rt|0,F[ae++]=te-(te-jt)*Rt|0,F[ae++]=re-(re-$)*Rt|0,F[ae++]=255}}function N(U,Y,dt){const J=Y.coords,x=Y.colors;let j,R;switch(Y.type){case"lattice":const O=Y.verticesPerRow,B=Math.floor(J.length/O)-1,ht=O-1;for(j=0;j<B;j++){let F=j*O;for(let K=0;K<ht;K++,F++)st(U,dt,J[F],J[F+1],J[F+O],x[F],x[F+1],x[F+O]),st(U,dt,J[F+O+1],J[F+1],J[F+O],x[F+O+1],x[F+1],x[F+O])}break;case"triangles":for(j=0,R=J.length;j<R;j+=3)st(U,dt,J[j],J[j+1],J[j+2],x[j],x[j+1],x[j+2]);break;default:throw new Error("illegal figure")}}class gt extends $t{constructor(Y){super(),this._coords=Y[2],this._colors=Y[3],this._figures=Y[4],this._bounds=Y[5],this._bbox=Y[7],this._background=Y[8],this.matrix=null}_createMeshCanvas(Y,dt,J){const O=Math.floor(this._bounds[0]),B=Math.floor(this._bounds[1]),ht=Math.ceil(this._bounds[2])-O,F=Math.ceil(this._bounds[3])-B,K=Math.min(Math.ceil(Math.abs(ht*Y[0]*1.1)),3e3),lt=Math.min(Math.ceil(Math.abs(F*Y[1]*1.1)),3e3),Gt=ht/K,Et=F/lt,Mt={coords:this._coords,colors:this._colors,offsetX:-O,offsetY:-B,scaleX:1/Gt,scaleY:1/Et},yt=K+2*2,qt=lt+2*2,it=J.getCanvas("mesh",yt,qt,!1),At=it.context,Ot=At.createImageData(K,lt);if(dt){const w=Ot.data;for(let P=0,W=w.length;P<W;P+=4)w[P]=dt[0],w[P+1]=dt[1],w[P+2]=dt[2],w[P+3]=255}for(const w of this._figures)N(Ot,w,Mt);return At.putImageData(Ot,2,2),{canvas:it.canvas,offsetX:O-2*Gt,offsetY:B-2*Et,scaleX:Gt,scaleY:Et}}getPattern(Y,dt,J,x){vt(Y,this._bbox);let j;if(x===_.SHADING)j=L.Util.singularValueDecompose2dScale((0,G.getCurrentTransform)(Y));else if(j=L.Util.singularValueDecompose2dScale(dt.baseTransform),this.matrix){const O=L.Util.singularValueDecompose2dScale(this.matrix);j=[j[0]*O[0],j[1]*O[1]]}const R=this._createMeshCanvas(j,x===_.SHADING?null:this._background,dt.cachedCanvases);return x!==_.SHADING&&(Y.setTransform(...dt.baseTransform),this.matrix&&Y.transform(...this.matrix)),Y.translate(R.offsetX,R.offsetY),Y.scale(R.scaleX,R.scaleY),Y.createPattern(R.canvas,"no-repeat")}}class ct extends $t{getPattern(){return"hotpink"}}function X(U){switch(U[0]){case"RadialAxial":return new mt(U);case"Mesh":return new gt(U);case"Dummy":return new ct}throw new Error(`Unknown IR type: ${U[0]}`)}const V={COLORED:1,UNCOLORED:2},q=class q{constructor(Y,dt,J,x,j){this.operatorList=Y[2],this.matrix=Y[3]||[1,0,0,1,0,0],this.bbox=Y[4],this.xstep=Y[5],this.ystep=Y[6],this.paintType=Y[7],this.tilingType=Y[8],this.color=dt,this.ctx=J,this.canvasGraphicsFactory=x,this.baseTransform=j}createPatternCanvas(Y){const dt=this.operatorList,J=this.bbox,x=this.xstep,j=this.ystep,R=this.paintType,O=this.tilingType,B=this.color,ht=this.canvasGraphicsFactory;(0,L.info)("TilingType: "+O);const F=J[0],K=J[1],lt=J[2],Gt=J[3],Et=L.Util.singularValueDecompose2dScale(this.matrix),Mt=L.Util.singularValueDecompose2dScale(this.baseTransform),yt=[Et[0]*Mt[0],Et[1]*Mt[1]],qt=this.getSizeAndScale(x,this.ctx.canvas.width,yt[0]),it=this.getSizeAndScale(j,this.ctx.canvas.height,yt[1]),At=Y.cachedCanvases.getCanvas("pattern",qt.size,it.size,!0),Ot=At.context,tt=ht.createCanvasGraphics(Ot);tt.groupLevel=Y.groupLevel,this.setFillAndStrokeStyleToContext(tt,R,B);let w=F,P=K,W=lt,at=Gt;return F<0&&(w=0,W+=Math.abs(F)),K<0&&(P=0,at+=Math.abs(K)),Ot.translate(-(qt.scale*w),-(it.scale*P)),tt.transform(qt.scale,0,0,it.scale,0,0),Ot.save(),this.clipBbox(tt,w,P,W,at),tt.baseTransform=(0,G.getCurrentTransform)(tt.ctx),tt.executeOperatorList(dt),tt.endDrawing(),{canvas:At.canvas,scaleX:qt.scale,scaleY:it.scale,offsetX:w,offsetY:P}}getSizeAndScale(Y,dt,J){Y=Math.abs(Y);const x=Math.max(q.MAX_PATTERN_SIZE,dt);let j=Math.ceil(Y*J);return j>=x?j=x:J=j/Y,{scale:J,size:j}}clipBbox(Y,dt,J,x,j){const R=x-dt,O=j-J;Y.ctx.rect(dt,J,R,O),Y.current.updateRectMinMax((0,G.getCurrentTransform)(Y.ctx),[dt,J,x,j]),Y.clip(),Y.endPath()}setFillAndStrokeStyleToContext(Y,dt,J){const x=Y.ctx,j=Y.current;switch(dt){case V.COLORED:const R=this.ctx;x.fillStyle=R.fillStyle,x.strokeStyle=R.strokeStyle,j.fillColor=R.fillStyle,j.strokeColor=R.strokeStyle;break;case V.UNCOLORED:const O=L.Util.makeHexColor(J[0],J[1],J[2]);x.fillStyle=O,x.strokeStyle=O,j.fillColor=O,j.strokeColor=O;break;default:throw new L.FormatError(`Unsupported paint type: ${dt}`)}}getPattern(Y,dt,J,x){let j=J;x!==_.SHADING&&(j=L.Util.transform(j,dt.baseTransform),this.matrix&&(j=L.Util.transform(j,this.matrix)));const R=this.createPatternCanvas(dt);let O=new DOMMatrix(j);O=O.translate(R.offsetX,R.offsetY),O=O.scale(1/R.scaleX,1/R.scaleY);const B=Y.createPattern(R.canvas,"repeat");return B.setTransform(O),B}};yn(q,"MAX_PATTERN_SIZE",3e3);let et=q;D.TilingPattern=et},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.convertBlackAndWhiteToRGBA=_,D.convertToRGBA=G,D.grayToRGBA=$t;var L=Tt(1);function G(mt){switch(mt.kind){case L.ImageKind.GRAYSCALE_1BPP:return _(mt);case L.ImageKind.RGB_24BPP:return vt(mt)}return null}function _({src:mt,srcPos:st=0,dest:N,width:gt,height:ct,nonBlackColor:X=4294967295,inverseDecode:V=!1}){const et=L.FeatureTest.isLittleEndian?4278190080:255,[q,U]=V?[X,et]:[et,X],Y=gt>>3,dt=gt&7,J=mt.length;N=new Uint32Array(N.buffer);let x=0;for(let j=0;j<ct;j++){for(const O=st+Y;st<O;st++){const B=st<J?mt[st]:255;N[x++]=B&128?U:q,N[x++]=B&64?U:q,N[x++]=B&32?U:q,N[x++]=B&16?U:q,N[x++]=B&8?U:q,N[x++]=B&4?U:q,N[x++]=B&2?U:q,N[x++]=B&1?U:q}if(dt===0)continue;const R=st<J?mt[st++]:255;for(let O=0;O<dt;O++)N[x++]=R&1<<7-O?U:q}return{srcPos:st,destPos:x}}function vt({src:mt,srcPos:st=0,dest:N,destPos:gt=0,width:ct,height:X}){let V=0;const et=mt.length>>2,q=new Uint32Array(mt.buffer,st,et);if(L.FeatureTest.isLittleEndian){for(;V<et-2;V+=3,gt+=4){const U=q[V],Y=q[V+1],dt=q[V+2];N[gt]=U|4278190080,N[gt+1]=U>>>24|Y<<8|4278190080,N[gt+2]=Y>>>16|dt<<16|4278190080,N[gt+3]=dt>>>8|4278190080}for(let U=V*4,Y=mt.length;U<Y;U+=3)N[gt++]=mt[U]|mt[U+1]<<8|mt[U+2]<<16|4278190080}else{for(;V<et-2;V+=3,gt+=4){const U=q[V],Y=q[V+1],dt=q[V+2];N[gt]=U|255,N[gt+1]=U<<24|Y>>>8|255,N[gt+2]=Y<<16|dt>>>16|255,N[gt+3]=dt<<8|255}for(let U=V*4,Y=mt.length;U<Y;U+=3)N[gt++]=mt[U]<<24|mt[U+1]<<16|mt[U+2]<<8|255}return{srcPos:st,destPos:gt}}function $t(mt,st){if(L.FeatureTest.isLittleEndian)for(let N=0,gt=mt.length;N<gt;N++)st[N]=mt[N]*65793|4278190080;else for(let N=0,gt=mt.length;N<gt;N++)st[N]=mt[N]*16843008|255}},(T,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.GlobalWorkerOptions=void 0;const Tt=Object.create(null);D.GlobalWorkerOptions=Tt,Tt.workerPort=null,Tt.workerSrc=""},(T,D,Tt)=>{var mt,hs,ds,Ii;Object.defineProperty(D,"__esModule",{value:!0}),D.MessageHandler=void 0;var L=Tt(1);const G={UNKNOWN:0,DATA:1,ERROR:2},_={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function vt(ct){switch(ct instanceof Error||typeof ct=="object"&&ct!==null||(0,L.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ct.name){case"AbortException":return new L.AbortException(ct.message);case"MissingPDFException":return new L.MissingPDFException(ct.message);case"PasswordException":return new L.PasswordException(ct.message,ct.code);case"UnexpectedResponseException":return new L.UnexpectedResponseException(ct.message,ct.status);case"UnknownErrorException":return new L.UnknownErrorException(ct.message,ct.details);default:return new L.UnknownErrorException(ct.message,ct.toString())}}class $t{constructor(X,V,et){zt(this,mt);this.sourceName=X,this.targetName=V,this.comObj=et,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=q=>{const U=q.data;if(U.targetName!==this.sourceName)return;if(U.stream){xt(this,mt,ds).call(this,U);return}if(U.callback){const dt=U.callbackId,J=this.callbackCapabilities[dt];if(!J)throw new Error(`Cannot resolve callback ${dt}`);if(delete this.callbackCapabilities[dt],U.callback===G.DATA)J.resolve(U.data);else if(U.callback===G.ERROR)J.reject(vt(U.reason));else throw new Error("Unexpected callback case");return}const Y=this.actionHandler[U.action];if(!Y)throw new Error(`Unknown action from worker: ${U.action}`);if(U.callbackId){const dt=this.sourceName,J=U.sourceName;new Promise(function(x){x(Y(U.data))}).then(function(x){et.postMessage({sourceName:dt,targetName:J,callback:G.DATA,callbackId:U.callbackId,data:x})},function(x){et.postMessage({sourceName:dt,targetName:J,callback:G.ERROR,callbackId:U.callbackId,reason:vt(x)})});return}if(U.streamId){xt(this,mt,hs).call(this,U);return}Y(U.data)},et.addEventListener("message",this._onComObjOnMessage)}on(X,V){const et=this.actionHandler;if(et[X])throw new Error(`There is already an actionName called "${X}"`);et[X]=V}send(X,V,et){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:X,data:V},et)}sendWithPromise(X,V,et){const q=this.callbackId++,U=new L.PromiseCapability;this.callbackCapabilities[q]=U;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:X,callbackId:q,data:V},et)}catch(Y){U.reject(Y)}return U.promise}sendWithStream(X,V,et,q){const U=this.streamId++,Y=this.sourceName,dt=this.targetName,J=this.comObj;return new ReadableStream({start:x=>{const j=new L.PromiseCapability;return this.streamControllers[U]={controller:x,startCall:j,pullCall:null,cancelCall:null,isClosed:!1},J.postMessage({sourceName:Y,targetName:dt,action:X,streamId:U,data:V,desiredSize:x.desiredSize},q),j.promise},pull:x=>{const j=new L.PromiseCapability;return this.streamControllers[U].pullCall=j,J.postMessage({sourceName:Y,targetName:dt,stream:_.PULL,streamId:U,desiredSize:x.desiredSize}),j.promise},cancel:x=>{(0,L.assert)(x instanceof Error,"cancel must have a valid reason");const j=new L.PromiseCapability;return this.streamControllers[U].cancelCall=j,this.streamControllers[U].isClosed=!0,J.postMessage({sourceName:Y,targetName:dt,stream:_.CANCEL,streamId:U,reason:vt(x)}),j.promise}},et)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}mt=new WeakSet,hs=function(X){const V=X.streamId,et=this.sourceName,q=X.sourceName,U=this.comObj,Y=this,dt=this.actionHandler[X.action],J={enqueue(x,j=1,R){if(this.isCancelled)return;const O=this.desiredSize;this.desiredSize-=j,O>0&&this.desiredSize<=0&&(this.sinkCapability=new L.PromiseCapability,this.ready=this.sinkCapability.promise),U.postMessage({sourceName:et,targetName:q,stream:_.ENQUEUE,streamId:V,chunk:x},R)},close(){this.isCancelled||(this.isCancelled=!0,U.postMessage({sourceName:et,targetName:q,stream:_.CLOSE,streamId:V}),delete Y.streamSinks[V])},error(x){(0,L.assert)(x instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,U.postMessage({sourceName:et,targetName:q,stream:_.ERROR,streamId:V,reason:vt(x)}))},sinkCapability:new L.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:X.desiredSize,ready:null};J.sinkCapability.resolve(),J.ready=J.sinkCapability.promise,this.streamSinks[V]=J,new Promise(function(x){x(dt(X.data,J))}).then(function(){U.postMessage({sourceName:et,targetName:q,stream:_.START_COMPLETE,streamId:V,success:!0})},function(x){U.postMessage({sourceName:et,targetName:q,stream:_.START_COMPLETE,streamId:V,reason:vt(x)})})},ds=function(X){const V=X.streamId,et=this.sourceName,q=X.sourceName,U=this.comObj,Y=this.streamControllers[V],dt=this.streamSinks[V];switch(X.stream){case _.START_COMPLETE:X.success?Y.startCall.resolve():Y.startCall.reject(vt(X.reason));break;case _.PULL_COMPLETE:X.success?Y.pullCall.resolve():Y.pullCall.reject(vt(X.reason));break;case _.PULL:if(!dt){U.postMessage({sourceName:et,targetName:q,stream:_.PULL_COMPLETE,streamId:V,success:!0});break}dt.desiredSize<=0&&X.desiredSize>0&&dt.sinkCapability.resolve(),dt.desiredSize=X.desiredSize,new Promise(function(J){var x;J((x=dt.onPull)==null?void 0:x.call(dt))}).then(function(){U.postMessage({sourceName:et,targetName:q,stream:_.PULL_COMPLETE,streamId:V,success:!0})},function(J){U.postMessage({sourceName:et,targetName:q,stream:_.PULL_COMPLETE,streamId:V,reason:vt(J)})});break;case _.ENQUEUE:if((0,L.assert)(Y,"enqueue should have stream controller"),Y.isClosed)break;Y.controller.enqueue(X.chunk);break;case _.CLOSE:if((0,L.assert)(Y,"close should have stream controller"),Y.isClosed)break;Y.isClosed=!0,Y.controller.close(),xt(this,mt,Ii).call(this,Y,V);break;case _.ERROR:(0,L.assert)(Y,"error should have stream controller"),Y.controller.error(vt(X.reason)),xt(this,mt,Ii).call(this,Y,V);break;case _.CANCEL_COMPLETE:X.success?Y.cancelCall.resolve():Y.cancelCall.reject(vt(X.reason)),xt(this,mt,Ii).call(this,Y,V);break;case _.CANCEL:if(!dt)break;new Promise(function(J){var x;J((x=dt.onCancel)==null?void 0:x.call(dt,vt(X.reason)))}).then(function(){U.postMessage({sourceName:et,targetName:q,stream:_.CANCEL_COMPLETE,streamId:V,success:!0})},function(J){U.postMessage({sourceName:et,targetName:q,stream:_.CANCEL_COMPLETE,streamId:V,reason:vt(J)})}),dt.sinkCapability.reject(vt(X.reason)),dt.isCancelled=!0,delete this.streamSinks[V];break;default:throw new Error("Unexpected stream case")}},Ii=async function(X,V){var et,q,U;await Promise.allSettled([(et=X.startCall)==null?void 0:et.promise,(q=X.pullCall)==null?void 0:q.promise,(U=X.cancelCall)==null?void 0:U.promise]),delete this.streamControllers[V]},D.MessageHandler=$t},(T,D,Tt)=>{var _,vt;Object.defineProperty(D,"__esModule",{value:!0}),D.Metadata=void 0;var L=Tt(1);class G{constructor({parsedData:mt,rawData:st}){zt(this,_);zt(this,vt);Wt(this,_,mt),Wt(this,vt,st)}getRaw(){return y(this,vt)}get(mt){return y(this,_).get(mt)??null}getAll(){return(0,L.objectFromMap)(y(this,_))}has(mt){return y(this,_).has(mt)}}_=new WeakMap,vt=new WeakMap,D.Metadata=G},(T,D,Tt)=>{var mt,st,N,gt,ct,X,_r;Object.defineProperty(D,"__esModule",{value:!0}),D.OptionalContentConfig=void 0;var L=Tt(1),G=Tt(8);const _=Symbol("INTERNAL");class vt{constructor(q,U){zt(this,mt,!0);this.name=q,this.intent=U}get visible(){return y(this,mt)}_setVisible(q,U){q!==_&&(0,L.unreachable)("Internal method `_setVisible` called."),Wt(this,mt,U)}}mt=new WeakMap;class $t{constructor(q){zt(this,X);zt(this,st,null);zt(this,N,new Map);zt(this,gt,null);zt(this,ct,null);if(this.name=null,this.creator=null,q!==null){this.name=q.name,this.creator=q.creator,Wt(this,ct,q.order);for(const U of q.groups)y(this,N).set(U.id,new vt(U.name,U.intent));if(q.baseState==="OFF")for(const U of y(this,N).values())U._setVisible(_,!1);for(const U of q.on)y(this,N).get(U)._setVisible(_,!0);for(const U of q.off)y(this,N).get(U)._setVisible(_,!1);Wt(this,gt,this.getHash())}}isVisible(q){if(y(this,N).size===0)return!0;if(!q)return(0,L.warn)("Optional content group not defined."),!0;if(q.type==="OCG")return y(this,N).has(q.id)?y(this,N).get(q.id).visible:((0,L.warn)(`Optional content group not found: ${q.id}`),!0);if(q.type==="OCMD"){if(q.expression)return xt(this,X,_r).call(this,q.expression);if(!q.policy||q.policy==="AnyOn"){for(const U of q.ids){if(!y(this,N).has(U))return(0,L.warn)(`Optional content group not found: ${U}`),!0;if(y(this,N).get(U).visible)return!0}return!1}else if(q.policy==="AllOn"){for(const U of q.ids){if(!y(this,N).has(U))return(0,L.warn)(`Optional content group not found: ${U}`),!0;if(!y(this,N).get(U).visible)return!1}return!0}else if(q.policy==="AnyOff"){for(const U of q.ids){if(!y(this,N).has(U))return(0,L.warn)(`Optional content group not found: ${U}`),!0;if(!y(this,N).get(U).visible)return!0}return!1}else if(q.policy==="AllOff"){for(const U of q.ids){if(!y(this,N).has(U))return(0,L.warn)(`Optional content group not found: ${U}`),!0;if(y(this,N).get(U).visible)return!1}return!0}return(0,L.warn)(`Unknown optional content policy ${q.policy}.`),!0}return(0,L.warn)(`Unknown group type ${q.type}.`),!0}setVisibility(q,U=!0){if(!y(this,N).has(q)){(0,L.warn)(`Optional content group not found: ${q}`);return}y(this,N).get(q)._setVisible(_,!!U),Wt(this,st,null)}get hasInitialVisibility(){return y(this,gt)===null||this.getHash()===y(this,gt)}getOrder(){return y(this,N).size?y(this,ct)?y(this,ct).slice():[...y(this,N).keys()]:null}getGroups(){return y(this,N).size>0?(0,L.objectFromMap)(y(this,N)):null}getGroup(q){return y(this,N).get(q)||null}getHash(){if(y(this,st)!==null)return y(this,st);const q=new G.MurmurHash3_64;for(const[U,Y]of y(this,N))q.update(`${U}:${Y.visible}`);return Wt(this,st,q.hexdigest())}}st=new WeakMap,N=new WeakMap,gt=new WeakMap,ct=new WeakMap,X=new WeakSet,_r=function(q){const U=q.length;if(U<2)return!0;const Y=q[0];for(let dt=1;dt<U;dt++){const J=q[dt];let x;if(Array.isArray(J))x=xt(this,X,_r).call(this,J);else if(y(this,N).has(J))x=y(this,N).get(J).visible;else return(0,L.warn)(`Optional content group not found: ${J}`),!0;switch(Y){case"And":if(!x)return!1;break;case"Or":if(x)return!0;break;case"Not":return!x;default:return!0}}return Y==="And"},D.OptionalContentConfig=$t},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFDataTransportStream=void 0;var L=Tt(1),G=Tt(6);class _{constructor({length:st,initialData:N,progressiveDone:gt=!1,contentDispositionFilename:ct=null,disableRange:X=!1,disableStream:V=!1},et){if((0,L.assert)(et,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=gt,this._contentDispositionFilename=ct,(N==null?void 0:N.length)>0){const q=N instanceof Uint8Array&&N.byteLength===N.buffer.byteLength?N.buffer:new Uint8Array(N).buffer;this._queuedChunks.push(q)}this._pdfDataRangeTransport=et,this._isStreamingSupported=!V,this._isRangeSupported=!X,this._contentLength=st,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((q,U)=>{this._onReceiveData({begin:q,chunk:U})}),this._pdfDataRangeTransport.addProgressListener((q,U)=>{this._onProgress({loaded:q,total:U})}),this._pdfDataRangeTransport.addProgressiveReadListener(q=>{this._onReceiveData({chunk:q})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:st,chunk:N}){const gt=N instanceof Uint8Array&&N.byteLength===N.buffer.byteLength?N.buffer:new Uint8Array(N).buffer;if(st===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(gt):this._queuedChunks.push(gt);else{const ct=this._rangeReaders.some(function(X){return X._begin!==st?!1:(X._enqueue(gt),!0)});(0,L.assert)(ct,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var st;return((st=this._fullRequestReader)==null?void 0:st._loaded)??0}_onProgress(st){var N,gt,ct,X;st.total===void 0?(gt=(N=this._rangeReaders[0])==null?void 0:N.onProgress)==null||gt.call(N,{loaded:st.loaded}):(X=(ct=this._fullRequestReader)==null?void 0:ct.onProgress)==null||X.call(ct,{loaded:st.loaded,total:st.total})}_onProgressiveDone(){var st;(st=this._fullRequestReader)==null||st.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(st){const N=this._rangeReaders.indexOf(st);N>=0&&this._rangeReaders.splice(N,1)}getFullReader(){(0,L.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const st=this._queuedChunks;return this._queuedChunks=null,new vt(this,st,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(st,N){if(N<=this._progressiveDataLength)return null;const gt=new $t(this,st,N);return this._pdfDataRangeTransport.requestDataRange(st,N),this._rangeReaders.push(gt),gt}cancelAllRequests(st){var N;(N=this._fullRequestReader)==null||N.cancel(st);for(const gt of this._rangeReaders.slice(0))gt.cancel(st);this._pdfDataRangeTransport.abort()}}D.PDFDataTransportStream=_;class vt{constructor(st,N,gt=!1,ct=null){this._stream=st,this._done=gt||!1,this._filename=(0,G.isPdfFile)(ct)?ct:null,this._queuedChunks=N||[],this._loaded=0;for(const X of this._queuedChunks)this._loaded+=X.byteLength;this._requests=[],this._headersReady=Promise.resolve(),st._fullRequestReader=this,this.onProgress=null}_enqueue(st){this._done||(this._requests.length>0?this._requests.shift().resolve({value:st,done:!1}):this._queuedChunks.push(st),this._loaded+=st.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const st=new L.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class $t{constructor(st,N,gt){this._stream=st,this._begin=N,this._end=gt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(st){if(!this._done){if(this._requests.length===0)this._queuedChunk=st;else{this._requests.shift().resolve({value:st,done:!1});for(const gt of this._requests)gt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const N=this._queuedChunk;return this._queuedChunk=null,{value:N,done:!1}}if(this._done)return{value:void 0,done:!0};const st=new L.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFFetchStream=void 0;var L=Tt(1),G=Tt(20);function _(gt,ct,X){return{method:"GET",headers:gt,signal:X.signal,mode:"cors",credentials:ct?"include":"same-origin",redirect:"follow"}}function vt(gt){const ct=new Headers;for(const X in gt){const V=gt[X];V!==void 0&&ct.append(X,V)}return ct}function $t(gt){return gt instanceof Uint8Array?gt.buffer:gt instanceof ArrayBuffer?gt:((0,L.warn)(`getArrayBuffer - unexpected data format: ${gt}`),new Uint8Array(gt).buffer)}class mt{constructor(ct){this.source=ct,this.isHttp=/^https?:/i.test(ct.url),this.httpHeaders=this.isHttp&&ct.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ct;return((ct=this._fullRequestReader)==null?void 0:ct._loaded)??0}getFullReader(){return(0,L.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new st(this),this._fullRequestReader}getRangeReader(ct,X){if(X<=this._progressiveDataLength)return null;const V=new N(this,ct,X);return this._rangeRequestReaders.push(V),V}cancelAllRequests(ct){var X;(X=this._fullRequestReader)==null||X.cancel(ct);for(const V of this._rangeRequestReaders.slice(0))V.cancel(ct)}}D.PDFFetchStream=mt;class st{constructor(ct){this._stream=ct,this._reader=null,this._loaded=0,this._filename=null;const X=ct.source;this._withCredentials=X.withCredentials||!1,this._contentLength=X.length,this._headersCapability=new L.PromiseCapability,this._disableRange=X.disableRange||!1,this._rangeChunkSize=X.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!X.disableStream,this._isRangeSupported=!X.disableRange,this._headers=vt(this._stream.httpHeaders);const V=X.url;fetch(V,_(this._headers,this._withCredentials,this._abortController)).then(et=>{if(!(0,G.validateResponseStatus)(et.status))throw(0,G.createResponseStatusError)(et.status,V);this._reader=et.body.getReader(),this._headersCapability.resolve();const q=dt=>et.headers.get(dt),{allowRangeRequests:U,suggestedLength:Y}=(0,G.validateRangeRequestCapabilities)({getResponseHeader:q,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=U,this._contentLength=Y||this._contentLength,this._filename=(0,G.extractFilenameFromHeader)(q),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new L.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var V;await this._headersCapability.promise;const{value:ct,done:X}=await this._reader.read();return X?{value:ct,done:X}:(this._loaded+=ct.byteLength,(V=this.onProgress)==null||V.call(this,{loaded:this._loaded,total:this._contentLength}),{value:$t(ct),done:!1})}cancel(ct){var X;(X=this._reader)==null||X.cancel(ct),this._abortController.abort()}}class N{constructor(ct,X,V){this._stream=ct,this._reader=null,this._loaded=0;const et=ct.source;this._withCredentials=et.withCredentials||!1,this._readCapability=new L.PromiseCapability,this._isStreamingSupported=!et.disableStream,this._abortController=new AbortController,this._headers=vt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${X}-${V-1}`);const q=et.url;fetch(q,_(this._headers,this._withCredentials,this._abortController)).then(U=>{if(!(0,G.validateResponseStatus)(U.status))throw(0,G.createResponseStatusError)(U.status,q);this._readCapability.resolve(),this._reader=U.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var V;await this._readCapability.promise;const{value:ct,done:X}=await this._reader.read();return X?{value:ct,done:X}:(this._loaded+=ct.byteLength,(V=this.onProgress)==null||V.call(this,{loaded:this._loaded}),{value:$t(ct),done:!1})}cancel(ct){var X;(X=this._reader)==null||X.cancel(ct),this._abortController.abort()}}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.createResponseStatusError=mt,D.extractFilenameFromHeader=$t,D.validateRangeRequestCapabilities=vt,D.validateResponseStatus=st;var L=Tt(1),G=Tt(21),_=Tt(6);function vt({getResponseHeader:N,isHttp:gt,rangeChunkSize:ct,disableRange:X}){const V={allowRangeRequests:!1,suggestedLength:void 0},et=parseInt(N("Content-Length"),10);return!Number.isInteger(et)||(V.suggestedLength=et,et<=2*ct)||X||!gt||N("Accept-Ranges")!=="bytes"||(N("Content-Encoding")||"identity")!=="identity"||(V.allowRangeRequests=!0),V}function $t(N){const gt=N("Content-Disposition");if(gt){let ct=(0,G.getFilenameFromContentDispositionHeader)(gt);if(ct.includes("%"))try{ct=decodeURIComponent(ct)}catch{}if((0,_.isPdfFile)(ct))return ct}return null}function mt(N,gt){return N===404||N===0&&gt.startsWith("file:")?new L.MissingPDFException('Missing PDF "'+gt+'".'):new L.UnexpectedResponseException(`Unexpected server response (${N}) while retrieving PDF "${gt}".`,N)}function st(N){return N===200||N===206}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.getFilenameFromContentDispositionHeader=G;var L=Tt(1);function G(_){let vt=!0,$t=mt("filename\\*","i").exec(_);if($t){$t=$t[1];let et=ct($t);return et=unescape(et),et=X(et),et=V(et),N(et)}if($t=gt(_),$t){const et=V($t);return N(et)}if($t=mt("filename","i").exec(_),$t){$t=$t[1];let et=ct($t);return et=V(et),N(et)}function mt(et,q){return new RegExp("(?:^|;)\\s*"+et+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',q)}function st(et,q){if(et){if(!/^[\x00-\xFF]+$/.test(q))return q;try{const U=new TextDecoder(et,{fatal:!0}),Y=(0,L.stringToBytes)(q);q=U.decode(Y),vt=!1}catch{}}return q}function N(et){return vt&&/[\x80-\xff]/.test(et)&&(et=st("utf-8",et),vt&&(et=st("iso-8859-1",et))),et}function gt(et){const q=[];let U;const Y=mt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(U=Y.exec(et))!==null;){let[,J,x,j]=U;if(J=parseInt(J,10),J in q){if(J===0)break;continue}q[J]=[x,j]}const dt=[];for(let J=0;J<q.length&&J in q;++J){let[x,j]=q[J];j=ct(j),x&&(j=unescape(j),J===0&&(j=X(j))),dt.push(j)}return dt.join("")}function ct(et){if(et.startsWith('"')){const q=et.slice(1).split('\\"');for(let U=0;U<q.length;++U){const Y=q[U].indexOf('"');Y!==-1&&(q[U]=q[U].slice(0,Y),q.length=U+1),q[U]=q[U].replaceAll(/\\(.)/g,"$1")}et=q.join('"')}return et}function X(et){const q=et.indexOf("'");if(q===-1)return et;const U=et.slice(0,q),dt=et.slice(q+1).replace(/^[^']*'/,"");return st(U,dt)}function V(et){return!et.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(et)?et:et.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(q,U,Y,dt){if(Y==="q"||Y==="Q")return dt=dt.replaceAll("_"," "),dt=dt.replaceAll(/=([0-9a-fA-F]{2})/g,function(J,x){return String.fromCharCode(parseInt(x,16))}),st(U,dt);try{dt=atob(dt)}catch{}return st(U,dt)})}return""}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFNetworkStream=void 0;var L=Tt(1),G=Tt(20);const _=200,vt=206;function $t(ct){const X=ct.response;return typeof X!="string"?X:(0,L.stringToBytes)(X).buffer}class mt{constructor(X,V={}){this.url=X,this.isHttp=/^https?:/i.test(X),this.httpHeaders=this.isHttp&&V.httpHeaders||Object.create(null),this.withCredentials=V.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(X,V,et){const q={begin:X,end:V};for(const U in et)q[U]=et[U];return this.request(q)}requestFull(X){return this.request(X)}request(X){const V=new XMLHttpRequest,et=this.currXhrId++,q=this.pendingRequests[et]={xhr:V};V.open("GET",this.url),V.withCredentials=this.withCredentials;for(const U in this.httpHeaders){const Y=this.httpHeaders[U];Y!==void 0&&V.setRequestHeader(U,Y)}return this.isHttp&&"begin"in X&&"end"in X?(V.setRequestHeader("Range",`bytes=${X.begin}-${X.end-1}`),q.expectedStatus=vt):q.expectedStatus=_,V.responseType="arraybuffer",X.onError&&(V.onerror=function(U){X.onError(V.status)}),V.onreadystatechange=this.onStateChange.bind(this,et),V.onprogress=this.onProgress.bind(this,et),q.onHeadersReceived=X.onHeadersReceived,q.onDone=X.onDone,q.onError=X.onError,q.onProgress=X.onProgress,V.send(null),et}onProgress(X,V){var q;const et=this.pendingRequests[X];et&&((q=et.onProgress)==null||q.call(et,V))}onStateChange(X,V){var J,x,j;const et=this.pendingRequests[X];if(!et)return;const q=et.xhr;if(q.readyState>=2&&et.onHeadersReceived&&(et.onHeadersReceived(),delete et.onHeadersReceived),q.readyState!==4||!(X in this.pendingRequests))return;if(delete this.pendingRequests[X],q.status===0&&this.isHttp){(J=et.onError)==null||J.call(et,q.status);return}const U=q.status||_;if(!(U===_&&et.expectedStatus===vt)&&U!==et.expectedStatus){(x=et.onError)==null||x.call(et,q.status);return}const dt=$t(q);if(U===vt){const R=q.getResponseHeader("Content-Range"),O=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);et.onDone({begin:parseInt(O[1],10),chunk:dt})}else dt?et.onDone({begin:0,chunk:dt}):(j=et.onError)==null||j.call(et,q.status)}getRequestXhr(X){return this.pendingRequests[X].xhr}isPendingRequest(X){return X in this.pendingRequests}abortRequest(X){const V=this.pendingRequests[X].xhr;delete this.pendingRequests[X],V.abort()}}class st{constructor(X){this._source=X,this._manager=new mt(X.url,{httpHeaders:X.httpHeaders,withCredentials:X.withCredentials}),this._rangeChunkSize=X.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(X){const V=this._rangeRequestReaders.indexOf(X);V>=0&&this._rangeRequestReaders.splice(V,1)}getFullReader(){return(0,L.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new N(this._manager,this._source),this._fullRequestReader}getRangeReader(X,V){const et=new gt(this._manager,X,V);return et.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(et),et}cancelAllRequests(X){var V;(V=this._fullRequestReader)==null||V.cancel(X);for(const et of this._rangeRequestReaders.slice(0))et.cancel(X)}}D.PDFNetworkStream=st;class N{constructor(X,V){this._manager=X;const et={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=V.url,this._fullRequestId=X.requestFull(et),this._headersReceivedCapability=new L.PromiseCapability,this._disableRange=V.disableRange||!1,this._contentLength=V.length,this._rangeChunkSize=V.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const X=this._fullRequestId,V=this._manager.getRequestXhr(X),et=Y=>V.getResponseHeader(Y),{allowRangeRequests:q,suggestedLength:U}=(0,G.validateRangeRequestCapabilities)({getResponseHeader:et,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});q&&(this._isRangeSupported=!0),this._contentLength=U||this._contentLength,this._filename=(0,G.extractFilenameFromHeader)(et),this._isRangeSupported&&this._manager.abortRequest(X),this._headersReceivedCapability.resolve()}_onDone(X){if(X&&(this._requests.length>0?this._requests.shift().resolve({value:X.chunk,done:!1}):this._cachedChunks.push(X.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(X){this._storedError=(0,G.createResponseStatusError)(X,this._url),this._headersReceivedCapability.reject(this._storedError);for(const V of this._requests)V.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(X){var V;(V=this.onProgress)==null||V.call(this,{loaded:X.loaded,total:X.lengthComputable?X.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const X=new L.PromiseCapability;return this._requests.push(X),X.promise}cancel(X){this._done=!0,this._headersReceivedCapability.reject(X);for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gt{constructor(X,V,et){this._manager=X;const q={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=X.url,this._requestId=X.requestRange(V,et,q),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var X;(X=this.onClosed)==null||X.call(this,this)}_onDone(X){const V=X.chunk;this._requests.length>0?this._requests.shift().resolve({value:V,done:!1}):this._queuedChunk=V,this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(X){this._storedError=(0,G.createResponseStatusError)(X,this._url);for(const V of this._requests)V.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(X){var V;this.isStreamingSupported||(V=this.onProgress)==null||V.call(this,{loaded:X.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const V=this._queuedChunk;return this._queuedChunk=null,{value:V,done:!1}}if(this._done)return{value:void 0,done:!0};const X=new L.PromiseCapability;return this._requests.push(X),X.promise}cancel(X){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFNodeStream=void 0;var L=Tt(1),G=Tt(20);const _=/^file:\/\/\/[a-zA-Z]:\//;function vt(et){const q=require$$0,U=q.parse(et);return U.protocol==="file:"||U.host?U:/^[a-z]:[/\\]/i.test(et)?q.parse(`file:///${et}`):(U.host||(U.protocol="file:"),U)}class $t{constructor(q){this.source=q,this.url=vt(q.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&q.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var q;return((q=this._fullRequestReader)==null?void 0:q._loaded)??0}getFullReader(){return(0,L.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new X(this):new gt(this),this._fullRequestReader}getRangeReader(q,U){if(U<=this._progressiveDataLength)return null;const Y=this.isFsUrl?new V(this,q,U):new ct(this,q,U);return this._rangeRequestReaders.push(Y),Y}cancelAllRequests(q){var U;(U=this._fullRequestReader)==null||U.cancel(q);for(const Y of this._rangeRequestReaders.slice(0))Y.cancel(q)}}D.PDFNodeStream=$t;class mt{constructor(q){this._url=q.url,this._done=!1,this._storedError=null,this.onProgress=null;const U=q.source;this._contentLength=U.length,this._loaded=0,this._filename=null,this._disableRange=U.disableRange||!1,this._rangeChunkSize=U.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!U.disableStream,this._isRangeSupported=!U.disableRange,this._readableStream=null,this._readCapability=new L.PromiseCapability,this._headersCapability=new L.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const q=this._readableStream.read();return q===null?(this._readCapability=new L.PromiseCapability,this.read()):(this._loaded+=q.length,(Y=this.onProgress)==null||Y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(q).buffer,done:!1})}cancel(q){if(!this._readableStream){this._error(q);return}this._readableStream.destroy(q)}_error(q){this._storedError=q,this._readCapability.resolve()}_setReadableStream(q){this._readableStream=q,q.on("readable",()=>{this._readCapability.resolve()}),q.on("end",()=>{q.destroy(),this._done=!0,this._readCapability.resolve()}),q.on("error",U=>{this._error(U)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new L.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class st{constructor(q){this._url=q.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new L.PromiseCapability;const U=q.source;this._isStreamingSupported=!U.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const q=this._readableStream.read();return q===null?(this._readCapability=new L.PromiseCapability,this.read()):(this._loaded+=q.length,(Y=this.onProgress)==null||Y.call(this,{loaded:this._loaded}),{value:new Uint8Array(q).buffer,done:!1})}cancel(q){if(!this._readableStream){this._error(q);return}this._readableStream.destroy(q)}_error(q){this._storedError=q,this._readCapability.resolve()}_setReadableStream(q){this._readableStream=q,q.on("readable",()=>{this._readCapability.resolve()}),q.on("end",()=>{q.destroy(),this._done=!0,this._readCapability.resolve()}),q.on("error",U=>{this._error(U)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function N(et,q){return{protocol:et.protocol,auth:et.auth,host:et.hostname,port:et.port,path:et.path,method:"GET",headers:q}}class gt extends mt{constructor(q){super(q);const U=Y=>{if(Y.statusCode===404){const j=new L.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=j,this._headersCapability.reject(j);return}this._headersCapability.resolve(),this._setReadableStream(Y);const dt=j=>this._readableStream.headers[j.toLowerCase()],{allowRangeRequests:J,suggestedLength:x}=(0,G.validateRangeRequestCapabilities)({getResponseHeader:dt,isHttp:q.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=J,this._contentLength=x||this._contentLength,this._filename=(0,G.extractFilenameFromHeader)(dt)};if(this._request=null,this._url.protocol==="http:"){const Y=require$$0;this._request=Y.request(N(this._url,q.httpHeaders),U)}else{const Y=require$$0;this._request=Y.request(N(this._url,q.httpHeaders),U)}this._request.on("error",Y=>{this._storedError=Y,this._headersCapability.reject(Y)}),this._request.end()}}class ct extends st{constructor(q,U,Y){super(q),this._httpHeaders={};for(const J in q.httpHeaders){const x=q.httpHeaders[J];x!==void 0&&(this._httpHeaders[J]=x)}this._httpHeaders.Range=`bytes=${U}-${Y-1}`;const dt=J=>{if(J.statusCode===404){const x=new L.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=x;return}this._setReadableStream(J)};if(this._request=null,this._url.protocol==="http:"){const J=require$$0;this._request=J.request(N(this._url,this._httpHeaders),dt)}else{const J=require$$0;this._request=J.request(N(this._url,this._httpHeaders),dt)}this._request.on("error",J=>{this._storedError=J}),this._request.end()}}class X extends mt{constructor(q){super(q);let U=decodeURIComponent(this._url.path);_.test(this._url.href)&&(U=U.replace(/^\//,""));const Y=require$$0;Y.lstat(U,(dt,J)=>{if(dt){dt.code==="ENOENT"&&(dt=new L.MissingPDFException(`Missing PDF "${U}".`)),this._storedError=dt,this._headersCapability.reject(dt);return}this._contentLength=J.size,this._setReadableStream(Y.createReadStream(U)),this._headersCapability.resolve()})}}class V extends st{constructor(q,U,Y){super(q);let dt=decodeURIComponent(this._url.path);_.test(this._url.href)&&(dt=dt.replace(/^\//,""));const J=require$$0;this._setReadableStream(J.createReadStream(dt,{start:U,end:Y-1}))}}},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.SVGGraphics=void 0;var L=Tt(6),G=Tt(1);const _={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},vt="http://www.w3.org/XML/1998/namespace",$t="http://www.w3.org/1999/xlink",mt=["butt","round","square"],st=["miter","round","bevel"],N=function(J,x="",j=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!j)return URL.createObjectURL(new Blob([J],{type:x}));const R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let O=`data:${x};base64,`;for(let B=0,ht=J.length;B<ht;B+=3){const F=J[B]&255,K=J[B+1]&255,lt=J[B+2]&255,Gt=F>>2,Et=(F&3)<<4|K>>4,Mt=B+1<ht?(K&15)<<2|lt>>6:64,yt=B+2<ht?lt&63:64;O+=R[Gt]+R[Et]+R[Mt]+R[yt]}return O},gt=function(){const J=new Uint8Array([137,80,78,71,13,10,26,10]),x=12,j=new Int32Array(256);for(let lt=0;lt<256;lt++){let Gt=lt;for(let Et=0;Et<8;Et++)Gt=Gt&1?3988292384^Gt>>1&2147483647:Gt>>1&2147483647;j[lt]=Gt}function R(lt,Gt,Et){let Mt=-1;for(let yt=Gt;yt<Et;yt++){const qt=(Mt^lt[yt])&255,it=j[qt];Mt=Mt>>>8^it}return Mt^-1}function O(lt,Gt,Et,Mt){let yt=Mt;const qt=Gt.length;Et[yt]=qt>>24&255,Et[yt+1]=qt>>16&255,Et[yt+2]=qt>>8&255,Et[yt+3]=qt&255,yt+=4,Et[yt]=lt.charCodeAt(0)&255,Et[yt+1]=lt.charCodeAt(1)&255,Et[yt+2]=lt.charCodeAt(2)&255,Et[yt+3]=lt.charCodeAt(3)&255,yt+=4,Et.set(Gt,yt),yt+=Gt.length;const it=R(Et,Mt+4,yt);Et[yt]=it>>24&255,Et[yt+1]=it>>16&255,Et[yt+2]=it>>8&255,Et[yt+3]=it&255}function B(lt,Gt,Et){let Mt=1,yt=0;for(let qt=Gt;qt<Et;++qt)Mt=(Mt+(lt[qt]&255))%65521,yt=(yt+Mt)%65521;return yt<<16|Mt}function ht(lt){if(!G.isNodeJS)return F(lt);try{const Gt=parseInt(process.versions.node)>=8?lt:Buffer.from(lt),Et=require$$0.deflateSync(Gt,{level:9});return Et instanceof Uint8Array?Et:new Uint8Array(Et)}catch(Gt){(0,G.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Gt)}return F(lt)}function F(lt){let Gt=lt.length;const Et=65535,Mt=Math.ceil(Gt/Et),yt=new Uint8Array(2+Gt+Mt*5+4);let qt=0;yt[qt++]=120,yt[qt++]=156;let it=0;for(;Gt>Et;)yt[qt++]=0,yt[qt++]=255,yt[qt++]=255,yt[qt++]=0,yt[qt++]=0,yt.set(lt.subarray(it,it+Et),qt),qt+=Et,it+=Et,Gt-=Et;yt[qt++]=1,yt[qt++]=Gt&255,yt[qt++]=Gt>>8&255,yt[qt++]=~Gt&65535&255,yt[qt++]=(~Gt&65535)>>8&255,yt.set(lt.subarray(it),qt),qt+=lt.length-it;const At=B(lt,0,lt.length);return yt[qt++]=At>>24&255,yt[qt++]=At>>16&255,yt[qt++]=At>>8&255,yt[qt++]=At&255,yt}function K(lt,Gt,Et,Mt){const yt=lt.width,qt=lt.height;let it,At,Ot;const tt=lt.data;switch(Gt){case G.ImageKind.GRAYSCALE_1BPP:At=0,it=1,Ot=yt+7>>3;break;case G.ImageKind.RGB_24BPP:At=2,it=8,Ot=yt*3;break;case G.ImageKind.RGBA_32BPP:At=6,it=8,Ot=yt*4;break;default:throw new Error("invalid format")}const w=new Uint8Array((1+Ot)*qt);let P=0,W=0;for(let Kt=0;Kt<qt;++Kt)w[P++]=0,w.set(tt.subarray(W,W+Ot),P),W+=Ot,P+=Ot;if(Gt===G.ImageKind.GRAYSCALE_1BPP&&Mt){P=0;for(let Kt=0;Kt<qt;Kt++){P++;for(let Zt=0;Zt<Ot;Zt++)w[P++]^=255}}const at=new Uint8Array([yt>>24&255,yt>>16&255,yt>>8&255,yt&255,qt>>24&255,qt>>16&255,qt>>8&255,qt&255,it,At,0,0,0]),ot=ht(w),rt=J.length+x*3+at.length+ot.length,Pt=new Uint8Array(rt);let Vt=0;return Pt.set(J,Vt),Vt+=J.length,O("IHDR",at,Pt,Vt),Vt+=x+at.length,O("IDATA",ot,Pt,Vt),Vt+=x+ot.length,O("IEND",new Uint8Array(0),Pt,Vt),N(Pt,"image/png",Et)}return function(Gt,Et,Mt){const yt=Gt.kind===void 0?G.ImageKind.GRAYSCALE_1BPP:Gt.kind;return K(Gt,yt,Et,Mt)}}();class ct{constructor(){this.fontSizeScale=1,this.fontWeight=_.fontWeight,this.fontSize=0,this.textMatrix=G.IDENTITY_MATRIX,this.fontMatrix=G.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=G.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=_.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,j){this.x=x,this.y=j}}function X(J){let x=[];const j=[];for(const R of J){if(R.fn==="save"){x.push({fnId:92,fn:"group",items:[]}),j.push(x),x=x.at(-1).items;continue}R.fn==="restore"?x=j.pop():x.push(R)}return x}function V(J){if(Number.isInteger(J))return J.toString();const x=J.toFixed(10);let j=x.length-1;if(x[j]!=="0")return x;do j--;while(x[j]==="0");return x.substring(0,x[j]==="."?j:j+1)}function et(J){if(J[4]===0&&J[5]===0){if(J[1]===0&&J[2]===0)return J[0]===1&&J[3]===1?"":`scale(${V(J[0])} ${V(J[3])})`;if(J[0]===J[3]&&J[1]===-J[2]){const x=Math.acos(J[0])*180/Math.PI;return`rotate(${V(x)})`}}else if(J[0]===1&&J[1]===0&&J[2]===0&&J[3]===1)return`translate(${V(J[4])} ${V(J[5])})`;return`matrix(${V(J[0])} ${V(J[1])} ${V(J[2])} ${V(J[3])} ${V(J[4])} ${V(J[5])})`}let q=0,U=0,Y=0;class dt{constructor(x,j,R=!1){(0,L.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new L.DOMSVGFactory,this.current=new ct,this.transformMatrix=G.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=x,this.objs=j,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!R,this._operatorIdMapping=[];for(const O in G.OPS)this._operatorIdMapping[G.OPS[O]]=O}getObject(x,j=null){return typeof x=="string"?x.startsWith("g_")?this.commonObjs.get(x):this.objs.get(x):j}save(){this.transformStack.push(this.transformMatrix);const x=this.current;this.extraStack.push(x),this.current=x.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(x){this.save(),this.executeOpTree(x),this.restore()}loadDependencies(x){const j=x.fnArray,R=x.argsArray;for(let O=0,B=j.length;O<B;O++)if(j[O]===G.OPS.dependency)for(const ht of R[O]){const F=ht.startsWith("g_")?this.commonObjs:this.objs,K=new Promise(lt=>{F.get(ht,lt)});this.current.dependencies.push(K)}return Promise.all(this.current.dependencies)}transform(x,j,R,O,B,ht){const F=[x,j,R,O,B,ht];this.transformMatrix=G.Util.transform(this.transformMatrix,F),this.tgrp=null}getSVG(x,j){this.viewport=j;const R=this._initialize(j);return this.loadDependencies(x).then(()=>(this.transformMatrix=G.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(x)),R))}convertOpList(x){const j=this._operatorIdMapping,R=x.argsArray,O=x.fnArray,B=[];for(let ht=0,F=O.length;ht<F;ht++){const K=O[ht];B.push({fnId:K,fn:j[K],args:R[ht]})}return X(B)}executeOpTree(x){for(const j of x){const R=j.fn,O=j.fnId,B=j.args;switch(O|0){case G.OPS.beginText:this.beginText();break;case G.OPS.dependency:break;case G.OPS.setLeading:this.setLeading(B);break;case G.OPS.setLeadingMoveText:this.setLeadingMoveText(B[0],B[1]);break;case G.OPS.setFont:this.setFont(B);break;case G.OPS.showText:this.showText(B[0]);break;case G.OPS.showSpacedText:this.showText(B[0]);break;case G.OPS.endText:this.endText();break;case G.OPS.moveText:this.moveText(B[0],B[1]);break;case G.OPS.setCharSpacing:this.setCharSpacing(B[0]);break;case G.OPS.setWordSpacing:this.setWordSpacing(B[0]);break;case G.OPS.setHScale:this.setHScale(B[0]);break;case G.OPS.setTextMatrix:this.setTextMatrix(B[0],B[1],B[2],B[3],B[4],B[5]);break;case G.OPS.setTextRise:this.setTextRise(B[0]);break;case G.OPS.setTextRenderingMode:this.setTextRenderingMode(B[0]);break;case G.OPS.setLineWidth:this.setLineWidth(B[0]);break;case G.OPS.setLineJoin:this.setLineJoin(B[0]);break;case G.OPS.setLineCap:this.setLineCap(B[0]);break;case G.OPS.setMiterLimit:this.setMiterLimit(B[0]);break;case G.OPS.setFillRGBColor:this.setFillRGBColor(B[0],B[1],B[2]);break;case G.OPS.setStrokeRGBColor:this.setStrokeRGBColor(B[0],B[1],B[2]);break;case G.OPS.setStrokeColorN:this.setStrokeColorN(B);break;case G.OPS.setFillColorN:this.setFillColorN(B);break;case G.OPS.shadingFill:this.shadingFill(B[0]);break;case G.OPS.setDash:this.setDash(B[0],B[1]);break;case G.OPS.setRenderingIntent:this.setRenderingIntent(B[0]);break;case G.OPS.setFlatness:this.setFlatness(B[0]);break;case G.OPS.setGState:this.setGState(B[0]);break;case G.OPS.fill:this.fill();break;case G.OPS.eoFill:this.eoFill();break;case G.OPS.stroke:this.stroke();break;case G.OPS.fillStroke:this.fillStroke();break;case G.OPS.eoFillStroke:this.eoFillStroke();break;case G.OPS.clip:this.clip("nonzero");break;case G.OPS.eoClip:this.clip("evenodd");break;case G.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case G.OPS.paintImageXObject:this.paintImageXObject(B[0]);break;case G.OPS.paintInlineImageXObject:this.paintInlineImageXObject(B[0]);break;case G.OPS.paintImageMaskXObject:this.paintImageMaskXObject(B[0]);break;case G.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(B[0],B[1]);break;case G.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case G.OPS.closePath:this.closePath();break;case G.OPS.closeStroke:this.closeStroke();break;case G.OPS.closeFillStroke:this.closeFillStroke();break;case G.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case G.OPS.nextLine:this.nextLine();break;case G.OPS.transform:this.transform(B[0],B[1],B[2],B[3],B[4],B[5]);break;case G.OPS.constructPath:this.constructPath(B[0],B[1]);break;case G.OPS.endPath:this.endPath();break;case 92:this.group(j.items);break;default:(0,G.warn)(`Unimplemented operator ${R}`);break}}}setWordSpacing(x){this.current.wordSpacing=x}setCharSpacing(x){this.current.charSpacing=x}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(x,j,R,O,B,ht){const F=this.current;F.textMatrix=F.lineMatrix=[x,j,R,O,B,ht],F.textMatrixScale=Math.hypot(x,j),F.x=F.lineX=0,F.y=F.lineY=0,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${V(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",V(-F.y)),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtElement.append(F.tspan)}beginText(){const x=this.current;x.x=x.lineX=0,x.y=x.lineY=0,x.textMatrix=G.IDENTITY_MATRIX,x.lineMatrix=G.IDENTITY_MATRIX,x.textMatrixScale=1,x.tspan=this.svgFactory.createElement("svg:tspan"),x.txtElement=this.svgFactory.createElement("svg:text"),x.txtgrp=this.svgFactory.createElement("svg:g"),x.xcoords=[],x.ycoords=[]}moveText(x,j){const R=this.current;R.x=R.lineX+=x,R.y=R.lineY+=j,R.xcoords=[],R.ycoords=[],R.tspan=this.svgFactory.createElement("svg:tspan"),R.tspan.setAttributeNS(null,"font-family",R.fontFamily),R.tspan.setAttributeNS(null,"font-size",`${V(R.fontSize)}px`),R.tspan.setAttributeNS(null,"y",V(-R.y))}showText(x){const j=this.current,R=j.font,O=j.fontSize;if(O===0)return;const B=j.fontSizeScale,ht=j.charSpacing,F=j.wordSpacing,K=j.fontDirection,lt=j.textHScale*K,Gt=R.vertical,Et=Gt?1:-1,Mt=R.defaultVMetrics,yt=O*j.fontMatrix[0];let qt=0;for(const Ot of x){if(Ot===null){qt+=K*F;continue}else if(typeof Ot=="number"){qt+=Et*Ot*O/1e3;continue}const tt=(Ot.isSpace?F:0)+ht,w=Ot.fontChar;let P,W,at=Ot.width;if(Gt){let rt;const Pt=Ot.vmetric||Mt;rt=Ot.vmetric?Pt[1]:at*.5,rt=-rt*yt;const Vt=Pt[2]*yt;at=Pt?-Pt[0]:at,P=rt/B,W=(qt+Vt)/B}else P=qt/B,W=0;(Ot.isInFont||R.missingFile)&&(j.xcoords.push(j.x+P),Gt&&j.ycoords.push(-j.y+W),j.tspan.textContent+=w);const ot=Gt?at*yt-tt*K:at*yt+tt*K;qt+=ot}j.tspan.setAttributeNS(null,"x",j.xcoords.map(V).join(" ")),Gt?j.tspan.setAttributeNS(null,"y",j.ycoords.map(V).join(" ")):j.tspan.setAttributeNS(null,"y",V(-j.y)),Gt?j.y-=qt:j.x+=qt*lt,j.tspan.setAttributeNS(null,"font-family",j.fontFamily),j.tspan.setAttributeNS(null,"font-size",`${V(j.fontSize)}px`),j.fontStyle!==_.fontStyle&&j.tspan.setAttributeNS(null,"font-style",j.fontStyle),j.fontWeight!==_.fontWeight&&j.tspan.setAttributeNS(null,"font-weight",j.fontWeight);const it=j.textRenderingMode&G.TextRenderingMode.FILL_STROKE_MASK;if(it===G.TextRenderingMode.FILL||it===G.TextRenderingMode.FILL_STROKE?(j.fillColor!==_.fillColor&&j.tspan.setAttributeNS(null,"fill",j.fillColor),j.fillAlpha<1&&j.tspan.setAttributeNS(null,"fill-opacity",j.fillAlpha)):j.textRenderingMode===G.TextRenderingMode.ADD_TO_PATH?j.tspan.setAttributeNS(null,"fill","transparent"):j.tspan.setAttributeNS(null,"fill","none"),it===G.TextRenderingMode.STROKE||it===G.TextRenderingMode.FILL_STROKE){const Ot=1/(j.textMatrixScale||1);this._setStrokeAttributes(j.tspan,Ot)}let At=j.textMatrix;j.textRise!==0&&(At=At.slice(),At[5]+=j.textRise),j.txtElement.setAttributeNS(null,"transform",`${et(At)} scale(${V(lt)}, -1)`),j.txtElement.setAttributeNS(vt,"xml:space","preserve"),j.txtElement.append(j.tspan),j.txtgrp.append(j.txtElement),this._ensureTransformGroup().append(j.txtElement)}setLeadingMoveText(x,j){this.setLeading(-j),this.moveText(x,j)}addFontStyle(x){if(!x.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const j=N(x.data,x.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${x.loadedName}"; src: url(${j}); }
`}setFont(x){const j=this.current,R=this.commonObjs.get(x[0]);let O=x[1];j.font=R,this.embedFonts&&!R.missingFile&&!this.embeddedFonts[R.loadedName]&&(this.addFontStyle(R),this.embeddedFonts[R.loadedName]=R),j.fontMatrix=R.fontMatrix||G.FONT_IDENTITY_MATRIX;let B="normal";R.black?B="900":R.bold&&(B="bold");const ht=R.italic?"italic":"normal";O<0?(O=-O,j.fontDirection=-1):j.fontDirection=1,j.fontSize=O,j.fontFamily=R.loadedName,j.fontWeight=B,j.fontStyle=ht,j.tspan=this.svgFactory.createElement("svg:tspan"),j.tspan.setAttributeNS(null,"y",V(-j.y)),j.xcoords=[],j.ycoords=[]}endText(){var j;const x=this.current;x.textRenderingMode&G.TextRenderingMode.ADD_TO_PATH_FLAG&&((j=x.txtElement)!=null&&j.hasChildNodes())&&(x.element=x.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(x){x>0&&(this.current.lineWidth=x)}setLineCap(x){this.current.lineCap=mt[x]}setLineJoin(x){this.current.lineJoin=st[x]}setMiterLimit(x){this.current.miterLimit=x}setStrokeAlpha(x){this.current.strokeAlpha=x}setStrokeRGBColor(x,j,R){this.current.strokeColor=G.Util.makeHexColor(x,j,R)}setFillAlpha(x){this.current.fillAlpha=x}setFillRGBColor(x,j,R){this.current.fillColor=G.Util.makeHexColor(x,j,R),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(x){this.current.strokeColor=this._makeColorN_Pattern(x)}setFillColorN(x){this.current.fillColor=this._makeColorN_Pattern(x)}shadingFill(x){const{width:j,height:R}=this.viewport,O=G.Util.inverseTransform(this.transformMatrix),[B,ht,F,K]=G.Util.getAxialAlignedBoundingBox([0,0,j,R],O),lt=this.svgFactory.createElement("svg:rect");lt.setAttributeNS(null,"x",B),lt.setAttributeNS(null,"y",ht),lt.setAttributeNS(null,"width",F-B),lt.setAttributeNS(null,"height",K-ht),lt.setAttributeNS(null,"fill",this._makeShadingPattern(x)),this.current.fillAlpha<1&&lt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(lt)}_makeColorN_Pattern(x){return x[0]==="TilingPattern"?this._makeTilingPattern(x):this._makeShadingPattern(x)}_makeTilingPattern(x){const j=x[1],R=x[2],O=x[3]||G.IDENTITY_MATRIX,[B,ht,F,K]=x[4],lt=x[5],Gt=x[6],Et=x[7],Mt=`shading${Y++}`,[yt,qt,it,At]=G.Util.normalizeRect([...G.Util.applyTransform([B,ht],O),...G.Util.applyTransform([F,K],O)]),[Ot,tt]=G.Util.singularValueDecompose2dScale(O),w=lt*Ot,P=Gt*tt,W=this.svgFactory.createElement("svg:pattern");W.setAttributeNS(null,"id",Mt),W.setAttributeNS(null,"patternUnits","userSpaceOnUse"),W.setAttributeNS(null,"width",w),W.setAttributeNS(null,"height",P),W.setAttributeNS(null,"x",`${yt}`),W.setAttributeNS(null,"y",`${qt}`);const at=this.svg,ot=this.transformMatrix,rt=this.current.fillColor,Pt=this.current.strokeColor,Vt=this.svgFactory.create(it-yt,At-qt);if(this.svg=Vt,this.transformMatrix=O,Et===2){const Kt=G.Util.makeHexColor(...j);this.current.fillColor=Kt,this.current.strokeColor=Kt}return this.executeOpTree(this.convertOpList(R)),this.svg=at,this.transformMatrix=ot,this.current.fillColor=rt,this.current.strokeColor=Pt,W.append(Vt.childNodes[0]),this.defs.append(W),`url(#${Mt})`}_makeShadingPattern(x){switch(typeof x=="string"&&(x=this.objs.get(x)),x[0]){case"RadialAxial":const j=`shading${Y++}`,R=x[3];let O;switch(x[1]){case"axial":const B=x[4],ht=x[5];O=this.svgFactory.createElement("svg:linearGradient"),O.setAttributeNS(null,"id",j),O.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),O.setAttributeNS(null,"x1",B[0]),O.setAttributeNS(null,"y1",B[1]),O.setAttributeNS(null,"x2",ht[0]),O.setAttributeNS(null,"y2",ht[1]);break;case"radial":const F=x[4],K=x[5],lt=x[6],Gt=x[7];O=this.svgFactory.createElement("svg:radialGradient"),O.setAttributeNS(null,"id",j),O.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),O.setAttributeNS(null,"cx",K[0]),O.setAttributeNS(null,"cy",K[1]),O.setAttributeNS(null,"r",Gt),O.setAttributeNS(null,"fx",F[0]),O.setAttributeNS(null,"fy",F[1]),O.setAttributeNS(null,"fr",lt);break;default:throw new Error(`Unknown RadialAxial type: ${x[1]}`)}for(const B of R){const ht=this.svgFactory.createElement("svg:stop");ht.setAttributeNS(null,"offset",B[0]),ht.setAttributeNS(null,"stop-color",B[1]),O.append(ht)}return this.defs.append(O),`url(#${j})`;case"Mesh":return(0,G.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${x[0]}`)}}setDash(x,j){this.current.dashArray=x,this.current.dashPhase=j}constructPath(x,j){const R=this.current;let O=R.x,B=R.y,ht=[],F=0;for(const K of x)switch(K|0){case G.OPS.rectangle:O=j[F++],B=j[F++];const lt=j[F++],Gt=j[F++],Et=O+lt,Mt=B+Gt;ht.push("M",V(O),V(B),"L",V(Et),V(B),"L",V(Et),V(Mt),"L",V(O),V(Mt),"Z");break;case G.OPS.moveTo:O=j[F++],B=j[F++],ht.push("M",V(O),V(B));break;case G.OPS.lineTo:O=j[F++],B=j[F++],ht.push("L",V(O),V(B));break;case G.OPS.curveTo:O=j[F+4],B=j[F+5],ht.push("C",V(j[F]),V(j[F+1]),V(j[F+2]),V(j[F+3]),V(O),V(B)),F+=6;break;case G.OPS.curveTo2:ht.push("C",V(O),V(B),V(j[F]),V(j[F+1]),V(j[F+2]),V(j[F+3])),O=j[F+2],B=j[F+3],F+=4;break;case G.OPS.curveTo3:O=j[F+2],B=j[F+3],ht.push("C",V(j[F]),V(j[F+1]),V(O),V(B),V(O),V(B)),F+=4;break;case G.OPS.closePath:ht.push("Z");break}ht=ht.join(" "),R.path&&x.length>0&&x[0]!==G.OPS.rectangle&&x[0]!==G.OPS.moveTo?ht=R.path.getAttributeNS(null,"d")+ht:(R.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(R.path)),R.path.setAttributeNS(null,"d",ht),R.path.setAttributeNS(null,"fill","none"),R.element=R.path,R.setCurrentPoint(O,B)}endPath(){const x=this.current;if(x.path=null,!this.pendingClip)return;if(!x.element){this.pendingClip=null;return}const j=`clippath${q++}`,R=this.svgFactory.createElement("svg:clipPath");R.setAttributeNS(null,"id",j),R.setAttributeNS(null,"transform",et(this.transformMatrix));const O=x.element.cloneNode(!0);if(this.pendingClip==="evenodd"?O.setAttributeNS(null,"clip-rule","evenodd"):O.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,R.append(O),this.defs.append(R),x.activeClipUrl){x.clipGroup=null;for(const B of this.extraStack)B.clipGroup=null;R.setAttributeNS(null,"clip-path",x.activeClipUrl)}x.activeClipUrl=`url(#${j})`,this.tgrp=null}clip(x){this.pendingClip=x}closePath(){const x=this.current;if(x.path){const j=`${x.path.getAttributeNS(null,"d")}Z`;x.path.setAttributeNS(null,"d",j)}}setLeading(x){this.current.leading=-x}setTextRise(x){this.current.textRise=x}setTextRenderingMode(x){this.current.textRenderingMode=x}setHScale(x){this.current.textHScale=x/100}setRenderingIntent(x){}setFlatness(x){}setGState(x){for(const[j,R]of x)switch(j){case"LW":this.setLineWidth(R);break;case"LC":this.setLineCap(R);break;case"LJ":this.setLineJoin(R);break;case"ML":this.setMiterLimit(R);break;case"D":this.setDash(R[0],R[1]);break;case"RI":this.setRenderingIntent(R);break;case"FL":this.setFlatness(R);break;case"Font":this.setFont(R);break;case"CA":this.setStrokeAlpha(R);break;case"ca":this.setFillAlpha(R);break;default:(0,G.warn)(`Unimplemented graphic state operator ${j}`);break}}fill(){const x=this.current;x.element&&(x.element.setAttributeNS(null,"fill",x.fillColor),x.element.setAttributeNS(null,"fill-opacity",x.fillAlpha),this.endPath())}stroke(){const x=this.current;x.element&&(this._setStrokeAttributes(x.element),x.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(x,j=1){const R=this.current;let O=R.dashArray;j!==1&&O.length>0&&(O=O.map(function(B){return j*B})),x.setAttributeNS(null,"stroke",R.strokeColor),x.setAttributeNS(null,"stroke-opacity",R.strokeAlpha),x.setAttributeNS(null,"stroke-miterlimit",V(R.miterLimit)),x.setAttributeNS(null,"stroke-linecap",R.lineCap),x.setAttributeNS(null,"stroke-linejoin",R.lineJoin),x.setAttributeNS(null,"stroke-width",V(j*R.lineWidth)+"px"),x.setAttributeNS(null,"stroke-dasharray",O.map(V).join(" ")),x.setAttributeNS(null,"stroke-dashoffset",V(j*R.dashPhase)+"px")}eoFill(){var x;(x=this.current.element)==null||x.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var x;(x=this.current.element)==null||x.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x","0"),x.setAttributeNS(null,"y","0"),x.setAttributeNS(null,"width","1px"),x.setAttributeNS(null,"height","1px"),x.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(x)}paintImageXObject(x){const j=this.getObject(x);if(!j){(0,G.warn)(`Dependent image with object ID ${x} is not ready yet`);return}this.paintInlineImageXObject(j)}paintInlineImageXObject(x,j){const R=x.width,O=x.height,B=gt(x,this.forceDataSchema,!!j),ht=this.svgFactory.createElement("svg:rect");ht.setAttributeNS(null,"x","0"),ht.setAttributeNS(null,"y","0"),ht.setAttributeNS(null,"width",V(R)),ht.setAttributeNS(null,"height",V(O)),this.current.element=ht,this.clip("nonzero");const F=this.svgFactory.createElement("svg:image");F.setAttributeNS($t,"xlink:href",B),F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y",V(-O)),F.setAttributeNS(null,"width",V(R)+"px"),F.setAttributeNS(null,"height",V(O)+"px"),F.setAttributeNS(null,"transform",`scale(${V(1/R)} ${V(-1/O)})`),j?j.append(F):this._ensureTransformGroup().append(F)}paintImageMaskXObject(x){const j=this.getObject(x.data,x);if(j.bitmap){(0,G.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const R=this.current,O=j.width,B=j.height,ht=R.fillColor;R.maskId=`mask${U++}`;const F=this.svgFactory.createElement("svg:mask");F.setAttributeNS(null,"id",R.maskId);const K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y","0"),K.setAttributeNS(null,"width",V(O)),K.setAttributeNS(null,"height",V(B)),K.setAttributeNS(null,"fill",ht),K.setAttributeNS(null,"mask",`url(#${R.maskId})`),this.defs.append(F),this._ensureTransformGroup().append(K),this.paintInlineImageXObject(j,F)}paintFormXObjectBegin(x,j){if(Array.isArray(x)&&x.length===6&&this.transform(x[0],x[1],x[2],x[3],x[4],x[5]),j){const R=j[2]-j[0],O=j[3]-j[1],B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x",j[0]),B.setAttributeNS(null,"y",j[1]),B.setAttributeNS(null,"width",V(R)),B.setAttributeNS(null,"height",V(O)),this.current.element=B,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(x){const j=this.svgFactory.create(x.width,x.height),R=this.svgFactory.createElement("svg:defs");j.append(R),this.defs=R;const O=this.svgFactory.createElement("svg:g");return O.setAttributeNS(null,"transform",et(x.transform)),j.append(O),this.svg=O,j}_ensureClipGroup(){if(!this.current.clipGroup){const x=this.svgFactory.createElement("svg:g");x.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(x),this.current.clipGroup=x}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",et(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}D.SVGGraphics=dt},(T,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.XfaText=void 0;class Tt{static textContent(G){const _=[],vt={items:_,styles:Object.create(null)};function $t(mt){var gt;if(!mt)return;let st=null;const N=mt.name;if(N==="#text")st=mt.value;else if(Tt.shouldBuildText(N))(gt=mt==null?void 0:mt.attributes)!=null&&gt.textContent?st=mt.attributes.textContent:mt.value&&(st=mt.value);else return;if(st!==null&&_.push({str:st}),!!mt.children)for(const ct of mt.children)$t(ct)}return $t(G),vt}static shouldBuildText(G){return!(G==="textarea"||G==="input"||G==="option"||G==="select")}}D.XfaText=Tt},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.TextLayerRenderTask=void 0,D.renderTextLayer=et,D.updateTextLayer=q;var L=Tt(1),G=Tt(6);const _=1e5,vt=30,$t=.8,mt=new Map;function st(U,Y){let dt;if(Y&&L.FeatureTest.isOffscreenCanvasSupported)dt=new OffscreenCanvas(U,U).getContext("2d",{alpha:!1});else{const J=document.createElement("canvas");J.width=J.height=U,dt=J.getContext("2d",{alpha:!1})}return dt}function N(U,Y){const dt=mt.get(U);if(dt)return dt;const J=st(vt,Y);J.font=`${vt}px ${U}`;const x=J.measureText("");let j=x.fontBoundingBoxAscent,R=Math.abs(x.fontBoundingBoxDescent);if(j){const B=j/(j+R);return mt.set(U,B),J.canvas.width=J.canvas.height=0,B}J.strokeStyle="red",J.clearRect(0,0,vt,vt),J.strokeText("g",0,0);let O=J.getImageData(0,0,vt,vt).data;R=0;for(let B=O.length-1-3;B>=0;B-=4)if(O[B]>0){R=Math.ceil(B/4/vt);break}J.clearRect(0,0,vt,vt),J.strokeText("A",0,vt),O=J.getImageData(0,0,vt,vt).data,j=0;for(let B=0,ht=O.length;B<ht;B+=4)if(O[B]>0){j=vt-Math.floor(B/4/vt);break}if(J.canvas.width=J.canvas.height=0,j){const B=j/(j+R);return mt.set(U,B),B}return mt.set(U,$t),$t}function gt(U,Y,dt){const J=document.createElement("span"),x={angle:0,canvasWidth:0,hasText:Y.str!=="",hasEOL:Y.hasEOL,fontSize:0};U._textDivs.push(J);const j=L.Util.transform(U._transform,Y.transform);let R=Math.atan2(j[1],j[0]);const O=dt[Y.fontName];O.vertical&&(R+=Math.PI/2);const B=Math.hypot(j[2],j[3]),ht=B*N(O.fontFamily,U._isOffscreenCanvasSupported);let F,K;R===0?(F=j[4],K=j[5]-ht):(F=j[4]+ht*Math.sin(R),K=j[5]-ht*Math.cos(R));const lt="calc(var(--scale-factor)*",Gt=J.style;U._container===U._rootContainer?(Gt.left=`${(100*F/U._pageWidth).toFixed(2)}%`,Gt.top=`${(100*K/U._pageHeight).toFixed(2)}%`):(Gt.left=`${lt}${F.toFixed(2)}px)`,Gt.top=`${lt}${K.toFixed(2)}px)`),Gt.fontSize=`${lt}${B.toFixed(2)}px)`,Gt.fontFamily=O.fontFamily,x.fontSize=B,J.setAttribute("role","presentation"),J.textContent=Y.str,J.dir=Y.dir,U._fontInspectorEnabled&&(J.dataset.fontName=Y.fontName),R!==0&&(x.angle=R*(180/Math.PI));let Et=!1;if(Y.str.length>1)Et=!0;else if(Y.str!==" "&&Y.transform[0]!==Y.transform[3]){const Mt=Math.abs(Y.transform[0]),yt=Math.abs(Y.transform[3]);Mt!==yt&&Math.max(Mt,yt)/Math.min(Mt,yt)>1.5&&(Et=!0)}Et&&(x.canvasWidth=O.vertical?Y.height:Y.width),U._textDivProperties.set(J,x),U._isReadableStream&&U._layoutText(J)}function ct(U){const{div:Y,scale:dt,properties:J,ctx:x,prevFontSize:j,prevFontFamily:R}=U,{style:O}=Y;let B="";if(J.canvasWidth!==0&&J.hasText){const{fontFamily:ht}=O,{canvasWidth:F,fontSize:K}=J;(j!==K||R!==ht)&&(x.font=`${K*dt}px ${ht}`,U.prevFontSize=K,U.prevFontFamily=ht);const{width:lt}=x.measureText(Y.textContent);lt>0&&(B=`scaleX(${F*dt/lt})`)}J.angle!==0&&(B=`rotate(${J.angle}deg) ${B}`),B.length>0&&(O.transform=B)}function X(U){if(U._canceled)return;const Y=U._textDivs,dt=U._capability;if(Y.length>_){dt.resolve();return}if(!U._isReadableStream)for(const x of Y)U._layoutText(x);dt.resolve()}class V{constructor({textContentSource:Y,container:dt,viewport:J,textDivs:x,textDivProperties:j,textContentItemsStr:R,isOffscreenCanvasSupported:O}){var lt;this._textContentSource=Y,this._isReadableStream=Y instanceof ReadableStream,this._container=this._rootContainer=dt,this._textDivs=x||[],this._textContentItemsStr=R||[],this._isOffscreenCanvasSupported=O,this._fontInspectorEnabled=!!((lt=globalThis.FontInspector)!=null&&lt.enabled),this._reader=null,this._textDivProperties=j||new WeakMap,this._canceled=!1,this._capability=new L.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:J.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:st(0,O)};const{pageWidth:B,pageHeight:ht,pageX:F,pageY:K}=J.rawDims;this._transform=[1,0,0,-1,-F,K+ht],this._pageWidth=B,this._pageHeight=ht,(0,G.setLayerDimensions)(dt,J),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new L.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new L.AbortException("TextLayer task cancelled."))}_processItems(Y,dt){for(const J of Y){if(J.str===void 0){if(J.type==="beginMarkedContentProps"||J.type==="beginMarkedContent"){const x=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),J.id!==null&&this._container.setAttribute("id",`${J.id}`),x.append(this._container)}else J.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(J.str),gt(this,J,dt)}}_layoutText(Y){const dt=this._layoutTextParams.properties=this._textDivProperties.get(Y);if(this._layoutTextParams.div=Y,ct(this._layoutTextParams),dt.hasText&&this._container.append(Y),dt.hasEOL){const J=document.createElement("br");J.setAttribute("role","presentation"),this._container.append(J)}}_render(){const Y=new L.PromiseCapability;let dt=Object.create(null);if(this._isReadableStream){const J=()=>{this._reader.read().then(({value:x,done:j})=>{if(j){Y.resolve();return}Object.assign(dt,x.styles),this._processItems(x.items,dt),J()},Y.reject)};this._reader=this._textContentSource.getReader(),J()}else if(this._textContentSource){const{items:J,styles:x}=this._textContentSource;this._processItems(J,x),Y.resolve()}else throw new Error('No "textContentSource" parameter specified.');Y.promise.then(()=>{dt=null,X(this)},this._capability.reject)}}D.TextLayerRenderTask=V;function et(U){!U.textContentSource&&(U.textContent||U.textContentStream)&&((0,G.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),U.textContentSource=U.textContent||U.textContentStream);const{container:Y,viewport:dt}=U,J=getComputedStyle(Y),x=J.getPropertyValue("visibility"),j=parseFloat(J.getPropertyValue("--scale-factor"));x==="visible"&&(!j||Math.abs(j-dt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const R=new V(U);return R._render(),R}function q({container:U,viewport:Y,textDivs:dt,textDivProperties:J,isOffscreenCanvasSupported:x,mustRotate:j=!0,mustRescale:R=!0}){if(j&&(0,G.setLayerDimensions)(U,{rotation:Y.rotation}),R){const O=st(0,x),ht={prevFontSize:null,prevFontFamily:null,div:null,scale:Y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:O};for(const F of dt)ht.properties=J.get(F),ht.div=F,ct(ht)}}},(T,D,Tt)=>{var N,gt,ct,X,V,et,q,U,Y,dt,J,yr,Oi,Ar,Sr;Object.defineProperty(D,"__esModule",{value:!0}),D.AnnotationEditorLayer=void 0;var L=Tt(1),G=Tt(4),_=Tt(28),vt=Tt(33),$t=Tt(6),mt=Tt(34);const B=class B{constructor({uiManager:F,pageIndex:K,div:lt,accessibilityManager:Gt,annotationLayer:Et,viewport:Mt,l10n:yt}){zt(this,J);zt(this,N);zt(this,gt,!1);zt(this,ct,null);zt(this,X,this.pointerup.bind(this));zt(this,V,this.pointerdown.bind(this));zt(this,et,new Map);zt(this,q,!1);zt(this,U,!1);zt(this,Y,!1);zt(this,dt);const qt=[_.FreeTextEditor,vt.InkEditor,mt.StampEditor];if(!B._initialized){B._initialized=!0;for(const it of qt)it.initialize(yt)}F.registerEditorTypes(qt),Wt(this,dt,F),this.pageIndex=K,this.div=lt,Wt(this,N,Gt),Wt(this,ct,Et),this.viewport=Mt,y(this,dt).addLayer(this)}get isEmpty(){return y(this,et).size===0}updateToolbar(F){y(this,dt).updateToolbar(F)}updateMode(F=y(this,dt).getMode()){xt(this,J,Sr).call(this),F===L.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),F!==L.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",F===L.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",F===L.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",F===L.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(F){if(!F&&y(this,dt).getMode()!==L.AnnotationEditorType.INK)return;if(!F){for(const lt of y(this,et).values())if(lt.isEmpty()){lt.setInBackground();return}}xt(this,J,Oi).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(F){y(this,dt).setEditingState(F)}addCommands(F){y(this,dt).addCommands(F)}enable(){this.div.style.pointerEvents="auto";const F=new Set;for(const lt of y(this,et).values())lt.enableEditing(),lt.annotationElementId&&F.add(lt.annotationElementId);if(!y(this,ct))return;const K=y(this,ct).getEditableAnnotations();for(const lt of K){if(lt.hide(),y(this,dt).isDeletedAnnotationElement(lt.data.id)||F.has(lt.data.id))continue;const Gt=this.deserialize(lt);Gt&&(this.addOrRebuild(Gt),Gt.enableEditing())}}disable(){var K;Wt(this,Y,!0),this.div.style.pointerEvents="none";const F=new Set;for(const lt of y(this,et).values()){if(lt.disableEditing(),!lt.annotationElementId||lt.serialize()!==null){F.add(lt.annotationElementId);continue}(K=this.getEditableAnnotation(lt.annotationElementId))==null||K.show(),lt.remove()}if(y(this,ct)){const lt=y(this,ct).getEditableAnnotations();for(const Gt of lt){const{id:Et}=Gt.data;F.has(Et)||y(this,dt).isDeletedAnnotationElement(Et)||Gt.show()}}xt(this,J,Sr).call(this),this.isEmpty&&(this.div.hidden=!0),Wt(this,Y,!1)}getEditableAnnotation(F){var K;return((K=y(this,ct))==null?void 0:K.getEditableAnnotation(F))||null}setActiveEditor(F){y(this,dt).getActive()!==F&&y(this,dt).setActiveEditor(F)}enableClick(){this.div.addEventListener("pointerdown",y(this,V)),this.div.addEventListener("pointerup",y(this,X))}disableClick(){this.div.removeEventListener("pointerdown",y(this,V)),this.div.removeEventListener("pointerup",y(this,X))}attach(F){y(this,et).set(F.id,F);const{annotationElementId:K}=F;K&&y(this,dt).isDeletedAnnotationElement(K)&&y(this,dt).removeDeletedAnnotationElement(F)}detach(F){var K;y(this,et).delete(F.id),(K=y(this,N))==null||K.removePointerInTextLayer(F.contentDiv),!y(this,Y)&&F.annotationElementId&&y(this,dt).addDeletedAnnotationElement(F)}remove(F){this.detach(F),y(this,dt).removeEditor(F),F.div.contains(document.activeElement)&&setTimeout(()=>{y(this,dt).focusMainContainer()},0),F.div.remove(),F.isAttachedToDOM=!1,y(this,U)||this.addInkEditorIfNeeded(!1)}changeParent(F){var K;F.parent!==this&&(F.annotationElementId&&(y(this,dt).addDeletedAnnotationElement(F.annotationElementId),G.AnnotationEditor.deleteAnnotationElement(F),F.annotationElementId=null),this.attach(F),(K=F.parent)==null||K.detach(F),F.setParent(this),F.div&&F.isAttachedToDOM&&(F.div.remove(),this.div.append(F.div)))}add(F){if(this.changeParent(F),y(this,dt).addEditor(F),this.attach(F),!F.isAttachedToDOM){const K=F.render();this.div.append(K),F.isAttachedToDOM=!0}F.fixAndSetPosition(),F.onceAdded(),y(this,dt).addToAnnotationStorage(F)}moveEditorInDOM(F){var lt;if(!F.isAttachedToDOM)return;const{activeElement:K}=document;F.div.contains(K)&&(F._focusEventsAllowed=!1,setTimeout(()=>{F.div.contains(document.activeElement)?F._focusEventsAllowed=!0:(F.div.addEventListener("focusin",()=>{F._focusEventsAllowed=!0},{once:!0}),K.focus())},0)),F._structTreeParentId=(lt=y(this,N))==null?void 0:lt.moveElementInDOM(this.div,F.div,F.contentDiv,!0)}addOrRebuild(F){F.needsToBeRebuilt()?F.rebuild():this.add(F)}addUndoableEditor(F){const K=()=>F._uiManager.rebuild(F),lt=()=>{F.remove()};this.addCommands({cmd:K,undo:lt,mustExec:!1})}getNextId(){return y(this,dt).getId()}pasteEditor(F,K){y(this,dt).updateToolbar(F),y(this,dt).updateMode(F);const{offsetX:lt,offsetY:Gt}=xt(this,J,Ar).call(this),Et=this.getNextId(),Mt=xt(this,J,yr).call(this,{parent:this,id:Et,x:lt,y:Gt,uiManager:y(this,dt),isCentered:!0,...K});Mt&&this.add(Mt)}deserialize(F){switch(F.annotationType??F.annotationEditorType){case L.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(F,this,y(this,dt));case L.AnnotationEditorType.INK:return vt.InkEditor.deserialize(F,this,y(this,dt));case L.AnnotationEditorType.STAMP:return mt.StampEditor.deserialize(F,this,y(this,dt))}return null}addNewEditor(){xt(this,J,Oi).call(this,xt(this,J,Ar).call(this),!0)}setSelected(F){y(this,dt).setSelected(F)}toggleSelected(F){y(this,dt).toggleSelected(F)}isSelected(F){return y(this,dt).isSelected(F)}unselect(F){y(this,dt).unselect(F)}pointerup(F){const{isMac:K}=L.FeatureTest.platform;if(!(F.button!==0||F.ctrlKey&&K)&&F.target===this.div&&y(this,q)){if(Wt(this,q,!1),!y(this,gt)){Wt(this,gt,!0);return}if(y(this,dt).getMode()===L.AnnotationEditorType.STAMP){y(this,dt).unselectAll();return}xt(this,J,Oi).call(this,F,!1)}}pointerdown(F){if(y(this,q)){Wt(this,q,!1);return}const{isMac:K}=L.FeatureTest.platform;if(F.button!==0||F.ctrlKey&&K||F.target!==this.div)return;Wt(this,q,!0);const lt=y(this,dt).getActive();Wt(this,gt,!lt||lt.isEmpty())}findNewParent(F,K,lt){const Gt=y(this,dt).findParent(K,lt);return Gt===null||Gt===this?!1:(Gt.changeParent(F),!0)}destroy(){var F,K;((F=y(this,dt).getActive())==null?void 0:F.parent)===this&&(y(this,dt).commitOrRemove(),y(this,dt).setActiveEditor(null));for(const lt of y(this,et).values())(K=y(this,N))==null||K.removePointerInTextLayer(lt.contentDiv),lt.setParent(null),lt.isAttachedToDOM=!1,lt.div.remove();this.div=null,y(this,et).clear(),y(this,dt).removeLayer(this)}render({viewport:F}){this.viewport=F,(0,$t.setLayerDimensions)(this.div,F);for(const K of y(this,dt).getEditors(this.pageIndex))this.add(K);this.updateMode()}update({viewport:F}){y(this,dt).commitOrRemove(),this.viewport=F,(0,$t.setLayerDimensions)(this.div,{rotation:F.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:F,pageHeight:K}=this.viewport.rawDims;return[F,K]}};N=new WeakMap,gt=new WeakMap,ct=new WeakMap,X=new WeakMap,V=new WeakMap,et=new WeakMap,q=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,J=new WeakSet,yr=function(F){switch(y(this,dt).getMode()){case L.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(F);case L.AnnotationEditorType.INK:return new vt.InkEditor(F);case L.AnnotationEditorType.STAMP:return new mt.StampEditor(F)}return null},Oi=function(F,K){const lt=this.getNextId(),Gt=xt(this,J,yr).call(this,{parent:this,id:lt,x:F.offsetX,y:F.offsetY,uiManager:y(this,dt),isCentered:K});return Gt&&this.add(Gt),Gt},Ar=function(){const{x:F,y:K,width:lt,height:Gt}=this.div.getBoundingClientRect(),Et=Math.max(0,F),Mt=Math.max(0,K),yt=Math.min(window.innerWidth,F+lt),qt=Math.min(window.innerHeight,K+Gt),it=(Et+yt)/2-F,At=(Mt+qt)/2-K,[Ot,tt]=this.viewport.rotation%180===0?[it,At]:[At,it];return{offsetX:Ot,offsetY:tt}},Sr=function(){Wt(this,U,!0);for(const F of y(this,et).values())F.isEmpty()&&F.remove();Wt(this,U,!1)},yn(B,"_initialized",!1);let st=B;D.AnnotationEditorLayer=st},(T,D,Tt)=>{var mt,st,N,gt,ct,X,V,et,q,U,fs,ps,gs,_i,Er,ms,wr;Object.defineProperty(D,"__esModule",{value:!0}),D.FreeTextEditor=void 0;var L=Tt(1),G=Tt(5),_=Tt(4),vt=Tt(29);const B=class B extends _.AnnotationEditor{constructor(K){super({...K,name:"freeTextEditor"});zt(this,U);zt(this,mt,this.editorDivBlur.bind(this));zt(this,st,this.editorDivFocus.bind(this));zt(this,N,this.editorDivInput.bind(this));zt(this,gt,this.editorDivKeydown.bind(this));zt(this,ct);zt(this,X,"");zt(this,V,`${this.id}-editor`);zt(this,et);zt(this,q,null);Wt(this,ct,K.color||B._defaultColor||_.AnnotationEditor._defaultLineColor),Wt(this,et,K.fontSize||B._defaultFontSize)}static get _keyboardManager(){const K=B.prototype,lt=Mt=>Mt.isEmpty(),Gt=G.AnnotationEditorUIManager.TRANSLATE_SMALL,Et=G.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,L.shadow)(this,"_keyboardManager",new G.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],K.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],K.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],K._translateEmpty,{args:[-Gt,0],checker:lt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],K._translateEmpty,{args:[-Et,0],checker:lt}],[["ArrowRight","mac+ArrowRight"],K._translateEmpty,{args:[Gt,0],checker:lt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],K._translateEmpty,{args:[Et,0],checker:lt}],[["ArrowUp","mac+ArrowUp"],K._translateEmpty,{args:[0,-Gt],checker:lt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],K._translateEmpty,{args:[0,-Et],checker:lt}],[["ArrowDown","mac+ArrowDown"],K._translateEmpty,{args:[0,Gt],checker:lt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],K._translateEmpty,{args:[0,Et],checker:lt}]]))}static initialize(K){_.AnnotationEditor.initialize(K,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const lt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(lt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(K,lt){switch(K){case L.AnnotationEditorParamsType.FREETEXT_SIZE:B._defaultFontSize=lt;break;case L.AnnotationEditorParamsType.FREETEXT_COLOR:B._defaultColor=lt;break}}updateParams(K,lt){switch(K){case L.AnnotationEditorParamsType.FREETEXT_SIZE:xt(this,U,fs).call(this,lt);break;case L.AnnotationEditorParamsType.FREETEXT_COLOR:xt(this,U,ps).call(this,lt);break}}static get defaultPropertiesToUpdate(){return[[L.AnnotationEditorParamsType.FREETEXT_SIZE,B._defaultFontSize],[L.AnnotationEditorParamsType.FREETEXT_COLOR,B._defaultColor||_.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[L.AnnotationEditorParamsType.FREETEXT_SIZE,y(this,et)],[L.AnnotationEditorParamsType.FREETEXT_COLOR,y(this,ct)]]}_translateEmpty(K,lt){this._uiManager.translateSelectedEditors(K,lt,!0)}getInitialTranslation(){const K=this.parentScale;return[-B._internalPadding*K,-(B._internalPadding+y(this,et))*K]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(L.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",y(this,gt)),this.editorDiv.addEventListener("focus",y(this,st)),this.editorDiv.addEventListener("blur",y(this,mt)),this.editorDiv.addEventListener("input",y(this,N)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",y(this,V)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",y(this,gt)),this.editorDiv.removeEventListener("focus",y(this,st)),this.editorDiv.removeEventListener("blur",y(this,mt)),this.editorDiv.removeEventListener("input",y(this,N)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),K.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var K;if(this.width){xt(this,U,wr).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(K=this._initialOptions)!=null&&K.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const K=y(this,X),lt=Wt(this,X,xt(this,U,gs).call(this).trimEnd());if(K===lt)return;const Gt=Et=>{if(Wt(this,X,Et),!Et){this.remove();return}xt(this,U,Er).call(this),this._uiManager.rebuild(this),xt(this,U,_i).call(this)};this.addCommands({cmd:()=>{Gt(lt)},undo:()=>{Gt(K)},mustExec:!1}),xt(this,U,_i).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(K){this.enterInEditMode()}keydown(K){K.target===this.div&&K.key==="Enter"&&(this.enterInEditMode(),K.preventDefault())}editorDivKeydown(K){B._keyboardManager.exec(this,K)}editorDivFocus(K){this.isEditing=!0}editorDivBlur(K){this.isEditing=!1}editorDivInput(K){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let K,lt;this.width&&(K=this.x,lt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",y(this,V)),this.enableEditing(),_.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Et=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("aria-label",Et)}),_.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Et=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:Gt}=this.editorDiv;if(Gt.fontSize=`calc(${y(this,et)}px * var(--scale-factor))`,Gt.color=y(this,ct),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,G.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Et,Mt]=this.parentDimensions;if(this.annotationElementId){const{position:yt}=y(this,q);let[qt,it]=this.getInitialTranslation();[qt,it]=this.pageTranslationToScreen(qt,it);const[At,Ot]=this.pageDimensions,[tt,w]=this.pageTranslation;let P,W;switch(this.rotation){case 0:P=K+(yt[0]-tt)/At,W=lt+this.height-(yt[1]-w)/Ot;break;case 90:P=K+(yt[0]-tt)/At,W=lt-(yt[1]-w)/Ot,[qt,it]=[it,-qt];break;case 180:P=K-this.width+(yt[0]-tt)/At,W=lt-(yt[1]-w)/Ot,[qt,it]=[-qt,-it];break;case 270:P=K+(yt[0]-tt-this.height*Ot)/At,W=lt+(yt[1]-w-this.width*At)/Ot,[qt,it]=[-it,qt];break}this.setAt(P*Et,W*Mt,qt,it)}else this.setAt(K*Et,lt*Mt,this.width*Et,this.height*Mt);xt(this,U,Er).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(K,lt,Gt){let Et=null;if(K instanceof vt.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:yt,fontColor:qt},rect:it,rotation:At,id:Ot},textContent:tt,textPosition:w,parent:{page:{pageNumber:P}}}=K;if(!tt||tt.length===0)return null;Et=K={annotationType:L.AnnotationEditorType.FREETEXT,color:Array.from(qt),fontSize:yt,value:tt.join(`
`),position:w,pageIndex:P-1,rect:it,rotation:At,id:Ot,deleted:!1}}const Mt=super.deserialize(K,lt,Gt);return Wt(Mt,et,K.fontSize),Wt(Mt,ct,L.Util.makeHexColor(...K.color)),Wt(Mt,X,K.value),Mt.annotationElementId=K.id||null,Wt(Mt,q,Et),Mt}serialize(K=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const lt=B._internalPadding*this.parentScale,Gt=this.getRect(lt,lt),Et=_.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:y(this,ct)),Mt={annotationType:L.AnnotationEditorType.FREETEXT,color:Et,fontSize:y(this,et),value:y(this,X),pageIndex:this.pageIndex,rect:Gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return K?Mt:this.annotationElementId&&!xt(this,U,ms).call(this,Mt)?null:(Mt.id=this.annotationElementId,Mt)}};mt=new WeakMap,st=new WeakMap,N=new WeakMap,gt=new WeakMap,ct=new WeakMap,X=new WeakMap,V=new WeakMap,et=new WeakMap,q=new WeakMap,U=new WeakSet,fs=function(K){const lt=Et=>{this.editorDiv.style.fontSize=`calc(${Et}px * var(--scale-factor))`,this.translate(0,-(Et-y(this,et))*this.parentScale),Wt(this,et,Et),xt(this,U,_i).call(this)},Gt=y(this,et);this.addCommands({cmd:()=>{lt(K)},undo:()=>{lt(Gt)},mustExec:!0,type:L.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ps=function(K){const lt=y(this,ct);this.addCommands({cmd:()=>{Wt(this,ct,this.editorDiv.style.color=K)},undo:()=>{Wt(this,ct,this.editorDiv.style.color=lt)},mustExec:!0,type:L.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gs=function(){const K=this.editorDiv.getElementsByTagName("div");if(K.length===0)return this.editorDiv.innerText;const lt=[];for(const Gt of K)lt.push(Gt.innerText.replace(/\r\n?|\n/,""));return lt.join(`
`)},_i=function(){const[K,lt]=this.parentDimensions;let Gt;if(this.isAttachedToDOM)Gt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:Mt}=this,yt=Mt.style.display;Mt.style.display="hidden",Et.div.append(this.div),Gt=Mt.getBoundingClientRect(),Mt.remove(),Mt.style.display=yt}this.rotation%180===this.parentRotation%180?(this.width=Gt.width/K,this.height=Gt.height/lt):(this.width=Gt.height/K,this.height=Gt.width/lt),this.fixAndSetPosition()},Er=function(){if(this.editorDiv.replaceChildren(),!!y(this,X))for(const K of y(this,X).split(`
`)){const lt=document.createElement("div");lt.append(K?document.createTextNode(K):document.createElement("br")),this.editorDiv.append(lt)}},ms=function(K){const{value:lt,fontSize:Gt,color:Et,rect:Mt,pageIndex:yt}=y(this,q);return K.value!==lt||K.fontSize!==Gt||K.rect.some((qt,it)=>Math.abs(qt-Mt[it])>=1)||K.color.some((qt,it)=>qt!==Et[it])||K.pageIndex!==yt},wr=function(K=!1){if(!this.annotationElementId)return;if(xt(this,U,_i).call(this),!K&&(this.width===0||this.height===0)){setTimeout(()=>xt(this,U,wr).call(this,!0),0);return}const lt=B._internalPadding*this.parentScale;y(this,q).rect=this.getRect(lt,lt)},yn(B,"_freeTextDefaultContent",""),yn(B,"_internalPadding",0),yn(B,"_defaultColor",null),yn(B,"_defaultFontSize",10),yn(B,"_type","freetext");let $t=B;D.FreeTextEditor=$t},(T,D,Tt)=>{var W,ot,ii,vs,Vt,Kt,Zt,te,re,se,Nt,jt,$,ut,Rt,Ht,Jt,ae,ne,kt,ge,he,bs,Ni,Cr,Pr,Re,Xe,ln,ee,Ft,Dt,ye,Tr,De,ft,Qt,pe,_s,xr;Object.defineProperty(D,"__esModule",{value:!0}),D.StampAnnotationElement=D.InkAnnotationElement=D.FreeTextAnnotationElement=D.AnnotationLayer=void 0;var L=Tt(1),G=Tt(6),_=Tt(3),vt=Tt(30),$t=Tt(31),mt=Tt(32);const st=1e3,N=9,gt=new WeakSet;function ct(_e){return{width:_e[2]-_e[0],height:_e[3]-_e[1]}}class X{static create(nt){switch(nt.data.annotationType){case L.AnnotationType.LINK:return new et(nt);case L.AnnotationType.TEXT:return new q(nt);case L.AnnotationType.WIDGET:switch(nt.data.fieldType){case"Tx":return new Y(nt);case"Btn":return nt.data.radioButton?new x(nt):nt.data.checkBox?new J(nt):new j(nt);case"Ch":return new R(nt);case"Sig":return new dt(nt)}return new U(nt);case L.AnnotationType.POPUP:return new O(nt);case L.AnnotationType.FREETEXT:return new ht(nt);case L.AnnotationType.LINE:return new F(nt);case L.AnnotationType.SQUARE:return new K(nt);case L.AnnotationType.CIRCLE:return new lt(nt);case L.AnnotationType.POLYLINE:return new Gt(nt);case L.AnnotationType.CARET:return new Mt(nt);case L.AnnotationType.INK:return new yt(nt);case L.AnnotationType.POLYGON:return new Et(nt);case L.AnnotationType.HIGHLIGHT:return new qt(nt);case L.AnnotationType.UNDERLINE:return new it(nt);case L.AnnotationType.SQUIGGLY:return new At(nt);case L.AnnotationType.STRIKEOUT:return new Ot(nt);case L.AnnotationType.STAMP:return new tt(nt);case L.AnnotationType.FILEATTACHMENT:return new w(nt);default:return new V(nt)}}}const at=class at{constructor(nt,{isRenderable:Q=!1,ignoreBorder:wt=!1,createQuadrilaterals:Xt=!1}={}){zt(this,W,!1);this.isRenderable=Q,this.data=nt.data,this.layer=nt.layer,this.linkService=nt.linkService,this.downloadManager=nt.downloadManager,this.imageResourcesPath=nt.imageResourcesPath,this.renderForms=nt.renderForms,this.svgFactory=nt.svgFactory,this.annotationStorage=nt.annotationStorage,this.enableScripting=nt.enableScripting,this.hasJSActions=nt.hasJSActions,this._fieldObjects=nt.fieldObjects,this.parent=nt.parent,Q&&(this.container=this._createContainer(wt)),Xt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:nt,contentsObj:Q,richText:wt}){return!!(nt!=null&&nt.str||Q!=null&&Q.str||wt!=null&&wt.str)}get hasPopupData(){return at._hasPopupData(this.data)}_createContainer(nt){const{data:Q,parent:{page:wt,viewport:Xt}}=this,Yt=document.createElement("section");Yt.setAttribute("data-annotation-id",Q.id),this instanceof U||(Yt.tabIndex=st),Yt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Yt.setAttribute("aria-haspopup","dialog"),Q.noRotate&&Yt.classList.add("norotate");const{pageWidth:ie,pageHeight:ue,pageX:Pe,pageY:Se}=Xt.rawDims;if(!Q.rect||this instanceof O){const{rotation:je}=Q;return!Q.hasOwnCanvas&&je!==0&&this.setRotation(je,Yt),Yt}const{width:ve,height:Ge}=ct(Q.rect),Ee=L.Util.normalizeRect([Q.rect[0],wt.view[3]-Q.rect[1]+wt.view[1],Q.rect[2],wt.view[3]-Q.rect[3]+wt.view[1]]);if(!nt&&Q.borderStyle.width>0){Yt.style.borderWidth=`${Q.borderStyle.width}px`;const je=Q.borderStyle.horizontalCornerRadius,Ke=Q.borderStyle.verticalCornerRadius;if(je>0||Ke>0){const pn=`calc(${je}px * var(--scale-factor)) / calc(${Ke}px * var(--scale-factor))`;Yt.style.borderRadius=pn}else if(this instanceof x){const pn=`calc(${ve}px * var(--scale-factor)) / calc(${Ge}px * var(--scale-factor))`;Yt.style.borderRadius=pn}switch(Q.borderStyle.style){case L.AnnotationBorderStyleType.SOLID:Yt.style.borderStyle="solid";break;case L.AnnotationBorderStyleType.DASHED:Yt.style.borderStyle="dashed";break;case L.AnnotationBorderStyleType.BEVELED:(0,L.warn)("Unimplemented border style: beveled");break;case L.AnnotationBorderStyleType.INSET:(0,L.warn)("Unimplemented border style: inset");break;case L.AnnotationBorderStyleType.UNDERLINE:Yt.style.borderBottomStyle="solid";break}const sn=Q.borderColor||null;sn?(Wt(this,W,!0),Yt.style.borderColor=L.Util.makeHexColor(sn[0]|0,sn[1]|0,sn[2]|0)):Yt.style.borderWidth=0}Yt.style.left=`${100*(Ee[0]-Pe)/ie}%`,Yt.style.top=`${100*(Ee[1]-Se)/ue}%`;const{rotation:ke}=Q;return Q.hasOwnCanvas||ke===0?(Yt.style.width=`${100*ve/ie}%`,Yt.style.height=`${100*Ge/ue}%`):this.setRotation(ke,Yt),Yt}setRotation(nt,Q=this.container){if(!this.data.rect)return;const{pageWidth:wt,pageHeight:Xt}=this.parent.viewport.rawDims,{width:Yt,height:ie}=ct(this.data.rect);let ue,Pe;nt%180===0?(ue=100*Yt/wt,Pe=100*ie/Xt):(ue=100*ie/wt,Pe=100*Yt/Xt),Q.style.width=`${ue}%`,Q.style.height=`${Pe}%`,Q.setAttribute("data-main-rotation",(360-nt)%360)}get _commonActions(){const nt=(Q,wt,Xt)=>{const Yt=Xt.detail[Q],ie=Yt[0],ue=Yt.slice(1);Xt.target.style[wt]=vt.ColorConverters[`${ie}_HTML`](ue),this.annotationStorage.setValue(this.data.id,{[wt]:vt.ColorConverters[`${ie}_rgb`](ue)})};return(0,L.shadow)(this,"_commonActions",{display:Q=>{const{display:wt}=Q.detail,Xt=wt%2===1;this.container.style.visibility=Xt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Xt,noPrint:wt===1||wt===2})},print:Q=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Q.detail.print})},hidden:Q=>{const{hidden:wt}=Q.detail;this.container.style.visibility=wt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:wt,noView:wt})},focus:Q=>{setTimeout(()=>Q.target.focus({preventScroll:!1}),0)},userName:Q=>{Q.target.title=Q.detail.userName},readonly:Q=>{Q.target.disabled=Q.detail.readonly},required:Q=>{this._setRequired(Q.target,Q.detail.required)},bgColor:Q=>{nt("bgColor","backgroundColor",Q)},fillColor:Q=>{nt("fillColor","backgroundColor",Q)},fgColor:Q=>{nt("fgColor","color",Q)},textColor:Q=>{nt("textColor","color",Q)},borderColor:Q=>{nt("borderColor","borderColor",Q)},strokeColor:Q=>{nt("strokeColor","borderColor",Q)},rotation:Q=>{const wt=Q.detail.rotation;this.setRotation(wt),this.annotationStorage.setValue(this.data.id,{rotation:wt})}})}_dispatchEventFromSandbox(nt,Q){const wt=this._commonActions;for(const Xt of Object.keys(Q.detail)){const Yt=nt[Xt]||wt[Xt];Yt==null||Yt(Q)}}_setDefaultPropertiesFromJS(nt){if(!this.enableScripting)return;const Q=this.annotationStorage.getRawValue(this.data.id);if(!Q)return;const wt=this._commonActions;for(const[Xt,Yt]of Object.entries(Q)){const ie=wt[Xt];if(ie){const ue={detail:{[Xt]:Yt},target:nt};ie(ue),delete Q[Xt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:nt}=this.data;if(!nt)return;const[Q,wt,Xt,Yt]=this.data.rect;if(nt.length===1){const[,{x:Ke,y:sn},{x:pn,y:Fn}]=nt[0];if(Xt===Ke&&Yt===sn&&Q===pn&&wt===Fn)return}const{style:ie}=this.container;let ue;if(y(this,W)){const{borderColor:Ke,borderWidth:sn}=ie;ie.borderWidth=0,ue=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ke}" stroke-width="${sn}">`],this.container.classList.add("hasBorder")}const Pe=Xt-Q,Se=Yt-wt,{svgFactory:ve}=this,Ge=ve.createElement("svg");Ge.classList.add("quadrilateralsContainer"),Ge.setAttribute("width",0),Ge.setAttribute("height",0);const Ee=ve.createElement("defs");Ge.append(Ee);const ke=ve.createElement("clipPath"),je=`clippath_${this.data.id}`;ke.setAttribute("id",je),ke.setAttribute("clipPathUnits","objectBoundingBox"),Ee.append(ke);for(const[,{x:Ke,y:sn},{x:pn,y:Fn}]of nt){const Cn=ve.createElement("rect"),Wn=(pn-Q)/Pe,Gn=(Yt-sn)/Se,qn=(Ke-pn)/Pe,Si=(sn-Fn)/Se;Cn.setAttribute("x",Wn),Cn.setAttribute("y",Gn),Cn.setAttribute("width",qn),Cn.setAttribute("height",Si),ke.append(Cn),ue==null||ue.push(`<rect vector-effect="non-scaling-stroke" x="${Wn}" y="${Gn}" width="${qn}" height="${Si}"/>`)}y(this,W)&&(ue.push("</g></svg>')"),ie.backgroundImage=ue.join("")),this.container.append(Ge),this.container.style.clipPath=`url(#${je})`}_createPopup(){const{container:nt,data:Q}=this;nt.setAttribute("aria-haspopup","dialog");const wt=new O({data:{color:Q.color,titleObj:Q.titleObj,modificationDate:Q.modificationDate,contentsObj:Q.contentsObj,richText:Q.richText,parentRect:Q.rect,borderStyle:0,id:`popup_${Q.id}`,rotation:Q.rotation},parent:this.parent,elements:[this]});this.parent.div.append(wt.render())}render(){(0,L.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(nt,Q=null){const wt=[];if(this._fieldObjects){const Xt=this._fieldObjects[nt];if(Xt)for(const{page:Yt,id:ie,exportValues:ue}of Xt){if(Yt===-1||ie===Q)continue;const Pe=typeof ue=="string"?ue:null,Se=document.querySelector(`[data-element-id="${ie}"]`);if(Se&&!gt.has(Se)){(0,L.warn)(`_getElementsByName - element not allowed: ${ie}`);continue}wt.push({id:ie,exportValue:Pe,domElement:Se})}return wt}for(const Xt of document.getElementsByName(nt)){const{exportValue:Yt}=Xt,ie=Xt.getAttribute("data-element-id");ie!==Q&&gt.has(Xt)&&wt.push({id:ie,exportValue:Yt,domElement:Xt})}return wt}show(){var nt;this.container&&(this.container.hidden=!1),(nt=this.popup)==null||nt.maybeShow()}hide(){var nt;this.container&&(this.container.hidden=!0),(nt=this.popup)==null||nt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const nt=this.getElementsToTriggerPopup();if(Array.isArray(nt))for(const Q of nt)Q.classList.add("highlightArea");else nt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:nt,data:{id:Q}}=this;this.container.addEventListener("dblclick",()=>{var wt;(wt=this.linkService.eventBus)==null||wt.dispatch("switchannotationeditormode",{source:this,mode:nt,editId:Q})})}};W=new WeakMap;let V=at;class et extends V{constructor(Q,wt=null){super(Q,{isRenderable:!0,ignoreBorder:!!(wt!=null&&wt.ignoreBorder),createQuadrilaterals:!0});zt(this,ot);this.isTooltipOnly=Q.data.isTooltipOnly}render(){const{data:Q,linkService:wt}=this,Xt=document.createElement("a");Xt.setAttribute("data-element-id",Q.id);let Yt=!1;return Q.url?(wt.addLinkAttributes(Xt,Q.url,Q.newWindow),Yt=!0):Q.action?(this._bindNamedAction(Xt,Q.action),Yt=!0):Q.attachment?(this._bindAttachment(Xt,Q.attachment),Yt=!0):Q.setOCGState?(xt(this,ot,vs).call(this,Xt,Q.setOCGState),Yt=!0):Q.dest?(this._bindLink(Xt,Q.dest),Yt=!0):(Q.actions&&(Q.actions.Action||Q.actions["Mouse Up"]||Q.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Xt,Q),Yt=!0),Q.resetForm?(this._bindResetFormAction(Xt,Q.resetForm),Yt=!0):this.isTooltipOnly&&!Yt&&(this._bindLink(Xt,""),Yt=!0)),this.container.classList.add("linkAnnotation"),Yt&&this.container.append(Xt),this.container}_bindLink(Q,wt){Q.href=this.linkService.getDestinationHash(wt),Q.onclick=()=>(wt&&this.linkService.goToDestination(wt),!1),(wt||wt==="")&&xt(this,ot,ii).call(this)}_bindNamedAction(Q,wt){Q.href=this.linkService.getAnchorUrl(""),Q.onclick=()=>(this.linkService.executeNamedAction(wt),!1),xt(this,ot,ii).call(this)}_bindAttachment(Q,wt){Q.href=this.linkService.getAnchorUrl(""),Q.onclick=()=>{var Xt;return(Xt=this.downloadManager)==null||Xt.openOrDownloadData(this.container,wt.content,wt.filename),!1},xt(this,ot,ii).call(this)}_bindJSAction(Q,wt){Q.href=this.linkService.getAnchorUrl("");const Xt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Yt of Object.keys(wt.actions)){const ie=Xt.get(Yt);ie&&(Q[ie]=()=>{var ue;return(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:wt.id,name:Yt}}),!1})}Q.onclick||(Q.onclick=()=>!1),xt(this,ot,ii).call(this)}_bindResetFormAction(Q,wt){const Xt=Q.onclick;if(Xt||(Q.href=this.linkService.getAnchorUrl("")),xt(this,ot,ii).call(this),!this._fieldObjects){(0,L.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Xt||(Q.onclick=()=>!1);return}Q.onclick=()=>{var Ge;Xt==null||Xt();const{fields:Yt,refs:ie,include:ue}=wt,Pe=[];if(Yt.length!==0||ie.length!==0){const Ee=new Set(ie);for(const ke of Yt){const je=this._fieldObjects[ke]||[];for(const{id:Ke}of je)Ee.add(Ke)}for(const ke of Object.values(this._fieldObjects))for(const je of ke)Ee.has(je.id)===ue&&Pe.push(je)}else for(const Ee of Object.values(this._fieldObjects))Pe.push(...Ee);const Se=this.annotationStorage,ve=[];for(const Ee of Pe){const{id:ke}=Ee;switch(ve.push(ke),Ee.type){case"text":{const Ke=Ee.defaultValue||"";Se.setValue(ke,{value:Ke});break}case"checkbox":case"radiobutton":{const Ke=Ee.defaultValue===Ee.exportValues;Se.setValue(ke,{value:Ke});break}case"combobox":case"listbox":{const Ke=Ee.defaultValue||"";Se.setValue(ke,{value:Ke});break}default:continue}const je=document.querySelector(`[data-element-id="${ke}"]`);if(je){if(!gt.has(je)){(0,L.warn)(`_bindResetFormAction - element not allowed: ${ke}`);continue}}else continue;je.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ge=this.linkService.eventBus)==null||Ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ve,name:"ResetForm"}})),!1}}}ot=new WeakSet,ii=function(){this.container.setAttribute("data-internal-link","")},vs=function(Q,wt){Q.href=this.linkService.getAnchorUrl(""),Q.onclick=()=>(this.linkService.executeSetOCGState(wt),!1),xt(this,ot,ii).call(this)};class q extends V{constructor(nt){super(nt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const nt=document.createElement("img");return nt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",nt.alt="[{{type}} Annotation]",nt.dataset.l10nId="text_annotation_type",nt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(nt),this.container}}class U extends V{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(nt){var Q;this.data.hasOwnCanvas&&(((Q=nt.previousSibling)==null?void 0:Q.nodeName)==="CANVAS"&&(nt.previousSibling.hidden=!0),nt.hidden=!1)}_getKeyModifier(nt){const{isWin:Q,isMac:wt}=L.FeatureTest.platform;return Q&&nt.ctrlKey||wt&&nt.metaKey}_setEventListener(nt,Q,wt,Xt,Yt){wt.includes("mouse")?nt.addEventListener(wt,ie=>{var ue;(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Xt,value:Yt(ie),shift:ie.shiftKey,modifier:this._getKeyModifier(ie)}})}):nt.addEventListener(wt,ie=>{var ue;if(wt==="blur"){if(!Q.focused||!ie.relatedTarget)return;Q.focused=!1}else if(wt==="focus"){if(Q.focused)return;Q.focused=!0}Yt&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Xt,value:Yt(ie)}}))})}_setEventListeners(nt,Q,wt,Xt){var Yt,ie,ue;for(const[Pe,Se]of wt)(Se==="Action"||(Yt=this.data.actions)!=null&&Yt[Se])&&((Se==="Focus"||Se==="Blur")&&(Q||(Q={focused:!1})),this._setEventListener(nt,Q,Pe,Se,Xt),Se==="Focus"&&!((ie=this.data.actions)!=null&&ie.Blur)?this._setEventListener(nt,Q,"blur","Blur",null):Se==="Blur"&&!((ue=this.data.actions)!=null&&ue.Focus)&&this._setEventListener(nt,Q,"focus","Focus",null))}_setBackgroundColor(nt){const Q=this.data.backgroundColor||null;nt.style.backgroundColor=Q===null?"transparent":L.Util.makeHexColor(Q[0],Q[1],Q[2])}_setTextStyle(nt){const Q=["left","center","right"],{fontColor:wt}=this.data.defaultAppearanceData,Xt=this.data.defaultAppearanceData.fontSize||N,Yt=nt.style;let ie;const ue=2,Pe=Se=>Math.round(10*Se)/10;if(this.data.multiLine){const Se=Math.abs(this.data.rect[3]-this.data.rect[1]-ue),ve=Math.round(Se/(L.LINE_FACTOR*Xt))||1,Ge=Se/ve;ie=Math.min(Xt,Pe(Ge/L.LINE_FACTOR))}else{const Se=Math.abs(this.data.rect[3]-this.data.rect[1]-ue);ie=Math.min(Xt,Pe(Se/L.LINE_FACTOR))}Yt.fontSize=`calc(${ie}px * var(--scale-factor))`,Yt.color=L.Util.makeHexColor(wt[0],wt[1],wt[2]),this.data.textAlignment!==null&&(Yt.textAlign=Q[this.data.textAlignment])}_setRequired(nt,Q){Q?nt.setAttribute("required",!0):nt.removeAttribute("required"),nt.setAttribute("aria-required",Q)}}class Y extends U{constructor(nt){const Q=nt.renderForms||!nt.data.hasAppearance&&!!nt.data.fieldValue;super(nt,{isRenderable:Q})}setPropertyOnSiblings(nt,Q,wt,Xt){const Yt=this.annotationStorage;for(const ie of this._getElementsByName(nt.name,nt.id))ie.domElement&&(ie.domElement[Q]=wt),Yt.setValue(ie.id,{[Xt]:wt})}render(){var Xt,Yt;const nt=this.annotationStorage,Q=this.data.id;this.container.classList.add("textWidgetAnnotation");let wt=null;if(this.renderForms){const ie=nt.getValue(Q,{value:this.data.fieldValue});let ue=ie.value||"";const Pe=nt.getValue(Q,{charLimit:this.data.maxLen}).charLimit;Pe&&ue.length>Pe&&(ue=ue.slice(0,Pe));let Se=ie.formattedValue||((Xt=this.data.textContent)==null?void 0:Xt.join(`
`))||null;Se&&this.data.comb&&(Se=Se.replaceAll(/\s+/g,""));const ve={userValue:ue,formattedValue:Se,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(wt=document.createElement("textarea"),wt.textContent=Se??ue,this.data.doNotScroll&&(wt.style.overflowY="hidden")):(wt=document.createElement("input"),wt.type="text",wt.setAttribute("value",Se??ue),this.data.doNotScroll&&(wt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(wt.hidden=!0),gt.add(wt),wt.setAttribute("data-element-id",Q),wt.disabled=this.data.readOnly,wt.name=this.data.fieldName,wt.tabIndex=st,this._setRequired(wt,this.data.required),Pe&&(wt.maxLength=Pe),wt.addEventListener("input",Ee=>{nt.setValue(Q,{value:Ee.target.value}),this.setPropertyOnSiblings(wt,"value",Ee.target.value,"value"),ve.formattedValue=null}),wt.addEventListener("resetform",Ee=>{const ke=this.data.defaultFieldValue??"";wt.value=ve.userValue=ke,ve.formattedValue=null});let Ge=Ee=>{const{formattedValue:ke}=ve;ke!=null&&(Ee.target.value=ke),Ee.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){wt.addEventListener("focus",ke=>{if(ve.focused)return;const{target:je}=ke;ve.userValue&&(je.value=ve.userValue),ve.lastCommittedValue=je.value,ve.commitKey=1,ve.focused=!0}),wt.addEventListener("updatefromsandbox",ke=>{this.showElementAndHideCanvas(ke.target);const je={value(Ke){ve.userValue=Ke.detail.value??"",nt.setValue(Q,{value:ve.userValue.toString()}),Ke.target.value=ve.userValue},formattedValue(Ke){const{formattedValue:sn}=Ke.detail;ve.formattedValue=sn,sn!=null&&Ke.target!==document.activeElement&&(Ke.target.value=sn),nt.setValue(Q,{formattedValue:sn})},selRange(Ke){Ke.target.setSelectionRange(...Ke.detail.selRange)},charLimit:Ke=>{var Cn;const{charLimit:sn}=Ke.detail,{target:pn}=Ke;if(sn===0){pn.removeAttribute("maxLength");return}pn.setAttribute("maxLength",sn);let Fn=ve.userValue;!Fn||Fn.length<=sn||(Fn=Fn.slice(0,sn),pn.value=ve.userValue=Fn,nt.setValue(Q,{value:Fn}),(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Fn,willCommit:!0,commitKey:1,selStart:pn.selectionStart,selEnd:pn.selectionEnd}}))}};this._dispatchEventFromSandbox(je,ke)}),wt.addEventListener("keydown",ke=>{var sn;ve.commitKey=1;let je=-1;if(ke.key==="Escape"?je=0:ke.key==="Enter"&&!this.data.multiLine?je=2:ke.key==="Tab"&&(ve.commitKey=3),je===-1)return;const{value:Ke}=ke.target;ve.lastCommittedValue!==Ke&&(ve.lastCommittedValue=Ke,ve.userValue=Ke,(sn=this.linkService.eventBus)==null||sn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Ke,willCommit:!0,commitKey:je,selStart:ke.target.selectionStart,selEnd:ke.target.selectionEnd}}))});const Ee=Ge;Ge=null,wt.addEventListener("blur",ke=>{var Ke;if(!ve.focused||!ke.relatedTarget)return;ve.focused=!1;const{value:je}=ke.target;ve.userValue=je,ve.lastCommittedValue!==je&&((Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:je,willCommit:!0,commitKey:ve.commitKey,selStart:ke.target.selectionStart,selEnd:ke.target.selectionEnd}})),Ee(ke)}),(Yt=this.data.actions)!=null&&Yt.Keystroke&&wt.addEventListener("beforeinput",ke=>{var Gn;ve.lastCommittedValue=null;const{data:je,target:Ke}=ke,{value:sn,selectionStart:pn,selectionEnd:Fn}=Ke;let Cn=pn,Wn=Fn;switch(ke.inputType){case"deleteWordBackward":{const qn=sn.substring(0,pn).match(/\w*[^\w]*$/);qn&&(Cn-=qn[0].length);break}case"deleteWordForward":{const qn=sn.substring(pn).match(/^[^\w]*\w*/);qn&&(Wn+=qn[0].length);break}case"deleteContentBackward":pn===Fn&&(Cn-=1);break;case"deleteContentForward":pn===Fn&&(Wn+=1);break}ke.preventDefault(),(Gn=this.linkService.eventBus)==null||Gn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:sn,change:je||"",willCommit:!1,selStart:Cn,selEnd:Wn}})}),this._setEventListeners(wt,ve,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ke=>ke.target.value)}if(Ge&&wt.addEventListener("blur",Ge),this.data.comb){const ke=(this.data.rect[2]-this.data.rect[0])/Pe;wt.classList.add("comb"),wt.style.letterSpacing=`calc(${ke}px * var(--scale-factor) - 1ch)`}}else wt=document.createElement("div"),wt.textContent=this.data.fieldValue,wt.style.verticalAlign="middle",wt.style.display="table-cell";return this._setTextStyle(wt),this._setBackgroundColor(wt),this._setDefaultPropertiesFromJS(wt),this.container.append(wt),this.container}}class dt extends U{constructor(nt){super(nt,{isRenderable:!!nt.data.hasOwnCanvas})}}class J extends U{constructor(nt){super(nt,{isRenderable:nt.renderForms})}render(){const nt=this.annotationStorage,Q=this.data,wt=Q.id;let Xt=nt.getValue(wt,{value:Q.exportValue===Q.fieldValue}).value;typeof Xt=="string"&&(Xt=Xt!=="Off",nt.setValue(wt,{value:Xt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Yt=document.createElement("input");return gt.add(Yt),Yt.setAttribute("data-element-id",wt),Yt.disabled=Q.readOnly,this._setRequired(Yt,this.data.required),Yt.type="checkbox",Yt.name=Q.fieldName,Xt&&Yt.setAttribute("checked",!0),Yt.setAttribute("exportValue",Q.exportValue),Yt.tabIndex=st,Yt.addEventListener("change",ie=>{const{name:ue,checked:Pe}=ie.target;for(const Se of this._getElementsByName(ue,wt)){const ve=Pe&&Se.exportValue===Q.exportValue;Se.domElement&&(Se.domElement.checked=ve),nt.setValue(Se.id,{value:ve})}nt.setValue(wt,{value:Pe})}),Yt.addEventListener("resetform",ie=>{const ue=Q.defaultFieldValue||"Off";ie.target.checked=ue===Q.exportValue}),this.enableScripting&&this.hasJSActions&&(Yt.addEventListener("updatefromsandbox",ie=>{const ue={value(Pe){Pe.target.checked=Pe.detail.value!=="Off",nt.setValue(wt,{value:Pe.target.checked})}};this._dispatchEventFromSandbox(ue,ie)}),this._setEventListeners(Yt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ie=>ie.target.checked)),this._setBackgroundColor(Yt),this._setDefaultPropertiesFromJS(Yt),this.container.append(Yt),this.container}}class x extends U{constructor(nt){super(nt,{isRenderable:nt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const nt=this.annotationStorage,Q=this.data,wt=Q.id;let Xt=nt.getValue(wt,{value:Q.fieldValue===Q.buttonValue}).value;typeof Xt=="string"&&(Xt=Xt!==Q.buttonValue,nt.setValue(wt,{value:Xt}));const Yt=document.createElement("input");if(gt.add(Yt),Yt.setAttribute("data-element-id",wt),Yt.disabled=Q.readOnly,this._setRequired(Yt,this.data.required),Yt.type="radio",Yt.name=Q.fieldName,Xt&&Yt.setAttribute("checked",!0),Yt.tabIndex=st,Yt.addEventListener("change",ie=>{const{name:ue,checked:Pe}=ie.target;for(const Se of this._getElementsByName(ue,wt))nt.setValue(Se.id,{value:!1});nt.setValue(wt,{value:Pe})}),Yt.addEventListener("resetform",ie=>{const ue=Q.defaultFieldValue;ie.target.checked=ue!=null&&ue===Q.buttonValue}),this.enableScripting&&this.hasJSActions){const ie=Q.buttonValue;Yt.addEventListener("updatefromsandbox",ue=>{const Pe={value:Se=>{const ve=ie===Se.detail.value;for(const Ge of this._getElementsByName(Se.target.name)){const Ee=ve&&Ge.id===wt;Ge.domElement&&(Ge.domElement.checked=Ee),nt.setValue(Ge.id,{value:Ee})}}};this._dispatchEventFromSandbox(Pe,ue)}),this._setEventListeners(Yt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ue=>ue.target.checked)}return this._setBackgroundColor(Yt),this._setDefaultPropertiesFromJS(Yt),this.container.append(Yt),this.container}}class j extends et{constructor(nt){super(nt,{ignoreBorder:nt.data.hasAppearance})}render(){const nt=super.render();nt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(nt.title=this.data.alternativeText);const Q=nt.lastChild;return this.enableScripting&&this.hasJSActions&&Q&&(this._setDefaultPropertiesFromJS(Q),Q.addEventListener("updatefromsandbox",wt=>{this._dispatchEventFromSandbox({},wt)})),nt}}class R extends U{constructor(nt){super(nt,{isRenderable:nt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const nt=this.annotationStorage,Q=this.data.id,wt=nt.getValue(Q,{value:this.data.fieldValue}),Xt=document.createElement("select");gt.add(Xt),Xt.setAttribute("data-element-id",Q),Xt.disabled=this.data.readOnly,this._setRequired(Xt,this.data.required),Xt.name=this.data.fieldName,Xt.tabIndex=st;let Yt=this.data.combo&&this.data.options.length>0;this.data.combo||(Xt.size=this.data.options.length,this.data.multiSelect&&(Xt.multiple=!0)),Xt.addEventListener("resetform",ve=>{const Ge=this.data.defaultFieldValue;for(const Ee of Xt.options)Ee.selected=Ee.value===Ge});for(const ve of this.data.options){const Ge=document.createElement("option");Ge.textContent=ve.displayValue,Ge.value=ve.exportValue,wt.value.includes(ve.exportValue)&&(Ge.setAttribute("selected",!0),Yt=!1),Xt.append(Ge)}let ie=null;if(Yt){const ve=document.createElement("option");ve.value=" ",ve.setAttribute("hidden",!0),ve.setAttribute("selected",!0),Xt.prepend(ve),ie=()=>{ve.remove(),Xt.removeEventListener("input",ie),ie=null},Xt.addEventListener("input",ie)}const ue=ve=>{const Ge=ve?"value":"textContent",{options:Ee,multiple:ke}=Xt;return ke?Array.prototype.filter.call(Ee,je=>je.selected).map(je=>je[Ge]):Ee.selectedIndex===-1?null:Ee[Ee.selectedIndex][Ge]};let Pe=ue(!1);const Se=ve=>{const Ge=ve.target.options;return Array.prototype.map.call(Ge,Ee=>({displayValue:Ee.textContent,exportValue:Ee.value}))};return this.enableScripting&&this.hasJSActions?(Xt.addEventListener("updatefromsandbox",ve=>{const Ge={value(Ee){ie==null||ie();const ke=Ee.detail.value,je=new Set(Array.isArray(ke)?ke:[ke]);for(const Ke of Xt.options)Ke.selected=je.has(Ke.value);nt.setValue(Q,{value:ue(!0)}),Pe=ue(!1)},multipleSelection(Ee){Xt.multiple=!0},remove(Ee){const ke=Xt.options,je=Ee.detail.remove;ke[je].selected=!1,Xt.remove(je),ke.length>0&&Array.prototype.findIndex.call(ke,sn=>sn.selected)===-1&&(ke[0].selected=!0),nt.setValue(Q,{value:ue(!0),items:Se(Ee)}),Pe=ue(!1)},clear(Ee){for(;Xt.length!==0;)Xt.remove(0);nt.setValue(Q,{value:null,items:[]}),Pe=ue(!1)},insert(Ee){const{index:ke,displayValue:je,exportValue:Ke}=Ee.detail.insert,sn=Xt.children[ke],pn=document.createElement("option");pn.textContent=je,pn.value=Ke,sn?sn.before(pn):Xt.append(pn),nt.setValue(Q,{value:ue(!0),items:Se(Ee)}),Pe=ue(!1)},items(Ee){const{items:ke}=Ee.detail;for(;Xt.length!==0;)Xt.remove(0);for(const je of ke){const{displayValue:Ke,exportValue:sn}=je,pn=document.createElement("option");pn.textContent=Ke,pn.value=sn,Xt.append(pn)}Xt.options.length>0&&(Xt.options[0].selected=!0),nt.setValue(Q,{value:ue(!0),items:Se(Ee)}),Pe=ue(!1)},indices(Ee){const ke=new Set(Ee.detail.indices);for(const je of Ee.target.options)je.selected=ke.has(je.index);nt.setValue(Q,{value:ue(!0)}),Pe=ue(!1)},editable(Ee){Ee.target.disabled=!Ee.detail.editable}};this._dispatchEventFromSandbox(Ge,ve)}),Xt.addEventListener("input",ve=>{var Ee;const Ge=ue(!0);nt.setValue(Q,{value:Ge}),ve.preventDefault(),(Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q,name:"Keystroke",value:Pe,changeEx:Ge,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Xt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ve=>ve.target.value)):Xt.addEventListener("input",function(ve){nt.setValue(Q,{value:ue(!0)})}),this.data.combo&&this._setTextStyle(Xt),this._setBackgroundColor(Xt),this._setDefaultPropertiesFromJS(Xt),this.container.append(Xt),this.container}}class O extends V{constructor(nt){const{data:Q,elements:wt}=nt;super(nt,{isRenderable:V._hasPopupData(Q)}),this.elements=wt}render(){this.container.classList.add("popupAnnotation");const nt=new B({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Q=[];for(const wt of this.elements)wt.popup=nt,Q.push(wt.data.id),wt.addHighlightArea();return this.container.setAttribute("aria-controls",Q.map(wt=>`${L.AnnotationPrefix}${wt}`).join(",")),this.container}}class B{constructor({container:nt,color:Q,elements:wt,titleObj:Xt,modificationDate:Yt,contentsObj:ie,richText:ue,parent:Pe,rect:Se,parentRect:ve,open:Ge}){zt(this,he);zt(this,Vt,null);zt(this,Kt,xt(this,he,bs).bind(this));zt(this,Zt,xt(this,he,Pr).bind(this));zt(this,te,xt(this,he,Cr).bind(this));zt(this,re,xt(this,he,Ni).bind(this));zt(this,se,null);zt(this,Nt,null);zt(this,jt,null);zt(this,$,null);zt(this,ut,null);zt(this,Rt,null);zt(this,Ht,!1);zt(this,Jt,null);zt(this,ae,null);zt(this,ne,null);zt(this,kt,null);zt(this,ge,!1);var ke;Wt(this,Nt,nt),Wt(this,kt,Xt),Wt(this,jt,ie),Wt(this,ne,ue),Wt(this,ut,Pe),Wt(this,se,Q),Wt(this,ae,Se),Wt(this,Rt,ve),Wt(this,$,wt);const Ee=G.PDFDateString.toDateObject(Yt);Ee&&Wt(this,Vt,Pe.l10n.get("annotation_date_string",{date:Ee.toLocaleDateString(),time:Ee.toLocaleTimeString()})),this.trigger=wt.flatMap(je=>je.getElementsToTriggerPopup());for(const je of this.trigger)je.addEventListener("click",y(this,re)),je.addEventListener("mouseenter",y(this,te)),je.addEventListener("mouseleave",y(this,Zt)),je.classList.add("popupTriggerArea");for(const je of wt)(ke=je.container)==null||ke.addEventListener("keydown",y(this,Kt));y(this,Nt).hidden=!0,Ge&&xt(this,he,Ni).call(this)}render(){if(y(this,Jt))return;const{page:{view:nt},viewport:{rawDims:{pageWidth:Q,pageHeight:wt,pageX:Xt,pageY:Yt}}}=y(this,ut),ie=Wt(this,Jt,document.createElement("div"));if(ie.className="popup",y(this,se)){const Cn=ie.style.outlineColor=L.Util.makeHexColor(...y(this,se));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ie.style.backgroundColor=`color-mix(in srgb, ${Cn} 30%, white)`:ie.style.backgroundColor=L.Util.makeHexColor(...y(this,se).map(Gn=>Math.floor(.7*(255-Gn)+Gn)))}const ue=document.createElement("span");ue.className="header";const Pe=document.createElement("h1");if(ue.append(Pe),{dir:Pe.dir,str:Pe.textContent}=y(this,kt),ie.append(ue),y(this,Vt)){const Cn=document.createElement("span");Cn.classList.add("popupDate"),y(this,Vt).then(Wn=>{Cn.textContent=Wn}),ue.append(Cn)}const Se=y(this,jt),ve=y(this,ne);if(ve!=null&&ve.str&&(!(Se!=null&&Se.str)||Se.str===ve.str))mt.XfaLayer.render({xfaHtml:ve.html,intent:"richText",div:ie}),ie.lastChild.classList.add("richText","popupContent");else{const Cn=this._formatContents(Se);ie.append(Cn)}let Ge=!!y(this,Rt),Ee=Ge?y(this,Rt):y(this,ae);for(const Cn of y(this,$))if(!Ee||L.Util.intersect(Cn.data.rect,Ee)!==null){Ee=Cn.data.rect,Ge=!0;break}const ke=L.Util.normalizeRect([Ee[0],nt[3]-Ee[1]+nt[1],Ee[2],nt[3]-Ee[3]+nt[1]]),Ke=Ge?Ee[2]-Ee[0]+5:0,sn=ke[0]+Ke,pn=ke[1],{style:Fn}=y(this,Nt);Fn.left=`${100*(sn-Xt)/Q}%`,Fn.top=`${100*(pn-Yt)/wt}%`,y(this,Nt).append(ie)}_formatContents({str:nt,dir:Q}){const wt=document.createElement("p");wt.classList.add("popupContent"),wt.dir=Q;const Xt=nt.split(/(?:\r\n?|\n)/);for(let Yt=0,ie=Xt.length;Yt<ie;++Yt){const ue=Xt[Yt];wt.append(document.createTextNode(ue)),Yt<ie-1&&wt.append(document.createElement("br"))}return wt}forceHide(){Wt(this,ge,this.isVisible),y(this,ge)&&(y(this,Nt).hidden=!0)}maybeShow(){y(this,ge)&&(Wt(this,ge,!1),y(this,Nt).hidden=!1)}get isVisible(){return y(this,Nt).hidden===!1}}Vt=new WeakMap,Kt=new WeakMap,Zt=new WeakMap,te=new WeakMap,re=new WeakMap,se=new WeakMap,Nt=new WeakMap,jt=new WeakMap,$=new WeakMap,ut=new WeakMap,Rt=new WeakMap,Ht=new WeakMap,Jt=new WeakMap,ae=new WeakMap,ne=new WeakMap,kt=new WeakMap,ge=new WeakMap,he=new WeakSet,bs=function(nt){nt.altKey||nt.shiftKey||nt.ctrlKey||nt.metaKey||(nt.key==="Enter"||nt.key==="Escape"&&y(this,Ht))&&xt(this,he,Ni).call(this)},Ni=function(){Wt(this,Ht,!y(this,Ht)),y(this,Ht)?(xt(this,he,Cr).call(this),y(this,Nt).addEventListener("click",y(this,re)),y(this,Nt).addEventListener("keydown",y(this,Kt))):(xt(this,he,Pr).call(this),y(this,Nt).removeEventListener("click",y(this,re)),y(this,Nt).removeEventListener("keydown",y(this,Kt)))},Cr=function(){y(this,Jt)||this.render(),this.isVisible?y(this,Ht)&&y(this,Nt).classList.add("focused"):(y(this,Nt).hidden=!1,y(this,Nt).style.zIndex=parseInt(y(this,Nt).style.zIndex)+1e3)},Pr=function(){y(this,Nt).classList.remove("focused"),!(y(this,Ht)||!this.isVisible)&&(y(this,Nt).hidden=!0,y(this,Nt).style.zIndex=parseInt(y(this,Nt).style.zIndex)-1e3)};class ht extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=nt.data.textContent,this.textPosition=nt.data.textPosition,this.annotationEditorType=L.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const nt=document.createElement("div");nt.classList.add("annotationTextContent"),nt.setAttribute("role","comment");for(const Q of this.textContent){const wt=document.createElement("span");wt.textContent=Q,nt.append(wt)}this.container.append(nt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}D.FreeTextAnnotationElement=ht;class F extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});zt(this,Re,null)}render(){this.container.classList.add("lineAnnotation");const Q=this.data,{width:wt,height:Xt}=ct(Q.rect),Yt=this.svgFactory.create(wt,Xt,!0),ie=Wt(this,Re,this.svgFactory.createElement("svg:line"));return ie.setAttribute("x1",Q.rect[2]-Q.lineCoordinates[0]),ie.setAttribute("y1",Q.rect[3]-Q.lineCoordinates[1]),ie.setAttribute("x2",Q.rect[2]-Q.lineCoordinates[2]),ie.setAttribute("y2",Q.rect[3]-Q.lineCoordinates[3]),ie.setAttribute("stroke-width",Q.borderStyle.width||1),ie.setAttribute("stroke","transparent"),ie.setAttribute("fill","transparent"),Yt.append(ie),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,Re)}addHighlightArea(){this.container.classList.add("highlightArea")}}Re=new WeakMap;class K extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});zt(this,Xe,null)}render(){this.container.classList.add("squareAnnotation");const Q=this.data,{width:wt,height:Xt}=ct(Q.rect),Yt=this.svgFactory.create(wt,Xt,!0),ie=Q.borderStyle.width,ue=Wt(this,Xe,this.svgFactory.createElement("svg:rect"));return ue.setAttribute("x",ie/2),ue.setAttribute("y",ie/2),ue.setAttribute("width",wt-ie),ue.setAttribute("height",Xt-ie),ue.setAttribute("stroke-width",ie||1),ue.setAttribute("stroke","transparent"),ue.setAttribute("fill","transparent"),Yt.append(ue),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class lt extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});zt(this,ln,null)}render(){this.container.classList.add("circleAnnotation");const Q=this.data,{width:wt,height:Xt}=ct(Q.rect),Yt=this.svgFactory.create(wt,Xt,!0),ie=Q.borderStyle.width,ue=Wt(this,ln,this.svgFactory.createElement("svg:ellipse"));return ue.setAttribute("cx",wt/2),ue.setAttribute("cy",Xt/2),ue.setAttribute("rx",wt/2-ie/2),ue.setAttribute("ry",Xt/2-ie/2),ue.setAttribute("stroke-width",ie||1),ue.setAttribute("stroke","transparent"),ue.setAttribute("fill","transparent"),Yt.append(ue),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,ln)}addHighlightArea(){this.container.classList.add("highlightArea")}}ln=new WeakMap;class Gt extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});zt(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Q=this.data,{width:wt,height:Xt}=ct(Q.rect),Yt=this.svgFactory.create(wt,Xt,!0);let ie=[];for(const Pe of Q.vertices){const Se=Pe.x-Q.rect[0],ve=Q.rect[3]-Pe.y;ie.push(Se+","+ve)}ie=ie.join(" ");const ue=Wt(this,ee,this.svgFactory.createElement(this.svgElementName));return ue.setAttribute("points",ie),ue.setAttribute("stroke-width",Q.borderStyle.width||1),ue.setAttribute("stroke","transparent"),ue.setAttribute("fill","transparent"),Yt.append(ue),this.container.append(Yt),!Q.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class Et extends Gt{constructor(nt){super(nt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Mt extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class yt extends V{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0});zt(this,Ft,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=L.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Q=this.data,{width:wt,height:Xt}=ct(Q.rect),Yt=this.svgFactory.create(wt,Xt,!0);for(const ie of Q.inkLists){let ue=[];for(const Se of ie){const ve=Se.x-Q.rect[0],Ge=Q.rect[3]-Se.y;ue.push(`${ve},${Ge}`)}ue=ue.join(" ");const Pe=this.svgFactory.createElement(this.svgElementName);y(this,Ft).push(Pe),Pe.setAttribute("points",ue),Pe.setAttribute("stroke-width",Q.borderStyle.width||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),!Q.popupRef&&this.hasPopupData&&this._createPopup(),Yt.append(Pe)}return this.container.append(Yt),this.container}getElementsToTriggerPopup(){return y(this,Ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ft=new WeakMap,D.InkAnnotationElement=yt;class qt extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class it extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class At extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ot extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class tt extends V{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}D.StampAnnotationElement=tt;class w extends V{constructor(Q){var Yt;super(Q,{isRenderable:!0});zt(this,ye);zt(this,Dt,null);const{filename:wt,content:Xt}=this.data.file;this.filename=(0,G.getFilenameFromUrl)(wt,!0),this.content=Xt,(Yt=this.linkService.eventBus)==null||Yt.dispatch("fileattachmentannotation",{source:this,filename:wt,content:Xt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Q,data:wt}=this;let Xt;wt.hasAppearance||wt.fillAlpha===0?Xt=document.createElement("div"):(Xt=document.createElement("img"),Xt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(wt.name)?"paperclip":"pushpin"}.svg`,wt.fillAlpha&&wt.fillAlpha<1&&(Xt.style=`filter: opacity(${Math.round(wt.fillAlpha*100)}%);`)),Xt.addEventListener("dblclick",xt(this,ye,Tr).bind(this)),Wt(this,Dt,Xt);const{isMac:Yt}=L.FeatureTest.platform;return Q.addEventListener("keydown",ie=>{ie.key==="Enter"&&(Yt?ie.metaKey:ie.ctrlKey)&&xt(this,ye,Tr).call(this)}),!wt.popupRef&&this.hasPopupData?this._createPopup():Xt.classList.add("popupTriggerArea"),Q.append(Xt),Q}getElementsToTriggerPopup(){return y(this,Dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dt=new WeakMap,ye=new WeakSet,Tr=function(){var Q;(Q=this.downloadManager)==null||Q.openOrDownloadData(this.container,this.content,this.filename)};class P{constructor({div:nt,accessibilityManager:Q,annotationCanvasMap:wt,l10n:Xt,page:Yt,viewport:ie}){zt(this,pe);zt(this,De,null);zt(this,ft,null);zt(this,Qt,new Map);this.div=nt,Wt(this,De,Q),Wt(this,ft,wt),this.l10n=Xt,this.page=Yt,this.viewport=ie,this.zIndex=0,this.l10n||(this.l10n=$t.NullL10n)}async render(nt){const{annotations:Q}=nt,wt=this.div;(0,G.setLayerDimensions)(wt,this.viewport);const Xt=new Map,Yt={data:null,layer:wt,linkService:nt.linkService,downloadManager:nt.downloadManager,imageResourcesPath:nt.imageResourcesPath||"",renderForms:nt.renderForms!==!1,svgFactory:new G.DOMSVGFactory,annotationStorage:nt.annotationStorage||new _.AnnotationStorage,enableScripting:nt.enableScripting===!0,hasJSActions:nt.hasJSActions,fieldObjects:nt.fieldObjects,parent:this,elements:null};for(const ie of Q){if(ie.noHTML)continue;const ue=ie.annotationType===L.AnnotationType.POPUP;if(ue){const ve=Xt.get(ie.id);if(!ve)continue;Yt.elements=ve}else{const{width:ve,height:Ge}=ct(ie.rect);if(ve<=0||Ge<=0)continue}Yt.data=ie;const Pe=X.create(Yt);if(!Pe.isRenderable)continue;if(!ue&&ie.popupRef){const ve=Xt.get(ie.popupRef);ve?ve.push(Pe):Xt.set(ie.popupRef,[Pe])}Pe.annotationEditorType>0&&y(this,Qt).set(Pe.data.id,Pe);const Se=Pe.render();ie.hidden&&(Se.style.visibility="hidden"),xt(this,pe,_s).call(this,Se,ie.id)}xt(this,pe,xr).call(this),await this.l10n.translate(wt)}update({viewport:nt}){const Q=this.div;this.viewport=nt,(0,G.setLayerDimensions)(Q,{rotation:nt.rotation}),xt(this,pe,xr).call(this),Q.hidden=!1}getEditableAnnotations(){return Array.from(y(this,Qt).values())}getEditableAnnotation(nt){return y(this,Qt).get(nt)}}De=new WeakMap,ft=new WeakMap,Qt=new WeakMap,pe=new WeakSet,_s=function(nt,Q){var Xt;const wt=nt.firstChild||nt;wt.id=`${L.AnnotationPrefix}${Q}`,this.div.append(nt),(Xt=y(this,De))==null||Xt.moveElementInDOM(this.div,nt,wt,!1)},xr=function(){if(!y(this,ft))return;const nt=this.div;for(const[Q,wt]of y(this,ft)){const Xt=nt.querySelector(`[data-annotation-id="${Q}"]`);if(!Xt)continue;const{firstChild:Yt}=Xt;Yt?Yt.nodeName==="CANVAS"?Yt.replaceWith(wt):Yt.before(wt):Xt.append(wt)}y(this,ft).clear()},D.AnnotationLayer=P},(T,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.ColorConverters=void 0;function Tt(_){return Math.floor(Math.max(0,Math.min(1,_))*255).toString(16).padStart(2,"0")}function L(_){return Math.max(0,Math.min(255,255*_))}class G{static CMYK_G([vt,$t,mt,st]){return["G",1-Math.min(1,.3*vt+.59*mt+.11*$t+st)]}static G_CMYK([vt]){return["CMYK",0,0,0,1-vt]}static G_RGB([vt]){return["RGB",vt,vt,vt]}static G_rgb([vt]){return vt=L(vt),[vt,vt,vt]}static G_HTML([vt]){const $t=Tt(vt);return`#${$t}${$t}${$t}`}static RGB_G([vt,$t,mt]){return["G",.3*vt+.59*$t+.11*mt]}static RGB_rgb(vt){return vt.map(L)}static RGB_HTML(vt){return`#${vt.map(Tt).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([vt,$t,mt,st]){return["RGB",1-Math.min(1,vt+st),1-Math.min(1,mt+st),1-Math.min(1,$t+st)]}static CMYK_rgb([vt,$t,mt,st]){return[L(1-Math.min(1,vt+st)),L(1-Math.min(1,mt+st)),L(1-Math.min(1,$t+st))]}static CMYK_HTML(vt){const $t=this.CMYK_RGB(vt).slice(1);return this.RGB_HTML($t)}static RGB_CMYK([vt,$t,mt]){const st=1-vt,N=1-$t,gt=1-mt,ct=Math.min(st,N,gt);return["CMYK",st,N,gt,ct]}}D.ColorConverters=G},(T,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.NullL10n=void 0,D.getL10nFallback=L;const Tt={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};Tt.print_progress_percent="{{progress}}%";function L(vt,$t){switch(vt){case"find_match_count":vt=`find_match_count[${$t.total===1?"one":"other"}]`;break;case"find_match_count_limit":vt=`find_match_count_limit[${$t.limit===1?"one":"other"}]`;break}return Tt[vt]||""}function G(vt,$t){return $t?vt.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(mt,st)=>st in $t?$t[st]:"{{"+st+"}}"):vt}const _={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(vt,$t=null,mt=L(vt,$t)){return G(mt,$t)},async translate(vt){}};D.NullL10n=_},(T,D,Tt)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.XfaLayer=void 0;var L=Tt(25);class G{static setupStorage(vt,$t,mt,st,N){const gt=st.getValue($t,{value:null});switch(mt.name){case"textarea":if(gt.value!==null&&(vt.textContent=gt.value),N==="print")break;vt.addEventListener("input",ct=>{st.setValue($t,{value:ct.target.value})});break;case"input":if(mt.attributes.type==="radio"||mt.attributes.type==="checkbox"){if(gt.value===mt.attributes.xfaOn?vt.setAttribute("checked",!0):gt.value===mt.attributes.xfaOff&&vt.removeAttribute("checked"),N==="print")break;vt.addEventListener("change",ct=>{st.setValue($t,{value:ct.target.checked?ct.target.getAttribute("xfaOn"):ct.target.getAttribute("xfaOff")})})}else{if(gt.value!==null&&vt.setAttribute("value",gt.value),N==="print")break;vt.addEventListener("input",ct=>{st.setValue($t,{value:ct.target.value})})}break;case"select":if(gt.value!==null){vt.setAttribute("value",gt.value);for(const ct of mt.children)ct.attributes.value===gt.value?ct.attributes.selected=!0:ct.attributes.hasOwnProperty("selected")&&delete ct.attributes.selected}vt.addEventListener("input",ct=>{const X=ct.target.options,V=X.selectedIndex===-1?"":X[X.selectedIndex].value;st.setValue($t,{value:V})});break}}static setAttributes({html:vt,element:$t,storage:mt=null,intent:st,linkService:N}){const{attributes:gt}=$t,ct=vt instanceof HTMLAnchorElement;gt.type==="radio"&&(gt.name=`${gt.name}-${st}`);for(const[X,V]of Object.entries(gt))if(V!=null)switch(X){case"class":V.length&&vt.setAttribute(X,V.join(" "));break;case"dataId":break;case"id":vt.setAttribute("data-element-id",V);break;case"style":Object.assign(vt.style,V);break;case"textContent":vt.textContent=V;break;default:(!ct||X!=="href"&&X!=="newWindow")&&vt.setAttribute(X,V)}ct&&N.addLinkAttributes(vt,gt.href,gt.newWindow),mt&&gt.dataId&&this.setupStorage(vt,gt.dataId,$t,mt)}static render(vt){var et;const $t=vt.annotationStorage,mt=vt.linkService,st=vt.xfaHtml,N=vt.intent||"display",gt=document.createElement(st.name);st.attributes&&this.setAttributes({html:gt,element:st,intent:N,linkService:mt});const ct=[[st,-1,gt]],X=vt.div;if(X.append(gt),vt.viewport){const q=`matrix(${vt.viewport.transform.join(",")})`;X.style.transform=q}N!=="richText"&&X.setAttribute("class","xfaLayer xfaFont");const V=[];for(;ct.length>0;){const[q,U,Y]=ct.at(-1);if(U+1===q.children.length){ct.pop();continue}const dt=q.children[++ct.at(-1)[1]];if(dt===null)continue;const{name:J}=dt;if(J==="#text"){const j=document.createTextNode(dt.value);V.push(j),Y.append(j);continue}const x=(et=dt==null?void 0:dt.attributes)!=null&&et.xmlns?document.createElementNS(dt.attributes.xmlns,J):document.createElement(J);if(Y.append(x),dt.attributes&&this.setAttributes({html:x,element:dt,storage:$t,intent:N,linkService:mt}),dt.children&&dt.children.length>0)ct.push([dt,-1,x]);else if(dt.value){const j=document.createTextNode(dt.value);L.XfaText.shouldBuildText(J)&&V.push(j),x.append(j)}}for(const q of X.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))q.setAttribute("readOnly",!0);return{textDivs:V}}static update(vt){const $t=`matrix(${vt.viewport.transform.join(",")})`;vt.div.style.transform=$t,vt.div.hidden=!1}}D.XfaLayer=G},(T,D,Tt)=>{var st,N,gt,ct,X,V,et,q,U,Y,dt,J,x,j,R,ys,As,Ss,Es,kr,ws,Rr,Cs,Ps,Ts,xs,ks,Yn,Mr,Bi,ji,ui,Fr,Hi,ot,Rs,Lr,Ms,Fs,Dr,Ui,hi;Object.defineProperty(D,"__esModule",{value:!0}),D.InkEditor=void 0;var L=Tt(1),G=Tt(4),_=Tt(29),vt=Tt(6),$t=Tt(5);const se=class se extends G.AnnotationEditor{constructor($){super({...$,name:"inkEditor"});zt(this,R);zt(this,st,0);zt(this,N,0);zt(this,gt,this.canvasPointermove.bind(this));zt(this,ct,this.canvasPointerleave.bind(this));zt(this,X,this.canvasPointerup.bind(this));zt(this,V,this.canvasPointerdown.bind(this));zt(this,et,new Path2D);zt(this,q,!1);zt(this,U,!1);zt(this,Y,!1);zt(this,dt,null);zt(this,J,0);zt(this,x,0);zt(this,j,null);this.color=$.color||null,this.thickness=$.thickness||null,this.opacity=$.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize($){G.AnnotationEditor.initialize($,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams($,ut){switch($){case L.AnnotationEditorParamsType.INK_THICKNESS:se._defaultThickness=ut;break;case L.AnnotationEditorParamsType.INK_COLOR:se._defaultColor=ut;break;case L.AnnotationEditorParamsType.INK_OPACITY:se._defaultOpacity=ut/100;break}}updateParams($,ut){switch($){case L.AnnotationEditorParamsType.INK_THICKNESS:xt(this,R,ys).call(this,ut);break;case L.AnnotationEditorParamsType.INK_COLOR:xt(this,R,As).call(this,ut);break;case L.AnnotationEditorParamsType.INK_OPACITY:xt(this,R,Ss).call(this,ut);break}}static get defaultPropertiesToUpdate(){return[[L.AnnotationEditorParamsType.INK_THICKNESS,se._defaultThickness],[L.AnnotationEditorParamsType.INK_COLOR,se._defaultColor||G.AnnotationEditor._defaultLineColor],[L.AnnotationEditorParamsType.INK_OPACITY,Math.round(se._defaultOpacity*100)]]}get propertiesToUpdate(){return[[L.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||se._defaultThickness],[L.AnnotationEditorParamsType.INK_COLOR,this.color||se._defaultColor||G.AnnotationEditor._defaultLineColor],[L.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??se._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(xt(this,R,Bi).call(this),xt(this,R,ji).call(this)),this.isAttachedToDOM||(this.parent.add(this),xt(this,R,ui).call(this)),xt(this,R,hi).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,y(this,dt).disconnect(),Wt(this,dt,null),super.remove())}setParent($){!this.parent&&$?this._uiManager.removeShouldRescale(this):this.parent&&$===null&&this._uiManager.addShouldRescale(this),super.setParent($)}onScaleChanging(){const[$,ut]=this.parentDimensions,Rt=this.width*$,Ht=this.height*ut;this.setDimensions(Rt,Ht)}enableEditMode(){y(this,q)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",y(this,V)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",y(this,V)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){y(this,q)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Wt(this,q,!0),this.div.classList.add("disabled"),xt(this,R,hi).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin($){this._focusEventsAllowed&&(super.focusin($),this.enableEditMode())}canvasPointerdown($){$.button!==0||!this.isInEditMode()||y(this,q)||(this.setInForeground(),$.preventDefault(),$.type!=="mouse"&&this.div.focus(),xt(this,R,ws).call(this,$.offsetX,$.offsetY))}canvasPointermove($){$.preventDefault(),xt(this,R,Rr).call(this,$.offsetX,$.offsetY)}canvasPointerup($){$.preventDefault(),xt(this,R,Mr).call(this,$)}canvasPointerleave($){xt(this,R,Mr).call(this,$)}get isResizable(){return!this.isEmpty()&&y(this,q)}render(){if(this.div)return this.div;let $,ut;this.width&&($=this.x,ut=this.y),super.render(),G.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ne=>{var kt;return(kt=this.div)==null?void 0:kt.setAttribute("aria-label",ne)});const[Rt,Ht,Jt,ae]=xt(this,R,Es).call(this);if(this.setAt(Rt,Ht,0,0),this.setDims(Jt,ae),xt(this,R,Bi).call(this),this.width){const[ne,kt]=this.parentDimensions;this.setAspectRatio(this.width*ne,this.height*kt),this.setAt($*ne,ut*kt,this.width*ne,this.height*kt),Wt(this,Y,!0),xt(this,R,ui).call(this),this.setDims(this.width*ne,this.height*kt),xt(this,R,Yn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return xt(this,R,ji).call(this),this.div}setDimensions($,ut){const Rt=Math.round($),Ht=Math.round(ut);if(y(this,J)===Rt&&y(this,x)===Ht)return;Wt(this,J,Rt),Wt(this,x,Ht),this.canvas.style.visibility="hidden";const[Jt,ae]=this.parentDimensions;this.width=$/Jt,this.height=ut/ae,this.fixAndSetPosition(),y(this,q)&&xt(this,R,Fr).call(this,$,ut),xt(this,R,ui).call(this),xt(this,R,Yn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize($,ut,Rt){var Re,Xe,ln;if($ instanceof _.InkAnnotationElement)return null;const Ht=super.deserialize($,ut,Rt);Ht.thickness=$.thickness,Ht.color=L.Util.makeHexColor(...$.color),Ht.opacity=$.opacity;const[Jt,ae]=Ht.pageDimensions,ne=Ht.width*Jt,kt=Ht.height*ae,ge=Ht.parentScale,he=$.thickness/2;Wt(Ht,q,!0),Wt(Ht,J,Math.round(ne)),Wt(Ht,x,Math.round(kt));const{paths:ze,rect:Ie,rotation:Qe}=$;for(let{bezier:ee}of ze){ee=xt(Re=se,ot,Ms).call(Re,ee,Ie,Qe);const Ft=[];Ht.paths.push(Ft);let Dt=ge*(ee[0]-he),ye=ge*(ee[1]-he);for(let De=2,ft=ee.length;De<ft;De+=6){const Qt=ge*(ee[De]-he),pe=ge*(ee[De+1]-he),Ce=ge*(ee[De+2]-he),xe=ge*(ee[De+3]-he),_e=ge*(ee[De+4]-he),nt=ge*(ee[De+5]-he);Ft.push([[Dt,ye],[Qt,pe],[Ce,xe],[_e,nt]]),Dt=_e,ye=nt}const we=xt(this,ot,Rs).call(this,Ft);Ht.bezierPath2D.push(we)}const Ae=xt(Xe=Ht,R,Dr).call(Xe);return Wt(Ht,N,Math.max(G.AnnotationEditor.MIN_SIZE,Ae[2]-Ae[0])),Wt(Ht,st,Math.max(G.AnnotationEditor.MIN_SIZE,Ae[3]-Ae[1])),xt(ln=Ht,R,Fr).call(ln,ne,kt),Ht}serialize(){if(this.isEmpty())return null;const $=this.getRect(0,0),ut=G.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:L.AnnotationEditorType.INK,color:ut,thickness:this.thickness,opacity:this.opacity,paths:xt(this,R,Fs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,$),pageIndex:this.pageIndex,rect:$,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};st=new WeakMap,N=new WeakMap,gt=new WeakMap,ct=new WeakMap,X=new WeakMap,V=new WeakMap,et=new WeakMap,q=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,J=new WeakMap,x=new WeakMap,j=new WeakMap,R=new WeakSet,ys=function($){const ut=this.thickness;this.addCommands({cmd:()=>{this.thickness=$,xt(this,R,hi).call(this)},undo:()=>{this.thickness=ut,xt(this,R,hi).call(this)},mustExec:!0,type:L.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},As=function($){const ut=this.color;this.addCommands({cmd:()=>{this.color=$,xt(this,R,Yn).call(this)},undo:()=>{this.color=ut,xt(this,R,Yn).call(this)},mustExec:!0,type:L.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ss=function($){$/=100;const ut=this.opacity;this.addCommands({cmd:()=>{this.opacity=$,xt(this,R,Yn).call(this)},undo:()=>{this.opacity=ut,xt(this,R,Yn).call(this)},mustExec:!0,type:L.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Es=function(){const{parentRotation:$,parentDimensions:[ut,Rt]}=this;switch($){case 90:return[0,Rt,Rt,ut];case 180:return[ut,Rt,ut,Rt];case 270:return[ut,0,Rt,ut];default:return[0,0,ut,Rt]}},kr=function(){const{ctx:$,color:ut,opacity:Rt,thickness:Ht,parentScale:Jt,scaleFactor:ae}=this;$.lineWidth=Ht*Jt/ae,$.lineCap="round",$.lineJoin="round",$.miterLimit=10,$.strokeStyle=`${ut}${(0,$t.opacityToHex)(Rt)}`},ws=function($,ut){this.canvas.addEventListener("contextmenu",vt.noContextMenu),this.canvas.addEventListener("pointerleave",y(this,ct)),this.canvas.addEventListener("pointermove",y(this,gt)),this.canvas.addEventListener("pointerup",y(this,X)),this.canvas.removeEventListener("pointerdown",y(this,V)),this.isEditing=!0,y(this,Y)||(Wt(this,Y,!0),xt(this,R,ui).call(this),this.thickness||(this.thickness=se._defaultThickness),this.color||(this.color=se._defaultColor||G.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=se._defaultOpacity)),this.currentPath.push([$,ut]),Wt(this,U,!1),xt(this,R,kr).call(this),Wt(this,j,()=>{xt(this,R,Ts).call(this),y(this,j)&&window.requestAnimationFrame(y(this,j))}),window.requestAnimationFrame(y(this,j))},Rr=function($,ut){const[Rt,Ht]=this.currentPath.at(-1);if(this.currentPath.length>1&&$===Rt&&ut===Ht)return;const Jt=this.currentPath;let ae=y(this,et);if(Jt.push([$,ut]),Wt(this,U,!0),Jt.length<=2){ae.moveTo(...Jt[0]),ae.lineTo($,ut);return}Jt.length===3&&(Wt(this,et,ae=new Path2D),ae.moveTo(...Jt[0])),xt(this,R,xs).call(this,ae,...Jt.at(-3),...Jt.at(-2),$,ut)},Cs=function(){if(this.currentPath.length===0)return;const $=this.currentPath.at(-1);y(this,et).lineTo(...$)},Ps=function($,ut){Wt(this,j,null),$=Math.min(Math.max($,0),this.canvas.width),ut=Math.min(Math.max(ut,0),this.canvas.height),xt(this,R,Rr).call(this,$,ut),xt(this,R,Cs).call(this);let Rt;if(this.currentPath.length!==1)Rt=xt(this,R,ks).call(this);else{const kt=[$,ut];Rt=[[kt,kt.slice(),kt.slice(),kt]]}const Ht=y(this,et),Jt=this.currentPath;this.currentPath=[],Wt(this,et,new Path2D);const ae=()=>{this.allRawPaths.push(Jt),this.paths.push(Rt),this.bezierPath2D.push(Ht),this.rebuild()},ne=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(xt(this,R,Bi).call(this),xt(this,R,ji).call(this)),xt(this,R,hi).call(this))};this.addCommands({cmd:ae,undo:ne,mustExec:!0})},Ts=function(){if(!y(this,U))return;Wt(this,U,!1);const $=Math.ceil(this.thickness*this.parentScale),ut=this.currentPath.slice(-3),Rt=ut.map(ae=>ae[0]),Ht=ut.map(ae=>ae[1]);Math.min(...Rt)-$,Math.max(...Rt)+$,Math.min(...Ht)-$,Math.max(...Ht)+$;const{ctx:Jt}=this;Jt.save(),Jt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const ae of this.bezierPath2D)Jt.stroke(ae);Jt.stroke(y(this,et)),Jt.restore()},xs=function($,ut,Rt,Ht,Jt,ae,ne){const kt=(ut+Ht)/2,ge=(Rt+Jt)/2,he=(Ht+ae)/2,ze=(Jt+ne)/2;$.bezierCurveTo(kt+2*(Ht-kt)/3,ge+2*(Jt-ge)/3,he+2*(Ht-he)/3,ze+2*(Jt-ze)/3,he,ze)},ks=function(){const $=this.currentPath;if($.length<=2)return[[$[0],$[0],$.at(-1),$.at(-1)]];const ut=[];let Rt,[Ht,Jt]=$[0];for(Rt=1;Rt<$.length-2;Rt++){const[Ie,Qe]=$[Rt],[Ae,Re]=$[Rt+1],Xe=(Ie+Ae)/2,ln=(Qe+Re)/2,ee=[Ht+2*(Ie-Ht)/3,Jt+2*(Qe-Jt)/3],Ft=[Xe+2*(Ie-Xe)/3,ln+2*(Qe-ln)/3];ut.push([[Ht,Jt],ee,Ft,[Xe,ln]]),[Ht,Jt]=[Xe,ln]}const[ae,ne]=$[Rt],[kt,ge]=$[Rt+1],he=[Ht+2*(ae-Ht)/3,Jt+2*(ne-Jt)/3],ze=[kt+2*(ae-kt)/3,ge+2*(ne-ge)/3];return ut.push([[Ht,Jt],he,ze,[kt,ge]]),ut},Yn=function(){if(this.isEmpty()){xt(this,R,Hi).call(this);return}xt(this,R,kr).call(this);const{canvas:$,ctx:ut}=this;ut.setTransform(1,0,0,1,0,0),ut.clearRect(0,0,$.width,$.height),xt(this,R,Hi).call(this);for(const Rt of this.bezierPath2D)ut.stroke(Rt)},Mr=function($){this.canvas.removeEventListener("pointerleave",y(this,ct)),this.canvas.removeEventListener("pointermove",y(this,gt)),this.canvas.removeEventListener("pointerup",y(this,X)),this.canvas.addEventListener("pointerdown",y(this,V)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",vt.noContextMenu)},10),xt(this,R,Ps).call(this,$.offsetX,$.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Bi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",G.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then($=>{var ut;return(ut=this.canvas)==null?void 0:ut.setAttribute("aria-label",$)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ji=function(){Wt(this,dt,new ResizeObserver($=>{const ut=$[0].contentRect;ut.width&&ut.height&&this.setDimensions(ut.width,ut.height)})),y(this,dt).observe(this.div)},ui=function(){if(!y(this,Y))return;const[$,ut]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*$),this.canvas.height=Math.ceil(this.height*ut),xt(this,R,Hi).call(this)},Fr=function($,ut){const Rt=xt(this,R,Ui).call(this),Ht=($-Rt)/y(this,N),Jt=(ut-Rt)/y(this,st);this.scaleFactor=Math.min(Ht,Jt)},Hi=function(){const $=xt(this,R,Ui).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$,this.translationY*this.scaleFactor+$)},ot=new WeakSet,Rs=function($){const ut=new Path2D;for(let Rt=0,Ht=$.length;Rt<Ht;Rt++){const[Jt,ae,ne,kt]=$[Rt];Rt===0&&ut.moveTo(...Jt),ut.bezierCurveTo(ae[0],ae[1],ne[0],ne[1],kt[0],kt[1])}return ut},Lr=function($,ut,Rt){const[Ht,Jt,ae,ne]=ut;switch(Rt){case 0:for(let kt=0,ge=$.length;kt<ge;kt+=2)$[kt]+=Ht,$[kt+1]=ne-$[kt+1];break;case 90:for(let kt=0,ge=$.length;kt<ge;kt+=2){const he=$[kt];$[kt]=$[kt+1]+Ht,$[kt+1]=he+Jt}break;case 180:for(let kt=0,ge=$.length;kt<ge;kt+=2)$[kt]=ae-$[kt],$[kt+1]+=Jt;break;case 270:for(let kt=0,ge=$.length;kt<ge;kt+=2){const he=$[kt];$[kt]=ae-$[kt+1],$[kt+1]=ne-he}break;default:throw new Error("Invalid rotation")}return $},Ms=function($,ut,Rt){const[Ht,Jt,ae,ne]=ut;switch(Rt){case 0:for(let kt=0,ge=$.length;kt<ge;kt+=2)$[kt]-=Ht,$[kt+1]=ne-$[kt+1];break;case 90:for(let kt=0,ge=$.length;kt<ge;kt+=2){const he=$[kt];$[kt]=$[kt+1]-Jt,$[kt+1]=he-Ht}break;case 180:for(let kt=0,ge=$.length;kt<ge;kt+=2)$[kt]=ae-$[kt],$[kt+1]-=Jt;break;case 270:for(let kt=0,ge=$.length;kt<ge;kt+=2){const he=$[kt];$[kt]=ne-$[kt+1],$[kt+1]=ae-he}break;default:throw new Error("Invalid rotation")}return $},Fs=function($,ut,Rt,Ht){var ge,he;const Jt=[],ae=this.thickness/2,ne=$*ut+ae,kt=$*Rt+ae;for(const ze of this.paths){const Ie=[],Qe=[];for(let Ae=0,Re=ze.length;Ae<Re;Ae++){const[Xe,ln,ee,Ft]=ze[Ae],Dt=$*Xe[0]+ne,ye=$*Xe[1]+kt,we=$*ln[0]+ne,De=$*ln[1]+kt,ft=$*ee[0]+ne,Qt=$*ee[1]+kt,pe=$*Ft[0]+ne,Ce=$*Ft[1]+kt;Ae===0&&(Ie.push(Dt,ye),Qe.push(Dt,ye)),Ie.push(we,De,ft,Qt,pe,Ce),Qe.push(we,De),Ae===Re-1&&Qe.push(pe,Ce)}Jt.push({bezier:xt(ge=se,ot,Lr).call(ge,Ie,Ht,this.rotation),points:xt(he=se,ot,Lr).call(he,Qe,Ht,this.rotation)})}return Jt},Dr=function(){let $=1/0,ut=-1/0,Rt=1/0,Ht=-1/0;for(const Jt of this.paths)for(const[ae,ne,kt,ge]of Jt){const he=L.Util.bezierBoundingBox(...ae,...ne,...kt,...ge);$=Math.min($,he[0]),Rt=Math.min(Rt,he[1]),ut=Math.max(ut,he[2]),Ht=Math.max(Ht,he[3])}return[$,Rt,ut,Ht]},Ui=function(){return y(this,q)?Math.ceil(this.thickness*this.parentScale):0},hi=function($=!1){if(this.isEmpty())return;if(!y(this,q)){xt(this,R,Yn).call(this);return}const ut=xt(this,R,Dr).call(this),Rt=xt(this,R,Ui).call(this);Wt(this,N,Math.max(G.AnnotationEditor.MIN_SIZE,ut[2]-ut[0])),Wt(this,st,Math.max(G.AnnotationEditor.MIN_SIZE,ut[3]-ut[1]));const Ht=Math.ceil(Rt+y(this,N)*this.scaleFactor),Jt=Math.ceil(Rt+y(this,st)*this.scaleFactor),[ae,ne]=this.parentDimensions;this.width=Ht/ae,this.height=Jt/ne,this.setAspectRatio(Ht,Jt);const kt=this.translationX,ge=this.translationY;this.translationX=-ut[0],this.translationY=-ut[1],xt(this,R,ui).call(this),xt(this,R,Yn).call(this),Wt(this,J,Ht),Wt(this,x,Jt),this.setDims(Ht,Jt);const he=$?Rt/this.scaleFactor/2:0;this.translate(kt-this.translationX-he,ge-this.translationY-he)},zt(se,ot),yn(se,"_defaultColor",null),yn(se,"_defaultOpacity",1),yn(se,"_defaultThickness",1),yn(se,"_type","ink");let mt=se;D.InkEditor=mt},(T,D,Tt)=>{var mt,st,N,gt,ct,X,V,et,q,U,Y,yi,Ai,zi,Ir,Ls,Ds,Or,Wi,Is;Object.defineProperty(D,"__esModule",{value:!0}),D.StampEditor=void 0;var L=Tt(1),G=Tt(4),_=Tt(6),vt=Tt(29);const K=class K extends G.AnnotationEditor{constructor(Et){super({...Et,name:"stampEditor"});zt(this,Y);zt(this,mt,null);zt(this,st,null);zt(this,N,null);zt(this,gt,null);zt(this,ct,null);zt(this,X,null);zt(this,V,null);zt(this,et,null);zt(this,q,!1);zt(this,U,!1);Wt(this,gt,Et.bitmapUrl),Wt(this,ct,Et.bitmapFile)}static initialize(Et){G.AnnotationEditor.initialize(Et)}static get supportedTypes(){const Et=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,L.shadow)(this,"supportedTypes",Et.map(Mt=>`image/${Mt}`))}static get supportedTypesStr(){return(0,L.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Et){return this.supportedTypes.includes(Et)}static paste(Et,Mt){Mt.pasteEditor(L.AnnotationEditorType.STAMP,{bitmapFile:Et.getAsFile()})}remove(){var Et,Mt;y(this,st)&&(Wt(this,mt,null),this._uiManager.imageManager.deleteId(y(this,st)),(Et=y(this,X))==null||Et.remove(),Wt(this,X,null),(Mt=y(this,V))==null||Mt.disconnect(),Wt(this,V,null)),super.remove()}rebuild(){if(!this.parent){y(this,st)&&xt(this,Y,zi).call(this);return}super.rebuild(),this.div!==null&&(y(this,st)&&xt(this,Y,zi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(y(this,N)||y(this,mt)||y(this,gt)||y(this,ct))}get isResizable(){return!0}render(){if(this.div)return this.div;let Et,Mt;if(this.width&&(Et=this.x,Mt=this.y),super.render(),this.div.hidden=!0,y(this,mt)?xt(this,Y,Ir).call(this):xt(this,Y,zi).call(this),this.width){const[yt,qt]=this.parentDimensions;this.setAt(Et*yt,Mt*qt,this.width*yt,this.height*qt)}return this.div}static deserialize(Et,Mt,yt){if(Et instanceof vt.StampAnnotationElement)return null;const qt=super.deserialize(Et,Mt,yt),{rect:it,bitmapUrl:At,bitmapId:Ot,isSvg:tt,accessibilityData:w}=Et;Ot&&yt.imageManager.isValidId(Ot)?Wt(qt,st,Ot):Wt(qt,gt,At),Wt(qt,q,tt);const[P,W]=qt.pageDimensions;return qt.width=(it[2]-it[0])/P,qt.height=(it[3]-it[1])/W,w&&(qt.altTextData=w),qt}serialize(Et=!1,Mt=null){if(this.isEmpty())return null;const yt={annotationType:L.AnnotationEditorType.STAMP,bitmapId:y(this,st),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:y(this,q),structTreeParentId:this._structTreeParentId};if(Et)return yt.bitmapUrl=xt(this,Y,Wi).call(this,!0),yt.accessibilityData=this.altTextData,yt;const{decorative:qt,altText:it}=this.altTextData;if(!qt&&it&&(yt.accessibilityData={type:"Figure",alt:it}),Mt===null)return yt;Mt.stamps||(Mt.stamps=new Map);const At=y(this,q)?(yt.rect[2]-yt.rect[0])*(yt.rect[3]-yt.rect[1]):null;if(!Mt.stamps.has(y(this,st)))Mt.stamps.set(y(this,st),{area:At,serialized:yt}),yt.bitmap=xt(this,Y,Wi).call(this,!1);else if(y(this,q)){const Ot=Mt.stamps.get(y(this,st));At>Ot.area&&(Ot.area=At,Ot.serialized.bitmap.close(),Ot.serialized.bitmap=xt(this,Y,Wi).call(this,!1))}return yt}};mt=new WeakMap,st=new WeakMap,N=new WeakMap,gt=new WeakMap,ct=new WeakMap,X=new WeakMap,V=new WeakMap,et=new WeakMap,q=new WeakMap,U=new WeakMap,Y=new WeakSet,yi=function(Et,Mt=!1){if(!Et){this.remove();return}Wt(this,mt,Et.bitmap),Mt||(Wt(this,st,Et.id),Wt(this,q,Et.isSvg)),xt(this,Y,Ir).call(this)},Ai=function(){Wt(this,N,null),this._uiManager.enableWaiting(!1),y(this,X)&&this.div.focus()},zi=function(){if(y(this,st)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(y(this,st)).then(Mt=>xt(this,Y,yi).call(this,Mt,!0)).finally(()=>xt(this,Y,Ai).call(this));return}if(y(this,gt)){const Mt=y(this,gt);Wt(this,gt,null),this._uiManager.enableWaiting(!0),Wt(this,N,this._uiManager.imageManager.getFromUrl(Mt).then(yt=>xt(this,Y,yi).call(this,yt)).finally(()=>xt(this,Y,Ai).call(this)));return}if(y(this,ct)){const Mt=y(this,ct);Wt(this,ct,null),this._uiManager.enableWaiting(!0),Wt(this,N,this._uiManager.imageManager.getFromFile(Mt).then(yt=>xt(this,Y,yi).call(this,yt)).finally(()=>xt(this,Y,Ai).call(this)));return}const Et=document.createElement("input");Et.type="file",Et.accept=K.supportedTypesStr,Wt(this,N,new Promise(Mt=>{Et.addEventListener("change",async()=>{if(!Et.files||Et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const yt=await this._uiManager.imageManager.getFromFile(Et.files[0]);xt(this,Y,yi).call(this,yt)}Mt()}),Et.addEventListener("cancel",()=>{this.remove(),Mt()})}).finally(()=>xt(this,Y,Ai).call(this))),Et.click()},Ir=function(){const{div:Et}=this;let{width:Mt,height:yt}=y(this,mt);const[qt,it]=this.pageDimensions,At=.75;if(this.width)Mt=this.width*qt,yt=this.height*it;else if(Mt>At*qt||yt>At*it){const P=Math.min(At*qt/Mt,At*it/yt);Mt*=P,yt*=P}const[Ot,tt]=this.parentDimensions;this.setDims(Mt*Ot/qt,yt*tt/it),this._uiManager.enableWaiting(!1);const w=Wt(this,X,document.createElement("canvas"));Et.append(w),Et.hidden=!1,xt(this,Y,Or).call(this,Mt,yt),xt(this,Y,Is).call(this),y(this,U)||(this.parent.addUndoableEditor(this),Wt(this,U,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Ls=function(Et,Mt){var At;const[yt,qt]=this.parentDimensions;this.width=Et/yt,this.height=Mt/qt,this.setDims(Et,Mt),(At=this._initialOptions)!=null&&At.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,y(this,et)!==null&&clearTimeout(y(this,et)),Wt(this,et,setTimeout(()=>{Wt(this,et,null),xt(this,Y,Or).call(this,Et,Mt)},200))},Ds=function(Et,Mt){const{width:yt,height:qt}=y(this,mt);let it=yt,At=qt,Ot=y(this,mt);for(;it>2*Et||At>2*Mt;){const tt=it,w=At;it>2*Et&&(it=it>=16384?Math.floor(it/2)-1:Math.ceil(it/2)),At>2*Mt&&(At=At>=16384?Math.floor(At/2)-1:Math.ceil(At/2));const P=new OffscreenCanvas(it,At);P.getContext("2d").drawImage(Ot,0,0,tt,w,0,0,it,At),Ot=P.transferToImageBitmap()}return Ot},Or=function(Et,Mt){Et=Math.ceil(Et),Mt=Math.ceil(Mt);const yt=y(this,X);if(!yt||yt.width===Et&&yt.height===Mt)return;yt.width=Et,yt.height=Mt;const qt=y(this,q)?y(this,mt):xt(this,Y,Ds).call(this,Et,Mt),it=yt.getContext("2d");it.filter=this._uiManager.hcmFilter,it.drawImage(qt,0,0,qt.width,qt.height,0,0,Et,Mt)},Wi=function(Et){if(Et){if(y(this,q)){const qt=this._uiManager.imageManager.getSvgUrl(y(this,st));if(qt)return qt}const Mt=document.createElement("canvas");return{width:Mt.width,height:Mt.height}=y(this,mt),Mt.getContext("2d").drawImage(y(this,mt),0,0),Mt.toDataURL()}if(y(this,q)){const[Mt,yt]=this.pageDimensions,qt=Math.round(this.width*Mt*_.PixelsPerInch.PDF_TO_CSS_UNITS),it=Math.round(this.height*yt*_.PixelsPerInch.PDF_TO_CSS_UNITS),At=new OffscreenCanvas(qt,it);return At.getContext("2d").drawImage(y(this,mt),0,0,y(this,mt).width,y(this,mt).height,0,0,qt,it),At.transferToImageBitmap()}return structuredClone(y(this,mt))},Is=function(){Wt(this,V,new ResizeObserver(Et=>{const Mt=Et[0].contentRect;Mt.width&&Mt.height&&xt(this,Y,Ls).call(this,Mt.width,Mt.height)})),y(this,V).observe(this.div)},yn(K,"_type","stamp");let $t=K;D.StampEditor=$t}],__webpack_module_cache__={};function __w_pdfjs_require__(T){var D=__webpack_module_cache__[T];if(D!==void 0)return D.exports;var Tt=__webpack_module_cache__[T]={exports:{}};return __webpack_modules__[T](Tt,Tt.exports,__w_pdfjs_require__),Tt.exports}var __webpack_exports__={};return(()=>{var T=__webpack_exports__;Object.defineProperty(T,"__esModule",{value:!0}),Object.defineProperty(T,"AbortException",{enumerable:!0,get:function(){return D.AbortException}}),Object.defineProperty(T,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _.AnnotationEditorLayer}}),Object.defineProperty(T,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return D.AnnotationEditorParamsType}}),Object.defineProperty(T,"AnnotationEditorType",{enumerable:!0,get:function(){return D.AnnotationEditorType}}),Object.defineProperty(T,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return vt.AnnotationEditorUIManager}}),Object.defineProperty(T,"AnnotationLayer",{enumerable:!0,get:function(){return $t.AnnotationLayer}}),Object.defineProperty(T,"AnnotationMode",{enumerable:!0,get:function(){return D.AnnotationMode}}),Object.defineProperty(T,"CMapCompressionType",{enumerable:!0,get:function(){return D.CMapCompressionType}}),Object.defineProperty(T,"DOMSVGFactory",{enumerable:!0,get:function(){return L.DOMSVGFactory}}),Object.defineProperty(T,"FeatureTest",{enumerable:!0,get:function(){return D.FeatureTest}}),Object.defineProperty(T,"GlobalWorkerOptions",{enumerable:!0,get:function(){return mt.GlobalWorkerOptions}}),Object.defineProperty(T,"ImageKind",{enumerable:!0,get:function(){return D.ImageKind}}),Object.defineProperty(T,"InvalidPDFException",{enumerable:!0,get:function(){return D.InvalidPDFException}}),Object.defineProperty(T,"MissingPDFException",{enumerable:!0,get:function(){return D.MissingPDFException}}),Object.defineProperty(T,"OPS",{enumerable:!0,get:function(){return D.OPS}}),Object.defineProperty(T,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Tt.PDFDataRangeTransport}}),Object.defineProperty(T,"PDFDateString",{enumerable:!0,get:function(){return L.PDFDateString}}),Object.defineProperty(T,"PDFWorker",{enumerable:!0,get:function(){return Tt.PDFWorker}}),Object.defineProperty(T,"PasswordResponses",{enumerable:!0,get:function(){return D.PasswordResponses}}),Object.defineProperty(T,"PermissionFlag",{enumerable:!0,get:function(){return D.PermissionFlag}}),Object.defineProperty(T,"PixelsPerInch",{enumerable:!0,get:function(){return L.PixelsPerInch}}),Object.defineProperty(T,"PromiseCapability",{enumerable:!0,get:function(){return D.PromiseCapability}}),Object.defineProperty(T,"RenderingCancelledException",{enumerable:!0,get:function(){return L.RenderingCancelledException}}),Object.defineProperty(T,"SVGGraphics",{enumerable:!0,get:function(){return Tt.SVGGraphics}}),Object.defineProperty(T,"UnexpectedResponseException",{enumerable:!0,get:function(){return D.UnexpectedResponseException}}),Object.defineProperty(T,"Util",{enumerable:!0,get:function(){return D.Util}}),Object.defineProperty(T,"VerbosityLevel",{enumerable:!0,get:function(){return D.VerbosityLevel}}),Object.defineProperty(T,"XfaLayer",{enumerable:!0,get:function(){return st.XfaLayer}}),Object.defineProperty(T,"build",{enumerable:!0,get:function(){return Tt.build}}),Object.defineProperty(T,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return D.createValidAbsoluteUrl}}),Object.defineProperty(T,"getDocument",{enumerable:!0,get:function(){return Tt.getDocument}}),Object.defineProperty(T,"getFilenameFromUrl",{enumerable:!0,get:function(){return L.getFilenameFromUrl}}),Object.defineProperty(T,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return L.getPdfFilenameFromUrl}}),Object.defineProperty(T,"getXfaPageViewport",{enumerable:!0,get:function(){return L.getXfaPageViewport}}),Object.defineProperty(T,"isDataScheme",{enumerable:!0,get:function(){return L.isDataScheme}}),Object.defineProperty(T,"isPdfFile",{enumerable:!0,get:function(){return L.isPdfFile}}),Object.defineProperty(T,"loadScript",{enumerable:!0,get:function(){return L.loadScript}}),Object.defineProperty(T,"noContextMenu",{enumerable:!0,get:function(){return L.noContextMenu}}),Object.defineProperty(T,"normalizeUnicode",{enumerable:!0,get:function(){return D.normalizeUnicode}}),Object.defineProperty(T,"renderTextLayer",{enumerable:!0,get:function(){return G.renderTextLayer}}),Object.defineProperty(T,"setLayerDimensions",{enumerable:!0,get:function(){return L.setLayerDimensions}}),Object.defineProperty(T,"shadow",{enumerable:!0,get:function(){return D.shadow}}),Object.defineProperty(T,"updateTextLayer",{enumerable:!0,get:function(){return G.updateTextLayer}}),Object.defineProperty(T,"version",{enumerable:!0,get:function(){return Tt.version}});var D=__w_pdfjs_require__(1),Tt=__w_pdfjs_require__(2),L=__w_pdfjs_require__(6),G=__w_pdfjs_require__(26),_=__w_pdfjs_require__(27),vt=__w_pdfjs_require__(5),$t=__w_pdfjs_require__(29),mt=__w_pdfjs_require__(14),st=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,lib$1={exports:{}},core_min={};(function(T){var D=reactExports,Tt=pdfExports;function L(A){var H=Object.create(null);return A&&Object.keys(A).forEach(function(pt){if(pt!=="default"){var bt=Object.getOwnPropertyDescriptor(A,pt);Object.defineProperty(H,pt,bt.get?bt:{enumerable:!0,get:function(){return A[pt]}})}}),H.default=A,Object.freeze(H)}var G,_=L(D),vt=L(Tt);T.AnnotationType=void 0,(G=T.AnnotationType||(T.AnnotationType={}))[G.Text=1]="Text",G[G.Link=2]="Link",G[G.FreeText=3]="FreeText",G[G.Line=4]="Line",G[G.Square=5]="Square",G[G.Circle=6]="Circle",G[G.Polygon=7]="Polygon",G[G.Polyline=8]="Polyline",G[G.Highlight=9]="Highlight",G[G.Underline=10]="Underline",G[G.Squiggly=11]="Squiggly",G[G.StrikeOut=12]="StrikeOut",G[G.Stamp=13]="Stamp",G[G.Caret=14]="Caret",G[G.Ink=15]="Ink",G[G.Popup=16]="Popup",G[G.FileAttachment=17]="FileAttachment";var $t=function(A,H){return $t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,bt){pt.__proto__=bt}||function(pt,bt){for(var St in bt)Object.prototype.hasOwnProperty.call(bt,St)&&(pt[St]=bt[St])},$t(A,H)};function mt(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function pt(){this.constructor=A}$t(A,H),A.prototype=H===null?Object.create(H):(pt.prototype=H.prototype,new pt)}var st,N=function(){return N=Object.assign||function(A){for(var H,pt=1,bt=arguments.length;pt<bt;pt++)for(var St in H=arguments[pt])Object.prototype.hasOwnProperty.call(H,St)&&(A[St]=H[St]);return A},N.apply(this,arguments)};T.TextDirection=void 0,(st=T.TextDirection||(T.TextDirection={})).RightToLeft="RTL",st.LeftToRight="LTR";var gt,ct=_.createContext({currentTheme:"light",direction:T.TextDirection.LeftToRight,setCurrentTheme:function(){}}),X=function(A){var H=[];return Object.keys(A).forEach(function(pt){pt&&A[pt]&&H.push(pt)}),H.join(" ")},V=typeof window<"u"?_.useLayoutEffect:_.useEffect,et=function(A){var H=_.useRef(null),pt=A.once,bt=A.threshold,St=A.onVisibilityChanged;return V(function(){var Ct=H.current;if(Ct){var Ut=new IntersectionObserver(function(Lt){Lt.forEach(function(_t){var Bt=_t.isIntersecting,It=_t.intersectionRatio;St({isVisible:Bt,ratio:It}),Bt&&pt&&(Ut.unobserve(Ct),Ut.disconnect())})},{threshold:bt||0});return Ut.observe(Ct),function(){Ut.unobserve(Ct),Ut.disconnect()}}},[]),H},q=function(A){var H=A.children,pt=A.ignoreDirection,bt=pt!==void 0&&pt,St=A.size,Ct=St===void 0?24:St,Ut=_.useContext(ct).direction,Lt=!bt&&Ut===T.TextDirection.RightToLeft,_t="".concat(Ct||24,"px");return _.createElement("svg",{"aria-hidden":"true",className:X({"rpv-core__icon":!0,"rpv-core__icon--rtl":Lt}),focusable:"false",height:_t,viewBox:"0 0 24 24",width:_t},H)},U=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},Y=function(A){var H=A.children,pt=A.testId,bt=A.onClick,St=_.useContext(ct).direction===T.TextDirection.RightToLeft,Ct=pt?{"data-testid":pt}:{};return _.createElement("button",N({className:X({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":St}),type:"button",onClick:bt},Ct),H)},dt=function(A){var H=A.size,pt=H===void 0?"4rem":H,bt=A.testId,St=_.useState(!1),Ct=St[0],Ut=St[1],Lt=bt?{"data-testid":bt}:{},_t=et({onVisibilityChanged:function(Bt){Ut(Bt.isVisible)}});return _.createElement("div",N({},Lt,{className:X({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Ct}),ref:_t,style:{height:pt,width:pt}}))},J=function(A){var H=A.ariaLabel,pt=H===void 0?"":H,bt=A.autoFocus,St=bt!==void 0&&bt,Ct=A.placeholder,Ut=Ct===void 0?"":Ct,Lt=A.testId,_t=A.type,Bt=_t===void 0?"text":_t,It=A.value,ce=It===void 0?"":It,le=A.onChange,oe=A.onKeyDown,be=oe===void 0?function(){}:oe,me=_.useContext(ct).direction,fe=_.useRef(),nn=me===T.TextDirection.RightToLeft,Be={ref:fe,"data-testid":"","aria-label":pt,className:X({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":nn}),placeholder:Ut,value:ce,onChange:function(He){return le(He.target.value)},onKeyDown:be};return Lt&&(Be["data-testid"]=Lt),V(function(){if(St){var He=fe.current;if(He){var qe=window.scrollX,Me=window.scrollY;He.focus(),window.scrollTo(qe,Me)}}},[]),Bt==="text"?_.createElement("input",N({type:"text"},Be)):_.createElement("input",N({type:"password"},Be))};(function(A){A[A.ExitFullScreen=0]="ExitFullScreen",A[A.FullScreenChange=1]="FullScreenChange",A[A.FullScreenElement=2]="FullScreenElement",A[A.FullScreenEnabled=3]="FullScreenEnabled",A[A.RequestFullScreen=4]="RequestFullScreen"})(gt||(gt={}));var x,j={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},R={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},O={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},B=typeof window<"u",ht=B&&(gt.FullScreenEnabled in document&&j||R.FullScreenEnabled in document&&R||O.FullScreenEnabled in document&&O)||j,F=function(){return B&&ht.FullScreenEnabled in document&&document[ht.FullScreenEnabled]===!0},K=function(A){return B?A[ht.ExitFullScreen]():Promise.resolve({})},lt=function(){return B?document[ht.FullScreenElement]:null},Gt=function(A,H){var pt=_.useRef(),bt=function(){pt.current&&clearTimeout(pt.current)};return _.useEffect(function(){return function(){return bt()}},[]),_.useCallback(function(){for(var St=[],Ct=0;Ct<arguments.length;Ct++)St[Ct]=arguments[Ct];bt(),pt.current=setTimeout(function(){A.apply(void 0,St)},H)},[A,H])},Et=function(){var A=_.useRef(!1);return _.useEffect(function(){return A.current=!0,function(){A.current=!1}},[]),A},Mt=function(A){var H=_.useRef(A);return _.useEffect(function(){H.current=A},[A]),H.current};(function(A){A.NotRenderedYet="NotRenderedYet",A.Rendering="Rendering",A.Rendered="Rendered"})(x||(x={}));var yt,qt=-9999,it=function(A){var H=A.doc,pt=H.numPages,bt=H.loadingTask.docId,St=_.useMemo(function(){return Array(pt).fill(null).map(function(Lt,_t){return{pageIndex:_t,renderStatus:x.NotRenderedYet,visibility:qt}})},[bt]),Ct=_.useRef({currentRenderingPage:-1,startRange:0,endRange:pt-1,visibilities:St}),Ut=function(Lt,_t){Ct.current.visibilities[Lt].visibility=_t};return{getHighestPriorityPage:function(){var Lt=Ct.current.visibilities.slice(Ct.current.startRange,Ct.current.endRange+1).filter(function(le){return le.visibility>qt});if(!Lt.length)return-1;for(var _t=Lt[0].pageIndex,Bt=Lt[Lt.length-1].pageIndex,It=Lt.length,ce=0;ce<It;ce++){if(Lt[ce].renderStatus===x.Rendering)return-1;if(Lt[ce].renderStatus===x.NotRenderedYet)return Lt[ce].pageIndex}return Bt+1<pt&&Ct.current.visibilities[Bt+1].renderStatus!==x.Rendered?Bt+1:_t-1>=0&&Ct.current.visibilities[_t-1].renderStatus!==x.Rendered?_t-1:-1},isInRange:function(Lt){return Lt>=Ct.current.startRange&&Lt<=Ct.current.endRange},markNotRendered:function(){for(var Lt=0;Lt<pt;Lt++)Ct.current.visibilities[Lt].renderStatus=x.NotRenderedYet},markRendered:function(Lt){Ct.current.visibilities[Lt].renderStatus=x.Rendered},markRendering:function(Lt){Ct.current.currentRenderingPage!==-1&&Ct.current.currentRenderingPage!==Lt&&Ct.current.visibilities[Ct.current.currentRenderingPage].renderStatus===x.Rendering&&(Ct.current.visibilities[Ct.current.currentRenderingPage].renderStatus=x.NotRenderedYet),Ct.current.visibilities[Lt].renderStatus=x.Rendering,Ct.current.currentRenderingPage=Lt},setOutOfRange:function(Lt){Ut(Lt,qt)},setRange:function(Lt,_t){Ct.current.startRange=Lt,Ct.current.endRange=_t;for(var Bt=0;Bt<pt;Bt++)(Bt<Lt||Bt>_t)&&(Ct.current.visibilities[Bt].visibility=qt,Ct.current.visibilities[Bt].renderStatus=x.NotRenderedYet)},setVisibility:Ut}},At={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Ot=_.createContext({l10n:At,setL10n:function(){}}),tt=0,w=function(){return tt++},P=function(A,H,pt){var bt=function(St){var Ct=H.current;if(Ct){var Ut=St.target;if(Ut instanceof Element&&Ut.shadowRoot){var Lt=St.composedPath();Lt.length>0&&!Ct.contains(Lt[0])&&pt()}else Ct.contains(Ut)||pt()}};_.useEffect(function(){if(A){var St={capture:!0};return document.addEventListener("click",bt,St),function(){document.removeEventListener("click",bt,St)}}},[])},W=function(A){var H=function(pt){pt.key==="Escape"&&A()};_.useEffect(function(){return document.addEventListener("keyup",H),function(){document.removeEventListener("keyup",H)}},[])},at=function(A){var H=A.ariaControlsSuffix,pt=A.children,bt=A.closeOnClickOutside,St=A.closeOnEscape,Ct=A.onToggle,Ut=_.useRef(),Lt=_.useContext(ct).direction===T.TextDirection.RightToLeft;return _.useEffect(function(){var _t=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=_t}},[]),W(function(){Ut.current&&St&&Ct()}),P(bt,Ut,Ct),V(function(){var _t=Ut.current;if(_t){var Bt=.75*document.body.clientHeight;_t.getBoundingClientRect().height>=Bt&&(_t.style.overflow="auto",_t.style.maxHeight="".concat(Bt,"px"))}},[]),_.createElement("div",{"aria-modal":"true",className:X({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Lt}),id:"rpv-core__modal-body-".concat(H),ref:Ut,role:"dialog",tabIndex:-1},pt)},ot=function(A){var H=A.children;return _.createElement("div",{className:"rpv-core__modal-overlay"},H)};T.ToggleStatus=void 0,(yt=T.ToggleStatus||(T.ToggleStatus={})).Close="Close",yt.Open="Open",yt.Toggle="Toggle";var rt,Pt=function(A){var H=_.useState(A),pt=H[0],bt=H[1];return{opened:pt,toggle:function(St){switch(St){case T.ToggleStatus.Close:bt(!1);break;case T.ToggleStatus.Open:bt(!0);break;case T.ToggleStatus.Toggle:default:bt(function(Ct){return!Ct})}}}},Vt=function(A){var H=A.content,pt=A.isOpened,bt=pt!==void 0&&pt,St=A.target,Ct=Pt(bt),Ut=Ct.opened,Lt=Ct.toggle;return _.createElement(_.Fragment,null,St&&St(Lt,Ut),Ut&&H(Lt))};T.Position=void 0,(rt=T.Position||(T.Position={})).TopLeft="TOP_LEFT",rt.TopCenter="TOP_CENTER",rt.TopRight="TOP_RIGHT",rt.RightTop="RIGHT_TOP",rt.RightCenter="RIGHT_CENTER",rt.RightBottom="RIGHT_BOTTOM",rt.BottomLeft="BOTTOM_LEFT",rt.BottomCenter="BOTTOM_CENTER",rt.BottomRight="BOTTOM_RIGHT",rt.LeftTop="LEFT_TOP",rt.LeftCenter="LEFT_CENTER",rt.LeftBottom="LEFT_BOTTOM";var Kt,Zt,te,re,se,Nt,jt,$,ut=function(A,H,pt,bt,St){V(function(){var Ct=H.current,Ut=A.current,Lt=pt.current;if(Ut&&Ct&&Lt){var _t=Lt.getBoundingClientRect(),Bt=function(le,oe,be,me){var fe=oe.getBoundingClientRect(),nn=le.getBoundingClientRect(),Be=nn.height,He=nn.width,qe=0,Me=0;switch(be){case T.Position.TopLeft:qe=fe.top-Be,Me=fe.left;break;case T.Position.TopCenter:qe=fe.top-Be,Me=fe.left+fe.width/2-He/2;break;case T.Position.TopRight:qe=fe.top-Be,Me=fe.left+fe.width-He;break;case T.Position.RightTop:qe=fe.top,Me=fe.left+fe.width;break;case T.Position.RightCenter:qe=fe.top+fe.height/2-Be/2,Me=fe.left+fe.width;break;case T.Position.RightBottom:qe=fe.top+fe.height-Be,Me=fe.left+fe.width;break;case T.Position.BottomLeft:qe=fe.top+fe.height,Me=fe.left;break;case T.Position.BottomCenter:qe=fe.top+fe.height,Me=fe.left+fe.width/2-He/2;break;case T.Position.BottomRight:qe=fe.top+fe.height,Me=fe.left+fe.width-He;break;case T.Position.LeftTop:qe=fe.top,Me=fe.left-He;break;case T.Position.LeftCenter:qe=fe.top+fe.height/2-Be/2,Me=fe.left-He;break;case T.Position.LeftBottom:qe=fe.top+fe.height-Be,Me=fe.left-He}return{left:Me+(me.left||0),top:qe+(me.top||0)}}(Ut,Ct,bt,St),It=Bt.top,ce=Bt.left;Ut.style.top="".concat(It-_t.top,"px"),Ut.style.left="".concat(ce-_t.left,"px")}},[])},Rt=function(A){var H,pt=A.customClassName,bt=A.position;return _.createElement("div",{className:X((H={"rpv-core__arrow":!0,"rpv-core__arrow--tl":bt===T.Position.TopLeft,"rpv-core__arrow--tc":bt===T.Position.TopCenter,"rpv-core__arrow--tr":bt===T.Position.TopRight,"rpv-core__arrow--rt":bt===T.Position.RightTop,"rpv-core__arrow--rc":bt===T.Position.RightCenter,"rpv-core__arrow--rb":bt===T.Position.RightBottom,"rpv-core__arrow--bl":bt===T.Position.BottomLeft,"rpv-core__arrow--bc":bt===T.Position.BottomCenter,"rpv-core__arrow--br":bt===T.Position.BottomRight,"rpv-core__arrow--lt":bt===T.Position.LeftTop,"rpv-core__arrow--lc":bt===T.Position.LeftCenter,"rpv-core__arrow--lb":bt===T.Position.LeftBottom},H["".concat(pt)]=pt!=="",H))})},Ht=function(A){var H=A.ariaControlsSuffix,pt=A.children,bt=A.closeOnClickOutside,St=A.offset,Ct=A.position,Ut=A.targetRef,Lt=A.onClose,_t=_.useRef(),Bt=_.useRef(),It=_.useRef(),ce=_.useContext(ct).direction===T.TextDirection.RightToLeft;P(bt,_t,Lt),ut(_t,Ut,It,Ct,St),V(function(){var oe=Bt.current;if(oe){var be=.75*document.body.clientHeight;oe.getBoundingClientRect().height>=be&&(oe.style.overflow="auto",oe.style.maxHeight="".concat(be,"px"))}},[]);var le="rpv-core__popover-body-inner-".concat(H);return _.createElement(_.Fragment,null,_.createElement("div",{ref:It,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{"aria-describedby":le,className:X({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":ce}),id:"rpv-core__popover-body-".concat(H),ref:_t,role:"dialog",tabIndex:-1},_.createElement(Rt,{customClassName:"rpv-core__popover-body-arrow",position:Ct}),_.createElement("div",{id:le,ref:Bt},pt)))},Jt=function(A){var H=A.closeOnEscape,pt=A.onClose,bt=_.useRef();return W(function(){bt.current&&H&&pt()}),_.createElement("div",{className:"rpv-core__popover-overlay",ref:bt})},ae=function(A){var H=A.ariaControlsSuffix,pt=A.children,bt=A.contentRef,St=A.offset,Ct=A.position,Ut=A.targetRef,Lt=_.useRef(),_t=_.useContext(ct).direction===T.TextDirection.RightToLeft;return ut(bt,Ut,Lt,Ct,St),_.createElement(_.Fragment,null,_.createElement("div",{ref:Lt,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{className:X({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":_t}),id:"rpv-core__tooltip-body-".concat(H),ref:bt,role:"tooltip"},_.createElement(Rt,{customClassName:"rpv-core__tooltip-body-arrow",position:Ct}),_.createElement("div",{className:"rpv-core__tooltip-body-content"},pt)))};T.FullScreenMode=void 0,(Kt=T.FullScreenMode||(T.FullScreenMode={})).Normal="Normal",Kt.Entering="Entering",Kt.Entered="Entered",Kt.EnteredCompletely="EnteredCompletely",Kt.Exitting="Exitting",Kt.Exited="Exited",T.LayerRenderStatus=void 0,(Zt=T.LayerRenderStatus||(T.LayerRenderStatus={}))[Zt.PreRender=0]="PreRender",Zt[Zt.DidRender=1]="DidRender",T.PageMode=void 0,(te=T.PageMode||(T.PageMode={})).Attachments="UseAttachments",te.Bookmarks="UseOutlines",te.ContentGroup="UseOC",te.Default="UserNone",te.FullScreen="FullScreen",te.Thumbnails="UseThumbs",T.PasswordStatus=void 0,(re=T.PasswordStatus||(T.PasswordStatus={})).RequiredPassword="RequiredPassword",re.WrongPassword="WrongPassword",T.RotateDirection=void 0,(se=T.RotateDirection||(T.RotateDirection={})).Backward="Backward",se.Forward="Forward",T.ScrollMode=void 0,(Nt=T.ScrollMode||(T.ScrollMode={})).Page="Page",Nt.Horizontal="Horizontal",Nt.Vertical="Vertical",Nt.Wrapped="Wrapped",T.SpecialZoomLevel=void 0,(jt=T.SpecialZoomLevel||(T.SpecialZoomLevel={})).ActualSize="ActualSize",jt.PageFit="PageFit",jt.PageWidth="PageWidth",T.ViewMode=void 0,($=T.ViewMode||(T.ViewMode={})).DualPage="DualPage",$.DualPageWithCover="DualPageWithCover",$.SinglePage="SinglePage";var ne,kt=function(A,H){return A.reduce(function(pt,bt,St){return St%H?pt[pt.length-1].push(bt):pt.push([bt]),pt},[])},ge=function(A,H){switch(H[1].name){case"XYZ":return{bottomOffset:function(pt,bt){return H[3]===null?bt:H[3]},leftOffset:function(pt,bt){return H[2]===null?0:H[2]},pageIndex:A,scaleTo:H[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:A,scaleTo:T.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:H[2],leftOffset:0,pageIndex:A,scaleTo:T.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:A,scaleTo:1}}},he=new Map,ze=new Map,Ie=function(A,H){return"".concat(A.loadingTask.docId,"___").concat(H.num,"R").concat(H.gen===0?"":H.gen)},Qe=function(A,H,pt){he.set(Ie(A,H),pt)},Ae=function(A,H){if(!A)return Promise.reject("The document is not loaded yet");var pt="".concat(A.loadingTask.docId,"___").concat(H),bt=ze.get(pt);return bt?Promise.resolve(bt):new Promise(function(St,Ct){A.getPage(H+1).then(function(Ut){ze.set(pt,Ut),Ut.ref&&Qe(A,Ut.ref,H),St(Ut)})})},Re=function(A,H){return new Promise(function(pt){new Promise(function(bt){typeof H=="string"?A.getDestination(H).then(function(St){bt(St)}):bt(H)}).then(function(bt){if(typeof bt[0]=="object"&&bt[0]!==null){var St=bt[0],Ct=function(Lt,_t){var Bt=Ie(Lt,_t);return he.has(Bt)?he.get(Bt):null}(A,St);Ct===null?A.getPageIndex(St).then(function(Lt){Qe(A,St,Lt),Re(A,H).then(function(_t){return pt(_t)})}):pt(ge(Ct,bt))}else{var Ut=ge(bt[0],bt);pt(Ut)}})})};(function(A){A[A.Solid=1]="Solid",A[A.Dashed=2]="Dashed",A[A.Beveled=3]="Beveled",A[A.Inset=4]="Inset",A[A.Underline=5]="Underline"})(ne||(ne={}));var Xe,ln=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),ee=function(A,H,pt,bt){var St=parseInt(A,10);return St>=H&&St<=pt?St:bt},Ft=function(A){return A.contentsObj?A.contentsObj.str:A.contents||""},Dt=function(A){return A.titleObj?A.titleObj.str:A.title||""},ye=function(A){var H=A.annotation,pt=_.useContext(ct).direction,bt=Dt(H),St=Ft(H),Ct=pt===T.TextDirection.RightToLeft,Ut=_.useRef(),Lt="";if(H.modificationDate){var _t=function(Bt){var It=ln.exec(Bt);if(!It)return null;var ce=parseInt(It[1],10),le=ee(It[2],1,12,1)-1,oe=ee(It[3],1,31,1),be=ee(It[4],0,23,0),me=ee(It[5],0,59,0),fe=ee(It[6],0,59,0),nn=It[7]||"Z",Be=ee(It[8],0,23,0),He=ee(It[9],0,59,0);switch(nn){case"-":be+=Be,me+=He;break;case"+":be-=Be,me-=He}return new Date(Date.UTC(ce,le,oe,be,me,fe))}(H.modificationDate);Lt=_t?"".concat(_t.toLocaleDateString(),", ").concat(_t.toLocaleTimeString()):""}return _.useLayoutEffect(function(){if(Ut.current){var Bt=document.querySelector('[data-annotation-id="'.concat(H.id,'"]'));if(Bt){var It=Bt;return It.style.zIndex+=1,function(){It.style.zIndex="".concat(parseInt(It.style.zIndex,10)-1)}}}},[]),_.createElement("div",{ref:Ut,className:X({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Ct}),style:{top:H.annotationType===T.AnnotationType.Popup?"":"100%"}},bt&&_.createElement(_.Fragment,null,_.createElement("div",{className:X({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Ct,"rpv-core__annotation-popup-title--rtl":Ct})},bt),_.createElement("div",{className:"rpv-core__annotation-popup-date"},Lt)),St&&_.createElement("div",{className:"rpv-core__annotation-popup-content"},St.split(`
`).map(function(Bt,It){return _.createElement(_.Fragment,{key:It},Bt,_.createElement("br",null))})))};(function(A){A.Click="Click",A.Hover="Hover"})(Xe||(Xe={}));var we,De=function(A){var H,pt=A.annotation,bt=A.children,St=A.ignoreBorder,Ct=A.hasPopup,Ut=A.isRenderable,Lt=A.page,_t=A.viewport,Bt=pt.rect,It=function(){var We=Pt(!1),un=We.opened,cn=We.toggle,hn=_.useState(Xe.Hover),dn=hn[0],gn=hn[1];return{opened:un,closeOnHover:function(){dn===Xe.Hover&&cn(T.ToggleStatus.Close)},openOnHover:function(){dn===Xe.Hover&&cn(T.ToggleStatus.Open)},toggleOnClick:function(){switch(dn){case Xe.Click:un&&gn(Xe.Hover),cn(T.ToggleStatus.Toggle);break;case Xe.Hover:gn(Xe.Click),cn(T.ToggleStatus.Open)}}}}(),ce=It.closeOnHover,le=It.opened,oe=It.openOnHover,be=It.toggleOnClick,me=(H=[Bt[0],Lt.view[3]+Lt.view[1]-Bt[1],Bt[2],Lt.view[3]+Lt.view[1]-Bt[3]],[Math.min(H[0],H[2]),Math.min(H[1],H[3]),Math.max(H[0],H[2]),Math.max(H[1],H[3])]),fe=Bt[2]-Bt[0],nn=Bt[3]-Bt[1],Be={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!St&&pt.borderStyle.width>0){switch(pt.borderStyle.style){case ne.Dashed:Be.borderStyle="dashed";break;case ne.Solid:Be.borderStyle="solid";break;case ne.Underline:Be=Object.assign({borderBottomStyle:"solid"},Be);case ne.Beveled:case ne.Inset:}var He=pt.borderStyle.width;Be.borderWidth="".concat(He,"px"),pt.borderStyle.style!==ne.Underline&&(fe-=2*He,nn-=2*He);var qe=pt.borderStyle,Me=qe.horizontalCornerRadius,$e=qe.verticalCornerRadius;(Me>0||$e>0)&&(Be.borderRadius="".concat(Me,"px / ").concat($e,"px")),pt.color?Be.borderColor="rgb(".concat(0|pt.color[0],", ").concat(0|pt.color[1],", ").concat(0|pt.color[2],")"):Be.borderWidth="0"}return _.createElement(_.Fragment,null,Ut&&bt({popup:{opened:le,closeOnHover:ce,openOnHover:oe,toggleOnClick:be},slot:{attrs:{style:Object.assign({height:"".concat(nn,"px"),left:"".concat(me[0],"px"),top:"".concat(me[1],"px"),transform:"matrix(".concat(_t.transform.join(","),")"),transformOrigin:"-".concat(me[0],"px -").concat(me[1],"px"),width:"".concat(fe,"px")},Be)},children:_.createElement(_.Fragment,null,Ct&&le&&_.createElement(ye,{annotation:pt}))}}))},ft=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},Qt=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut),_t=H.rect,Bt=_t[2]-_t[0],It=_t[3]-_t[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(le){return _.createElement("div",N({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Bt," ").concat(It),width:"".concat(Bt,"px")},_.createElement("circle",{cy:It/2,fill:"none",rx:Bt/2-ce/2,ry:It/2-ce/2,stroke:"transparent",strokeWidth:ce||1})),le.slot.children)})},pe=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=Dt(H),Ct=Ft(H),Ut=!(H.hasPopup!==!1||!St&&!Ct),Lt=function(){var _t,Bt,It,ce,le=H.file;le&&(_t=le.filename,Bt=le.content,It=typeof Bt=="string"?"":URL.createObjectURL(new Blob([Bt],{type:""})),(ce=document.createElement("a")).style.display="none",ce.href=It||_t,ce.setAttribute("download",function(oe){var be=oe.split("/").pop();return be?be.split("#")[0].split("?")[0]:oe}(_t)),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),It&&URL.revokeObjectURL(It))};return _.createElement(De,{annotation:H,hasPopup:Ut,ignoreBorder:!0,isRenderable:!0,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onDoubleClick:Lt,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},Ce=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},xe=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=Dt(H),Ct=Ft(H),Ut=!(!St&&!Ct),Lt=!H.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(H.parentType)!==-1;return V(function(){if(H.parentId){var _t=document.querySelector('[data-annotation-id="'.concat(H.parentId,'"]')),Bt=document.querySelector('[data-annotation-id="'.concat(H.id,'"]'));if(_t&&Bt){var It=parseFloat(_t.style.left),ce=parseFloat(_t.style.top)+parseFloat(_t.style.height);Bt.style.left="".concat(It,"px"),Bt.style.top="".concat(ce,"px"),Bt.style.transformOrigin="-".concat(It,"px -").concat(ce,"px")}}},[]),_.createElement(De,{annotation:H,hasPopup:Lt,ignoreBorder:!1,isRenderable:Ut,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":H.id}),_.createElement(ye,{annotation:H}))})},_e=function(A){var H=A.annotation,pt=A.childAnnotation,bt=A.page,St=A.viewport,Ct=H.hasPopup===!1,Ut=Dt(H),Lt=Ft(H),_t=!!(H.hasPopup||Ut||Lt);if(H.quadPoints&&H.quadPoints.length>0){var Bt=H.quadPoints.map(function(It){return Object.assign({},H,{rect:[It[2].x,It[2].y,It[1].x,It[1].y],quadPoints:[]})});return _.createElement(_.Fragment,null,Bt.map(function(It,ce){return _.createElement(_e,{key:ce,annotation:It,childAnnotation:pt,page:bt,viewport:St})}))}return _.createElement(De,{annotation:H,hasPopup:Ct,ignoreBorder:!0,isRenderable:_t,page:bt,viewport:St},function(It){return _.createElement(_.Fragment,null,_.createElement("div",N({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":H.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),It.slot.children),pt&&pt.annotationType===T.AnnotationType.Popup&&It.popup.opened&&_.createElement(xe,{annotation:pt,page:bt,viewport:St}))})},nt=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut),_t=H.rect,Bt=_t[2]-_t[0],It=_t[3]-_t[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(le){return _.createElement("div",N({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),H.inkLists&&H.inkLists.length&&_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Bt," ").concat(It),width:"".concat(Bt,"px")},H.inkLists.map(function(oe,be){return _.createElement("polyline",{key:be,fill:"none",stroke:"transparent",strokeWidth:ce||1,points:oe.map(function(me){return"".concat(me.x-_t[0],",").concat(_t[3]-me.y)}).join(" ")})})),le.slot.children)})},Q=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut),_t=H.rect,Bt=_t[2]-_t[0],It=_t[3]-_t[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(le){return _.createElement("div",N({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Bt," ").concat(It),width:"".concat(Bt,"px")},_.createElement("line",{stroke:"transparent",strokeWidth:ce||1,x1:_t[2]-H.lineCoordinates[0],x2:_t[2]-H.lineCoordinates[2],y1:_t[3]-H.lineCoordinates[1],y2:_t[3]-H.lineCoordinates[3]})),le.slot.children)})},wt=/^([^\w]*)(javascript|data|vbscript)/im,Xt=/&#(\w+)(^\w|;)?/g,Yt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ie=/^([^:]+):/gm,ue=function(A,H){var pt,bt=(pt=A||"",pt.replace(Xt,function(Lt,_t){return String.fromCharCode(_t)})).replace(Yt,"").trim();if(!bt)return H;var St=bt[0];if(St==="."||St==="/")return bt;var Ct=bt.match(ie);if(!Ct)return bt;var Ut=Ct[0];return wt.test(Ut)?H:bt},Pe=function(A){var H,pt=A.annotation,bt=A.annotationContainerRef,St=A.doc,Ct=A.outlines,Ut=A.page,Lt=A.pageIndex,_t=A.scale,Bt=A.viewport,It=A.onExecuteNamedAction,ce=A.onJumpFromLinkAnnotation,le=A.onJumpToDest,oe=_.useRef(),be=Ct&&Ct.length&&pt.dest&&typeof pt.dest=="string"?(H=Ct.find(function(Be){return Be.dest===pt.dest}))===null||H===void 0?void 0:H.title:"",me=!!(pt.url||pt.dest||pt.action||pt.unsafeUrl),fe={};if(pt.url||pt.unsafeUrl){var nn=ue(pt.url||pt.unsafeUrl,"");nn?fe={"data-target":"external",href:nn,rel:"noopener noreferrer nofollow",target:pt.newWindow?"_blank":"",title:nn}:me=!1}else fe={href:"","data-annotation-link":pt.id,onClick:function(Be){Be.preventDefault(),pt.action?It(pt.action):Re(St,pt.dest).then(function(He){var qe=oe.current,Me=bt.current;if(qe&&Me){var $e=qe.getBoundingClientRect();Me.style.setProperty("height","100%"),Me.style.setProperty("width","100%");var We=Me.getBoundingClientRect();Me.style.removeProperty("height"),Me.style.removeProperty("width");var un=($e.left-We.left)/_t,cn=(We.bottom-$e.bottom+$e.height)/_t;ce({bottomOffset:cn,label:be,leftOffset:un,pageIndex:Lt})}le(He)})}};return be&&(fe=Object.assign({},fe,{title:be,"aria-label":be})),_.createElement(De,{annotation:pt,hasPopup:!1,ignoreBorder:!1,isRenderable:me,page:Ut,viewport:Bt},function(Be){return _.createElement("div",N({},Be.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":pt.id,"data-testid":"core__annotation--link-".concat(pt.id)}),_.createElement("a",N({ref:oe},fe)))})},Se=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut),_t=H.rect,Bt=_t[2]-_t[0],It=_t[3]-_t[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(le){return _.createElement("div",N({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),H.vertices&&H.vertices.length&&_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Bt," ").concat(It),width:"".concat(Bt,"px")},_.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:ce||1,points:H.vertices.map(function(oe){return"".concat(oe.x-_t[0],",").concat(_t[3]-oe.y)}).join(" ")})),le.slot.children)})},ve=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut),_t=H.rect,Bt=_t[2]-_t[0],It=_t[3]-_t[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(le){return _.createElement("div",N({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),H.vertices&&H.vertices.length&&_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Bt," ").concat(It),width:"".concat(Bt,"px")},_.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:ce||1,points:H.vertices.map(function(oe){return"".concat(oe.x-_t[0],",").concat(_t[3]-oe.y)}).join(" ")})),le.slot.children)})},Ge=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut),_t=H.rect,Bt=_t[2]-_t[0],It=_t[3]-_t[1],ce=H.borderStyle.width;return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(le){return _.createElement("div",N({},le.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":H.id,onClick:le.popup.toggleOnClick,onMouseEnter:le.popup.openOnHover,onMouseLeave:le.popup.closeOnHover}),_.createElement("svg",{height:"".concat(It,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Bt," ").concat(It),width:"".concat(Bt,"px")},_.createElement("rect",{height:It-ce,fill:"none",stroke:"transparent",strokeWidth:ce||1,x:ce/2,y:ce/2,width:Bt-ce})),le.slot.children)})},Ee=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},ke=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},je=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},Ke=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),_.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),_.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),_.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},sn=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),_.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),_.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),_.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),_.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),_.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),_.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),_.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),_.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),_.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},pn=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),_.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Fn=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),_.createElement("path",{d:"M6 4.5L6 0.5"}),_.createElement("path",{d:"M18 4.5L18 0.5"}),_.createElement("path",{d:"M10 4.5L10 0.5"}),_.createElement("path",{d:"M14 4.5L14 0.5"}))},Cn=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),_.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),_.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Wn=function(){return _.createElement(q,{size:16},_.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Gn=function(A){var H=A.annotation,pt=A.childAnnotation,bt=A.page,St=A.viewport,Ct=H.hasPopup===!1,Ut=Dt(H),Lt=Ft(H),_t=!!(H.hasPopup||Ut||Lt),Bt=H.name?H.name.toLowerCase():"";return _.createElement(De,{annotation:H,hasPopup:Ct,ignoreBorder:!1,isRenderable:_t,page:bt,viewport:St},function(It){return _.createElement(_.Fragment,null,_.createElement("div",N({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":H.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),Bt&&_.createElement("div",{className:"rpv-core__annotation-text-icon"},Bt==="check"&&_.createElement(U,null),Bt==="comment"&&_.createElement(Ke,null),Bt==="help"&&_.createElement(sn,null),Bt==="insert"&&_.createElement(Wn,null),Bt==="key"&&_.createElement(pn,null),Bt==="note"&&_.createElement(Fn,null),(Bt==="newparagraph"||Bt==="paragraph")&&_.createElement(Cn,null)),It.slot.children),pt&&pt.annotationType===T.AnnotationType.Popup&&It.popup.opened&&_.createElement(xe,{annotation:pt,page:bt,viewport:St}))})},qn=function(A){var H=A.annotation,pt=A.page,bt=A.viewport,St=H.hasPopup===!1,Ct=Dt(H),Ut=Ft(H),Lt=!!(H.hasPopup||Ct||Ut);return _.createElement(De,{annotation:H,hasPopup:St,ignoreBorder:!0,isRenderable:Lt,page:pt,viewport:bt},function(_t){return _.createElement("div",N({},_t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":H.id,onClick:_t.popup.toggleOnClick,onMouseEnter:_t.popup.openOnHover,onMouseLeave:_t.popup.closeOnHover}),_t.slot.children)})},Si=function(A){var H=A.annotations,pt=A.doc,bt=A.outlines,St=A.page,Ct=A.pageIndex,Ut=A.plugins,Lt=A.rotation,_t=A.scale,Bt=A.onExecuteNamedAction,It=A.onJumpFromLinkAnnotation,ce=A.onJumpToDest,le=_.useRef(),oe=St.getViewport({rotation:Lt,scale:_t}).clone({dontFlip:!0}),be=H.filter(function(me){return!me.parentId});return V(function(){var me=le.current;me&&Ut.forEach(function(fe){fe.onAnnotationLayerRender&&fe.onAnnotationLayerRender({annotations:be,container:me,pageIndex:Ct,rotation:Lt,scale:_t})})},[]),_.createElement("div",{ref:le,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Ct)},be.map(function(me){var fe=H.find(function(nn){return nn.parentId===me.id});switch(me.annotationType){case T.AnnotationType.Caret:return _.createElement(ft,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Circle:return _.createElement(Qt,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.FileAttachment:return _.createElement(pe,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.FreeText:return _.createElement(Ce,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Highlight:return _.createElement(_e,{key:me.id,annotation:me,childAnnotation:fe,page:St,viewport:oe});case T.AnnotationType.Ink:return _.createElement(nt,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Line:return _.createElement(Q,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Link:return _.createElement(Pe,{key:me.id,annotation:me,annotationContainerRef:le,doc:pt,outlines:bt,page:St,pageIndex:Ct,scale:_t,viewport:oe,onExecuteNamedAction:Bt,onJumpFromLinkAnnotation:It,onJumpToDest:ce});case T.AnnotationType.Polygon:return _.createElement(Se,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Polyline:return _.createElement(ve,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Popup:return _.createElement(xe,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Square:return _.createElement(Ge,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Squiggly:return _.createElement(Ee,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Stamp:return _.createElement(ke,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.StrikeOut:return _.createElement(je,{key:me.id,annotation:me,page:St,viewport:oe});case T.AnnotationType.Text:return _.createElement(Gn,{key:me.id,annotation:me,childAnnotation:fe,page:St,viewport:oe});case T.AnnotationType.Underline:return _.createElement(qn,{key:me.id,annotation:me,page:St,viewport:oe});default:return _.createElement(_.Fragment,{key:me.id})}}))},Os=function(A){var H=A.page,pt=A.renderAnnotations,bt=Et(),St=_.useState({loading:!0,annotations:[]}),Ct=St[0],Ut=St[1];return _.useEffect(function(){H.getAnnotations({intent:"display"}).then(function(Lt){bt.current&&Ut({loading:!1,annotations:Lt})})},[]),Ct.loading?_.createElement(_.Fragment,null):pt(Ct.annotations)},Ns=function(A){var H=A.doc,pt=A.outlines,bt=A.page,St=A.pageIndex,Ct=A.plugins,Ut=A.rotation,Lt=A.scale,_t=A.onExecuteNamedAction,Bt=A.onJumpFromLinkAnnotation,It=A.onJumpToDest;return _.createElement(Os,{page:bt,renderAnnotations:function(ce){return _.createElement(Si,{annotations:ce,doc:H,outlines:pt,page:bt,pageIndex:St,plugins:Ct,rotation:Ut,scale:Lt,onExecuteNamedAction:_t,onJumpFromLinkAnnotation:Bt,onJumpToDest:It})}})},Ei=function(A,H){var pt=A%H;return pt===0?A:Math.floor(A-pt)},Bs=function(A){var H=A.canvasLayerRef,pt=A.height,bt=A.page,St=A.pageIndex,Ct=A.plugins,Ut=A.rotation,Lt=A.scale,_t=A.width,Bt=A.onRenderCanvasCompleted,It=_.useRef();return V(function(){var ce=It.current;ce&&ce.cancel();var le=H.current;le.removeAttribute("data-testid"),Ct.forEach(function(We){We.onCanvasLayerRender&&We.onCanvasLayerRender({ele:le,pageIndex:St,rotation:Ut,scale:Lt,status:T.LayerRenderStatus.PreRender})});var oe=bt.getViewport({rotation:Ut,scale:Lt}),be=window.devicePixelRatio||1,me=Math.sqrt(16777216/(oe.width*oe.height)),fe=be>me;fe?le.style.transform="scale(1, 1)":le.style.removeProperty("transform");var nn=Math.min(me,be),Be=function(We,un){var cn,hn;if(Math.floor(We)===We)return[We,1];var dn=1/We;if(dn>un)return[1,un];if(Math.floor(dn)===dn)return[1,dn];for(var gn=We>1?dn:We,Rn=0,En=1,Mn=1,Pn=1;;){var xn=Rn+Mn,kn=En+Pn;if(kn>un)break;gn<=xn/kn?(Mn=(cn=[xn,kn])[0],Pn=cn[1]):(Rn=(hn=[xn,kn])[0],En=hn[1])}return gn<(Rn/En+Mn/Pn)/2?gn===We?[Rn,En]:[En,Rn]:gn===We?[Mn,Pn]:[Pn,Mn]}(nn,8),He=Be[0],qe=Be[1];le.width=Ei(oe.width*nn,He),le.height=Ei(oe.height*nn,He),le.style.width="".concat(Ei(oe.width,qe),"px"),le.style.height="".concat(Ei(oe.height,qe),"px"),le.hidden=!0;var Me=le.getContext("2d",{alpha:!1}),$e=fe||be!==1?[nn,0,0,nn,0,0]:null;return It.current=bt.render({canvasContext:Me,transform:$e,viewport:oe}),It.current.promise.then(function(){le.hidden=!1,le.setAttribute("data-testid","core__canvas-layer-".concat(St)),Ct.forEach(function(We){We.onCanvasLayerRender&&We.onCanvasLayerRender({ele:le,pageIndex:St,rotation:Ut,scale:Lt,status:T.LayerRenderStatus.DidRender})}),Bt()},function(){Bt()}),function(){le&&(le.width=0,le.height=0)}},[]),_.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(pt,"px"),width:"".concat(_t,"px")}},_.createElement("canvas",{ref:H}))},js=function(A){var H=A.height,pt=A.page,bt=A.rotation,St=A.scale,Ct=A.width,Ut=_.useRef();return V(function(){var Lt=Ut.current,_t=pt.getViewport({rotation:bt,scale:St});pt.getOperatorList().then(function(Bt){(function(){var It=Ut.current;It&&(It.innerHTML="")})(),new vt.SVGGraphics(pt.commonObjs,pt.objs).getSVG(Bt,_t).then(function(It){It.style.height="".concat(H,"px"),It.style.width="".concat(Ct,"px"),Lt.appendChild(It)})})},[]),_.createElement("div",{className:"rpv-core__svg-layer",ref:Ut})},Hs=function(A){var H=A.containerRef,pt=A.page,bt=A.pageIndex,St=A.plugins,Ct=A.rotation,Ut=A.scale,Lt=A.onRenderTextCompleted,_t=_.useRef(),Bt=function(){var It=H.current;It&&([].slice.call(It.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(ce){return It.removeChild(ce)}),[].slice.call(It.querySelectorAll('br[role="presentation"]')).forEach(function(ce){return It.removeChild(ce)}))};return V(function(){var It=_t.current;It&&It.cancel();var ce=H.current;if(ce){ce.removeAttribute("data-testid");var le=pt.getViewport({rotation:Ct,scale:Ut});return St.forEach(function(oe){oe.onTextLayerRender&&oe.onTextLayerRender({ele:ce,pageIndex:bt,scale:Ut,status:T.LayerRenderStatus.PreRender})}),pt.getTextContent().then(function(oe){Bt(),_t.current=vt.renderTextLayer({container:ce,textContent:oe,textContentSource:oe,viewport:le}),_t.current.promise.then(function(){ce.setAttribute("data-testid","core__text-layer-".concat(bt)),[].slice.call(ce.children).forEach(function(be){be.classList.contains("rpv-core__text-layer-text--not")||be.classList.add("rpv-core__text-layer-text")}),St.forEach(function(be){be.onTextLayerRender&&be.onTextLayerRender({ele:ce,pageIndex:bt,scale:Ut,status:T.LayerRenderStatus.DidRender})}),Lt()},function(){ce.removeAttribute("data-testid"),Lt()})}),function(){var oe;Bt(),(oe=_t.current)===null||oe===void 0||oe.cancel()}}},[]),_.createElement("div",{className:"rpv-core__text-layer",ref:H})},Us=function(A){var H=A.doc,pt=A.measureRef,bt=A.outlines,St=A.pageIndex,Ct=A.pageRotation,Ut=A.pageSize,Lt=A.plugins,_t=A.renderPage,Bt=A.renderQueueKey,It=A.rotation,ce=A.scale,le=A.shouldRender,oe=A.viewMode,be=A.onExecuteNamedAction,me=A.onJumpFromLinkAnnotation,fe=A.onJumpToDest,nn=A.onRenderCompleted,Be=A.onRotatePage,He=Et(),qe=_.useState(null),Me=qe[0],$e=qe[1],We=_.useState(!1),un=We[0],cn=We[1],hn=_.useState(!1),dn=hn[0],gn=hn[1],Rn=_.useRef(),En=_.useRef(),Mn=Math.abs(It+Ct)%180==0,Pn=Ut.pageWidth*ce,xn=Ut.pageHeight*ce,kn=Mn?Pn:xn,Tn=Mn?xn:Pn,Bn=(Ut.rotation+It+Ct)%360,Xn=_.useRef(0),Vn=_t||function(In){return _.createElement(_.Fragment,null,In.canvasLayer.children,In.textLayer.children,In.annotationLayer.children)};return _.useEffect(function(){$e(null),cn(!1),gn(!1)},[Ct,It,ce]),_.useEffect(function(){le&&He.current&&!Me&&Ae(H,St).then(function(In){He.current&&(Xn.current=Bt,$e(In))})},[le,Me]),_.useEffect(function(){un&&dn&&(Bt!==Xn.current?($e(null),cn(!1),gn(!1)):nn(St))},[un,dn]),_.createElement("div",{className:X({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":oe===T.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":oe===T.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":oe===T.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(St),ref:pt,style:{height:"".concat(Tn,"px"),width:"".concat(kn,"px")}},Me?_.createElement(_.Fragment,null,Vn({annotationLayer:{attrs:{},children:_.createElement(Ns,{doc:H,outlines:bt,page:Me,pageIndex:St,plugins:Lt,rotation:Bn,scale:ce,onExecuteNamedAction:be,onJumpFromLinkAnnotation:me,onJumpToDest:fe})},canvasLayer:{attrs:{},children:_.createElement(Bs,{canvasLayerRef:Rn,height:Tn,page:Me,pageIndex:St,plugins:Lt,rotation:Bn,scale:ce,width:kn,onRenderCanvasCompleted:function(){He.current&&cn(!0)}})},canvasLayerRendered:un,doc:H,height:Tn,pageIndex:St,rotation:Bn,scale:ce,svgLayer:{attrs:{},children:_.createElement(js,{height:Tn,page:Me,rotation:Bn,scale:ce,width:kn})},textLayer:{attrs:{},children:_.createElement(Hs,{containerRef:En,page:Me,pageIndex:St,plugins:Lt,rotation:Bn,scale:ce,onRenderTextCompleted:function(){He.current&&gn(!0)}})},textLayerRendered:dn,width:kn,markRendered:nn,onRotatePage:function(In){return Be(St,In)}}),Lt.map(function(In,jn){return In.renderPageLayer?_.createElement(_.Fragment,{key:jn},In.renderPageLayer({canvasLayerRef:Rn,canvasLayerRendered:un,doc:H,height:Tn,pageIndex:St,rotation:Bn,scale:ce,textLayerRef:En,textLayerRendered:dn,width:kn})):_.createElement(_.Fragment,{key:jn})})):_.createElement(dt,{testId:"core__page-layer-loading-".concat(St)}))},zs=function(A,H){var pt=H.rect;return A.height!==pt.height||A.width!==pt.width?pt:A};(function(A){A.Horizontal="Horizontal",A.Vertical="Vertical",A.Both="Both"})(we||(we={}));var Ws=function(A){return 1-Math.pow(1-A,4)},wi=1e-4,Nr={left:0,top:0},Br={capture:!1,passive:!0},Vs=function(A){var H=A.elementRef,pt=A.enableSmoothScroll,bt=A.isRtl,St=A.scrollDirection,Ct=A.onSmoothScroll,Ut=_.useState(Nr),Lt=Ut[0],_t=Ut[1],Bt=_.useState(H.current),It=Bt[0],ce=Bt[1],le=bt?-1:1,oe=_.useRef(St);oe.current=St;var be=_.useRef(Nr),me=_.useRef(!0),fe=_.useCallback(function(){me.current=!0,pt&&_t(be.current),Ct(!1)},[]),nn=_.useCallback(function(){if(It){switch(oe.current){case we.Horizontal:be.current={left:le*It.scrollLeft,top:0};break;case we.Both:be.current={left:le*It.scrollLeft,top:It.scrollTop};break;case we.Vertical:default:be.current={left:0,top:It.scrollTop}}pt&&!me.current||_t(be.current)}},[It]);V(function(){ce(H.current)}),V(function(){if(It)return It.addEventListener("scroll",nn,Br),function(){It.removeEventListener("scroll",nn,Br)}},[It]);var Be=_.useCallback(function(He,qe){var Me=H.current;if(!Me)return Promise.resolve();var $e={left:0,top:0};switch(oe.current){case we.Horizontal:$e.left=le*He.left;break;case we.Both:$e.left=le*He.left,$e.top=He.top;break;case we.Vertical:default:$e.top=He.top}return qe?(me.current=!1,Ct(!0),new Promise(function(We,un){(function(cn,hn,dn,gn,Rn,En){Rn===void 0&&(Rn=function(jn){return jn}),En===void 0&&(En=function(){});var Mn=0,Pn=0,xn=!1;switch(hn){case we.Horizontal:Pn=cn.scrollLeft,Mn=0;case we.Both:Pn=cn.scrollLeft,Mn=cn.scrollTop;break;case we.Vertical:default:Pn=0,Mn=cn.scrollTop}var kn=function(){xn||(xn=!0,cn.scrollLeft=dn.left,cn.scrollTop=dn.top,En())};if(Math.abs(Mn-dn.top)<=wi&&hn===we.Vertical)kn();else if(Math.abs(Pn-dn.left)<=wi&&hn===we.Horizontal)kn();else{var Tn,Bn=-1,Xn=Pn-dn.left,Vn=Mn-dn.top,In=function(jn){Bn===-1&&(Bn=jn);var $n=jn-Bn,Ve=Math.min($n/gn,1),Ue=Rn(Ve),Fe={left:Pn-Xn*Ue,top:Mn-Vn*Ue};switch(hn){case we.Horizontal:cn.scrollLeft=Fe.left;break;case we.Both:cn.scrollLeft=Fe.left,cn.scrollTop=Fe.top;break;case we.Vertical:default:cn.scrollTop=Fe.top}Math.abs(Fe.top-dn.top)<=wi&&Math.abs(Fe.left-dn.left)<=wi&&!xn&&(window.cancelAnimationFrame(Tn),kn()),$n<gn?Tn=window.requestAnimationFrame(In):window.cancelAnimationFrame(Tn)};Tn=window.requestAnimationFrame(In)}})(Me,oe.current,$e,400,Ws,function(){fe(),We()})})):new Promise(function(We,un){switch(oe.current){case we.Horizontal:Me.scrollLeft=$e.left;break;case we.Both:Me.scrollLeft=$e.left,Me.scrollTop=$e.top;break;case we.Vertical:default:Me.scrollTop=$e.top}We()})},[H]);return{scrollOffset:Lt,scrollTo:Be}},di=function(A,H,pt){return Math.max(A,Math.min(pt,H))},Gs=function(A,H){if(H!==T.ViewMode.DualPageWithCover)return 0;if(!function(St){var Ct=St.length;if(Ct===1)return!1;for(var Ut=1;Ut<Ct;Ut++)if(St[Ut].height!==St[0].height||St[Ut].width!==St[0].width)return!0;return!1}(A))return 2*A[0].width;var pt=kt(A.slice(1),2).map(function(St){return St.length===2?St[0].width+St[1].width:St[0].width}),bt=[A[0].width].concat(pt);return Math.max.apply(Math,bt)},qs={left:0,top:0},Xs={left:0,top:0},Vi={left:0,top:0},$s={left:0,top:0},Ys={height:0,width:0},jr={left:0,top:0},Hr="data-virtual-index",Ks=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Zs=function(A){var H=A.enableSmoothScroll,pt=A.isRtl,bt=A.numberOfItems,St=A.parentRef,Ct=A.setRenderRange,Ut=A.sizes,Lt=A.scrollMode,_t=A.viewMode,Bt=_.useState(!1),It=Bt[0],ce=Bt[1],le=_.useCallback(function(Ve){return ce(Ve)},[]),oe=_.useRef(Lt);oe.current=Lt;var be=_.useRef(_t);be.current=_t;var me=Lt===T.ScrollMode.Wrapped||_t===T.ViewMode.DualPageWithCover||_t===T.ViewMode.DualPage?we.Both:Lt===T.ScrollMode.Horizontal?we.Horizontal:we.Vertical,fe=Vs({elementRef:St,enableSmoothScroll:H,isRtl:pt,scrollDirection:me,onSmoothScroll:le}),nn=fe.scrollOffset,Be=fe.scrollTo,He=function(Ve){var Ue=Ve.elementRef,Fe=_.useState(Ue.current),Oe=Fe[0],Le=Fe[1],Ye=_.useRef(!1),Ze=_.useReducer(zs,{height:0,width:0}),Ne=Ze[0],Te=Ze[1];return V(function(){Ue.current!==Oe&&Le(Ue.current)}),V(function(){if(Oe&&!Ye.current){Ye.current=!0;var tn=Oe.getBoundingClientRect(),rn=tn.height,An=tn.width;Te({rect:{height:rn,width:An}})}},[Oe]),_.useEffect(function(){if(Oe){var tn=new ResizeObserver(function(rn,An){rn.forEach(function(bn){if(bn.target===Oe){var On=bn.contentRect,Hn=On.height,en=On.width;Te({rect:{height:Hn,width:en}})}})});return tn.observe(Oe),function(){tn.unobserve(Oe)}}},[Oe]),Ne}({elementRef:St}),qe=_.useRef({scrollOffset:jr,measurements:[]});qe.current.scrollOffset=nn;var Me=_.useMemo(function(){return Array(bt).fill(-1)},[]),$e=_.useState(Me),We=$e[0],un=$e[1],cn=_.useMemo(function(){var Ve=new IntersectionObserver(function(Ue){Ue.forEach(function(Fe){var Oe=Fe.isIntersecting?Fe.intersectionRatio:-1,Le=Fe.target.getAttribute(Hr);if(Le){var Ye=parseInt(Le,10);0<=Ye&&Ye<bt&&un(function(Ze){return Ze[Ye]=Oe,function(Ne,Te,tn){for(var rn,An=0,bn=Te.length;An<bn;An++)!rn&&An in Te||(rn||(rn=Array.prototype.slice.call(Te,0,An)),rn[An]=Te[An]);return Ne.concat(rn||Array.prototype.slice.call(Te))}([],Ze)})}})},{threshold:Ks});return Ve},[]),hn=_.useMemo(function(){return Lt===T.ScrollMode.Page&&_t===T.ViewMode.SinglePage?function(Ve,Ue,Fe){for(var Oe=[],Le=0;Le<Ve;Le++){var Ye={height:Math.max(Ue.height,Fe[Le].height),width:Math.max(Ue.width,Fe[Le].width)},Ze=Le===0?$s:Oe[Le-1].end,Ne={left:Ze.left+Ye.width,top:Ze.top+Ye.height};Oe[Le]={index:Le,start:Ze,size:Ye,end:Ne,visibility:-1}}return Oe}(bt,He,Ut):_t===T.ViewMode.DualPageWithCover?function(Ve,Ue,Fe,Oe){for(var Le=[],Ye=0,Ze=0,Ne=Vi,Te=0;Te<Ve;Te++){var tn=Te===0?{height:Oe===T.ScrollMode.Page?Math.max(Ue.height,Fe[Te].height):Fe[Te].height,width:Oe===T.ScrollMode.Page?Math.max(Ue.width,Fe[Te].width):Fe[Te].width}:{height:Oe===T.ScrollMode.Page?Math.max(Ue.height,Fe[Te].height):Fe[Te].height,width:Math.max(Ue.width/2,Fe[Te].width)};Oe===T.ScrollMode.Page?Ne=Te===0?Vi:{left:Te%2==0?tn.width:0,top:Math.floor((Te-1)/2)*tn.height+Le[0].end.top}:Te===0?(Ne=Vi,Ye=Fe[0].height,Ze=0):Te%2==1?(Ne={left:0,top:Ye+=Ze},Ze=Te===Ve-1?Fe[Te].height:Math.max(Fe[Te].height,Fe[Te+1].height)):Ne={left:Le[Te-1].end.left,top:Ye};var rn={left:Ne.left+tn.width,top:Ne.top+tn.height};Le[Te]={index:Te,start:Ne,size:tn,end:rn,visibility:-1}}return Le}(bt,He,Ut,Lt):_t===T.ViewMode.DualPage?function(Ve,Ue,Fe,Oe){for(var Le=[],Ye=0,Ze=0,Ne=Xs,Te=0;Te<Ve;Te++){var tn={height:Oe===T.ScrollMode.Page?Math.max(Ue.height,Fe[Te].height):Fe[Te].height,width:Math.max(Ue.width/2,Fe[Te].width)};Oe===T.ScrollMode.Page?Ne={left:Te%2==0?0:tn.width,top:Math.floor(Te/2)*tn.height}:Te%2==0?(Ne={left:0,top:Ye+=Ze},Ze=Te===Ve-1?Fe[Te].height:Math.max(Fe[Te].height,Fe[Te+1].height)):Ne={left:Le[Te-1].end.left,top:Ye};var rn={left:Ne.left+tn.width,top:Ne.top+tn.height};Le[Te]={index:Te,start:Ne,size:tn,end:rn,visibility:-1}}return Le}(bt,He,Ut,Lt):function(Ve,Ue,Fe,Oe){for(var Le=[],Ye=0,Ze={left:0,top:0},Ne=0,Te=qs,tn=0;tn<Ve;tn++){var rn=Fe[tn];if(tn===0)Ye=rn.width,Ze={left:0,top:0},Ne=rn.height;else switch(Oe){case T.ScrollMode.Wrapped:(Ye+=rn.width)<Ue.width?(Te={left:Le[tn-1].end.left,top:Ze.top},Ne=Math.max(Ne,rn.height)):(Ye=rn.width,Ze={left:(Te={left:Ze.left,top:Ze.top+Ne}).left,top:Te.top},Ne=rn.height);break;case T.ScrollMode.Horizontal:case T.ScrollMode.Vertical:default:Te=Le[tn-1].end}var An={left:Te.left+rn.width,top:Te.top+rn.height};Le[tn]={index:tn,start:Te,size:rn,end:An,visibility:-1}}return Le}(bt,He,Ut,Lt)},[Lt,Ut,_t,He]),dn=hn[bt-1]?{height:hn[bt-1].end.top,width:hn[bt-1].end.left}:Ys;qe.current.measurements=hn;var gn=_.useMemo(function(){var Ve=function(tn,rn,An,bn){var On=0;switch(tn){case we.Horizontal:On=bn.left;break;case we.Vertical:default:On=bn.top}var Hn=rn.length-1,en=function(vn,Kn,si,Pi){for(;vn<=Kn;){var ei=(vn+Kn)/2|0,fi=Pi(ei);if(fi<si)vn=ei+1;else{if(!(fi>si))return ei;Kn=ei-1}}return vn>0?vn-1:0}(0,Hn,On,function(vn){switch(tn){case we.Horizontal:return rn[vn].start.left;case we.Both:case we.Vertical:default:return rn[vn].start.top}});if(tn===we.Both)for(var Nn=rn[en].start.top;en-1>=0&&rn[en-1].start.top===Nn&&rn[en-1].start.left>=bn.left;)en--;for(var Sn=en;Sn<=Hn;){var wn={top:rn[Sn].start.top-bn.top,left:rn[Sn].start.left-bn.left},Ln={height:An.height-wn.top,width:An.width-wn.left};if(tn===we.Horizontal&&Ln.width<0||tn===we.Vertical&&Ln.height<0||tn===we.Both&&(Ln.width<0||Ln.height<0))break;Sn++}return{start:en,end:Sn}}(me,hn,He,nn),Ue=Ve.start,Fe=Ve.end,Oe=We.slice(di(0,bt,Ue),di(0,bt,Fe)),Le=Ue+Oe.reduce(function(tn,rn,An,bn){return rn>bn[tn]?An:tn},0),Ye=Le=di(0,bt-1,Le),Ze=Ct({endPage:Fe,numPages:bt,startPage:Ue}),Ne=Ze.startPage,Te=Ze.endPage;switch(Ne=Math.max(Ne,0),Te=Math.min(Te,bt-1),_t){case T.ViewMode.DualPageWithCover:Le>0&&(Ye=Le%2==1?Le:Le-1),Ne=Ne===0?0:Ne%2==1?Ne:Ne-1,bt-(Te=Te%2==1?Te-1:Te)<=2&&(Te=bt-1);break;case T.ViewMode.DualPage:Ye=Le%2==0?Le:Le-1,Ne=Ne%2==0?Ne:Ne-1,Te=Te%2==1?Te:Te-1;break;case T.ViewMode.SinglePage:default:Ye=Le}return{startPage:Ne,endPage:Te,maxVisbilityIndex:Ye}},[hn,He,nn,_t,We]),Rn=gn.startPage,En=gn.endPage,Mn=gn.maxVisbilityIndex,Pn=_.useMemo(function(){for(var Ve=[],Ue=function(Oe){var Le=hn[Oe],Ye=N(N({},Le),{visibility:We[Oe]!==void 0?We[Oe]:-1,measureRef:function(Ze){Ze&&(Ze.setAttribute(Hr,"".concat(Oe)),cn.observe(Ze))}});Ve.push(Ye)},Fe=Rn;Fe<=En;Fe++)Ue(Fe);return Ve},[Rn,En,We,hn]),xn=_.useCallback(function(Ve,Ue){var Fe=qe.current.measurements[di(0,bt-1,Ve)],Oe=oe.current===T.ScrollMode.Page?jr:Ue;return Fe?Be({left:Oe.left+Fe.start.left,top:Oe.top+Fe.start.top},H):Promise.resolve()},[Be,H]),kn=_.useCallback(function(Ve,Ue){var Fe=qe.current.measurements,Oe=Fe[Ve].start,Le=Fe.find(function(Ze){return Ze.start.top-Oe.top>1e-12});if(!Le)return Promise.resolve();var Ye=Le.index;switch(be.current){case T.ViewMode.DualPage:Ye=Ye%2==0?Ye:Ye+1;break;case T.ViewMode.DualPageWithCover:Ye=Ye%2==1?Ye:Ye+1}return xn(Ye,Ue)},[]),Tn=_.useCallback(function(Ve,Ue){for(var Fe=qe.current.measurements,Oe=Fe[Ve].start,Le=Ve,Ye=!1,Ze=bt-1;Ze>=0;Ze--)if(Oe.top-Fe[Ze].start.top>1e-12){Ye=!0,Le=Fe[Ze].index;break}if(!Ye)return Promise.resolve();switch(be.current){case T.ViewMode.DualPage:Le=Le%2==0?Le:Le-1;break;case T.ViewMode.DualPageWithCover:Le=Le%2==0?Le-1:Le}return Le===Ve&&(Le=Ve-1),xn(Le,Ue)},[]),Bn=_.useCallback(function(Ve,Ue){if(be.current===T.ViewMode.DualPageWithCover||be.current===T.ViewMode.DualPage)return kn(Ve,Ue);switch(oe.current){case T.ScrollMode.Wrapped:return kn(Ve,Ue);case T.ScrollMode.Horizontal:case T.ScrollMode.Vertical:default:return xn(Ve+1,Ue)}},[]),Xn=_.useCallback(function(Ve,Ue){if(be.current===T.ViewMode.DualPageWithCover||be.current===T.ViewMode.DualPage)return Tn(Ve,Ue);switch(oe.current){case T.ScrollMode.Wrapped:return Tn(Ve,Ue);case T.ScrollMode.Horizontal:case T.ScrollMode.Vertical:default:return xn(Ve-1,Ue)}},[]),Vn=_.useCallback(function(){return function(Ve,Ue){switch(Ue){case T.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Ve.width,"px")};case T.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Ve.height,"px"),width:"100%"}}}(dn,oe.current)},[dn]),In=_.useCallback(function(Ve){return function(Ue,Fe,Oe){return Oe!==T.ScrollMode.Page?{}:{height:"".concat(Fe.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ue.start.top,"px)")}}(Ve,He,oe.current)},[He]),jn=_.useCallback(function(Ve){return function(Ue,Fe,Oe,Le,Ye){var Ze,Ne,Te,tn,rn,An,bn,On=Fe?"right":"left",Hn=Fe?-1:1,en=Oe.length,Nn=Ue.start.left*Hn,Sn=Ue.size,wn=Sn.height,Ln=Sn.width;if(Le===T.ViewMode.DualPageWithCover){var vn=Ye===T.ScrollMode.Page?0:Ue.start.top;return Ue.index===0||en%2==0&&Ue.index===en-1?((Ze={height:"".concat(wn,"px"),minWidth:"".concat(Gs(Oe,Le),"px"),width:"100%"})[On]=0,Ze.position="absolute",Ze.top=0,Ze.transform="translate(".concat(Nn,"px, ").concat(vn,"px)"),Ze):((Ne={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,Ne.position="absolute",Ne.top=0,Ne.transform="translate(".concat(Nn,"px, ").concat(vn,"px)"),Ne)}if(Le===T.ViewMode.DualPage)return(Te={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,Te.position="absolute",Te.top=0,Te.transform="translate(".concat(Nn,"px, ").concat(Ye===T.ScrollMode.Page?0:Ue.start.top,"px)"),Te;switch(Ye){case T.ScrollMode.Horizontal:return(tn={height:"100%",width:"".concat(Ln,"px")})[On]=0,tn.position="absolute",tn.top=0,tn.transform="translateX(".concat(Nn,"px)"),tn;case T.ScrollMode.Page:return(rn={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,rn.position="absolute",rn.top=0,rn;case T.ScrollMode.Wrapped:return(An={height:"".concat(wn,"px"),width:"".concat(Ln,"px")})[On]=0,An.position="absolute",An.top=0,An.transform="translate(".concat(Nn,"px, ").concat(Ue.start.top,"px)"),An;case T.ScrollMode.Vertical:default:return(bn={height:"".concat(wn,"px"),width:"100%"})[On]=0,bn.position="absolute",bn.top=0,bn.transform="translateY(".concat(Ue.start.top,"px)"),bn}}(Ve,pt,Ut,be.current,oe.current)},[pt,Ut]),$n=_.useCallback(function(Ve,Ue){var Fe=qe.current,Oe=Fe.measurements,Le=Fe.scrollOffset,Ye=Oe[di(0,bt-1,Ue)];if(Ye){var Ze=oe.current===T.ScrollMode.Page?{left:Ye.start.left,top:Ye.start.top}:{left:Le.left*Ve,top:Le.top*Ve};return Be(Ze,!1)}return Promise.resolve()},[]);return _.useEffect(function(){return function(){cn.disconnect()}},[]),{boundingClientRect:He,isSmoothScrolling:It,startPage:Rn,endPage:En,maxVisbilityIndex:Mn,virtualItems:Pn,getContainerStyles:Vn,getItemContainerStyles:In,getItemStyles:jn,scrollToItem:xn,scrollToNextItem:Bn,scrollToPreviousItem:Xn,zoom:$n}},Gi=function(A,H,pt,bt,St,Ct){var Ut=pt;switch(!0){case(St===T.ViewMode.DualPageWithCover&&Ct>=3):case(St===T.ViewMode.DualPage&&Ct>=3):Ut=2*pt;break;default:Ut=pt}switch(bt){case T.SpecialZoomLevel.ActualSize:return 1;case T.SpecialZoomLevel.PageFit:return Math.min((A.clientWidth-17)/Ut,(A.clientHeight-16)/H);case T.SpecialZoomLevel.PageWidth:return(A.clientWidth-17)/Ut}},Js=function(A){var H,pt,bt=A.getCurrentPage,St=(H=50,pt=_.useRef([]),_.useEffect(function(){return function(){pt.current=[]}},[]),{push:function(Bt){var It=pt.current;It.length+1>H&&It.shift(),It.push(Bt),pt.current=It},map:function(Bt){return pt.current.map(function(It){return Bt(It)})},pop:function(){var Bt=pt.current;if(Bt.length===0)return null;var It=Bt.pop();return pt.current=Bt,It}}),Ct=function(Bt){var It=_.useRef([]);return _.useEffect(function(){return function(){It.current=[]}},[]),{dequeue:function(){var ce=It.current;if(ce.length===0)return null;var le=ce.shift();return It.current=ce,le||null},enqueue:function(ce){var le=It.current;le.length+1>Bt&&le.pop(),It.current=[ce].concat(le)},map:function(ce){return It.current.map(function(le){return ce(le)})}}}(50),Ut=function(){var Bt=Ct.dequeue();return Bt&&St.push(Bt),Bt&&Bt.pageIndex===bt()?Ut():Bt},Lt=function(){var Bt=St.pop();return Bt&&Ct.enqueue(Bt),Bt&&Bt.pageIndex===bt()?Lt():Bt},_t=_.useCallback(function(Bt){St.push(Bt)},[]);return{getNextDestination:Ut,getPreviousDestination:Lt,markVisitedDestination:_t}},Ur=function(A){var H=[];return A.map(function(pt){H=H.concat(pt).concat(function(bt){var St=[];return bt.items&&bt.items.length>0&&(St=St.concat(Ur(bt.items))),St}(pt))}),H},zr={capture:!1,passive:!0},Qs={height:0,width:0},qi={height:0,width:0},ta=function(A){var H=A.getCurrentPage,pt=A.getCurrentScrollMode,bt=A.jumpToPage,St=A.targetRef,Ct=_.useState(T.FullScreenMode.Normal),Ut=Ct[0],Lt=Ct[1],_t=function(){var We=_.useState(Qs),un=We[0],cn=We[1],hn=Gt(function(){cn({height:window.innerHeight,width:window.innerWidth})},100);return V(function(){return window.addEventListener("resize",hn,zr),function(){window.removeEventListener("resize",hn,zr)}},[]),un}(),Bt=_.useState(qi),It=Bt[0],ce=Bt[1],le=_.useRef(qi),oe=_.useRef(H()),be=_.useRef(qi),me=_.useState(St.current),fe=me[0],nn=me[1],Be=_.useRef();V(function(){St.current!==fe&&nn(St.current)},[]),V(function(){if(fe){var We=new ResizeObserver(function(un){un.forEach(function(cn){var hn=cn.target.getBoundingClientRect(),dn=hn.height,gn=hn.width;ce({height:dn,width:gn})})});return We.observe(fe),function(){We.unobserve(fe),We.disconnect()}}},[fe]);var He=_.useCallback(function(We){var un=lt();return un&&un!==We?(Lt(T.FullScreenMode.Normal),K(un)):Promise.resolve()},[]),qe=_.useCallback(function(We){We&&F()&&(nn(We),He(We).then(function(){Be.current=We,Lt(T.FullScreenMode.Entering),function(un){B&&un[ht.RequestFullScreen]()}(We)}))},[]),Me=_.useCallback(function(){lt()&&(Lt(T.FullScreenMode.Exitting),K(document))},[]),$e=_.useCallback(function(){fe&&lt()!==fe&&Lt(T.FullScreenMode.Exitting)},[fe]);return _.useEffect(function(){switch(Ut){case T.FullScreenMode.Entering:Be.current&&(Be.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),oe.current=H(),le.current={height:window.innerHeight,width:window.innerWidth};break;case T.FullScreenMode.Entered:pt()===T.ScrollMode.Page?bt(oe.current).then(function(){Lt(T.FullScreenMode.EnteredCompletely)}):Lt(T.FullScreenMode.EnteredCompletely);break;case T.FullScreenMode.Exitting:Be.current&&(Be.current.style.backgroundColor="",Be.current=null),oe.current=H();break;case T.FullScreenMode.Exited:Lt(T.FullScreenMode.Normal),pt()===T.ScrollMode.Page&&bt(oe.current)}},[Ut]),_.useEffect(function(){if(Ut!==T.FullScreenMode.Normal)return Ut===T.FullScreenMode.Entering&&_t.height===It.height&&_t.width===It.width&&_t.height>0&&_t.width>0&&(be.current.height===0||_t.height==be.current.height)?(be.current={height:window.innerHeight,width:window.innerWidth},void Lt(T.FullScreenMode.Entered)):void(Ut===T.FullScreenMode.Exitting&&le.current.height===_t.height&&le.current.width===_t.width&&_t.height>0&&_t.width>0&&Lt(T.FullScreenMode.Exited))},[Ut,_t,It]),_.useEffect(function(){var We;return We=$e,B&&document.addEventListener(ht.FullScreenChange,We),function(){(function(un){B&&document.removeEventListener(ht.FullScreenChange,un)})($e)}},[fe]),{enterFullScreenMode:qe,exitFullScreenMode:Me,fullScreenMode:Ut}},ea={buildPageStyles:function(){return{}},transformSize:function(A){return A.size}},ri={left:0,top:0},na=function(A){var H=A.currentFile,pt=A.defaultScale,bt=A.doc,St=A.enableSmoothScroll,Ct=A.initialPage,Ut=A.initialRotation,Lt=A.initialScale,_t=A.pageLayout,Bt=A.pageSizes,It=A.plugins,ce=A.renderPage,le=A.scrollMode,oe=A.setRenderRange,be=A.viewMode,me=A.viewerState,fe=A.onDocumentLoad,nn=A.onOpenFile,Be=A.onPageChange,He=A.onRotate,qe=A.onRotatePage,Me=A.onZoom,$e=bt.numPages,We=bt.loadingTask.docId,un=_.useContext(Ot).l10n,cn=_.useContext(ct),hn=cn.direction===T.TextDirection.RightToLeft,dn=_.useRef(),gn=_.useRef(),Rn=_.useState(Ct),En=Rn[0],Mn=Rn[1],Pn=_.useRef(null),xn=Js({getCurrentPage:function(){return en.current.pageIndex}}),kn=_.useState(Ut),Tn=kn[0],Bn=kn[1],Xn=Mt(Tn),Vn=_.useState(!1),In=Vn[0],jn=Vn[1],$n=_.useState(new Map),Ve=$n[0],Ue=$n[1],Fe=_.useState(le),Oe=Fe[0],Le=Fe[1],Ye=Mt(Oe),Ze=_.useState(be),Ne=Ze[0],Te=Ze[1],tn=Mt(Ne),rn=function(de){var Je=Et(),an=_.useState([]),mn=an[0],fn=an[1];return _.useEffect(function(){de.getOutline().then(function(on){if(Je.current&&on!==null){var Dn=Ur(on);fn(Dn)}})},[]),mn}(bt),An=_.useState(Lt),bn=An[0],On=An[1],Hn=Mt(bn),en=_.useRef(me),Nn=_.useRef(typeof pt=="string"?pt:null),Sn=_.useRef(-1),wn=_.useRef(-1),Ln=_.useRef(Ct),vn=ta({getCurrentPage:function(){return en.current.pageIndex},getCurrentScrollMode:function(){return en.current.scrollMode},jumpToPage:function(de){return Jn(de)},targetRef:gn}),Kn=_.useState(-1),si=Kn[0],Pi=Kn[1],ei=_.useState(0),fi=ei[0],la=ei[1],Un=it({doc:bt});_.useEffect(function(){return function(){he.clear(),ze.clear()}},[We]);var qr=_.useMemo(function(){return Object.assign({},ea,_t)},[]),ca=_.useMemo(function(){return Array($e).fill(0).map(function(de,Je){var an=[Bt[Je].pageHeight,Bt[Je].pageWidth],mn=Math.abs(Tn)%180==0?{height:an[0],width:an[1]}:{height:an[1],width:an[0]},fn={height:mn.height*bn,width:mn.width*bn};return qr.transformSize({numPages:$e,pageIndex:Je,size:fn})})},[Tn,bn]),_n=Zs({enableSmoothScroll:St,isRtl:hn,numberOfItems:$e,parentRef:gn,scrollMode:Oe,setRenderRange:oe,sizes:ca,viewMode:Ne}),ua=Gt(function(){!Nn.current||en.current.fullScreenMode!==T.FullScreenMode.Normal||Ct>0&&Ln.current===Ct||ni(Nn.current)},200);(function(de){var Je=de.targetRef,an=de.onResize;V(function(){var mn=new ResizeObserver(function(on){on.forEach(function(Dn){an(Dn.target)})}),fn=Je.current;if(fn)return mn.observe(fn),function(){mn.unobserve(fn)}},[])})({targetRef:gn,onResize:ua});var Zn=function(de){var Je=de;It.forEach(function(an){an.onViewerStateChange&&(Je=an.onViewerStateChange(Je))}),en.current=Je},ha=function(){return gn.current},da=function(){return en.current},fa=_.useCallback(function(de){xn.markVisitedDestination(de)},[]),Yi=_.useCallback(function(de){var Je=de.pageIndex,an=de.bottomOffset,mn=de.leftOffset,fn=de.scaleTo,on=gn.current,Dn=en.current;return on&&Dn?new Promise(function(Qn,er){Ae(bt,Je).then(function(Ti){var ti=Ti.getViewport({scale:1}),xi=0,ts=(typeof an=="function"?an(ti.width,ti.height):an)||0,ki=(typeof mn=="function"?mn(ti.width,ti.height):mn)||0,ai=Dn.scale;switch(fn){case T.SpecialZoomLevel.PageFit:xi=0,ki=0,ni(T.SpecialZoomLevel.PageFit);break;case T.SpecialZoomLevel.PageWidth:ai=Gi(on,Bt[Je].pageHeight,Bt[Je].pageWidth,T.SpecialZoomLevel.PageWidth,be,$e),xi=(ti.height-ts)*ai,ki*=ai,ni(ai);break;default:xi=(ti.height-ts)*ai,ki*=ai}switch(Dn.scrollMode){case T.ScrollMode.Horizontal:_n.scrollToItem(Je,{left:ki,top:0}).then(function(){Qn()});break;case T.ScrollMode.Vertical:default:_n.scrollToItem(Je,{left:0,top:xi}).then(function(){Qn()})}})}):Promise.resolve()},[]),Xr=_.useCallback(function(de){return xn.markVisitedDestination(de),Yi(de)},[]),pa=_.useCallback(function(){var de=xn.getNextDestination();return de?Yi(de):Promise.resolve()},[]),ga=_.useCallback(function(){var de=xn.getPreviousDestination();return de?Yi(de):Promise.resolve()},[]),ma=_.useCallback(function(){return _n.scrollToNextItem(en.current.pageIndex,ri)},[]),Jn=_.useCallback(function(de){return 0<=de&&de<$e?_n.scrollToItem(de,ri):Promise.resolve()},[]),va=_.useCallback(function(){return _n.scrollToPreviousItem(en.current.pageIndex,ri)},[]),$r=_.useCallback(function(de){var Je,an;(Je=de.name,an=Je.split(/\./).pop(),an?an.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(mn){var fn=new FileReader;fn.readAsArrayBuffer(de),fn.onload=function(){var on=new Uint8Array(fn.result);mn(on)}}).then(function(mn){nn(de.name,mn)})},[nn]),Yr=_.useCallback(function(de){var Je=de===T.RotateDirection.Backward?-90:90,an=en.current.rotation,mn=an===360||an===-360?Je:an+Je;Un.markNotRendered(),Bn(mn),Zn(N(N({},en.current),{rotation:mn})),He({direction:de,doc:bt,rotation:mn})},[]),Ki=_.useCallback(function(de,Je){var an=Je===T.RotateDirection.Backward?-90:90,mn=en.current.pagesRotation,fn=(mn.has(de)?mn.get(de):Ut)+an,on=mn.set(de,fn);Ue(on),jn(function(Dn){return!Dn}),Zn(N(N({},en.current),{pagesRotation:on,rotatedPage:de})),qe({direction:Je,doc:bt,pageIndex:de,rotation:fn}),Un.markRendering(de),Pi(de)},[]),Kr=_.useCallback(function(de){Zn(N(N({},en.current),{scrollMode:de})),Le(de)},[]),Zr=_.useCallback(function(de){Zn(N(N({},en.current),{viewMode:de})),Te(de)},[]),ni=_.useCallback(function(de){var Je=gn.current,an=en.current.pageIndex;if(!(an<0||an>=$e)){var mn=Bt[an].pageHeight,fn=Bt[an].pageWidth,on=Je?typeof de=="string"?Gi(Je,mn,fn,de,en.current.viewMode,$e):de:1;Nn.current=typeof de=="string"?de:null,on!==en.current.scale&&(la(function(Dn){return Dn+1}),Un.markNotRendered(),On(on),Me({doc:bt,scale:on}),Zn(N(N({},en.current),{scale:on})))}},[]),ba=_.useCallback(function(de){vn.enterFullScreenMode(de)},[]),_a=_.useCallback(function(){vn.exitFullScreenMode()},[]);_.useEffect(function(){Zn(N(N({},en.current),{fullScreenMode:vn.fullScreenMode}))},[vn.fullScreenMode]),_.useEffect(function(){var de={enterFullScreenMode:ba,exitFullScreenMode:_a,getPagesContainer:ha,getViewerState:da,jumpToDestination:Xr,jumpToNextDestination:pa,jumpToPreviousDestination:ga,jumpToNextPage:ma,jumpToPreviousPage:va,jumpToPage:Jn,openFile:$r,rotate:Yr,rotatePage:Ki,setViewerState:Zn,switchScrollMode:Kr,switchViewMode:Zr,zoom:ni};return It.forEach(function(Je){Je.install&&Je.install(de)}),function(){It.forEach(function(Je){Je.uninstall&&Je.uninstall(de)})}},[We]),_.useEffect(function(){fe({doc:bt,file:H}),It.forEach(function(de){de.onDocumentLoad&&de.onDocumentLoad({doc:bt,file:H})})},[We]);var Zi,Ji,Qi,Jr=_n.boundingClientRect;Zi=function(){Ct&&Jn(Ct)},Ji=Jr.height>0&&Jr.width>0,Qi=_.useRef(!1),V(function(){Ji&&!Qi.current&&(Qi.current=!0,Zi())},[Zi,Ji]),V(function(){var de=en.current.pageIndex;de>-1&&Ye!==Oe&&_n.scrollToItem(de,ri).then(function(){vn.fullScreenMode===T.FullScreenMode.EnteredCompletely&&(St||Un.markNotRendered(),Sn.current=-1)})},[Oe]),V(function(){var de=en.current.pageIndex;de>-1&&Xn!==Tn&&_n.scrollToItem(de,ri)},[Tn]),V(function(){Hn!=0&&Hn!=en.current.scale&&_n.zoom(en.current.scale/Hn,en.current.pageIndex).then(function(){vn.fullScreenMode===T.FullScreenMode.EnteredCompletely&&(wn.current=-1)})},[bn]),V(function(){if(tn!==en.current.viewMode){var de=_n.startPage,Je=_n.endPage,an=_n.virtualItems;Un.markNotRendered(),Un.setRange(de,Je);for(var mn=function(on){var Dn=an.find(function(Qn){return Qn.index===on});Dn&&Un.setVisibility(on,Dn.visibility)},fn=de;fn<=Je;fn++)mn(fn);tr()}},[Ne]),V(function(){var de=en.current.pageIndex;de>-1&&tn!==Ne&&_n.scrollToItem(de,ri)},[Ne]),V(function(){var de=en.current.pageIndex;de>0&&de===Ct&&Ln.current===Ct&&Nn.current&&(Ln.current=-1,ni(Nn.current))},[En]),_.useEffect(function(){_n.isSmoothScrolling||Pn.current!==null&&Pn.current===En||(Pn.current=En,Be({currentPage:En,doc:bt}))},[En,_n.isSmoothScrolling]),_.useEffect(function(){vn.fullScreenMode===T.FullScreenMode.Entering&&en.current.scrollMode===T.ScrollMode.Page&&(Sn.current=en.current.pageIndex),vn.fullScreenMode===T.FullScreenMode.EnteredCompletely&&en.current.scrollMode===T.ScrollMode.Page&&St&&(Sn.current=-1),vn.fullScreenMode===T.FullScreenMode.EnteredCompletely&&Nn.current&&(wn.current=en.current.pageIndex,ni(Nn.current))},[vn.fullScreenMode]),_.useEffect(function(){if(vn.fullScreenMode!==T.FullScreenMode.Entering&&vn.fullScreenMode!==T.FullScreenMode.Exitting&&!_n.isSmoothScrolling){var de=_n.startPage,Je=_n.endPage,an=_n.maxVisbilityIndex,mn=_n.virtualItems,fn=an,on=vn.fullScreenMode===T.FullScreenMode.Entered||vn.fullScreenMode===T.FullScreenMode.EnteredCompletely;if(!(on&&fn!==Sn.current&&Sn.current>-1||on&&fn!==wn.current&&wn.current>-1)){Mn(fn),Zn(N(N({},en.current),{pageIndex:fn})),Un.setRange(de,Je);for(var Dn=function(er){var Ti=mn.find(function(ti){return ti.index===er});Ti&&Un.setVisibility(er,Ti.visibility)},Qn=de;Qn<=Je;Qn++)Dn(Qn);tr()}}},[_n.startPage,_n.endPage,_n.isSmoothScrolling,_n.maxVisbilityIndex,vn.fullScreenMode,In,Tn,bn]);var ya=_.useCallback(function(de){Un.markRendered(de),tr()},[fi]),tr=function(){var de=Un.getHighestPriorityPage();de>-1&&Un.isInRange(de)&&(Un.markRendering(de),Pi(de))},Aa=function(de){var Je=En-1,an=En+1;switch(de){case"FirstPage":Jn(0);break;case"LastPage":Jn($e-1);break;case"NextPage":an<$e&&Jn(an);break;case"PrevPage":Je>=0&&Jn(Je)}},Sa=_.useCallback(function(){var de=_n.virtualItems,Je=[];switch(Ne){case T.ViewMode.DualPage:Je=kt(de,2);break;case T.ViewMode.DualPageWithCover:de.length&&(Je=de[0].index===0?[[de[0]]].concat(kt(de.slice(1),2)):kt(de,2));break;case T.ViewMode.SinglePage:default:Je=kt(de,1)}var an=un&&un.core?un.core.pageLabel:"Page {{pageIndex}}",mn={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:dn,style:{height:"100%"}},children:_.createElement(_.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:X({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Oe===T.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":hn,"rpv-core__inner-pages--single":Oe===T.ScrollMode.Page,"rpv-core__inner-pages--vertical":Oe===T.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Oe===T.ScrollMode.Wrapped}),ref:gn,style:{height:"100%",position:"relative"}},children:_.createElement("div",{"data-testid":"core__inner-current-page-".concat(En),style:Object.assign({"--scale-factor":bn},_n.getContainerStyles())},Je.map(function(fn){return _.createElement("div",{className:X({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Oe===T.ScrollMode.Page}),style:_n.getItemContainerStyles(fn[0]),key:"".concat(fn[0].index,"-").concat(Ne)},fn.map(function(on){var Dn=Ne===T.ViewMode.DualPageWithCover&&(on.index===0||$e%2==0&&on.index===$e-1);return _.createElement("div",{"aria-label":an.replace("{{pageIndex}}","".concat(on.index+1)),className:X({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Ne===T.ViewMode.DualPage&&on.index%2==0,"rpv-core__inner-page--dual-odd":Ne===T.ViewMode.DualPage&&on.index%2==1,"rpv-core__inner-page--dual-cover":Dn,"rpv-core__inner-page--dual-cover-even":Ne===T.ViewMode.DualPageWithCover&&!Dn&&on.index%2==0,"rpv-core__inner-page--dual-cover-odd":Ne===T.ViewMode.DualPageWithCover&&!Dn&&on.index%2==1,"rpv-core__inner-page--single":Ne===T.ViewMode.SinglePage&&Oe===T.ScrollMode.Page}),role:"region",key:"".concat(on.index,"-").concat(Ne),style:Object.assign({},_n.getItemStyles(on),qr.buildPageStyles({numPages:$e,pageIndex:on.index,scrollMode:Oe,viewMode:Ne}))},_.createElement(Us,{doc:bt,measureRef:on.measureRef,outlines:rn,pageIndex:on.index,pageRotation:Ve.has(on.index)?Ve.get(on.index):0,pageSize:Bt[on.index],plugins:It,renderPage:ce,renderQueueKey:fi,rotation:Tn,scale:bn,shouldRender:si===on.index,viewMode:Ne,onExecuteNamedAction:Aa,onJumpFromLinkAnnotation:fa,onJumpToDest:Xr,onRenderCompleted:ya,onRotatePage:Ki}))}))}))}};return It.forEach(function(fn){fn.renderViewer&&(mn=fn.renderViewer({containerRef:dn,doc:bt,pagesContainerRef:gn,pagesRotation:Ve,pageSizes:Bt,rotation:Tn,slot:mn,themeContext:cn,jumpToPage:Jn,openFile:$r,rotate:Yr,rotatePage:Ki,switchScrollMode:Kr,switchViewMode:Zr,zoom:ni}))}),mn},[It,_n]),Qr=_.useCallback(function(de){return _.createElement("div",N({},de.attrs,{style:de.attrs&&de.attrs.style?de.attrs.style:{}}),de.children,de.subSlot&&Qr(de.subSlot))},[]);return Qr(Sa())},Wr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ia=function(A){var H=A.defaultScale,pt=A.doc,bt=A.render,St=A.scrollMode,Ct=A.viewMode,Ut=_.useRef(),Lt=_.useState({pageSizes:[],scale:0}),_t=Lt[0],Bt=Lt[1];return _.useLayoutEffect(function(){var It=Array(pt.numPages).fill(0).map(function(ce,le){return new Promise(function(oe,be){Ae(pt,le).then(function(me){var fe=me.getViewport({scale:1});oe({pageHeight:fe.height,pageWidth:fe.width,rotation:fe.rotation})})})});Promise.all(It).then(function(ce){var le=Ut.current;if(le&&ce.length!==0){var oe=ce[0].pageWidth,be=ce[0].pageHeight,me=le.parentElement,fe=(me.clientWidth-45)/oe,nn=(me.clientHeight-45)/be,Be=fe;switch(St){case T.ScrollMode.Horizontal:Be=Math.min(fe,nn);break;case T.ScrollMode.Vertical:default:Be=fe}var He,qe,Me=H?typeof H=="string"?Gi(me,be,oe,H,Ct,pt.numPages):H:(He=Be,(qe=Wr.findIndex(function($e){return $e>=He}))===-1||qe===0?He:Wr[qe-1]);Bt({pageSizes:ce,scale:Me})}})},[pt.loadingTask.docId]),_t.pageSizes.length===0||_t.scale===0?_.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Ut},_.createElement(dt,null)):bt(_t.pageSizes,_t.scale)},Ci=function(){},Xi=function(A){function H(pt,bt){var St=A.call(this)||this;return St.verifyPassword=pt,St.passwordStatus=bt,St}return mt(H,A),H}(Ci),ra=function(A){var H=A.passwordStatus,pt=A.renderProtectedView,bt=A.verifyPassword,St=A.onDocumentAskPassword,Ct=_.useContext(Ot).l10n,Ut=_.useState(""),Lt=Ut[0],_t=Ut[1],Bt=_.useContext(ct).direction===T.TextDirection.RightToLeft,It=function(){return bt(Lt)};return _.useEffect(function(){St&&St({verifyPassword:bt})},[]),pt?pt({passwordStatus:H,verifyPassword:bt}):_.createElement("div",{className:"rpv-core__asking-password-wrapper"},_.createElement("div",{className:X({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Bt})},_.createElement("div",{className:"rpv-core__asking-password-message"},H===T.PasswordStatus.RequiredPassword&&Ct.core.askingPassword.requirePasswordToOpen,H===T.PasswordStatus.WrongPassword&&Ct.core.wrongPassword.tryAgain),_.createElement("div",{className:"rpv-core__asking-password-body"},_.createElement("div",{className:X({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Bt,"rpv-core__asking-password-input--rtl":Bt})},_.createElement(J,{testId:"core__asking-password-input",type:"password",value:Lt,onChange:_t,onKeyDown:function(ce){ce.key==="Enter"&&It()}})),_.createElement(Y,{onClick:It},Ct.core.askingPassword.submit))))},Vr=function(A){function H(pt){var bt=A.call(this)||this;return bt.doc=pt,bt}return mt(H,A),H}(Ci),Gr=function(A){function H(pt){var bt=A.call(this)||this;return bt.error=pt,bt}return mt(H,A),H}(Ci),$i=function(A){function H(pt){var bt=A.call(this)||this;return bt.percentages=pt,bt}return mt(H,A),H}(Ci),sa=function(A){var H=A.characterMap,pt=A.file,bt=A.httpHeaders,St=A.render,Ct=A.renderError,Ut=A.renderLoader,Lt=A.renderProtectedView,_t=A.transformGetDocumentParams,Bt=A.withCredentials,It=A.onDocumentAskPassword,ce=_.useContext(ct).direction===T.TextDirection.RightToLeft,le=_.useState(new $i(0)),oe=le[0],be=le[1],me=_.useRef(""),fe=Et();return _.useEffect(function(){me.current="",be(new $i(0));var nn=new vt.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Be=Object.assign({httpHeaders:bt,withCredentials:Bt,worker:nn},typeof pt=="string"?{url:pt}:{data:pt},H?{cMapUrl:H.url,cMapPacked:H.isCompressed}:{}),He=_t?_t(Be):Be,qe=vt.getDocument(He);return qe.onPassword=function(Me,$e){switch($e){case vt.PasswordResponses.NEED_PASSWORD:fe.current&&be(new Xi(Me,T.PasswordStatus.RequiredPassword));break;case vt.PasswordResponses.INCORRECT_PASSWORD:fe.current&&be(new Xi(Me,T.PasswordStatus.WrongPassword))}},qe.onProgress=function(Me){var $e=Me.total>0?Math.min(100,100*Me.loaded/Me.total):100;fe.current&&me.current===""&&be(new $i($e))},qe.promise.then(function(Me){me.current=Me.loadingTask.docId,fe.current&&be(new Vr(Me))},function(Me){return fe.current&&!nn.destroyed&&be(new Gr({message:Me.message||"Cannot load document",name:Me.name}))}),function(){qe.destroy(),nn.destroy()}},[pt]),oe instanceof Xi?_.createElement(ra,{passwordStatus:oe.passwordStatus,renderProtectedView:Lt,verifyPassword:oe.verifyPassword,onDocumentAskPassword:It}):oe instanceof Vr?St(oe.doc):oe instanceof Gr?Ct?Ct(oe.error):_.createElement("div",{className:X({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":ce})},_.createElement("div",{className:"rpv-core__doc-error-text"},oe.error.message)):_.createElement("div",{"data-testid":"core__doc-loading",className:X({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":ce})},Ut?Ut(oe.percentages):_.createElement(dt,null))},aa=function(A,H){var pt=_.useMemo(function(){return A==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":A},[]),bt=_.useState(pt),St=bt[0],Ct=bt[1],Ut=Mt(St);return _.useEffect(function(){if(A==="auto"){var Lt=window.matchMedia("(prefers-color-scheme: dark)"),_t=function(Bt){Ct(Bt.matches?"dark":"light")};return Lt.addEventListener("change",_t),function(){return Lt.removeEventListener("change",_t)}}},[]),_.useEffect(function(){St!==Ut&&H&&H(St)},[St]),_.useEffect(function(){A!==St&&Ct(A)},[A]),{currentTheme:St,setCurrentTheme:Ct}},oa=function(A){return{startPage:A.startPage-3,endPage:A.endPage+3}};T.Button=function(A){var H=A.children,pt=A.testId,bt=A.onClick,St=_.useContext(ct).direction===T.TextDirection.RightToLeft,Ct=pt?{"data-testid":pt}:{};return _.createElement("button",N({className:X({"rpv-core__button":!0,"rpv-core__button--rtl":St}),type:"button",onClick:bt},Ct),H)},T.Icon=q,T.LazyRender=function(A){var H=A.attrs,pt=A.children,bt=A.testId,St=_.useState(!1),Ct=St[0],Ut=St[1],Lt=bt?N(N({},H),{"data-testid":bt}):H,_t=et({once:!0,onVisibilityChanged:function(Bt){Bt.isVisible&&Ut(!0)}});return _.createElement("div",N({ref:_t},Lt),Ct&&pt)},T.LocalizationContext=Ot,T.Menu=function(A){var H=A.children,pt=_.useRef(),bt=_.useRef([]),St=_.useContext(ct).direction===T.TextDirection.RightToLeft,Ct=function(Lt){if(pt.current)switch(Lt.key){case"Tab":Lt.preventDefault();break;case"ArrowDown":Lt.preventDefault(),Ut(function(_t,Bt){return Bt+1});break;case"ArrowUp":Lt.preventDefault(),Ut(function(_t,Bt){return Bt-1});break;case"End":Lt.preventDefault(),Ut(function(_t,Bt){return _t.length-1});break;case"Home":Lt.preventDefault(),Ut(function(_t,Bt){return 0})}},Ut=function(Lt){if(pt.current){var _t=bt.current,Bt=_t.findIndex(function(ce){return ce.getAttribute("tabindex")==="0"}),It=Math.min(_t.length-1,Math.max(0,Lt(_t,Bt)));Bt>=0&&Bt<=_t.length-1&&_t[Bt].setAttribute("tabindex","-1"),_t[It].setAttribute("tabindex","0"),_t[It].focus()}};return V(function(){var Lt=pt.current;if(Lt){var _t=function(Bt){var It=[];return Bt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(ce){if(ce instanceof HTMLElement){var le=ce.parentElement;(le===Bt||window.getComputedStyle(le).display!=="none")&&It.push(ce)}}),It}(Lt);bt.current=_t}},[]),V(function(){return document.addEventListener("keydown",Ct),function(){document.removeEventListener("keydown",Ct)}},[]),_.createElement("div",{ref:pt,"aria-orientation":"vertical",className:X({"rpv-core__menu":!0,"rpv-core__menu--rtl":St}),role:"menu",tabIndex:0},H)},T.MenuDivider=function(){return _.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},T.MenuItem=function(A){var H=A.checked,pt=H!==void 0&&H,bt=A.children,St=A.icon,Ct=St===void 0?null:St,Ut=A.isDisabled,Lt=Ut!==void 0&&Ut,_t=A.testId,Bt=A.onClick,It=_.useContext(ct).direction===T.TextDirection.RightToLeft,ce=_t?{"data-testid":_t}:{};return _.createElement("button",N({className:X({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Lt,"rpv-core__menu-item--ltr":!It,"rpv-core__menu-item--rtl":It}),role:"menuitem",tabIndex:-1,type:"button",onClick:Bt},ce),_.createElement("div",{className:X({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!It,"rpv-core__menu-item-icon--rtl":It})},Ct),_.createElement("div",{className:X({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!It,"rpv-core__menu-item-label--rtl":It})},bt),_.createElement("div",{className:X({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!It,"rpv-core__menu-item-check--rtl":It})},pt&&_.createElement(U,null)))},T.MinimalButton=function(A){var H=A.ariaLabel,pt=H===void 0?"":H,bt=A.ariaKeyShortcuts,St=bt===void 0?"":bt,Ct=A.children,Ut=A.isDisabled,Lt=Ut!==void 0&&Ut,_t=A.isSelected,Bt=_t!==void 0&&_t,It=A.testId,ce=A.onClick,le=_.useContext(ct).direction===T.TextDirection.RightToLeft,oe=It?{"data-testid":It}:{};return _.createElement("button",N({"aria-label":pt},St&&{"aria-keyshortcuts":St},Lt&&{"aria-disabled":!0},{className:X({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Lt,"rpv-core__minimal-button--rtl":le,"rpv-core__minimal-button--selected":Bt}),type:"button",onClick:ce},oe),Ct)},T.Modal=function(A){var H=A.ariaControlsSuffix,pt=A.closeOnClickOutside,bt=A.closeOnEscape,St=A.content,Ct=A.isOpened,Ut=Ct!==void 0&&Ct,Lt=A.target,_t=H||"".concat(w());return _.createElement(Vt,{target:Lt?function(Bt,It){return _.createElement("div",{"aria-expanded":It?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(_t)},Lt(Bt,It))}:null,content:function(Bt){return _.createElement(ot,null,_.createElement(at,{ariaControlsSuffix:_t,closeOnClickOutside:pt,closeOnEscape:bt,onToggle:Bt},St(Bt)))},isOpened:Ut})},T.Popover=function(A){var H=A.ariaHasPopup,pt=H===void 0?"dialog":H,bt=A.ariaControlsSuffix,St=A.closeOnClickOutside,Ct=A.closeOnEscape,Ut=A.content,Lt=A.lockScroll,_t=Lt===void 0||Lt,Bt=A.offset,It=A.position,ce=A.target,le=Pt(!1),oe=le.opened,be=le.toggle,me=_.useRef(),fe=_.useMemo(function(){return bt||"".concat(w())},[]);return _.createElement("div",{ref:me,"aria-expanded":oe?"true":"false","aria-haspopup":pt,"aria-controls":"rpv-core__popver-body-".concat(fe)},ce(be,oe),oe&&_.createElement(_.Fragment,null,_t&&_.createElement(Jt,{closeOnEscape:Ct,onClose:be}),_.createElement(Ht,{ariaControlsSuffix:fe,closeOnClickOutside:St,offset:Bt,position:It,targetRef:me,onClose:be},Ut(be))))},T.PrimaryButton=Y,T.ProgressBar=function(A){var H=A.progress,pt=_.useContext(ct).direction===T.TextDirection.RightToLeft;return _.createElement("div",{className:X({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":pt})},_.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(H,"%")}},H,"%"))},T.Separator=function(){return _.createElement("div",{className:"rpv-core__separator"})},T.Spinner=dt,T.Splitter=function(A){var H=A.constrain,pt=_.useContext(ct).direction===T.TextDirection.RightToLeft,bt=_.useRef(),St=_.useRef(),Ct=_.useRef(),Ut=_.useRef(0),Lt=_.useRef(0),_t=_.useRef(0),Bt=_.useRef(0),It={capture:!0},ce=function(oe){var be=bt.current,me=St.current,fe=Ct.current;if(be&&me&&fe){var nn=Bt.current,Be=oe.clientX-Ut.current,He=_t.current+(pt?-Be:Be),qe=be.parentElement.getBoundingClientRect().width,Me=100*He/qe;if(be.classList.add("rpv-core__splitter--resizing"),H){var $e=qe-He-nn;if(!H({firstHalfPercentage:Me,firstHalfSize:He,secondHalfPercentage:100*$e/qe,secondHalfSize:$e}))return}me.style.width="".concat(Me,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),me.classList.add("rpv-core__splitter-sibling--resizing"),fe.classList.add("rpv-core__splitter-sibling--resizing")}},le=function(oe){var be=bt.current,me=St.current,fe=Ct.current;be&&me&&fe&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),be.classList.remove("rpv-core__splitter--resizing"),me.classList.remove("rpv-core__splitter-sibling--resizing"),fe.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",ce,It),document.removeEventListener("mouseup",le,It))};return _.useEffect(function(){var oe=bt.current;oe&&(Bt.current=oe.getBoundingClientRect().width,St.current=oe.previousElementSibling,Ct.current=oe.nextElementSibling)},[]),_.createElement("div",{ref:bt,className:"rpv-core__splitter",onMouseDown:function(oe){var be=St.current;be&&(Ut.current=oe.clientX,Lt.current=oe.clientY,_t.current=be.getBoundingClientRect().width,document.addEventListener("mousemove",ce,It),document.addEventListener("mouseup",le,It))}})},T.TextBox=J,T.ThemeContext=ct,T.Tooltip=function(A){var H=A.ariaControlsSuffix,pt=A.content,bt=A.offset,St=A.position,Ct=A.target,Ut=Pt(!1),Lt=Ut.opened,_t=Ut.toggle,Bt=_.useRef(),It=_.useRef(),ce=_.useMemo(function(){return H||"".concat(w())},[]);W(function(){Bt.current&&document.activeElement&&Bt.current.contains(document.activeElement)&&oe()});var le=function(){_t(T.ToggleStatus.Open)},oe=function(){_t(T.ToggleStatus.Close)};return _.createElement(_.Fragment,null,_.createElement("div",{ref:Bt,"aria-describedby":"rpv-core__tooltip-body-".concat(ce),onBlur:function(be){be.relatedTarget instanceof HTMLElement&&be.currentTarget.parentElement&&be.currentTarget.parentElement.contains(be.relatedTarget)?It.current&&(It.current.style.display="none"):oe()},onFocus:le,onMouseEnter:le,onMouseLeave:oe},Ct),Lt&&_.createElement(ae,{ariaControlsSuffix:ce,contentRef:It,offset:bt,position:St,targetRef:Bt},pt()))},T.Viewer=function(A){var H=A.characterMap,pt=A.defaultScale,bt=A.enableSmoothScroll,St=bt===void 0||bt,Ct=A.fileUrl,Ut=A.httpHeaders,Lt=Ut===void 0?{}:Ut,_t=A.initialPage,Bt=_t===void 0?0:_t,It=A.pageLayout,ce=A.initialRotation,le=ce===void 0?0:ce,oe=A.localization,be=A.plugins,me=be===void 0?[]:be,fe=A.renderError,nn=A.renderLoader,Be=A.renderPage,He=A.renderProtectedView,qe=A.scrollMode,Me=qe===void 0?T.ScrollMode.Vertical:qe,$e=A.setRenderRange,We=$e===void 0?oa:$e,un=A.transformGetDocumentParams,cn=A.theme,hn=cn===void 0?{direction:T.TextDirection.LeftToRight,theme:"light"}:cn,dn=A.viewMode,gn=dn===void 0?T.ViewMode.SinglePage:dn,Rn=A.withCredentials,En=Rn!==void 0&&Rn,Mn=A.onDocumentAskPassword,Pn=A.onDocumentLoad,xn=Pn===void 0?function(){}:Pn,kn=A.onPageChange,Tn=kn===void 0?function(){}:kn,Bn=A.onRotate,Xn=Bn===void 0?function(){}:Bn,Vn=A.onRotatePage,In=Vn===void 0?function(){}:Vn,jn=A.onSwitchTheme,$n=jn===void 0?function(){}:jn,Ve=A.onZoom,Ue=Ve===void 0?function(){}:Ve,Fe=_.useState({data:Ct,name:typeof Ct=="string"?Ct:"",shouldLoad:!1}),Oe=Fe[0],Le=Fe[1],Ye=function(Sn,wn){Le({data:wn,name:Sn,shouldLoad:!0})},Ze=_.useState(!1),Ne=Ze[0],Te=Ze[1],tn=Mt(Oe);_.useEffect(function(){var Sn,wn,Ln,vn;Sn=tn.data,vn=typeof(wn=Ct),(Ln=typeof Sn)=="string"&&vn==="string"&&Sn===wn||Ln==="object"&&vn==="object"&&Sn.length===wn.length&&Sn.every(function(Kn,si){return Kn===wn[si]})||Le({data:Ct,name:typeof Ct=="string"?Ct:"",shouldLoad:Ne})},[Ct,Ne]);var rn=et({onVisibilityChanged:function(Sn){Te(Sn.isVisible),Sn.isVisible&&Le(function(wn){return Object.assign({},wn,{shouldLoad:!0})})}}),An=typeof hn=="string"?{direction:T.TextDirection.LeftToRight,theme:hn}:hn,bn=_.useState(oe||At),On=bn[0],Hn=bn[1],en={l10n:On,setL10n:Hn},Nn=Object.assign({},{direction:An.direction},aa(An.theme||"light",$n));return _.useEffect(function(){oe&&Hn(oe)},[oe]),_.createElement(Ot.Provider,{value:en},_.createElement(ct.Provider,{value:Nn},_.createElement("div",{ref:rn,className:"rpv-core__viewer rpv-core__viewer--".concat(Nn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Oe.shouldLoad&&_.createElement(sa,{characterMap:H,file:Oe.data,httpHeaders:Lt,render:function(Sn){return _.createElement(ia,{defaultScale:pt,doc:Sn,render:function(wn,Ln){return _.createElement(na,{currentFile:{data:Oe.data,name:Oe.name},defaultScale:pt,doc:Sn,enableSmoothScroll:St,initialPage:Bt,initialRotation:le,initialScale:Ln,pageLayout:It,pageSizes:wn,plugins:me,renderPage:Be,scrollMode:Me,setRenderRange:We,viewMode:gn,viewerState:{file:Oe,fullScreenMode:T.FullScreenMode.Normal,pageIndex:-1,pageHeight:wn[0].pageHeight,pageWidth:wn[0].pageWidth,pagesRotation:new Map,rotation:le,scale:Ln,scrollMode:Me,viewMode:gn},onDocumentLoad:xn,onOpenFile:Ye,onPageChange:Tn,onRotate:Xn,onRotatePage:In,onZoom:Ue})},scrollMode:Me,viewMode:gn})},renderError:fe,renderLoader:nn,renderProtectedView:He,transformGetDocumentParams:un,withCredentials:En,onDocumentAskPassword:Mn}))))},T.Worker=function(A){var H=A.children,pt=A.workerUrl;return vt.GlobalWorkerOptions.workerSrc=pt,_.createElement(_.Fragment,null,H)},T.chunk=kt,T.classNames=X,T.createStore=function(A){var H=A||{},pt={},bt=function(Ct,Ut){var Lt;H=N(N({},H),((Lt={})[Ct]=Ut,Lt)),(pt[Ct]||[]).forEach(function(_t){return _t(H[Ct])})},St=function(Ct){return H[Ct]};return{subscribe:function(Ct,Ut){pt[Ct]=(pt[Ct]||[]).concat(Ut)},unsubscribe:function(Ct,Ut){pt[Ct]=(pt[Ct]||[]).filter(function(Lt){return Lt!==Ut})},update:function(Ct,Ut){bt(Ct,Ut)},updateCurrentValue:function(Ct,Ut){var Lt=St(Ct);Lt!==void 0&&bt(Ct,Ut(Lt))},get:function(Ct){return St(Ct)}}},T.getDestination=Re,T.getPage=Ae,T.isFullScreenEnabled=F,T.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},T.useDebounceCallback=Gt,T.useIntersectionObserver=et,T.useIsMounted=Et,T.useIsomorphicLayoutEffect=V,T.usePrevious=Mt,T.useRenderQueue=it})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$1.exports=core_min;var libExports$1=lib$1.exports,lib={exports:{}},zoom_min={},e=libExports$1;function t(T){var D=Object.create(null);return T&&Object.keys(T).forEach(function(Tt){if(Tt!=="default"){var L=Object.getOwnPropertyDescriptor(T,Tt);Object.defineProperty(D,Tt,L.get?L:{enumerable:!0,get:function(){return T[Tt]}})}}),D.default=T,Object.freeze(D)}var n=t(reactExports),o=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c=function(){return c=Object.assign||function(T){for(var D,Tt=1,L=arguments.length;Tt<L;Tt++)for(var G in D=arguments[Tt])Object.prototype.hasOwnProperty.call(D,G)&&(T[G]=D[G]);return T},c.apply(this,arguments)},a=function(T){var D=n.useState(T.get("scale")||0),Tt=D[0],L=D[1],G=function(_){L(_)};return n.useEffect(function(){return T.subscribe("scale",G),function(){T.unsubscribe("scale",G)}},[]),{scale:Tt}},u=function(T){var D=T.children,Tt=T.store;return(D||function(L){return n.createElement(n.Fragment,null,"".concat(Math.round(100*L.scale),"%"))})({scale:a(Tt).scale})},l={passive:!1},i=null,s=function(T){var D=T.pagesContainerRef,Tt=T.store,L=e.useDebounceCallback(function(_){var vt=Tt.get("zoom");vt&&vt(_)},40),G=function(_){if(_.ctrlKey){_.preventDefault();var vt=_.target.getBoundingClientRect(),$t=1-_.deltaY/100,mt=_.clientX-vt.left,st=_.clientY-vt.top,N=Tt.get("scale"),gt=(i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(mt,st).scale($t).translate(-mt,-st).scale(N);L(gt.a)}};return e.useIsomorphicLayoutEffect(function(){var _=D.current;if(_)return _.addEventListener("wheel",G,l),function(){_.removeEventListener("wheel",G)}},[]),n.createElement(n.Fragment,null)},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f=function(T){return m.find(function(D){return D>T})||T},v=function(T){var D=m.findIndex(function(Tt){return Tt>=T});return D===-1||D===0?T:m[D-1]},p=function(T){var D=T.containerRef,Tt=T.store,L=function(G){if(!G.shiftKey&&!G.altKey&&(e.isMac()?G.metaKey:G.ctrlKey)){var _=D.current;if(_&&document.activeElement&&_.contains(document.activeElement)){var vt=Tt.get("zoom");if(vt){var $t=Tt.get("scale")||1,mt=1;switch(G.key){case"-":mt=v($t);break;case"=":mt=f($t);break;case"0":mt=1;break;default:mt=$t}mt!==$t&&(G.preventDefault(),vt(mt))}}}};return n.useEffect(function(){if(D.current)return document.addEventListener("keydown",L),function(){document.removeEventListener("keydown",L)}},[D.current]),n.createElement(n.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E={left:0,top:8},d=function(T){var D=T.levels,Tt=D===void 0?z:D,L=T.scale,G=T.onZoom,_=n.useContext(e.LocalizationContext).l10n,vt=n.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,$t=_&&_.zoom?_.zoom.zoomDocument:"Zoom document";return n.createElement(e.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e.Position.BottomCenter,target:function(mt){return n.createElement(e.MinimalButton,{ariaLabel:$t,testId:"zoom__popover-target",onClick:function(){mt()}},n.createElement("span",{className:"rpv-zoom__popover-target"},n.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!vt,"rpv-zoom__popover-target-scale--rtl":vt})},Math.round(100*L),"%"),n.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(mt){return n.createElement(e.Menu,null,Object.keys(e.SpecialZoomLevel).map(function(st){var N=st;return n.createElement(e.MenuItem,{key:N,onClick:function(){mt(),G(N)}},function(gt){switch(gt){case e.SpecialZoomLevel.ActualSize:return _&&_.zoom?_.zoom.actualSize:"Actual size";case e.SpecialZoomLevel.PageFit:return _&&_.zoom?_.zoom.pageFit:"Page fit";case e.SpecialZoomLevel.PageWidth:return _&&_.zoom?_.zoom.pageWidth:"Page width"}}(N))}),n.createElement(e.MenuDivider,null),Tt.map(function(st){return n.createElement(e.MenuItem,{key:st,onClick:function(){mt(),G(st)}},"".concat(Math.round(100*st),"%"))}))},offset:E,closeOnClickOutside:!0,closeOnEscape:!0})},g=function(T){var D=T.children,Tt=T.levels,L=T.store;return(D||function(G){return n.createElement(d,{levels:Tt,scale:G.scale,onZoom:G.onZoom})})({scale:a(L).scale,onZoom:function(G){var _=L.get("zoom");_&&_(G)}})},C={left:0,top:8},h=function(T){var D=T.enableShortcuts,Tt=T.onClick,L=n.useContext(e.LocalizationContext).l10n,G=L&&L.zoom?L.zoom.zoomIn:"Zoom in",_=D?e.isMac()?"Meta+=":"Ctrl+=":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-in",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:G,testId:"zoom__in-button",onClick:Tt},n.createElement(o,null)),content:function(){return G},offset:C})},b=function(T){var D=T.children,Tt=T.enableShortcuts,L=T.store,G=a(L).scale;return(D||h)({enableShortcuts:Tt,onClick:function(){var _=L.get("zoom");_&&_(f(G))}})},k=function(T){var D=T.onClick,Tt=n.useContext(e.LocalizationContext).l10n,L=Tt&&Tt.zoom?Tt.zoom.zoomIn:"Zoom in";return n.createElement(e.MenuItem,{icon:n.createElement(o,null),testId:"zoom__in-menu",onClick:D},L)},S={left:0,top:8},M=function(T){var D=T.enableShortcuts,Tt=T.onClick,L=n.useContext(e.LocalizationContext).l10n,G=L&&L.zoom?L.zoom.zoomOut:"Zoom out",_=D?e.isMac()?"Meta+-":"Ctrl+-":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-out",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:G,testId:"zoom__out-button",onClick:Tt},n.createElement(r,null)),content:function(){return G},offset:S})},I=function(T){var D=T.children,Tt=T.enableShortcuts,L=T.store,G=a(L).scale;return(D||M)({enableShortcuts:Tt,onClick:function(){var _=L.get("zoom");_&&_(v(G))}})},Z=function(T){var D=T.onClick,Tt=n.useContext(e.LocalizationContext).l10n,L=Tt&&Tt.zoom?Tt.zoom.zoomOut:"Zoom out";return n.createElement(e.MenuItem,{icon:n.createElement(r,null),testId:"zoom__out-menu",onClick:D},L)};zoom_min.ZoomInIcon=o,zoom_min.ZoomOutIcon=r,zoom_min.zoomPlugin=function(T){var D=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},T)},[]),Tt=n.useMemo(function(){return e.createStore({})},[]),L=function(vt){return n.createElement(b,c({enableShortcuts:D.enableShortcuts},vt,{store:Tt}))},G=function(vt){return n.createElement(I,c({enableShortcuts:D.enableShortcuts},vt,{store:Tt}))},_=function(vt){return n.createElement(g,c({},vt,{store:Tt}))};return{renderViewer:function(vt){var $t=vt.slot;if(!D.enableShortcuts)return $t;var mt={children:n.createElement(n.Fragment,null,n.createElement(p,{containerRef:vt.containerRef,store:Tt}),n.createElement(s,{pagesContainerRef:vt.pagesContainerRef,store:Tt}),$t.children)};return c(c({},$t),mt)},install:function(vt){Tt.update("zoom",vt.zoom)},onViewerStateChange:function(vt){return Tt.update("scale",vt.scale),vt},zoomTo:function(vt){var $t=Tt.get("zoom");$t&&$t(vt)},CurrentScale:function(vt){return n.createElement(u,c({},vt,{store:Tt}))},ZoomIn:L,ZoomInButton:function(){return n.createElement(L,null,function(vt){return n.createElement(h,c({},vt))})},ZoomInMenuItem:function(vt){return n.createElement(L,null,function($t){return n.createElement(k,{onClick:function(){$t.onClick(),vt.onClick()}})})},ZoomOut:G,ZoomOutButton:function(){return n.createElement(G,null,function(vt){return n.createElement(M,c({},vt))})},ZoomOutMenuItem:function(vt){return n.createElement(G,null,function($t){return n.createElement(Z,{onClick:function(){$t.onClick(),vt.onClick()}})})},Zoom:_,ZoomPopover:function(vt){return n.createElement(_,null,function($t){return n.createElement(d,c({levels:vt==null?void 0:vt.levels},$t))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=zoom_min;var libExports=lib.exports;const PDFViewer=({selectedPdf:T="",handleCloseViewer:D,handleDownload:Tt,openDialog:L})=>{const G=libExports.zoomPlugin(),{ZoomInButton:_,ZoomOutButton:vt}=G,[$t]=reactExports.useState(1),st=T||giphy404;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Dialog,{open:L,onClose:D,fullWidth:!0,maxWidth:"md","aria-labelledby":"pdf-viewer-title",PaperProps:{sx:{borderRadius:0,width:"100vw",height:"100vh",margin:0,maxWidth:"100vw",maxHeight:"100vh"}},children:[jsxRuntimeExports.jsxs(DialogTitle,{id:"pdf-viewer-title",sx:{display:"flex",textAlign:"center",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(IconButton,{onClick:D,sx:{mr:1},children:[jsxRuntimeExports.jsx(Visibility,{sx:{fontSize:"1.5rem"}})," "]}),st.split("/").pop()]}),jsxRuntimeExports.jsx(Tooltip,{title:"Close viewer",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{onClick:D,children:jsxRuntimeExports.jsx(Close,{color:"warning",sx:{fontSize:"1.5rem"}})})})]}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs("div",{className:"pdf-content-container",style:{position:"relative",height:"100%"},children:[jsxRuntimeExports.jsx(libExports$1.Worker,{workerUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports$1.Viewer,{fileUrl:st,defaultScale:$t,plugins:[G]})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"absolute",top:10,right:10},children:[jsxRuntimeExports.jsx(_,{}),jsxRuntimeExports.jsx(vt,{})]})]}),jsxRuntimeExports.jsx("style",{children:`
                /* Webkit browsers */
                ::-webkit-scrollbar {
                width: 5px; /* Adjust width */
                height: 5px; /* Adjust height */
                }
                ::-webkit-scrollbar-thumb {
                background-color: rgba(0, 0, 0, 0.5); /* Scrollbar thumb color */
                border-radius: 10px; /* Rounded edges */
                }
                ::-webkit-scrollbar-track {
                background: transparent; /* Track background color */
                }
                /* For Firefox */
                * {
                scrollbar-width: thin;
                scrollbar-color: rgba(0, 0, 0, 0.5) transparent;
                }

                @media (max-width: 600px) {
                .pdf-content-container {
                  width: 100% !important; /* Full width on small screens */
                  max-width: 100% !important;
                  height: 100% !important;
                  max-height: 100% !important;
                }
                }
                `})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Tooltip,{title:"Contact",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{color:"secondary",onClick:()=>window.location.href=`mailto:${email}`,children:jsxRuntimeExports.jsx(Email,{sx:{fontSize:"1.5rem"}})})}),jsxRuntimeExports.jsx(Tooltip,{title:"Download",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{color:"secondary",onClick:Tt,children:jsxRuntimeExports.jsx(Download,{sx:{fontSize:"1.5rem"}})})})]})]})})},Library=()=>{const[T,D]=reactExports.useState([]),[Tt,L]=reactExports.useState(null),[G,_]=reactExports.useState(!1),vt=reactExports.useCallback(async(N,gt=3)=>{try{return(await pdfExports.getDocument(N).promise).numPages}catch(ct){return console.error("Error loading PDF:",ct),gt>0?(console.log(`Retrying... (${4-gt} attempts left)`),await new Promise(X=>setTimeout(X,1e3)),vt(N,gt-1)):-1}},[]);reactExports.useEffect(()=>{pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const N=async()=>{try{const X=await(await fetch("/library.json")).json();let V=!1;const et=await Promise.all(X.map(async q=>{if(typeof q.pages=="number"&&!isNaN(q.pages))return q;let U=await vt(q.file);return(typeof U!="number"||isNaN(U))&&(U=-1),V=!0,{...q,pages:U}}));V&&await gt(et),D(et)}catch(ct){console.error("Error loading library.json:",ct)}},gt=async ct=>{try{const X=await fetch("/library.json",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)});if(!X.ok)throw new Error(`Failed to update library.json: ${X.statusText}`);console.log("Successfully wrote to the Library")}catch(X){console.error("Error saving to library.json:",X)}};N()},[vt]);const $t=N=>{L(N),_(!0)},mt=()=>{_(!1),L(null)},st=()=>{if(Tt){const N=document.createElement("a");N.href=Tt,N.download=Tt.split("/").pop()||"document.pdf",N.click()}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Meta,{title:"Library"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",overflowY:"auto",width:"100%",alignItems:"center",height:"90%",padding:"1em"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h3",gutterBottom:!0,children:"Library"}),jsxRuntimeExports.jsx(Typography,{fontStyle:"italic",mb:"1em",color:"text.secondary",children:"A curated collection of papers and presentations."}),jsxRuntimeExports.jsx(TableContainer,{sx:{maxWidth:800,bgcolor:"background.paper",borderRadius:"15px",padding:"0.5em"},children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"#"}),jsxRuntimeExports.jsx(TableCell,{children:"Title"}),jsxRuntimeExports.jsx(TableCell,{children:"Pages"})]})}),jsxRuntimeExports.jsx(TableBody,{children:T.map((N,gt)=>jsxRuntimeExports.jsxs(TableRow,{onClick:()=>$t(N.file),sx:{textTransform:"none",cursor:"pointer","&:hover":{bgcolor:"background.default"}},children:[jsxRuntimeExports.jsx(TableCell,{children:gt+1}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:N.title})}),jsxRuntimeExports.jsx(TableCell,{children:N.pages!==-1?N.pages:jsxRuntimeExports.jsx(CircularProgress,{size:24})})]},gt))})]})})]}),jsxRuntimeExports.jsx(PDFViewer,{selectedPdf:Tt||"",handleCloseViewer:mt,handleDownload:st,openDialog:G})]})};export{Library as default};
